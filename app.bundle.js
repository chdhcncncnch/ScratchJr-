/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={334:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var frame;__webpack_require__.d(__webpack_exports__,{$1:()=>globalx,At:()=>WINDOW_INNER_HEIGHT,Bf:()=>localy,DU:()=>setCanvasSizeScaledToWindowDocumentHeight,Dt:()=>isAndroid,ES:()=>getUrlVars,Em:()=>isTablet,HS:()=>newHTML,Kv:()=>CSSTransition,N7:()=>getIdFor,PJ:()=>STAGE_SCALE,Q7:()=>globaly,QD:()=>fullscreenScaleMultiplier,Ti:()=>getDocumentHeight,Tt:()=>isiOS,V1:()=>newP,Wi:()=>frame,XU:()=>localx,Zh:()=>DEGTOR,_:()=>hitRect,_X:()=>scaleMultiplier,cl:()=>setProps,eX:()=>libInit,ge:()=>setCanvasSize,gn:()=>gn,hA:()=>getDocumentWidth,hu:()=>drawThumbnail,kp:()=>preprocessAndLoadCss,mz:()=>STAGE_WIDTH,nC:()=>newImage,nx:()=>writeText,oM:()=>newCanvas,r9:()=>fitInRect,sy:()=>drawScaled,t9:()=>getIdForCamera,te:()=>colorToRGBA,uk:()=>STAGE_HEIGHT,um:()=>newDiv,v:()=>hit3DRect,vq:()=>rgbToHex,xE:()=>getStringSize,xP:()=>rgb2hsb,y0:()=>newTextInput,zg:()=>CSSTransition3D});var isTablet="ontouchstart"in document.documentElement,DEGTOR=Math.PI/180,WINDOW_INNER_HEIGHT=window.innerHeight,WINDOW_INNER_WIDTH=window.innerWidth,scaleMultiplier=WINDOW_INNER_HEIGHT/768,fullscreenScaleMultiplier=136,STAGE_WIDTH=800,STAGE_HEIGHT=600,STAGE_SCALE=STAGE_WIDTH/480;console.log("setting OS flags");var isiOS="undefined"==typeof AndroidInterface,isAndroid="undefined"!=typeof AndroidInterface,libInit=function(){frame=document.getElementById("frame")},preprocess=function preprocess(s){for(var result="",len=s.length,i=0,j;i<len&&-1!==(j=s.indexOf("$",i));)if(result+=s.substring(i,j),i=j+1,i<len-1&&"{"===s[i]){var start=i+1,end=s.indexOf("}",start);if(end>-1){var expression=s.substring(start,end);result+=eval(expression),i=end+1}else result+="$"}else result+="$";return i<len&&(result+=s.substring(i)),result},preprocessAndLoad=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),preprocess(t.responseText)},preprocessAndLoadCss=function(e,t){var n=preprocessAndLoad(t);n=(n=(n=n.replace(/url\("/g,'url("'.concat(e,"/"))).replace(/url\('/g,"url('".concat(e,"/"))).replace(/url\(([^'"])/g,"url(".concat(e,"/$1"));var r=document.head,i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),r.appendChild(i)},rl=function(){window.location.reload()},setProps=function(e,t){for(var n in t)e[n]=t[n]},newDiv=function(e,t,n,r,i,a){var o=document.createElement("div");return o.style.position="absolute",o.style.top="".concat(n,"px"),o.style.left="".concat(t,"px"),r&&(o.style.width="".concat(r,"px")),i&&(o.style.height="".concat(i,"px")),setProps(o.style,a),e.appendChild(o),o},newImage=function(e,t,n){var r=document.createElement("img");return r.src=t,setProps(r.style,n),e&&e.appendChild(r),r},setCanvasSize=function(e,t,n){e.width=t,e.height=n,e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px")},newCanvas=function(e,t,n,r,i,a){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top="".concat(n,"px"),o.style.left="".concat(t,"px"),setCanvasSize(o,r,i),setProps(o.style,a),e.appendChild(o),o},newHTML=function(e,t,n){var r=document.createElement(e);return t&&r.setAttribute("class",t),n&&n.appendChild(r),r},newP=function(e,t,n){var r=document.createElement("p");return r.appendChild(document.createTextNode(t)),setProps(r.style,n),e.appendChild(r),r},hitRect=function(e,t){if(!t)return!1;if(!e)return!1;var n=t.x,r=t.y;return!(void 0===e.offsetLeft||void 0===e.offsetTop||n<e.offsetLeft||n>e.offsetLeft+e.offsetWidth||r<e.offsetTop||r>e.offsetTop+e.offsetHeight)},hit3DRect=function(e,t){if(!t)return!1;var n=t.x,r=t.y,i=new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform);return!(void 0===i.m41||void 0===i.m42||n<i.m41||n>i.m41+e.offsetWidth||r<i.m42||r>i.m42+e.offsetHeight)},hitTest=function(e,t){if(!t)return!1;var n=t.x,r=t.y;if(n<e.offsetLeft)return!1;if(n>e.offsetLeft+e.offsetWidth)return!1;if(r<e.offsetTop)return!1;if(r>e.offsetTop+e.offsetHeight)return!1;var i=t.x-e.offsetLeft,a=t.y-e.offsetTop;return 0!==e.getContext("2d").getImageData(i,a,1,1).data[3]},setCanvasSizeScaledToWindowDocumentHeight=function(e,t,n){var r=window.devicePixelRatio*scaleMultiplier,i=Math.floor(t*r),a=Math.floor(n*r);e.width=i,e.height=a,e.style.width="".concat(i,"px"),e.style.height="".concat(a,"px"),e.style.zoom=scaleMultiplier/r},localx=function(e,t){for(var n=t;e&&void 0!==e.offsetTop;)n-=e.offsetLeft+e.clientLeft+new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform).m41,e=e.parentNode;return n},globalx=function(e){for(var t=0;e&&void 0!==e.offsetLeft;){var n=new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform),r=n.m11;t+=(e.clientWidth-r*e.clientWidth)/2,t+=n.m41,t+=e.offsetLeft+e.clientLeft,e=e.parentNode}return t},localy=function(e,t){for(var n=t;e&&void 0!==e.offsetTop;)n-=e.offsetTop+e.clientTop+new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform).m42,e=e.parentNode;return n},globaly=function(e){for(var t=0;e&&void 0!==e.offsetTop;){var n=new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform),r=n.m22;t+=(e.clientHeight-r*e.clientHeight)/2,t+=n.m42,t+=e.offsetTop+e.clientTop,e=e.parentNode}return t},CSSTransition=function(e,t){var n=1,r="ease",i={left:"".concat(e.offsetLeft,"px"),top:"".concat(e.offsetTop,"px")};t.duration&&(n=t.duration),t.transition&&(r=t.transition),t.style&&(i=t.style);var a="";for(var o in i)a+="".concat(o," ").concat(n,"s ").concat(r,", ");a=a.substring(0,a.length-2),e.style.webkitTransition=a,e.addEventListener("webkitTransitionEnd",(function(){e.style.webkitTransition="",t.onComplete&&t.onComplete()}),!0),setProps(e.style,i)},CSSTransition3D=function(e,t){var n=1,r="ease",i={left:"".concat(e.left,"px"),top:"".concat(e.top,"px")};if(t.duration&&(n=t.duration),t.transition&&(r=t.transition),t.style)for(var a in t.style)i[a]=t.style[a];var o="-webkit-transform ".concat(n,"s ").concat(r),s="translate3d(".concat(i.left,",").concat(i.top,",0px)");e.addEventListener("webkitTransitionEnd",(function(){e.style.webkitTransition="";var n=new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform);e.left=n.m41,e.top=n.m42,t.onComplete&&t.onComplete()}),!0),e.style.webkitTransition=o,e.style.webkitTransform=s},getFit=function(e,t){return e>=1&&t>=1?"noscale":e>=1&&t<1?"scaleh":e<1&&t>=1||e<t?"scalew":"scaleh"},drawThumbnail=function(e,t){var n=e.naturalWidth?e.naturalWidth:e.width,r=e.naturalHeight?e.naturalHeight:e.height,i=(t.width-n)/2,a=(t.height-r)/2,o=t.width/n,s=t.height/r,u=n,h=r;switch(getFit(o,s)){case"noscale":break;case"scaleh":u=n*s,h=r*s,i=(t.width-u)/2,a=(t.height-h)/2;break;case"scalew":u=n*o,h=r*o,i=(t.width-u)/2,a=(t.height-h)/2}t.getContext("2d").drawImage(e,i,a,u,h)},drawScaled=function(e,t){var n=e.naturalWidth?e.naturalWidth:e.width,r=e.naturalHeight?e.naturalHeight:e.height,i=t.width,a=t.height,o=i/n,s=n*o,u=r*o;u>a&&(s=n*(o=a/r),u=r*o);var h=(i-s)/2,l=(a-u)/2;t.getContext("2d").drawImage(e,h,l,s,u)},fitInRect=function(e,t,n,r){var i=(n-e)/2,a=(r-t)/2,o=n/e,s=r/t,u=e,h=t;switch(getFit(o,s)){case"noscale":break;case"scaleh":i=(n-(u=e*s))/2,a=(r-(h=t*s))/2;break;case"scalew":i=(n-(u=e*o))/2,a=(r-(h=t*o))/2}return[i,a,u,h]},getDocumentHeight=function(){return Math.max(document.body.clientHeight,document.documentElement.clientHeight)},getDocumentWidth=function(){return Math.max(document.body.clientWidth,document.documentElement.clientWidth)},getStringSize=function(e,t,n){return e.font=t,e.measureText(n)},writeText=function(e,t,n,r,i,a){a=a||0,e.font=t,e.fillStyle=n,e.textAlign="left",e.textBaseline="bottom",e.fillText(r,a,i)},gn=function(e){return document.getElementById(e)},newForm=function(e,t,n,r,i,a,o){var s=document.createElement("form");return s.style.position="absolute",s.style.top="".concat(r,"px"),s.style.left="".concat(n,"px"),i&&(s.style.width="".concat(i,"px")),a&&(s.style.height="".concat(a,"px")),setProps(s.style,o),e.appendChild(s),s.name=t,s},newTextInput=function(e,t,n,r){var i=document.createElement("input");return i.value=n,setProps(i.style,r),i.type=t,e.appendChild(i),i},getUrlVars=function(){if(window.location.href.indexOf("?")<0)return[];for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++)e=n[r].split("="),t.push(e[0]),t[e[0]]=e[1];return t},getIdFor=function(e){for(var t=1;gn("".concat(e," ").concat(t));)t++;return"".concat(e," ").concat(t)},getIdForCamera=function(e){for(var t=1;gn("".concat(e,"_").concat(t));)t++;return"".concat(e,"_").concat(t)},getHex=function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t},rgbToString=function(e){return"#".concat(getHex(e.r)).concat(getHex(e.g)).concat(getHex(e.b))},rgbToHex=function(e){if(e.indexOf("rgb")<0)return e;var t=e.substring(4,e.length-1).split(","),n=Number(t[0]),r=Number(t[1]),i=Number(t[2]);return rgbToString({r:n,g:r,b:i})},rgbaToHex=function(e){if(e.indexOf("rgba")<0)return e;var t=e.substring(5,e.length-1).split(","),n=Number(t[0]),r=Number(t[1]),i=Number(t[2]);return rgbToString({r:n,g:r,b:i})},getRGB=function(e){return[Number(e>>16&255),Number(e>>8&255),Number(255&e)]},rgb2hsb=function(e){if(!e)return[24,1,1];var t;e=e.indexOf("rgb")>-1?rgbToHex(e):rgbaToHex(e);var n=parseInt(e.substring(1,e.length),16),r=getRGB(n),i=r[0];i/=255;var a=r[1];a/=255;var o=r[2];o/=255;var s=Math.min(Math.min(i,a),o);if(s===(t=Math.max(Math.max(i,a),o)))return new Array(0,0,t);var u=i===s?a-o:a===s?o-i:i-a,h=i===s?3:a===s?5:1,l=Math.round(60*(h-u/(t-s)))%360,c=Math.round((t-s)/t*100);return t=Math.round(100*t),new Array(l,c/100,t/100)},findKeyframesRule=function(e){for(var t=document.styleSheets,n=0;n<t.length;++n)for(var r=0;r<t[n].cssRules.length;++r)for(var i=t[n].cssRules[r].styleSheet.rules,a=0;a<i.length;++a)if(i[a].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE&&i[a].name===e)return i[a];return null},colorToRGBA=function(e,t){var n=parseInt("0x".concat(e.substr(1,e.length)),16);return"rgba(".concat((n>>16)%256,",").concat((n>>8)%256,",").concat(n%256,",").concat(t,")")},css_vh=function(e){return"".concat(e*WINDOW_INNER_HEIGHT/100,"px")},css_vw=function(e){return"".concat(e*WINDOW_INNER_WIDTH/100,"px")};Number.prototype.mod=function(e){return(this%e+e)%e}},187:e=>{"use strict";function t(e,t,r){r=r||2;var a,o,s,u,c,d,p,g=t&&t.length,m=g?t[0]*r:e.length,v=n(e,0,m,r,!0),y=[];if(!v||v.next===v.prev)return y;if(g&&(v=function(e,t,r,i){var a,o,s,u=[];for(a=0,o=t.length;a<o;a++)(s=n(e,t[a]*i,a<o-1?t[a+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),u.push(f(s));for(u.sort(h),a=0;a<u.length;a++)r=l(u[a],r);return r}(e,t,v,r)),e.length>80*r){a=s=e[0],o=u=e[1];for(var b=r;b<m;b+=r)(c=e[b])<a&&(a=c),(d=e[b+1])<o&&(o=d),c>s&&(s=c),d>u&&(u=d);p=0!==(p=Math.max(s-a,u-o))?32767/p:0}return i(v,y,r,a,o,p,0),y}function n(e,t,n,r,i){var a,o;if(i===w(e,t,n,r)>0)for(a=t;a<n;a+=r)o=x(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=x(a,e[a],e[a+1],o);return o&&v(o,o.next)&&(k(o),o=o.next),o}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(k(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,h,l,c,f){if(e){!f&&c&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,h=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<h&&(s++,r=r.nextZ);t++);for(u=h;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,h*=2}while(o>1)}(i)}(e,h,l,c);for(var p,g,m=e;e.prev!==e.next;)if(p=e.prev,g=e.next,c?o(e,h,l,c):a(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(g.i/n|0),k(e),e=g.next,m=g.next;else if((e=g)===m){f?1===f?i(e=s(r(e),t,n),t,n,h,l,c,2):2===f&&u(e,t,n,h,l,c):i(r(e),t,n,h,l,c,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,u=n.y,h=r.y,l=i<a?i<o?i:o:a<o?a:o,c=s<u?s<h?s:h:u<h?u:h,d=i>a?i>o?i:o:a>o?a:o,f=s>u?s>h?s:h:u>h?u:h,g=r.next;g!==t;){if(g.x>=l&&g.x<=d&&g.y>=c&&g.y<=f&&p(i,s,a,u,o,h,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function o(e,t,n,r){var i=e.prev,a=e,o=e.next;if(m(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,h=o.x,l=i.y,c=a.y,f=o.y,g=s<u?s<h?s:h:u<h?u:h,v=l<c?l<f?l:f:c<f?c:f,y=s>u?s>h?s:h:u>h?u:h,b=l>c?l>f?l:f:c>f?c:f,_=d(g,v,t,n,r),E=d(y,b,t,n,r),T=e.prevZ,x=e.nextZ;T&&T.z>=_&&x&&x.z<=E;){if(T.x>=g&&T.x<=y&&T.y>=v&&T.y<=b&&T!==i&&T!==o&&p(s,l,u,c,h,f,T.x,T.y)&&m(T.prev,T,T.next)>=0)return!1;if(T=T.prevZ,x.x>=g&&x.x<=y&&x.y>=v&&x.y<=b&&x!==i&&x!==o&&p(s,l,u,c,h,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;T&&T.z>=_;){if(T.x>=g&&T.x<=y&&T.y>=v&&T.y<=b&&T!==i&&T!==o&&p(s,l,u,c,h,f,T.x,T.y)&&m(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;x&&x.z<=E;){if(x.x>=g&&x.x<=y&&x.y>=v&&x.y<=b&&x!==i&&x!==o&&p(s,l,u,c,h,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function s(e,t,n){var i=e;do{var a=i.prev,o=i.next.next;!v(a,o)&&y(a,i,i.next,o)&&E(a,o)&&E(o,a)&&(t.push(a.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),k(i),k(i.next),i=e=o),i=i.next}while(i!==e);return r(i)}function u(e,t,n,a,o,s){var u=e;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&g(u,h)){var l=T(u,h);return u=r(u,u.next),l=r(l,l.next),i(u,t,n,a,o,s,0),void i(l,t,n,a,o,s,0)}h=h.next}u=u.next}while(u!==e)}function h(e,t){return e.x-t.x}function l(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,h=n,l=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&p(a<d?i:o,a,l,d,a<d?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),E(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&c(n,r)))&&(n=r,f=u)),r=r.next}while(r!==h);return n}(e,t);if(!n)return t;var i=T(n,e);return r(i,i.next),r(n,n.next)}function c(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&y(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(E(e,t)&&E(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||v(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,n,r){var i=_(m(e,t,n)),a=_(m(e,t,r)),o=_(m(n,r,e)),s=_(m(n,r,t));return i!==a&&o!==s||!(0!==i||!b(e,n,t))||!(0!==a||!b(e,r,t))||!(0!==o||!b(n,e,r))||!(0!==s||!b(n,t,r))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function E(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function T(e,t){var n=new S(e.i,e.x,e.y),r=new S(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function x(e,t,n,r){var i=new S(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function k(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(w(e,0,a,n));if(i)for(var s=0,u=t.length;s<u;s++){var h=t[s]*n,l=s<u-1?t[s+1]*n:e.length;o-=Math.abs(w(e,h,l,n))}var c=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;c+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,h,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,a),!0;case 6:return l.fn.call(l.context,t,r,i,a,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var d,f=l.length;for(h=0;h<f;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,r);break;case 4:l[h].fn.call(l[h].context,t,r,i);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];l[h].fn.apply(l[h].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,h=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&h.push(s[u]);h.length?this._events[a]=1===h.length?h[0]:h:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},576:(e,t,n)=>{"use strict";(t=e.exports=n(634).default).default=t},634:(e,t)=>{"use strict";t.default=function(){function e(e,t,n,r,i,a){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=a,this.name="SyntaxError"}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,r=arguments.length>1?arguments[1]:{},i={},a={start:Ce},o=Ce,s=function(e){return{type:"messageFormatPattern",elements:e}},u=i,h=function(e){var t,n,r,i,a,o="";for(t=0,r=e.length;t<r;t+=1)for(n=0,a=(i=e[t]).length;n<a;n+=1)o+=i[n];return o},l=function(e){return{type:"messageTextElement",value:e}},c=/^[^ \t\n\r,.+={}#]/,d={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},f="{",p={type:"literal",value:"{",description:'"{"'},g=null,m=",",v={type:"literal",value:",",description:'","'},y="}",b={type:"literal",value:"}",description:'"}"'},_=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2]}},E="number",T={type:"literal",value:"number",description:'"number"'},x="date",k={type:"literal",value:"date",description:'"date"'},S="time",w={type:"literal",value:"time",description:'"time"'},M=function(e,t){return{type:e+"Format",style:t&&t[2]}},A="plural",R={type:"literal",value:"plural",description:'"plural"'},C=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options}},P="selectordinal",I={type:"literal",value:"selectordinal",description:'"selectordinal"'},N=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options}},O="select",D={type:"literal",value:"select",description:'"select"'},L=function(e){return{type:"selectFormat",options:e}},B="=",F={type:"literal",value:"=",description:'"="'},G=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t}},U="offset:",H={type:"literal",value:"offset:",description:'"offset:"'},j=function(e){return e},K=function(e,t){return{type:"pluralFormat",offset:e,options:t}},X={type:"other",description:"whitespace"},z=/^[ \t\n\r]/,V={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},W={type:"other",description:"optionalWhitespace"},Y=/^[0-9]/,J={type:"class",value:"[0-9]",description:"[0-9]"},q=/^[0-9a-f]/i,Q={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Z="0",$={type:"literal",value:"0",description:'"0"'},ee=/^[1-9]/,te={type:"class",value:"[1-9]",description:"[1-9]"},ne=function(e){return parseInt(e,10)},re=/^[^{}\\\0-\x1F \t\n\r]/,ie={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},ae="\\\\",oe={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},se=function(){return"\\"},ue="\\#",he={type:"literal",value:"\\#",description:'"\\\\#"'},le=function(){return"\\#"},ce="\\{",de={type:"literal",value:"\\{",description:'"\\\\{"'},fe=function(){return"{"},pe="\\}",ge={type:"literal",value:"\\}",description:'"\\\\}"'},me=function(){return"}"},ve="\\u",ye={type:"literal",value:"\\u",description:'"\\\\u"'},be=function(e){return String.fromCharCode(parseInt(e,16))},_e=function(e){return e.join("")},Ee=0,Te=0,xe={line:1,column:1,seenCR:!1},ke=0,Se=[],we=0;if("startRule"in r){if(!(r.startRule in a))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=a[r.startRule]}function Me(e){return Te!==e&&(Te>e&&(Te=0,xe={line:1,column:1,seenCR:!1}),function(e,n,r){var i,a;for(i=n;i<r;i++)"\n"===(a=t.charAt(i))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(xe,Te,e),Te=e),xe}function Ae(e){Ee<ke||(Ee>ke&&(ke=Ee,Se=[]),Se.push(e))}function Re(n,r,i){var a=Me(i),o=i<t.length?t.charAt(i):null;return null!==r&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==n?n:function(e,t){var n,r=new Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0180-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1080-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(r,o),r,o,i,a.line,a.column)}function Ce(){return Pe()}function Pe(){var e,t;for(Ee,e=[],t=Ie();t!==i;)e.push(t),t=Ie();return e!==i&&(e=s(e)),e}function Ie(){var e;return(e=Oe())===i&&(e=Le()),e}function Ne(){var e,n,r,a,o,s;if(e=Ee,n=[],r=Ee,(a=We())!==i&&(o=Ze())!==i&&(s=We())!==i?r=a=[a,o,s]:(Ee=r,r=u),r!==i)for(;r!==i;)n.push(r),r=Ee,(a=We())!==i&&(o=Ze())!==i&&(s=We())!==i?r=a=[a,o,s]:(Ee=r,r=u);else n=u;return n!==i&&(n=h(n)),(e=n)===i&&(e=Ee,(n=Ve())!==i&&(n=t.substring(e,Ee)),e=n),e}function Oe(){var e;return Ee,(e=Ne())!==i&&(e=l(e)),e}function De(){var e,n,r;if((e=qe())===i){if(e=Ee,n=[],c.test(t.charAt(Ee))?(r=t.charAt(Ee),Ee++):(r=i,0===we&&Ae(d)),r!==i)for(;r!==i;)n.push(r),c.test(t.charAt(Ee))?(r=t.charAt(Ee),Ee++):(r=i,0===we&&Ae(d));else n=u;n!==i&&(n=t.substring(e,Ee)),e=n}return e}function Le(){var e,n,r,a,o,s,h;return e=Ee,123===t.charCodeAt(Ee)?(n=f,Ee++):(n=i,0===we&&Ae(p)),n!==i&&We()!==i&&(r=De())!==i&&We()!==i?(a=Ee,44===t.charCodeAt(Ee)?(o=m,Ee++):(o=i,0===we&&Ae(v)),o!==i&&(s=We())!==i&&(h=Be())!==i?a=o=[o,s,h]:(Ee=a,a=u),a===i&&(a=g),a!==i&&(o=We())!==i?(125===t.charCodeAt(Ee)?(s=y,Ee++):(s=i,0===we&&Ae(b)),s!==i?e=n=_(r,a):(Ee=e,e=u)):(Ee=e,e=u)):(Ee=e,e=u),e}function Be(){var e;return(e=Fe())===i&&(e=Ge())===i&&(e=Ue())===i&&(e=He()),e}function Fe(){var e,n,r,a,o,s;return e=Ee,t.substr(Ee,6)===E?(n=E,Ee+=6):(n=i,0===we&&Ae(T)),n===i&&(t.substr(Ee,4)===x?(n=x,Ee+=4):(n=i,0===we&&Ae(k)),n===i&&(t.substr(Ee,4)===S?(n=S,Ee+=4):(n=i,0===we&&Ae(w)))),n!==i&&We()!==i?(r=Ee,44===t.charCodeAt(Ee)?(a=m,Ee++):(a=i,0===we&&Ae(v)),a!==i&&(o=We())!==i&&(s=Ze())!==i?r=a=[a,o,s]:(Ee=r,r=u),r===i&&(r=g),r!==i?e=n=M(n,r):(Ee=e,e=u)):(Ee=e,e=u),e}function Ge(){var e,n,r,a;return e=Ee,t.substr(Ee,6)===A?(n=A,Ee+=6):(n=i,0===we&&Ae(R)),n!==i&&We()!==i?(44===t.charCodeAt(Ee)?(r=m,Ee++):(r=i,0===we&&Ae(v)),r!==i&&We()!==i&&(a=ze())!==i?e=n=C(a):(Ee=e,e=u)):(Ee=e,e=u),e}function Ue(){var e,n,r,a;return e=Ee,t.substr(Ee,13)===P?(n=P,Ee+=13):(n=i,0===we&&Ae(I)),n!==i&&We()!==i?(44===t.charCodeAt(Ee)?(r=m,Ee++):(r=i,0===we&&Ae(v)),r!==i&&We()!==i&&(a=ze())!==i?e=n=N(a):(Ee=e,e=u)):(Ee=e,e=u),e}function He(){var e,n,r,a,o;if(e=Ee,t.substr(Ee,6)===O?(n=O,Ee+=6):(n=i,0===we&&Ae(D)),n!==i)if(We()!==i)if(44===t.charCodeAt(Ee)?(r=m,Ee++):(r=i,0===we&&Ae(v)),r!==i)if(We()!==i){if(a=[],(o=Ke())!==i)for(;o!==i;)a.push(o),o=Ke();else a=u;a!==i?e=n=L(a):(Ee=e,e=u)}else Ee=e,e=u;else Ee=e,e=u;else Ee=e,e=u;else Ee=e,e=u;return e}function je(){var e,n,r,a;return e=Ee,n=Ee,61===t.charCodeAt(Ee)?(r=B,Ee++):(r=i,0===we&&Ae(F)),r!==i&&(a=qe())!==i?n=r=[r,a]:(Ee=n,n=u),n!==i&&(n=t.substring(e,Ee)),(e=n)===i&&(e=Ze()),e}function Ke(){var e,n,r,a,o;return e=Ee,We()!==i&&(n=je())!==i&&We()!==i?(123===t.charCodeAt(Ee)?(r=f,Ee++):(r=i,0===we&&Ae(p)),r!==i&&We()!==i&&(a=Pe())!==i&&We()!==i?(125===t.charCodeAt(Ee)?(o=y,Ee++):(o=i,0===we&&Ae(b)),o!==i?e=G(n,a):(Ee=e,e=u)):(Ee=e,e=u)):(Ee=e,e=u),e}function Xe(){var e,n,r;return e=Ee,t.substr(Ee,7)===U?(n=U,Ee+=7):(n=i,0===we&&Ae(H)),n!==i&&We()!==i&&(r=qe())!==i?e=n=j(r):(Ee=e,e=u),e}function ze(){var e,t,n,r;if(e=Ee,(t=Xe())===i&&(t=g),t!==i)if(We()!==i){if(n=[],(r=Ke())!==i)for(;r!==i;)n.push(r),r=Ke();else n=u;n!==i?e=t=K(t,n):(Ee=e,e=u)}else Ee=e,e=u;else Ee=e,e=u;return e}function Ve(){var e,n;if(we++,e=[],z.test(t.charAt(Ee))?(n=t.charAt(Ee),Ee++):(n=i,0===we&&Ae(V)),n!==i)for(;n!==i;)e.push(n),z.test(t.charAt(Ee))?(n=t.charAt(Ee),Ee++):(n=i,0===we&&Ae(V));else e=u;return we--,e===i&&(n=i,0===we&&Ae(X)),e}function We(){var e,n,r;for(we++,e=Ee,n=[],r=Ve();r!==i;)n.push(r),r=Ve();return n!==i&&(n=t.substring(e,Ee)),we--,(e=n)===i&&(n=i,0===we&&Ae(W)),e}function Ye(){var e;return Y.test(t.charAt(Ee))?(e=t.charAt(Ee),Ee++):(e=i,0===we&&Ae(J)),e}function Je(){var e;return q.test(t.charAt(Ee))?(e=t.charAt(Ee),Ee++):(e=i,0===we&&Ae(Q)),e}function qe(){var e,n,r,a,o;if(Ee,48===t.charCodeAt(Ee)?(e=Z,Ee++):(e=i,0===we&&Ae($)),e===i){if(e=Ee,n=Ee,ee.test(t.charAt(Ee))?(r=t.charAt(Ee),Ee++):(r=i,0===we&&Ae(te)),r!==i){for(a=[],o=Ye();o!==i;)a.push(o),o=Ye();a!==i?n=r=[r,a]:(Ee=n,n=u)}else Ee=n,n=u;n!==i&&(n=t.substring(e,Ee)),e=n}return e!==i&&(e=ne(e)),e}function Qe(){var e,n,r,a,o,s,h,l;return re.test(t.charAt(Ee))?(e=t.charAt(Ee),Ee++):(e=i,0===we&&Ae(ie)),e===i&&(e=Ee,t.substr(Ee,2)===ae?(n=ae,Ee+=2):(n=i,0===we&&Ae(oe)),n!==i&&(n=se()),(e=n)===i&&(e=Ee,t.substr(Ee,2)===ue?(n=ue,Ee+=2):(n=i,0===we&&Ae(he)),n!==i&&(n=le()),(e=n)===i&&(e=Ee,t.substr(Ee,2)===ce?(n=ce,Ee+=2):(n=i,0===we&&Ae(de)),n!==i&&(n=fe()),(e=n)===i&&(e=Ee,t.substr(Ee,2)===pe?(n=pe,Ee+=2):(n=i,0===we&&Ae(ge)),n!==i&&(n=me()),(e=n)===i&&(e=Ee,t.substr(Ee,2)===ve?(n=ve,Ee+=2):(n=i,0===we&&Ae(ye)),n!==i?(r=Ee,a=Ee,(o=Je())!==i&&(s=Je())!==i&&(h=Je())!==i&&(l=Je())!==i?a=o=[o,s,h,l]:(Ee=a,a=u),a!==i&&(a=t.substring(r,Ee)),(r=a)!==i?e=n=be(r):(Ee=e,e=u)):(Ee=e,e=u)))))),e}function Ze(){var e,t;if(Ee,e=[],(t=Qe())!==i)for(;t!==i;)e.push(t),t=Qe();else e=u;return e!==i&&(e=_e(e)),e}if((n=o())!==i&&Ee===t.length)return n;throw n!==i&&Ee<t.length&&Ae({type:"end",description:"end of input"}),Re(null,Se,ke)}}}()},260:(e,t,n)=>{"use strict";var r=n(574).Z;n(374),(t=e.exports=r).default=t},494:(e,t)=>{"use strict";function n(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function r(e){this.id=e}function i(e,t,n,r,i){this.id=e,this.useOrdinal=t,this.offset=n,this.options=r,this.pluralFn=i}function a(e,t,n,r){this.id=e,this.offset=t,this.numberFormat=n,this.string=r}function o(e,t){this.id=e,this.options=t}t.default=n,n.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},n.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,r,i=e.elements,a=[];for(t=0,n=i.length;t<n;t+=1)switch((r=i[t]).type){case"messageTextElement":a.push(this.compileMessageText(r));break;case"argumentElement":a.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return a},n.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(e){var t=e.format;if(!t)return new r(e.id);var n,a=this.formats,s=this.locales,u=this.pluralFn;switch(t.type){case"numberFormat":return n=a.number[t.style],{id:e.id,format:new Intl.NumberFormat(s,n).format};case"dateFormat":return n=a.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"timeFormat":return n=a.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(s,n).format};case"pluralFormat":return n=this.compileOptions(e),new i(e.id,t.ordinal,t.offset,n,u);case"selectFormat":return n=this.compileOptions(e),new o(e.id,n);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(e){var t,n,r,i=e.format,a=i.options,o={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===i.type?e:null,t=0,n=a.length;t<n;t+=1)o[(r=a[t]).selector]=this.compileMessage(r.value);return this.currentPlural=this.pluralStack.pop(),o},r.prototype.format=function(e){return e?"string"==typeof e?e:String(e):""},i.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},o.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},680:(e,t,n)=>{"use strict";var r=n(309),i=n(523),a=n(494),o=n(576);function s(e,t,n){var r="string"==typeof e?s.__parse(e):e;if(!r||"messageFormatPattern"!==r.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),i.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var a=this._findPluralRuleFunction(this._locale),o=this._compilePattern(r,t,n,a),u=this;this.format=function(e){return u._format(o,e)}}t.default=s,i.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),i.defineProperty(s,"__localeData__",{value:i.objCreate(null)}),i.defineProperty(s,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[e.locale.toLowerCase()]=e}}),i.defineProperty(s,"__parse",{value:o.default.parse}),i.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(e,t,n,r){return new a.default(t,n,r).compile(e)},s.prototype._findPluralRuleFunction=function(e){for(var t=s.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},s.prototype._format=function(e,t){var n,i,a,o,s,u="";for(n=0,i=e.length;n<i;n+=1)if("string"!=typeof(a=e[n])){if(o=a.id,!t||!r.hop.call(t,o))throw new Error("A value must be provided for: "+o);s=t[o],a.options?u+=this._format(a.getOption(s),t):u+=a.format(s)}else u+=a;return u},s.prototype._mergeFormats=function(e,t){var n,a,o={};for(n in e)r.hop.call(e,n)&&(o[n]=a=i.objCreate(e[n]),t&&r.hop.call(t,n)&&r.extend(a,t[n]));return o},s.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(s.defaultLocale);var t,n,r,i,a=s.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(i=a[r.join("-")])return i.locale;r.pop()}var o=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+o)}},459:(e,t)=>{"use strict";t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,a=i&&n[0].slice(-1),o=i&&n[0].slice(-2);return t?1==a&&11!=o?"one":2==a&&12!=o?"two":3==a&&13!=o?"few":"other":1==e&&r?"one":"other"}}},523:(e,t,n)=>{"use strict";var r=n(309),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!i&&Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):r.hop.call(e,t)&&!("value"in n)||(e[t]=n.value)}),o=Object.create||function(e,t){var n,i;function o(){}for(i in o.prototype=e,n=new o,t)r.hop.call(t,i)&&a(n,i,t[i]);return n};t.defineProperty=a,t.objCreate=o},574:(e,t,n)=>{"use strict";var r=n(680),i=n(459);r.default.__addLocaleData(i.default),r.default.defaultLocale="en",t.Z=r.default},309:(e,t)=>{"use strict";t.extend=function(e){var t,r,i,a,o=Array.prototype.slice.call(arguments,1);for(t=0,r=o.length;t<r;t+=1)if(i=o[t])for(a in i)n.call(i,a)&&(e[a]=i[a]);return e};var n=Object.prototype.hasOwnProperty;t.hop=n},267:(e,t,n)=>{n.g.IntlPolyfill=n(659),n(482),n.g.Intl||(n.g.Intl=n.g.IntlPolyfill,n.g.IntlPolyfill.__applyLocaleSensitivePrototypes()),e.exports=n.g.IntlPolyfill},659:(e,t,n)=>{"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,i){var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===o)t.children=i;else if(o>1){for(var u=Array(o),h=0;h<o;h++)u[h]=arguments[h+3];t.children=u}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=void 0===n.g?self:n.g,l=Object.freeze({jsx:a,asyncToGenerator:function(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){return r("next",e)}),(function(e){return r("throw",e)}));e(s)}("next")}))}},classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass:o,defineEnumerableProperties:function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e},defaults:function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e},defineProperty:s,get:function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},inherits:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},interopRequireDefault:function(e){return e&&e.__esModule?e:{default:e}},interopRequireWildcard:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},newArrowCheck:function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},objectDestructuringEmpty:function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},objectWithoutProperties:function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},possibleConstructorReturn:function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},selfGlobal:h,set:function e(t,n,r,i){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);null!==o&&e(o,n,r,i)}else if("value"in a&&a.writable)a.value=r;else{var s=a.set;void 0!==s&&s.call(i,r)}return r},slicedToArray:function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},slicedToArrayLoose:function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},taggedTemplateLiteral:function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},taggedTemplateLiteralLoose:function(e,t){return e.raw=t,e},temporalRef:function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},temporalUndefined:{},toArray:function(e){return Array.isArray(e)?e:Array.from(e)},toConsumableArray:function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},typeof:i,extends:u,instanceof:function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}}),c=function(){var e=function(){};try{return Object.defineProperty(e,"a",{get:function(){return 1}}),Object.defineProperty(e,"prototype",{writable:!1}),1===e.a&&e.prototype instanceof Object}catch(e){return!1}}(),d=!c&&!Object.prototype.__defineGetter__,f=Object.prototype.hasOwnProperty,p=c?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):f.call(e,t)&&!("value"in n)||(e[t]=n.value)},g=Array.prototype.indexOf||function(e){var t=this;if(!t.length)return-1;for(var n=arguments[1]||0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},m=Object.create||function(e,t){var n;function r(){}for(var i in r.prototype=e,n=new r,t)f.call(t,i)&&p(n,i,t[i]);return n},v=Array.prototype.slice,y=Array.prototype.concat,b=Array.prototype.push,_=Array.prototype.join,E=Array.prototype.shift,T=Function.prototype.bind||function(e){var t=this,n=v.call(arguments,1);return t.length,function(){return t.apply(e,y.call(n,v.call(arguments)))}},x=m(null),k=Math.random();function S(e){for(var t in e)(e instanceof S||f.call(e,t))&&p(this,t,{value:e[t],enumerable:!0,writable:!0,configurable:!0})}function w(){p(this,"length",{writable:!0,value:0}),arguments.length&&b.apply(this,v.call(arguments))}function M(){if(x.disableRegExpRestore)return function(){};for(var e={lastMatch:RegExp.lastMatch||"",leftContext:RegExp.leftContext,multiline:RegExp.multiline,input:RegExp.input},t=!1,n=1;n<=9;n++)t=(e["$"+n]=RegExp["$"+n])||t;return function(){var n=/[.?*+^$[\]\\(){}|-]/g,r=e.lastMatch.replace(n,"\\$&"),i=new w;if(t)for(var a=1;a<=9;a++){var o=e["$"+a];o?(o=o.replace(n,"\\$&"),r=r.replace(o,"("+o+")")):r="()"+r,b.call(i,r.slice(0,r.indexOf("(")+1)),r=r.slice(r.indexOf("(")+1)}var s=_.call(i,"")+r;s=s.replace(/(\\\(|\\\)|[^()])+/g,(function(e){return"[\\s\\S]{"+e.replace("\\","").length+"}"}));var u=new RegExp(s,e.multiline?"gm":"g");u.lastIndex=e.leftContext.length,u.exec(e.input)}}function A(e){if(null===e)throw new TypeError("Cannot convert null or undefined to object");return"object"===(void 0===e?"undefined":l.typeof(e))?e:Object(e)}function R(e){return"number"==typeof e?e:Number(e)}function C(e){return f.call(e,"__getInternalProperties")?e.__getInternalProperties(k):m(null)}S.prototype=m(null),w.prototype=m(null);var P=RegExp("^(?:(?:[a-z]{2,3}(?:-[a-z]{3}(?:-[a-z]{3}){0,2})?|[a-z]{4}|[a-z]{5,8})(?:-[a-z]{4})?(?:-(?:[a-z]{2}|\\d{3}))?(?:-(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))*(?:-[0-9a-wy-z](?:-[a-z0-9]{2,8})+)*(?:-x(?:-[a-z0-9]{1,8})+)?|x(?:-[a-z0-9]{1,8})+|(?:(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))))$","i"),I=RegExp("^(?!x).*?-((?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),N=RegExp("^(?!x).*?-([0-9a-wy-z])-(?:\\w+-(?!x-))*\\1\\b","i"),O=RegExp("-[0-9a-wy-z](?:-[a-z0-9]{2,8})+","ig"),D=void 0,L={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}};function B(e){for(var t=e.length;t--;){var n=e.charAt(t);n>="a"&&n<="z"&&(e=e.slice(0,t)+n.toUpperCase()+e.slice(t+1))}return e}function F(e){return!!P.test(e)&&!I.test(e)&&!N.test(e)}function G(e){for(var t=void 0,n=void 0,r=1,i=(n=(e=e.toLowerCase()).split("-")).length;r<i;r++)if(2===n[r].length)n[r]=n[r].toUpperCase();else if(4===n[r].length)n[r]=n[r].charAt(0).toUpperCase()+n[r].slice(1);else if(1===n[r].length&&"x"!==n[r])break;(t=(e=_.call(n,"-")).match(O))&&t.length>1&&(t.sort(),e=e.replace(RegExp("(?:"+O.source+")+","i"),_.call(t,""))),f.call(L.tags,e)&&(e=L.tags[e]);for(var a=1,o=(n=e.split("-")).length;a<o;a++)f.call(L.subtags,n[a])?n[a]=L.subtags[n[a]]:f.call(L.extLang,n[a])&&(n[a]=L.extLang[n[a]][0],1===a&&L.extLang[n[1]][1]===n[0]&&(n=v.call(n,a++),o-=1));return _.call(n,"-")}var U=/^[A-Z]{3}$/,H=/-u(?:-[0-9a-z]{2,8})+/gi;function j(e){if(void 0===e)return new w;for(var t=new w,n=A(e="string"==typeof e?[e]:e),r=function(e){var t=function(e){var t=R(e);return isNaN(t)?0:0===t||-0===t||t===1/0||t===-1/0?t:t<0?-1*Math.floor(Math.abs(t)):Math.floor(Math.abs(t))}(e);return t<=0?0:t===1/0?Math.pow(2,53)-1:Math.min(t,Math.pow(2,53)-1)}(n.length),i=0;i<r;){var a=String(i);if(a in n){var o=n[a];if(null===o||"string"!=typeof o&&"object"!==(void 0===o?"undefined":l.typeof(o)))throw new TypeError("String or Object type expected");var s=String(o);if(!F(s))throw new RangeError("'"+s+"' is not a structurally valid language tag");s=G(s),-1===g.call(t,s)&&b.call(t,s)}i++}return t}function K(e,t){for(var n=t;n;){if(g.call(e,n)>-1)return n;var r=n.lastIndexOf("-");if(r<0)return;r>=2&&"-"===n.charAt(r-2)&&(r-=2),n=n.substring(0,r)}}function X(e,t){for(var n=0,r=t.length,i=void 0,a=void 0,o=void 0;n<r&&!i;)a=t[n],i=K(e,o=String(a).replace(H,"")),n++;var s=new S;if(void 0!==i){if(s["[[locale]]"]=i,String(a)!==String(o)){var u=a.match(H)[0],h=a.indexOf("-u-");s["[[extension]]"]=u,s["[[extensionIndex]]"]=h}}else s["[[locale]]"]=D;return s}function z(e,t,n,r,i){if(0===e.length)throw new ReferenceError("No locale data has been provided for this object yet.");var a;a="lookup"===n["[[localeMatcher]]"]?X(e,t):function(e,t){return X(e,t)}(e,t);var o=a["[[locale]]"],s=void 0,u=void 0;if(f.call(a,"[[extension]]")){var h=a["[[extension]]"];u=(s=String.prototype.split.call(h,"-")).length}var l=new S;l["[[dataLocale]]"]=o;for(var c="-u",d=0,p=r.length;d<p;){var m=r[d],v=i[o][m],y=v[0],b="",_=g;if(void 0!==s){var E=_.call(s,m);if(-1!==E)if(E+1<u&&s[E+1].length>2){var T=s[E+1];-1!==_.call(v,T)&&(b="-"+m+"-"+(y=T))}else-1!==_(v,"true")&&(y="true")}if(f.call(n,"[["+m+"]]")){var x=n["[["+m+"]]"];-1!==_.call(v,x)&&x!==y&&(y=x,b="")}l["[["+m+"]]"]=y,c+=b,d++}if(c.length>2){var k=o.indexOf("-x-");if(-1===k)o+=c;else{var w=o.substring(0,k),M=o.substring(k);o=w+c+M}o=G(o)}return l["[[locale]]"]=o,l}function V(e,t){for(var n=t.length,r=new w,i=0;i<n;){var a=t[i];void 0!==K(e,String(a).replace(H,""))&&b.call(r,a),i++}return v.call(r)}function W(e,t,n){var r,i=void 0;if(void 0!==n&&void 0!==(i=(n=new S(A(n))).localeMatcher)&&"lookup"!==(i=String(i))&&"best fit"!==i)throw new RangeError('matcher should be "lookup" or "best fit"');for(var a in r=void 0===i||"best fit"===i?function(e,t){return V(e,t)}(e,t):V(e,t))f.call(r,a)&&p(r,a,{writable:!1,configurable:!1,value:r[a]});return p(r,"length",{writable:!1}),r}function Y(e,t,n,r,i){var a=e[t];if(void 0!==a){if(a="boolean"===n?Boolean(a):"string"===n?String(a):a,void 0!==r&&-1===g.call(r,a))throw new RangeError("'"+a+"' is not an allowed value for `"+t+"`");return a}return i}function J(e,t,n,r,i){var a=e[t];if(void 0!==a){if(a=Number(a),isNaN(a)||a<n||a>r)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(a)}return i}var q={};Object.defineProperty(q,"getCanonicalLocales",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=j(e),n=[],r=t.length,i=0;i<r;)n[i]=t[i],i++;return n}});var Q={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};function Z(){var e=arguments[0],t=arguments[1];return this&&this!==q?$(A(this),e,t):new q.NumberFormat(e,t)}function $(e,t,n){var r=C(e),i=M();if(!0===r["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");p(e,"__getInternalProperties",{value:function(){if(arguments[0]===k)return r}}),r["[[initializedIntlObject]]"]=!0;var a=j(t);n=void 0===n?{}:A(n);var o=new S,s=Y(n,"localeMatcher","string",new w("lookup","best fit"),"best fit");o["[[localeMatcher]]"]=s;var u=x.NumberFormat["[[localeData]]"],h=z(x.NumberFormat["[[availableLocales]]"],a,o,x.NumberFormat["[[relevantExtensionKeys]]"],u);r["[[locale]]"]=h["[[locale]]"],r["[[numberingSystem]]"]=h["[[nu]]"],r["[[dataLocale]]"]=h["[[dataLocale]]"];var l=h["[[dataLocale]]"],c=Y(n,"style","string",new w("decimal","percent","currency"),"decimal");r["[[style]]"]=c;var f,g=Y(n,"currency","string");if(void 0!==g&&(f=B(String(g)),!1===U.test(f)))throw new RangeError("'"+g+"' is not a valid currency code");if("currency"===c&&void 0===g)throw new TypeError("Currency code is required when style is currency");var m,v=void 0;"currency"===c&&(g=g.toUpperCase(),r["[[currency]]"]=g,v=void 0!==Q[m=g]?Q[m]:2);var y=Y(n,"currencyDisplay","string",new w("code","symbol","name"),"symbol");"currency"===c&&(r["[[currencyDisplay]]"]=y);var b=J(n,"minimumIntegerDigits",1,21,1);r["[[minimumIntegerDigits]]"]=b;var _=J(n,"minimumFractionDigits",0,20,"currency"===c?v:0);r["[[minimumFractionDigits]]"]=_;var E=J(n,"maximumFractionDigits",_,20,"currency"===c?Math.max(_,v):"percent"===c?Math.max(_,0):Math.max(_,3));r["[[maximumFractionDigits]]"]=E;var T=n.minimumSignificantDigits,R=n.maximumSignificantDigits;void 0===T&&void 0===R||(T=J(n,"minimumSignificantDigits",1,21,1),R=J(n,"maximumSignificantDigits",T,21,21),r["[[minimumSignificantDigits]]"]=T,r["[[maximumSignificantDigits]]"]=R);var P=Y(n,"useGrouping","boolean",void 0,!0);r["[[useGrouping]]"]=P;var I=u[l].patterns[c];return r["[[positivePattern]]"]=I.positivePattern,r["[[negativePattern]]"]=I.negativePattern,r["[[boundFormat]]"]=void 0,r["[[initializedNumberFormat]]"]=!0,d&&(e.format=ee.call(e)),i(),e}function ee(){var e=null!==this&&"object"===l.typeof(this)&&C(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===e["[[boundFormat]]"]){var t=T.call((function(e){return re(this,Number(e))}),this);e["[[boundFormat]]"]=t}return e["[[boundFormat]]"]}function te(e,t){for(var n=ne(e,t),r=[],i=0,a=0;n.length>a;a++){var o=n[a],s={};s.type=o["[[type]]"],s.value=o["[[value]]"],r[i]=s,i+=1}return r}function ne(e,t){var n=C(e),r=n["[[dataLocale]]"],i=n["[[numberingSystem]]"],a=x.NumberFormat["[[localeData]]"][r],o=a.symbols[i]||a.symbols.latn,s=void 0;!isNaN(t)&&t<0?(t=-t,s=n["[[negativePattern]]"]):s=n["[[positivePattern]]"];for(var u=new w,h=s.indexOf("{",0),l=0,c=0,d=s.length;h>-1&&h<d;){if(-1===(l=s.indexOf("}",h)))throw new Error;if(h>c){var p=s.substring(c,h);b.call(u,{"[[type]]":"literal","[[value]]":p})}var g=s.substring(h+1,l);if("number"===g)if(isNaN(t)){var m=o.nan;b.call(u,{"[[type]]":"nan","[[value]]":m})}else if(isFinite(t)){"percent"===n["[[style]]"]&&isFinite(t)&&(t*=100);var v=void 0;v=f.call(n,"[[minimumSignificantDigits]]")&&f.call(n,"[[maximumSignificantDigits]]")?ie(t,n["[[minimumSignificantDigits]]"],n["[[maximumSignificantDigits]]"]):ae(t,n["[[minimumIntegerDigits]]"],n["[[minimumFractionDigits]]"],n["[[maximumFractionDigits]]"]),oe[i]?function(){var e=oe[i];v=String(v).replace(/\d/g,(function(t){return e[t]}))}():v=String(v);var y=void 0,_=void 0,T=v.indexOf(".",0);if(T>0?(y=v.substring(0,T),_=v.substring(T+1,T.length)):(y=v,_=void 0),!0===n["[[useGrouping]]"]){var k=o.group,S=[],M=a.patterns.primaryGroupSize||3,A=a.patterns.secondaryGroupSize||M;if(y.length>M){var R=y.length-M,P=R%A,I=y.slice(0,P);for(I.length&&b.call(S,I);P<R;)b.call(S,y.slice(P,P+A)),P+=A;b.call(S,y.slice(R))}else b.call(S,y);if(0===S.length)throw new Error;for(;S.length;){var N=E.call(S);b.call(u,{"[[type]]":"integer","[[value]]":N}),S.length&&b.call(u,{"[[type]]":"group","[[value]]":k})}}else b.call(u,{"[[type]]":"integer","[[value]]":y});if(void 0!==_){var O=o.decimal;b.call(u,{"[[type]]":"decimal","[[value]]":O}),b.call(u,{"[[type]]":"fraction","[[value]]":_})}}else{var D=o.infinity;b.call(u,{"[[type]]":"infinity","[[value]]":D})}else if("plusSign"===g){var L=o.plusSign;b.call(u,{"[[type]]":"plusSign","[[value]]":L})}else if("minusSign"===g){var B=o.minusSign;b.call(u,{"[[type]]":"minusSign","[[value]]":B})}else if("percentSign"===g&&"percent"===n["[[style]]"]){var F=o.percentSign;b.call(u,{"[[type]]":"literal","[[value]]":F})}else if("currency"===g&&"currency"===n["[[style]]"]){var G=n["[[currency]]"],U=void 0;"code"===n["[[currencyDisplay]]"]?U=G:"symbol"===n["[[currencyDisplay]]"]?U=a.currencies[G]||G:"name"===n["[[currencyDisplay]]"]&&(U=G),b.call(u,{"[[type]]":"currency","[[value]]":U})}else{var H=s.substring(h,l);b.call(u,{"[[type]]":"literal","[[value]]":H})}c=l+1,h=s.indexOf("{",c)}if(c<d){var j=s.substring(c,d);b.call(u,{"[[type]]":"literal","[[value]]":j})}return u}function re(e,t){for(var n=ne(e,t),r="",i=0;n.length>i;i++)r+=n[i]["[[value]]"];return r}function ie(e,t,n){var r=n,i=void 0,a=void 0;if(0===e)i=_.call(Array(r+1),"0"),a=0;else{a=function(e){if("function"==typeof Math.log10)return Math.floor(Math.log10(e));var t=Math.round(Math.log(e)*Math.LOG10E);return t-(Number("1e"+t)>e)}(Math.abs(e));var o=Math.round(Math.exp(Math.abs(a-r+1)*Math.LN10));i=String(Math.round(a-r+1<0?e*o:e/o))}if(a>=r)return i+_.call(Array(a-r+1+1),"0");if(a===r-1)return i;if(a>=0?i=i.slice(0,a+1)+"."+i.slice(a+1):a<0&&(i="0."+_.call(Array(1-(a+1)),"0")+i),i.indexOf(".")>=0&&n>t){for(var s=n-t;s>0&&"0"===i.charAt(i.length-1);)i=i.slice(0,-1),s--;"."===i.charAt(i.length-1)&&(i=i.slice(0,-1))}return i}function ae(e,t,n,r){var i,a=r,o=Math.pow(10,a)*e,s=0===o?"0":o.toFixed(0),u=(i=s.indexOf("e"))>-1?s.slice(i+1):0;u&&(s=s.slice(0,i).replace(".",""),s+=_.call(Array(u-(s.length-1)+1),"0"));var h=void 0;if(0!==a){var l=s.length;l<=a&&(s=_.call(Array(a+1-l+1),"0")+s,l=a+1);var c=s.substring(0,l-a),d=s.substring(l-a,s.length);s=c+"."+d,h=c.length}else h=s.length;for(var f=r-n;f>0&&"0"===s.slice(-1);)s=s.slice(0,-1),f--;return"."===s.slice(-1)&&(s=s.slice(0,-1)),h<t&&(s=_.call(Array(t-h+1),"0")+s),s}p(q,"NumberFormat",{configurable:!0,writable:!0,value:Z}),p(q.NumberFormat,"prototype",{writable:!1}),x.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},p(q.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:T.call((function(e){if(!f.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=M(),n=arguments[1],r=this["[[availableLocales]]"],i=j(e);return t(),W(r,i,n)}),x.NumberFormat)}),p(q.NumberFormat.prototype,"format",{configurable:!0,get:ee}),Object.defineProperty(q.NumberFormat.prototype,"formatToParts",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=null!==this&&"object"===l.typeof(this)&&C(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");var n=Number(e);return te(this,n)}});var oe={arab:["","","","","","","","","",""],arabext:["","","","","","","","","",""],bali:["","","","","","","","","",""],beng:["","","","","","","","","",""],deva:["","","","","","","","","",""],fullwide:["","","","","","","","","",""],gujr:["","","","","","","","","",""],guru:["","","","","","","","","",""],hanidec:["","","","","","","","","",""],khmr:["","","","","","","","","",""],knda:["","","","","","","","","",""],laoo:["","","","","","","","","",""],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["","","","","","","","","",""],mlym:["","","","","","","","","",""],mong:["","","","","","","","","",""],mymr:["","","","","","","","","",""],orya:["","","","","","","","","",""],tamldec:["","","","","","","","","",""],telu:["","","","","","","","","",""],thai:["","","","","","","","","",""],tibt:["","","","","","","","","",""]};p(q.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,t=new S,n=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],r=null!==this&&"object"===l.typeof(this)&&C(this);if(!r||!r["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var i=0,a=n.length;i<a;i++)f.call(r,e="[["+n[i]+"]]")&&(t[n[i]]={value:r[e],writable:!0,configurable:!0,enumerable:!0});return m({},t)}});var se=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/[rqQASjJgwWIQq]/,le=["era","year","month","day","weekday","quarter"],ce=["hour","minute","second","hour12","timeZoneName"];function de(e){for(var t=0;t<ce.length;t+=1)if(e.hasOwnProperty(ce[t]))return!1;return!0}function fe(e){for(var t=0;t<le.length;t+=1)if(e.hasOwnProperty(le[t]))return!1;return!0}function pe(e,t){for(var n={_:{}},r=0;r<le.length;r+=1)e[le[r]]&&(n[le[r]]=e[le[r]]),e._[le[r]]&&(n._[le[r]]=e._[le[r]]);for(var i=0;i<ce.length;i+=1)t[ce[i]]&&(n[ce[i]]=t[ce[i]]),t._[ce[i]]&&(n._[ce[i]]=t._[ce[i]]);return n}function ge(e){return e.pattern12=e.extendedPattern.replace(/'([^']*)'/g,(function(e,t){return t||"'"})),e.pattern=e.pattern12.replace("{ampm}","").replace(ue,""),e}function me(e,t){switch(e.charAt(0)){case"G":return t.era=["short","short","short","long","narrow"][e.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return t.year=2===e.length?"2-digit":"numeric","{year}";case"Q":case"q":return t.quarter=["numeric","2-digit","short","long","narrow"][e.length-1],"{quarter}";case"M":case"L":return t.month=["numeric","2-digit","short","long","narrow"][e.length-1],"{month}";case"w":return t.week=2===e.length?"2-digit":"numeric","{weekday}";case"W":return t.week="numeric","{weekday}";case"d":return t.day=2===e.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return t.day="numeric","{day}";case"E":return t.weekday=["short","short","short","long","narrow","short"][e.length-1],"{weekday}";case"e":return t.weekday=["numeric","2-digit","short","long","narrow","short"][e.length-1],"{weekday}";case"c":return t.weekday=["numeric",void 0,"short","long","narrow","short"][e.length-1],"{weekday}";case"a":case"b":case"B":return t.hour12=!0,"{ampm}";case"h":case"H":return t.hour=2===e.length?"2-digit":"numeric","{hour}";case"k":case"K":return t.hour12=!0,t.hour=2===e.length?"2-digit":"numeric","{hour}";case"m":return t.minute=2===e.length?"2-digit":"numeric","{minute}";case"s":return t.second=2===e.length?"2-digit":"numeric","{second}";case"S":case"A":return t.second="numeric","{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return t.timeZoneName=e.length<4?"short":"long","{timeZoneName}"}}function ve(e,t){if(!he.test(t)){var n={originalPattern:t,_:{}};return n.extendedPattern=t.replace(se,(function(e){return me(e,n._)})),e.replace(se,(function(e){return me(e,n)})),ge(n)}}var ye={second:{numeric:"s","2-digit":"ss"},minute:{numeric:"m","2-digit":"mm"},year:{numeric:"y","2-digit":"yy"},day:{numeric:"d","2-digit":"dd"},month:{numeric:"L","2-digit":"LL",narrow:"LLLLL",short:"LLL",long:"LLLL"},weekday:{narrow:"ccccc",short:"ccc",long:"cccc"}},be=m(null,{narrow:{},short:{},long:{}});function _e(e,t,n,r,i){var a=e[t]&&e[t][n]?e[t][n]:e.gregory[n],o={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},s=f.call(a,r)?a[r]:f.call(a,o[r][0])?a[o[r][0]]:a[o[r][1]];return null!==i?s[i]:s}function Ee(){var e=arguments[0],t=arguments[1];return this&&this!==q?Te(A(this),e,t):new q.DateTimeFormat(e,t)}function Te(e,t,n){var r=C(e),i=M();if(!0===r["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");p(e,"__getInternalProperties",{value:function(){if(arguments[0]===k)return r}}),r["[[initializedIntlObject]]"]=!0;var a=j(t);n=ke(n,"any","date");var o=new S,u=Y(n,"localeMatcher","string",new w("lookup","best fit"),"best fit");o["[[localeMatcher]]"]=u;var h=x.DateTimeFormat,l=h["[[localeData]]"],c=z(h["[[availableLocales]]"],a,o,h["[[relevantExtensionKeys]]"],l);r["[[locale]]"]=c["[[locale]]"],r["[[calendar]]"]=c["[[ca]]"],r["[[numberingSystem]]"]=c["[[nu]]"],r["[[dataLocale]]"]=c["[[dataLocale]]"];var m=c["[[dataLocale]]"],v=n.timeZone;if(void 0!==v&&"UTC"!==(v=B(v)))throw new RangeError("timeZone is not supported.");for(var y in r["[[timeZone]]"]=v,o=new S,xe)if(f.call(xe,y)){var b=Y(n,y,"string",xe[y]);o["[["+y+"]]"]=b}var _=void 0,E=l[m],T=function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:function(e){var t=e.availableFormats,n=e.timeFormats,r=e.dateFormats,i=[],a=void 0,o=void 0,s=void 0,u=void 0,h=void 0,l=[],c=[];for(a in t)t.hasOwnProperty(a)&&(s=ve(a,o=t[a]))&&(i.push(s),de(s)?c.push(s):fe(s)&&l.push(s));for(a in n)n.hasOwnProperty(a)&&(s=ve(a,o=n[a]))&&(i.push(s),l.push(s));for(a in r)r.hasOwnProperty(a)&&(s=ve(a,o=r[a]))&&(i.push(s),c.push(s));for(u=0;u<l.length;u+=1)for(h=0;h<c.length;h+=1)o="long"===c[h].month?c[h].weekday?e.full:e.long:"short"===c[h].month?e.medium:e.short,(s=pe(c[h],l[u])).originalPattern=o,s.extendedPattern=o.replace("{0}",l[u].extendedPattern).replace("{1}",c[h].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),i.push(ge(s));return i}(e)}(E.formats);if(u=Y(n,"formatMatcher","string",new w("basic","best fit"),"best fit"),E.formats=T,"basic"===u)_=function(e,t){for(var n=-1/0,r=void 0,i=0,a=t.length;i<a;){var o=t[i],s=0;for(var u in xe)if(f.call(xe,u)){var h=e["[["+u+"]]"],l=f.call(o,u)?o[u]:void 0;if(void 0===h&&void 0!==l)s-=20;else if(void 0!==h&&void 0===l)s-=120;else{var c=["2-digit","numeric","narrow","short","long"],d=g.call(c,h),p=g.call(c,l),m=Math.max(Math.min(p-d,2),-2);2===m?s-=6:1===m?s-=3:-1===m?s-=6:-2===m&&(s-=8)}}s>n&&(n=s,r=o),i++}return r}(o,T);else{var A=Y(n,"hour12","boolean");o.hour12=void 0===A?E.hour12:A,_=function(e,t){var n=[];for(var r in xe)f.call(xe,r)&&void 0!==e["[["+r+"]]"]&&n.push(r);if(1===n.length){var i=function(e,t){var n;if(ye[e]&&ye[e][t])return n={originalPattern:ye[e][t],_:s({},e,t),extendedPattern:"{"+e+"}"},s(n,e,t),s(n,"pattern12","{"+e+"}"),s(n,"pattern","{"+e+"}"),n}(n[0],e["[["+n[0]+"]]"]);if(i)return i}for(var a=-1/0,o=void 0,u=0,h=t.length;u<h;){var l=t[u],c=0;for(var d in xe)if(f.call(xe,d)){var p=e["[["+d+"]]"],m=f.call(l,d)?l[d]:void 0;if(p!==(f.call(l._,d)?l._[d]:void 0)&&(c-=2),void 0===p&&void 0!==m)c-=20;else if(void 0!==p&&void 0===m)c-=120;else{var v=["2-digit","numeric","narrow","short","long"],y=g.call(v,p),b=g.call(v,m),_=Math.max(Math.min(b-y,2),-2);b<=1&&y>=2||b>=2&&y<=1?_>0?c-=6:_<0&&(c-=8):_>1?c-=3:_<-1&&(c-=6)}}l._.hour12!==e.hour12&&(c-=1),c>a&&(a=c,o=l),u++}return o}(o,T)}for(var R in xe)if(f.call(xe,R)&&f.call(_,R)){var P=_[R];P=_._&&f.call(_._,R)?_._[R]:P,r["[["+R+"]]"]=P}var I=void 0,N=Y(n,"hour12","boolean");if(r["[[hour]]"])if(N=void 0===N?E.hour12:N,r["[[hour12]]"]=N,!0===N){var O=E.hourNo0;r["[[hourNo0]]"]=O,I=_.pattern12}else I=_.pattern;else I=_.pattern;return r["[[pattern]]"]=I,r["[[boundFormat]]"]=void 0,r["[[initializedDateTimeFormat]]"]=!0,d&&(e.format=Se.call(e)),i(),e}p(q,"DateTimeFormat",{configurable:!0,writable:!0,value:Ee}),p(Ee,"prototype",{writable:!1});var xe={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};function ke(e,t,n){if(void 0===e)e=null;else{var r=A(e);for(var i in e=new S,r)e[i]=r[i]}e=m(e);var a=!0;return"date"!==t&&"any"!==t||void 0===e.weekday&&void 0===e.year&&void 0===e.month&&void 0===e.day||(a=!1),"time"!==t&&"any"!==t||void 0===e.hour&&void 0===e.minute&&void 0===e.second||(a=!1),!a||"date"!==n&&"all"!==n||(e.year=e.month=e.day="numeric"),!a||"time"!==n&&"all"!==n||(e.hour=e.minute=e.second="numeric"),e}function Se(){var e=null!==this&&"object"===l.typeof(this)&&C(this);if(!e||!e["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===e["[[boundFormat]]"]){var t=T.call((function(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=void 0===e?Date.now():R(e);return Me(this,t)}),this);e["[[boundFormat]]"]=t}return e["[[boundFormat]]"]}function we(e,t){if(!isFinite(t))throw new RangeError("Invalid valid date passed to format");var n=e.__getInternalProperties(k);M();for(var r,i,a,o,s=n["[[locale]]"],u=new q.NumberFormat([s],{useGrouping:!1}),h=new q.NumberFormat([s],{minimumIntegerDigits:2,useGrouping:!1}),l=(r=t,n["[[calendar]]"],i=n["[[timeZone]]"],new S({"[[weekday]]":(a=new Date(r))[(o="get"+(i||""))+"Day"](),"[[era]]":+(a[o+"FullYear"]()>=0),"[[year]]":a[o+"FullYear"](),"[[month]]":a[o+"Month"](),"[[day]]":a[o+"Date"](),"[[hour]]":a[o+"Hours"](),"[[minute]]":a[o+"Minutes"](),"[[second]]":a[o+"Seconds"](),"[[inDST]]":!1})),c=n["[[pattern]]"],d=new w,f=0,p=c.indexOf("{"),g=0,m=n["[[dataLocale]]"],v=x.DateTimeFormat["[[localeData]]"][m].calendars,y=n["[[calendar]]"];-1!==p;){var _=void 0;if(-1===(g=c.indexOf("}",p)))throw new Error("Unclosed pattern");p>f&&b.call(d,{type:"literal",value:c.substring(f,p)});var E=c.substring(p+1,g);if(xe.hasOwnProperty(E)){var T=n["[["+E+"]]"],A=l["[["+E+"]]"];if("year"===E&&A<=0?A=1-A:"month"===E?A++:"hour"===E&&!0===n["[[hour12]]"]&&0==(A%=12)&&!0===n["[[hourNo0]]"]&&(A=12),"numeric"===T)_=re(u,A);else if("2-digit"===T)(_=re(h,A)).length>2&&(_=_.slice(-2));else if(T in be)switch(E){case"month":_=_e(v,y,"months",T,l["[["+E+"]]"]);break;case"weekday":try{_=_e(v,y,"days",T,l["[["+E+"]]"])}catch(e){throw new Error("Could not find weekday data for locale "+s)}break;case"timeZoneName":_="";break;case"era":try{_=_e(v,y,"eras",T,l["[["+E+"]]"])}catch(e){throw new Error("Could not find era data for locale "+s)}break;default:_=l["[["+E+"]]"]}b.call(d,{type:E,value:_})}else"ampm"===E?(_=_e(v,y,"dayPeriods",l["[[hour]]"]>11?"pm":"am",null),b.call(d,{type:"dayPeriod",value:_})):b.call(d,{type:"literal",value:c.substring(p,g+1)});f=g+1,p=c.indexOf("{",f)}return g<c.length-1&&b.call(d,{type:"literal",value:c.substr(g+1)}),d}function Me(e,t){for(var n=we(e,t),r="",i=0;n.length>i;i++)r+=n[i].value;return r}function Ae(e,t){for(var n=we(e,t),r=[],i=0;n.length>i;i++){var a=n[i];r.push({type:a.type,value:a.value})}return r}x.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},p(q.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:T.call((function(e){if(!f.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=M(),n=arguments[1],r=this["[[availableLocales]]"],i=j(e);return t(),W(r,i,n)}),x.NumberFormat)}),p(q.DateTimeFormat.prototype,"format",{configurable:!0,get:Se}),Object.defineProperty(q.DateTimeFormat.prototype,"formatToParts",{enumerable:!1,writable:!0,configurable:!0,value:function(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=null!==this&&"object"===l.typeof(this)&&C(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");var n=void 0===e?Date.now():R(e);return Ae(this,n)}}),p(q.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var e=void 0,t=new S,n=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],r=null!==this&&"object"===l.typeof(this)&&C(this);if(!r||!r["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var i=0,a=n.length;i<a;i++)f.call(r,e="[["+n[i]+"]]")&&(t[n[i]]={value:r[e],writable:!0,configurable:!0,enumerable:!0});return m({},t)}});var Re=q.__localeSensitiveProtos={Number:{},Date:{}};Re.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return re(new Z(arguments[0],arguments[1]),this)},Re.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1],r=new Ee(t,n=ke(n,"any","all"));return Me(r,e)},Re.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1],r=new Ee(t,n=ke(n,"date","date"));return Me(r,e)},Re.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1],r=new Ee(t,n=ke(n,"time","time"));return Me(r,e)},p(q,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){for(var e in p(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Re.Number.toLocaleString}),p(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Re.Date.toLocaleString}),Re.Date)f.call(Re.Date,e)&&p(Date.prototype,e,{writable:!0,configurable:!0,value:Re.Date[e]})}}),p(q,"__addLocaleData",{value:function(e){if(!F(e.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");!function(e,t){if(!e.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var n=void 0,r=[t],i=t.split("-");for(i.length>2&&4===i[1].length&&b.call(r,i[0]+"-"+i[2]);n=E.call(r);)b.call(x.NumberFormat["[[availableLocales]]"],n),x.NumberFormat["[[localeData]]"][n]=e.number,e.date&&(e.date.nu=e.number.nu,b.call(x.DateTimeFormat["[[availableLocales]]"],n),x.DateTimeFormat["[[localeData]]"][n]=e.date);void 0===D&&function(e){D=e}(t)}(e,e.locale)}}),p(q,"__disableRegExpRestore",{value:function(){x.disableRegExpRestore=!0}}),e.exports=q},344:()=>{IntlPolyfill.__addLocaleData({locale:"ca",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1}, {0}",full:"{1} 'a' 'les' {0}",long:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E H:mm",Ehms:"E h:mm:ss a",EHms:"E H:mm:ss",Gy:"y G",GyMMM:"LLL y G",GyMMMd:"d MMM y G",GyMMMEd:"E, d MMM y G",GyMMMM:"LLLL 'de' y G",GyMMMMd:"d MMMM 'de' y G",GyMMMMEd:"E, d MMMM 'de' y G",h:"h a",H:"H",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E, d MMM",MMMMd:"d MMMM",MMMMEd:"E, d MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"E, d/M/y",yMMM:"LLL 'de' y",yMMMd:"d MMM y",yMMMEd:"E, d MMM y",yMMMM:"LLLL 'de' y",yMMMMd:"d MMMM 'de' y",yMMMMEd:"E, d MMMM 'de' y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, d MMMM 'de' y",yMMMMd:"d MMMM 'de' y",yMMMd:"d MMM y",yMd:"d/M/yy"},timeFormats:{hmmsszzzz:"H:mm:ss zzzz",hmsz:"H:mm:ss z",hms:"H:mm:ss",hm:"H:mm"}},calendars:{buddhist:{months:{narrow:["GN","FB","M","AB","MG","JN","JL","AG","ST","OC","NV","DS"],short:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],long:["de gener","de febrer","de mar","dabril","de maig","de juny","de juliol","dagost","de setembre","doctubre","de novembre","de desembre"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["eB"],short:["eB"],long:["eB"]},dayPeriods:{am:"a. m.",pm:"p. m."}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},dayPeriods:{am:"a. m.",pm:"p. m."}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},dayPeriods:{am:"a. m.",pm:"p. m."}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"a. m.",pm:"p. m."}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},gregory:{months:{narrow:["GN","FB","M","AB","MG","JN","JL","AG","ST","OC","NV","DS"],short:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],long:["de gener","de febrer","de mar","dabril","de maig","de juny","de juliol","dagost","de setembre","doctubre","de novembre","de desembre"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["aC","dC","AEC","EC"],short:["aC","dC","AEC","EC"],long:["abans de Crist","desprs de Crist","abans de lEra Comuna","Era Comuna"]},dayPeriods:{am:"a. m.",pm:"p. m."}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"a. m.",pm:"p. m."}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"a. m.",pm:"p. m."}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"a. m.",pm:"p. m."}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"a. m.",pm:"p. m."}},japanese:{months:{narrow:["GN","FB","M","AB","MG","JN","JL","AG","ST","OC","NV","DS"],short:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],long:["de gener","de febrer","de mar","dabril","de maig","de juny","de juliol","dagost","de setembre","doctubre","de novembre","de desembre"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"a. m.",pm:"p. m."}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"a. m.",pm:"p. m."}},roc:{months:{narrow:["GN","FB","M","AB","MG","JN","JL","AG","ST","OC","NV","DS"],short:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."],long:["de gener","de febrer","de mar","dabril","de maig","de juny","de juliol","dagost","de setembre","doctubre","de novembre","de desembre"]},days:{narrow:["dg","dl","dt","dc","dj","dv","ds"],short:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],long:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"]},eras:{narrow:["Before R.O.C.","R.O.C."],short:["Before R.O.C.","R.O.C."],long:["Before R.O.C.","R.O.C."]},dayPeriods:{am:"a. m.",pm:"p. m."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number}{currency}",negativePattern:"{minusSign}{number}{currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"AU$",CNY:"",ESP:"",EUR:"",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"JP",KRW:"",NZD:"NZ$",THB:"",TWD:"NT$",VND:"",XAF:"FCFA",XOF:"CFA",XPF:"CFPF"}}})},178:()=>{IntlPolyfill.__addLocaleData({locale:"de",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} 'um' {0}",long:"{1} 'um' {0}",availableFormats:{d:"d",E:"ccc",Ed:"E, d.",Ehm:"E h:mm a",EHm:"E, HH:mm",Ehms:"E, h:mm:ss a",EHms:"E, HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d. MMM y G",GyMMMEd:"E, d. MMM y G",h:"h a",H:"HH 'Uhr'",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d.M.",MEd:"E, d.M.",MMd:"d.MM.",MMdd:"dd.MM.",MMM:"LLL",MMMd:"d. MMM",MMMEd:"E, d. MMM",MMMMd:"d. MMMM",MMMMEd:"E, d. MMMM",ms:"mm:ss",y:"y",yM:"M.y",yMd:"d.M.y",yMEd:"E, d.M.y",yMM:"MM.y",yMMdd:"dd.MM.y",yMMM:"MMM y",yMMMd:"d. MMM y",yMMMEd:"E, d. MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, d. MMMM y",yMMMMd:"d. MMMM y",yMMMd:"dd.MM.y",yMd:"dd.MM.yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],long:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"vorm.",pm:"nachm."}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},dayPeriods:{am:"vorm.",pm:"nachm."}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"vorm.",pm:"nachm."}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},dayPeriods:{am:"vorm.",pm:"nachm."}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"vorm.",pm:"nachm."}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"vorm.",pm:"nachm."}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"vorm.",pm:"nachm."}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],long:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["v. Chr.","n. Chr.","v. u. Z.","u. Z."],short:["v. Chr.","n. Chr.","v. u. Z.","u. Z."],long:["v. Chr.","n. Chr.","vor unserer Zeitrechnung","unserer Zeitrechnung"]},dayPeriods:{am:"vorm.",pm:"nachm."}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"vorm.",pm:"nachm."}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"vorm.",pm:"nachm."}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"vorm.",pm:"nachm."}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"vorm.",pm:"nachm."}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],long:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"vorm.",pm:"nachm."}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"vorm.",pm:"nachm."}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],long:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["Before R.O.C.","Minguo"],short:["Before R.O.C.","Minguo"],long:["Before R.O.C.","Minguo"]},dayPeriods:{am:"vorm.",pm:"nachm."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number}{currency}",negativePattern:"{minusSign}{number}{currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{ATS:"S",AUD:"AU$",BGM:"BGK",BGO:"BGJ",BRL:"R$",CAD:"CA$",CNY:"CN",DEM:"DM",EUR:"",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"",KRW:"",MXN:"MX$",NZD:"NZ$",THB:"",TWD:"NT$",USD:"$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},750:()=>{IntlPolyfill.__addLocaleData({locale:"en",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} 'at' {0}",long:"{1} 'at' {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, MMMM d, y",yMMMMd:"MMMM d, y",yMMMd:"MMM d, y",yMd:"M/d/yy"},timeFormats:{hmmsszzzz:"h:mm:ss a zzzz",hmsz:"h:mm:ss a z",hms:"h:mm:ss a",hm:"h:mm a"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Mo1","Mo2","Mo3","Mo4","Mo5","Mo6","Mo7","Mo8","Mo9","Mo10","Mo11","Mo12"],long:["Month1","Month2","Month3","Month4","Month5","Month6","Month7","Month8","Month9","Month10","Month11","Month12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["B","A","BCE","CE"],short:["BC","AD","BCE","CE"],long:["Before Christ","Anno Domini","Before Common Era","Common Era"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["Before R.O.C.","Minguo"],short:["Before R.O.C.","Minguo"],long:["Before R.O.C.","Minguo"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN",EUR:"",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"",KRW:"",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},836:()=>{IntlPolyfill.__addLocaleData({locale:"es",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1}, {0}",long:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E, h:mm a",EHm:"E, H:mm",Ehms:"E, h:mm:ss a",EHms:"E, H:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E, d MMM y G",GyMMMM:"MMMM 'de' y G",GyMMMMd:"d 'de' MMMM 'de' y G",GyMMMMEd:"E, d 'de' MMMM 'de' y G",h:"h a",H:"H",hm:"h:mm a",Hm:"H:mm",hms:"h:mm:ss a",Hms:"H:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"H:mm:ss v",hmsvvvv:"h:mm:ss a (vvvv)",Hmsvvvv:"H:mm:ss (vvvv)",hmv:"h:mm a v",Hmv:"H:mm v",M:"L",Md:"d/M",MEd:"E, d/M",MMd:"d/M",MMdd:"d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E, d MMM",MMMMd:"d 'de' MMMM",MMMMEd:"E, d 'de' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"EEE, d/M/y",yMM:"M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"EEE, d MMM y",yMMMM:"MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMMEd:"EEE, d 'de' MMMM 'de' y",yQQQ:"QQQ y",yQQQQ:"QQQQ 'de' y"},dateFormats:{yMMMMEEEEd:"EEEE, d 'de' MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMd:"d MMM y",yMd:"d/M/yy"},timeFormats:{hmmsszzzz:"H:mm:ss (zzzz)",hmsz:"H:mm:ss z",hms:"H:mm:ss",hm:"H:mm"}},calendars:{buddhist:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"a. m.",pm:"p. m."}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},dayPeriods:{am:"a. m.",pm:"p. m."}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},dayPeriods:{am:"a. m.",pm:"p. m."}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"a. m.",pm:"p. m."}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},gregory:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["a. C.","d. C.","a. e. c.","e. c."],short:["a. C.","d. C.","a. e. c.","e. c."],long:["antes de Cristo","despus de Cristo","antes de la era comn","era comn"]},dayPeriods:{am:"a. m.",pm:"p. m."}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"a. m.",pm:"p. m."}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"a. m.",pm:"p. m."}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"a. m.",pm:"p. m."}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"a. m.",pm:"p. m."}},japanese:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"a. m.",pm:"p. m."}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"a. m.",pm:"p. m."}},roc:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],long:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},eras:{narrow:["antes de R.O.C.","R.O.C."],short:["antes de R.O.C.","R.O.C."],long:["antes de R.O.C.","R.O.C."]},dayPeriods:{am:"a. m.",pm:"p. m."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number}{currency}",negativePattern:"{minusSign}{number}{currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{CAD:"CA$",ESP:"",EUR:"",THB:"",USD:"$",VND:"",XPF:"CFPF"}}})},474:()=>{IntlPolyfill.__addLocaleData({locale:"fr",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} '' {0}",full:"{1} '' {0}",long:"{1} '' {0}",availableFormats:{d:"d",E:"E",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH 'h'",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"dd/MM",MEd:"E dd/MM",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"MM/y",yMd:"dd/MM/y",yMEd:"E dd/MM/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"dd/MM/y"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],long:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["E.B."],short:["re b."],long:["re bouddhiste"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1yu","2yu","3yu","4yu","5yu","6yu","7yu","8yu","9yu","10yu","11yu","12yu"],long:["zhngyu","ryu","snyu","syu","wyu","liyu","qyu","byu","jiyu","shyu","shyyu","shryu"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1yu","2yu","3yu","4yu","5yu","6yu","7yu","8yu","9yu","10yu","11yu","12yu"],long:["zhngyu","ryu","snyu","syu","wyu","liyu","qyu","byu","jiyu","shyu","shyyu","shryu"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],long:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["av. J.-C.","ap. J.-C.","AEC","EC"],short:["av. J.-C.","ap. J.-C.","AEC","EC"],long:["avant Jsus-Christ","aprs Jsus-Christ","avant lre commune","de lre commune"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tisseri","Hesvan","Kislev","Tbeth","Schbat","Adar I","Adar","Nissan","Iyar","Sivan","Tamouz","Ab","Elloul","Adar II"],long:["Tisseri","Hesvan","Kislev","Tbeth","Schbat","Adar I","Adar","Nissan","Iyar","Sivan","Tamouz","Ab","Elloul","Adar II"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["mouh.","saf.","rab. aw.","rab. th.","joum. oul.","joum. tha.","raj.","chaa.","ram.","chaw.","dhou. q.","dhou. h."],long:["mouharram","safar","rabia al awal","rabia ath-thani","joumada al oula","joumada ath-thania","rajab","chaabane","ramadan","chawwal","dhou al qi`da","dhou al-hijja"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["mouh.","saf.","rab. aw.","rab. th.","joum. oul.","joum. tha.","raj.","chaa.","ram.","chaw.","dhou. q.","dhou. h."],long:["mouharram","safar","rabia al awal","rabia ath-thani","joumada al oula","joumada ath-thania","rajab","chaabane","ramadan","chawwal","dhou al qi`da","dhou al-hijja"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],long:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],long:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["avant RdC","RdC"],short:["avant RdC","RdC"],long:["avant RdC","RdC"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number}{currency}",negativePattern:"{minusSign}{number}{currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:"",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{ARS:"$AR",AUD:"$AU",BEF:"FB",BMD:"$BM",BND:"$BN",BRL:"R$",BSD:"$BS",BZD:"$BZ",CAD:"$CA",CLP:"$CL",COP:"$CO",CYP:"CY",EUR:"",FJD:"$FJ",FKP:"FK",FRF:"F",GBP:"GB",GIP:"GI",IEP:"IE",ILP:"IL",ILS:"",INR:"",ITL:"IT",KRW:"",LBP:"LB",MTP:"MT",MXN:"$MX",NAD:"$NA",NZD:"$NZ",RHD:"$RH",SBD:"$SB",SGD:"$SG",SRD:"$SR",TTD:"$TT",USD:"$US",UYU:"$UY",VND:"",WST:"WS$",XAF:"FCFA",XOF:"CFA",XPF:"FCFP"}}})},330:()=>{IntlPolyfill.__addLocaleData({locale:"it",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"E d/M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"dd MMM y",yMd:"dd/MM/yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["EB"],short:["EB"],long:["EB"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["aC","dC","BCE","CE"],short:["a.C.","d.C.","a.E.V.","E.V."],long:["a.C.","d.C.","avanti Era Volgare","Era Volgare"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},eras:{narrow:["Prima di R.O.C.","Minguo"],short:["Prima di R.O.C.","Minguo"],long:["Prima di R.O.C.","Minguo"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number}{currency}",negativePattern:"{minusSign}{number}{currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"A$",CAD:"CA$",CNY:"CN",EUR:"",GBP:"",ILS:"",INR:"",NZD:"NZ$",THB:"",USD:"US$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},108:()=>{IntlPolyfill.__addLocaleData({locale:"ja",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!1,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"d(E)",EEEEd:"dEEEE",Ehm:"aK:mm (E)",EHm:"H:mm (E)",Ehms:"aK:mm:ss (E)",EHms:"H:mm:ss (E)",Gy:"Gy",GyMMM:"GyM",GyMMMd:"GyMd",GyMMMEd:"GyMd(E)",GyMMMEEEEd:"GyMdEEEE",h:"aK",H:"H",hm:"aK:mm",Hm:"H:mm",hms:"aK:mm:ss",Hms:"H:mm:ss",hmsv:"aK:mm:ss v",Hmsv:"H:mm:ss v",hmv:"aK:mm v",Hmv:"H:mm v",M:"M",Md:"M/d",MEd:"M/d(E)",MEEEEd:"M/dEEEE",MMM:"M",MMMd:"Md",MMMEd:"Md(E)",MMMEEEEd:"MdEEEE",MMMMd:"Md",ms:"mm:ss",y:"y",yM:"y/M",yMd:"y/M/d",yMEd:"y/M/d(E)",yMEEEEd:"y/M/dEEEE",yMM:"y/MM",yMMM:"yM",yMMMd:"yMd",yMMMEd:"yMd(E)",yMMMEEEEd:"yMdEEEE",yMMMM:"yM",yQQQ:"y/QQQ",yQQQQ:"yQQQQ"},dateFormats:{yMMMMEEEEd:"yMdEEEE",yMMMMd:"yMd",yMMMd:"y/MM/dd",yMd:"y/MM/dd"},timeFormats:{hmmsszzzz:"Hmmss zzzz",hmsz:"H:mm:ss z",hms:"H:mm:ss",hm:"H:mm"}},calendars:{buddhist:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["BE"],short:["BE"],long:[""]},dayPeriods:{am:"",pm:""}},chinese:{months:{narrow:["","","","","","","","","","","",""],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},dayPeriods:{am:"",pm:""}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["","","","","","","","","","","","",""],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},dangi:{months:{narrow:["","","","","","","","","","","",""],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},dayPeriods:{am:"",pm:""}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["","","","","","","","","","","","",""],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["","","","","","","","","","","","",""],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"",pm:""}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},gregory:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["BC","AD","BCE","CE"],short:["","","",""],long:["","","",""]},dayPeriods:{am:"",pm:""}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["","","","",""," I","","","","","","",""," II"],long:["","","","",""," I","","","","","","",""," II"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"",pm:""}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"",pm:""}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"",pm:""}},japanese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","M","T","S","H"],short:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],long:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dayPeriods:{am:"",pm:""}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"",pm:""}},roc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["",""],short:["",""],long:["",""]},dayPeriods:{am:"",pm:""}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"",EUR:"",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"",KRW:"",MXN:"MX$",NZD:"NZ$",THB:"",TWD:"NT$",USD:"$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},447:()=>{IntlPolyfill.__addLocaleData({locale:"nl",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d-M",MEd:"E d-M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"M-y",yMd:"d-M-y",yMEd:"E d-M-y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"dd-MM-yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"a.m.",pm:"p.m."}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["mnd 1","mnd 2","mnd 3","mnd 4","mnd 5","mnd 6","mnd 7","mnd 8","mnd 9","mnd 10","mnd 11","mnd 12"],long:["maand 1","maand 2","maand 3","maand 4","maand 5","maand 6","maand 7","maand 8","maand 9","maand 10","maand 11","maand 12"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},dayPeriods:{am:"a.m.",pm:"p.m."}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tut","Babah","Hatur","Kiyahk","Tubah","Amshir","Baramhat","Baramundah","Bashans","Baunah","Abib","Misra","Nasi"],long:["Tut","Babah","Hatur","Kiyahk","Tubah","Amshir","Baramhat","Baramundah","Bashans","Baunah","Abib","Misra","Nasi"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a.m.",pm:"p.m."}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["mnd 1","mnd 2","mnd 3","mnd 4","mnd 5","mnd 6","mnd 7","mnd 8","mnd 9","mnd 10","mnd 11","mnd 12"],long:["maand 1","maand 2","maand 3","maand 4","maand 5","maand 6","maand 7","maand 8","maand 9","maand 10","maand 11","maand 12"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},dayPeriods:{am:"a.m.",pm:"p.m."}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Mskrm","Teqemt","Hedar","Tahsas","Ter","Ykatit","Mgabit","Miyazya","Genbot","Sne","Hamle","Nhase","Pagumn"],long:["Mskrm","Teqemt","Hedar","Tahsas","Ter","Ykatit","Mgabit","Miyazya","Genbot","Sne","Hamle","Nhase","Pagumn"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a.m.",pm:"p.m."}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Mskrm","Teqemt","Hedar","Tahsas","Ter","Ykatit","Mgabit","Miyazya","Genbot","Sne","Hamle","Nhase","Pagumn"],long:["Mskrm","Teqemt","Hedar","Tahsas","Ter","Ykatit","Mgabit","Miyazya","Genbot","Sne","Hamle","Nhase","Pagumn"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"a.m.",pm:"p.m."}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a.m.",pm:"p.m."}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["v.C.","n.C.","vgj","gj"],short:["v.Chr.","n.Chr.","v.g.j.","g.j."],long:["voor Christus","na Christus","vr gewone jaartelling","gewone jaartelling"]},dayPeriods:{am:"a.m.",pm:"p.m."}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tisjrie","Chesjwan","Kislev","Tevet","Sjevat","Adar A","Adar","Nisan","Ijar","Sivan","Tammoez","Av","Elloel","Adar B"],long:["Tisjrie","Chesjwan","Kislev","Tevet","Sjevat","Adar A","Adar","Nisan","Ijar","Sivan","Tammoez","Av","Elloel","Adar B"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"a.m.",pm:"p.m."}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaishakha","Jyeshtha","Aashaadha","Shraavana","Bhaadrapada","Ashvina","Kaartika","Agrahayana","Pausha","Maagha","Phaalguna"],long:["Chaitra","Vaishakha","Jyeshtha","Aashaadha","Shraavana","Bhaadrapada","Ashvina","Kaartika","Agrahayana","Pausha","Maagha","Phaalguna"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["SAKA"],short:["SAKA"],long:["SAKA"]},dayPeriods:{am:"a.m.",pm:"p.m."}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Moeh.","Saf.","Rab. I","Rab. II","Joem. I","Joem. II","Raj.","Sja.","Ram.","Sjaw.","Doe al k.","Doe al h."],long:["Moeharram","Safar","Rabia al awal","Rabia al thani","Joemadal awal","Joemadal thani","Rajab","Sjaaban","Ramadan","Sjawal","Doe al kaaba","Doe al hizja"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["Sana Hizjria"],short:["Sana Hizjria"],long:["Sana Hizjria"]},dayPeriods:{am:"a.m.",pm:"p.m."}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Moeh.","Saf.","Rab. I","Rab. II","Joem. I","Joem. II","Raj.","Sja.","Ram.","Sjaw.","Doe al k.","Doe al h."],long:["Moeharram","Safar","Rabia al awal","Rabia al thani","Joemadal awal","Joemadal thani","Rajab","Sjaaban","Ramadan","Sjawal","Doe al kaaba","Doe al hizja"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["Sana Hizjria"],short:["Sana Hizjria"],long:["Sana Hizjria"]},dayPeriods:{am:"a.m.",pm:"p.m."}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kaho (10941096)","Eich (10961097)","Shtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Gen-ei (1118-1120)","Hoan (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hoen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hogen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Ken-ei (1206-1207)","Shgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Shky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tempuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En- (1239-1240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun- (1260-1261)","Kch (12611264)","Bun-ei (1264-1275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enkei (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genky (13211324)","Shch (13241326)","Kareki (13261329)","Gentoku (13291331)","Genk (13311334)","Kemmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bun-an (1444-1449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenmon (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genwa (16151624)","Kan-ei (1624-1644)","Shho (16441648)","Keian (16481652)","Sh (16521655)","Meiryaku (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenwa (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kan-en (1748-1751)","Hryaku (17511764)","Meiwa (17641772)","An-ei (1772-1781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Man-en (1860-1861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kaho (10941096)","Eich (10961097)","Shtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Gen-ei (1118-1120)","Hoan (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hoen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hogen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Ken-ei (1206-1207)","Shgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Shky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tempuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En- (1239-1240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun- (1260-1261)","Kch (12611264)","Bun-ei (1264-1275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enkei (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genky (13211324)","Shch (13241326)","Kareki (13261329)","Gentoku (13291331)","Genk (13311334)","Kemmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bun-an (1444-1449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenmon (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genwa (16151624)","Kan-ei (1624-1644)","Shho (16441648)","Keian (16481652)","Sh (16521655)","Meiryaku (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenwa (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kan-en (1748-1751)","Hryaku (17511764)","Meiwa (17641772)","An-ei (1772-1781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Man-en (1860-1861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"a.m.",pm:"p.m."}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"a.m.",pm:"p.m."}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["voor R.O.C.","Minguo"],short:["voor R.O.C.","Minguo"],long:["voor R.O.C.","Minguo"]},dayPeriods:{am:"a.m.",pm:"p.m."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{currency}{minusSign}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"AU$",BRL:"R$",CAD:"C$",CNY:"CN",EUR:"",FJD:"FJ$",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"JP",KRW:"",MXN:"MX$",NZD:"NZ$",SBD:"SI$",THB:"",TWD:"NT$",USD:"US$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA"}}})},792:()=>{IntlPolyfill.__addLocaleData({locale:"pt",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E, d",Ehm:"E, h:mm a",EHm:"E, HH:mm",Ehms:"E, h:mm:ss a",EHms:"E, HH:mm:ss",Gy:"y G",GyMMM:"MMM 'de' y G",GyMMMd:"d 'de' MMM 'de' y G",GyMMMEd:"E, d 'de' MMM 'de' y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E, dd/MM",MMdd:"dd/MM",MMM:"LLL",MMMd:"d 'de' MMM",MMMEd:"E, d 'de' MMM",MMMMd:"d 'de' MMMM",MMMMEd:"E, d 'de' MMMM",ms:"mm:ss",y:"y",yM:"MM/y",yMd:"dd/MM/y",yMEd:"E, dd/MM/y",yMM:"MM/y",yMMM:"MMM 'de' y",yMMMd:"d 'de' MMM 'de' y",yMMMEd:"E, d 'de' MMM 'de' y",yMMMM:"MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMMEd:"E, d 'de' MMMM 'de' y",yQQQ:"y QQQ",yQQQQ:"y QQQQ"},dateFormats:{yMMMMEEEEd:"EEEE, d 'de' MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMd:"d 'de' MMM 'de' y",yMd:"dd/MM/yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],long:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"AM",pm:"PM"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Ms 1","Ms 2","Ms 3","Ms 4","Ms 5","Ms 6","Ms 7","Ms 8","Ms 9","Ms 10","Ms 11","Ms 12"],long:["Ms 1","Ms 2","Ms 3","Ms 4","Ms 5","Ms 6","Ms 7","Ms 8","Ms 9","Ms 10","Ms 11","Ms 12"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},dayPeriods:{am:"AM",pm:"PM"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"],long:["Tout","Baba","Hator","Kiahk","Toba","Amshir","Baramhat","Baramouda","Bashans","Paona","Epep","Mesra","Nasie"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Ms 1","Ms 2","Ms 3","Ms 4","Ms 5","Ms 6","Ms 7","Ms 8","Ms 9","Ms 10","Ms 11","Ms 12"],long:["Ms 1","Ms 2","Ms 3","Ms 4","Ms 5","Ms 6","Ms 7","Ms 8","Ms 9","Ms 10","Ms 11","Ms 12"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},dayPeriods:{am:"AM",pm:"PM"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"],long:["Meskerem","Tekemt","Hedar","Tahsas","Ter","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehasse","Pagumen"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"AM",pm:"PM"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],long:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["a.C.","d.C.","AEC","EC"],short:["a.C.","d.C.","AEC","EC"],long:["antes de Cristo","depois de Cristo","antes da Era Comum","Era Comum"]},dayPeriods:{am:"AM",pm:"PM"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"],long:["Tishri","Heshvan","Kislev","Tevet","Shevat","Adar I","Adar","Nisan","Iyar","Sivan","Tamuz","Av","Elul","Adar II"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"AM",pm:"PM"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"],long:["Chaitra","Vaisakha","Jyaistha","Asadha","Sravana","Bhadra","Asvina","Kartika","Agrahayana","Pausa","Magha","Phalguna"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["Saka"],short:["Saka"],long:["Saka"]},dayPeriods:{am:"AM",pm:"PM"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["Muharram","Safar","Rabi I","Rabi II","Jumada I","Jumada II","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qidah","Dhul-Hijjah"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"AM",pm:"PM"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],long:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"AM",pm:"PM"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],long:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"AM",pm:"PM"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],long:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sb"],long:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},eras:{narrow:["Antes de R.O.C.","R.O.C."],short:["Antes de R.O.C.","R.O.C."],long:["Antes de R.O.C.","R.O.C."]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"CN",EUR:"",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"JP",KRW:"",MXN:"MX$",NZD:"NZ$",PTE:"Esc.",THB:"",TWD:"NT$",USD:"US$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},46:()=>{IntlPolyfill.__addLocaleData({locale:"sv",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMd:"d/M",MMdd:"dd/MM",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",MMMMEd:"E d MMMM",ms:"mm:ss",y:"y",yM:"y-MM",yMd:"y-MM-dd",yMEd:"E, y-MM-dd",yMM:"y-MM",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"y-MM-dd"},timeFormats:{hmmsszzzz:"'kl'. HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["BE"],short:["BE"],long:["BE"]},dayPeriods:{am:"fm",pm:"em"}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},dayPeriods:{am:"fm",pm:"em"}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["tout","bb","htour","kiahk","toubah","amshr","barmaht","barmoudah","bashans","baounah","abb","misra","al-nasi"],long:["tout","bb","htour","kiahk","toubah","amshr","barmaht","barmoudah","bashans","baounah","abb","misra","al-nasi"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"fm",pm:"em"}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},dayPeriods:{am:"fm",pm:"em"}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["mskrm","teqemt","hedar","tahesas","ter","ykatit","mgabit","miyazya","guenbot","sn","haml","nhas","pagumn"],long:["mskrm","teqemt","hedar","tahesas","ter","ykatit","mgabit","miyazya","guenbot","sn","haml","nhas","pagumn"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"fm",pm:"em"}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["mskrm","teqemt","hedar","tahesas","ter","ykatit","mgabit","miyazya","guenbot","sn","haml","nhas","pagumn"],long:["mskrm","teqemt","hedar","tahesas","ter","ykatit","mgabit","miyazya","guenbot","sn","haml","nhas","pagumn"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"fm",pm:"em"}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"fm",pm:"em"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["f.Kr.","e.Kr.","fvt","vt"],short:["f.Kr.","e.Kr.","f.v.t.","v.t."],long:["fre Kristus","efter Kristus","fre vsterlndsk tiderkning","vsterlndsk tiderkning"]},dayPeriods:{am:"fm",pm:"em"}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["tishr","heshvn","kislv","tevt","shevt","adr I","adr","nisn","ijjr","sivn","tammz","ab","ell","adr II"],long:["tishr","heshvn","kislv","tevt","shevt","adr I","adr","nisn","ijjr","sivn","tammz","ab","ell","adr II"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["AM"],short:["AM"],long:["AM"]},dayPeriods:{am:"fm",pm:"em"}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["chaitra","vaishkh","jyaishtha","shdha","shrvana","bhdrapad","shwin","krtik","mrgashrsha","paush","mgh","phlgun"],long:["chaitra","vaishkh","jyaishtha","shdha","shrvana","bhdrapad","shwin","krtik","mrgashrsha","paush","mgh","phlgun"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["SAKA"],short:["SAKA"],long:["Saka-eran"]},dayPeriods:{am:"fm",pm:"em"}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["muharram","safar","rabi al-awwal","rabi al-akhir","jumada-l-ula","jumada-l-akhira","rajab","shaban","ramadan","shawwal","dhu-l-gada","dhu-l-hijja"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"fm",pm:"em"}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["Muh.","Saf.","Rab. I","Rab. II","Jum. I","Jum. II","Raj.","Sha.","Ram.","Shaw.","Dhul-Q.","Dhul-H."],long:["muharram","safar","rabi al-awwal","rabi al-akhir","jumada-l-ula","jumada-l-akhira","rajab","shaban","ramadan","shawwal","dhu-l-gada","dhu-l-hijja"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["AH"],short:["AH"],long:["AH"]},dayPeriods:{am:"fm",pm:"em"}},japanese:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tempy (729749)","Tempy-kamp (749749)","Tempy-shh (749757)","Tempy-hji (757765)","Temph-jingo (765767)","Jingo-keiun (767770)","Hki (770780)","Ten- (781782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saiko (854857)","Tennan (857859)","Jgan (859877)","Genkei (877885)","Ninna (885889)","Kampy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Shhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Ten-en (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Ei-en (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eiho (10811084)","toku (10841087)","Kanji (10871094)","Kaho (10941096)","Eich (10961097)","Shtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (11101113)","Eiky (11131118)","Gen-ei (11181120)","Hoan (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hoen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hogen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Nin-an (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryuku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Ken-ei (12061207)","Shgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Shky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tempuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En- (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun- (12601261)","Kch (12611264)","Bun-ei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enkei (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genky (13211324)","Shch (13241326)","Kareki (13261329)","Gentoku (13291331)","Genk (13311334)","Kemmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bun-an (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenmon (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genwa (16151624)","Kan-ei (16241644)","Shho (16441648)","Keian (16481652)","Sh (16521655)","Meiryaku (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenwa (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kan-en (17481751)","Hryaku (17511764)","Meiwa (17641772)","An-ei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Man-en (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"],long:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tempy (729749)","Tempy-kamp (749749)","Tempy-shh (749757)","Tempy-hji (757765)","Temph-jingo (765767)","Jingo-keiun (767770)","Hki (770780)","Ten- (781782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saiko (854857)","Tennan (857859)","Jgan (859877)","Genkei (877885)","Ninna (885889)","Kampy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Shhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Ten-en (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Ei-en (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eiho (10811084)","toku (10841087)","Kanji (10871094)","Kaho (10941096)","Eich (10961097)","Shtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (11101113)","Eiky (11131118)","Gen-ei (11181120)","Hoan (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hoen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hogen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Nin-an (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryuku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Ken-ei (12061207)","Shgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Shky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tempuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En- (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun- (12601261)","Kch (12611264)","Bun-ei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enkei (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genky (13211324)","Shch (13241326)","Kareki (13261329)","Gentoku (13291331)","Genk (13311334)","Kemmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bun-an (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenmon (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genwa (16151624)","Kan-ei (16241644)","Shho (16441648)","Keian (16481652)","Sh (16521655)","Meiryaku (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenwa (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kan-en (17481751)","Hryaku (17511764)","Meiwa (17641772)","An-ei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Man-en (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","Meiji","Taish","Shwa","Heisei"]},dayPeriods:{am:"fm",pm:"em"}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["farvardin","ordibehesht","khordd","tir","mordd","shahrivar","mehr","bn","zar","dey","bahman","esfand"],long:["farvardin","ordibehesht","khordd","tir","mordd","shahrivar","mehr","bn","zar","dey","bahman","esfand"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["AP"],short:["AP"],long:["AP"]},dayPeriods:{am:"fm",pm:"em"}},roc:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sn","mn","tis","ons","tors","fre","lr"],long:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"]},eras:{narrow:["fre R.K.","R.K."],short:["fre R.K.","R.K."],long:["fre R.K.","R.K."]},dayPeriods:{am:"fm",pm:"em"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number}{currency}",negativePattern:"{minusSign}{number}{currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:"",nan:"",plusSign:"+",minusSign:"",percentSign:"%",infinity:""}},currencies:{BBD:"Bds$",BMD:"BM$",BRL:"BR$",BSD:"BS$",BZD:"BZ$",CAD:"CA$",DKK:"Dkr",DOP:"RD$",EEK:"Ekr",EGP:"EG",EUR:"",ILS:"",ISK:"Ikr",JMD:"JM$",MXN:"MX$",NOK:"Nkr",SEK:"kr",USD:"US$",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},924:()=>{IntlPolyfill.__addLocaleData({locale:"th",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm .",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"G y",GyMMM:"MMM G y",GyMMMd:"d MMM G y",GyMMMEd:"E d MMM G y",GyMMMEEEEd:"EEEE d MMM G y",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm .",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMEEEEd:"EEEE d MMM",MMMMd:"d MMMM",MMMMEd:"E d MMMM",MMMMEEEEd:"EEEE d MMMM",mmss:"mm:ss",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"E d/M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMEEEEd:"EEEE d MMM y",yMMMM:"MMMM G y",yMMMMd:"d MMMM G y",yMMMMEd:"E d MMMM G y",yMMMMEEEEd:"EEEE d MMMM G y",yQQQ:"QQQ y",yQQQQ:"QQQQ G y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM G y",yMMMMd:"d MMMM G y",yMMMd:"d MMM y",yMd:"d/M/yy"},timeFormats:{hmmsszzzz:"H  mm  ss  zzzz",hmsz:"H  mm  ss  z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{buddhist:{months:{narrow:["..","..","..","..","..","..","..","..","..","..","..",".."],short:["..","..","..","..","..","..","..","..","..","..","..",".."],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[".."],short:[".."],long:[""]},dayPeriods:{am:"",pm:""}},chinese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},dayPeriods:{am:"",pm:""}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["","","","","","","","","","","","",""],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},dangi:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["1","2","3","4","5","6","7","8","9","10","11","12"]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},dayPeriods:{am:"",pm:""}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["","","","","","","","","","","","",""],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["","","","","","","","","","","","",""],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"",pm:""}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},gregory:{months:{narrow:["..","..","..","..","..","..","..","..","..","..","..",".."],short:["..","..","..","..","..","..","..","..","..","..","..",".."],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[" ..","..","...",".."],short:[" ..","..","...",".."],long:["","","",""]},dayPeriods:{am:"",pm:""}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["","","","",""," I","","","","","","",""," II"],long:["","","","",""," I","","","","","","",""," II"]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[".."],short:[".."],long:[".."]},dayPeriods:{am:"",pm:""}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[".."],short:[".."],long:[".."]},dayPeriods:{am:"",pm:""}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:[".","."," I"," II"," I"," II",".",".",".",".",".","."],long:["",""," I"," II"," I"," II","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[".."],short:[".."],long:[""]},dayPeriods:{am:"",pm:""}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:[".","."," I"," II"," I"," II",".",".",".",".",".","."],long:["",""," I"," II"," I"," II","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[".."],short:[".."],long:[""]},dayPeriods:{am:"",pm:""}},japanese:{months:{narrow:["..","..","..","..","..","..","..","..","..","..","..",".."],short:["..","..","..","..","..","..","..","..","..","..","..",".."],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:[" (645650)"," (650671)"," (672686)"," (686701)"," (701704)"," (704708)"," (708715)"," (715717)"," (717724)"," (724729)"," (729749)","- (749-749)","- (749-757)","- (757-765)","- (765-767)","- (767-770)"," (770780)"," (781782)"," (782806)"," (806810)"," (810824)"," (824834)"," (834848)"," (848851)"," (851854)"," (854857)"," (857859)"," (859877)"," (877885)"," (885889)"," (889898)"," (898901)"," (901923)"," (923931)"," (931938)"," (938947)"," (947957)"," (957961)"," (961964)"," (964968)"," (968970)"," (970973)"," (973976)"," (976978)"," (978983)"," (983985)"," (985987)"," (987989)"," (989990)"," (990995)"," (995999)"," (9991004)"," (10041012)"," (10121017)"," (10171021)"," (10211024)"," (10241028)"," (10281037)"," (10371040)"," (10401044)"," (10441046)"," (10461053)"," (10531058)"," (10581065)"," (10651069)"," (10691074)"," (10741077)"," (10771081)"," (10811084)"," (10841087)"," (10871094)"," (10941096)"," (10961097)"," (10971099)"," (10991104)"," (11041106)"," (11061108)"," (11081110)"," (11101113)"," (11131118)"," (11181120)"," (11201124)"," (11241126)"," (11261131)"," (11311132)"," (11321135)"," (11351141)"," (11411142)"," (11421144)"," (11441145)"," (11451151)"," (11511154)"," (11541156)"," (11561159)"," (11591160)"," (11601161)"," (11611163)"," (11631165)"," (11651166)"," (11661169)"," (11691171)"," (11711175)"," (11751177)"," (11771181)"," (11811182)"," (11821184)"," (11841185)"," (11851190)"," (11901199)"," (11991201)"," (12011204)"," (12041206)"," (12061207)"," (12071211)"," (12111213)"," (12131219)"," (12191222)"," (12221224)"," (12241225)"," (12251227)"," (12271229)"," (12291232)"," (12321233)"," (12331234)"," (12341235)"," (12351238)"," (12381239)"," (12391240)"," (12401243)"," (12431247)"," (12471249)"," (12491256)"," (12561257)"," (12571259)"," (12591260)"," (12601261)"," (12611264)"," (12641275)"," (12751278)"," (12781288)"," (12881293)"," (12931299)"," (12991302)"," (13021303)"," (13031306)"," (13061308)"," (13081311)"," (13111312)"," (13121317)"," (13171319)"," (13191321)"," (13211324)"," (13241326)"," (13261329)"," (13291331)"," (13311334)"," (13341336)"," (13361340)"," (13401346)"," (13461370)"," (13701372)"," (13721375)"," (13751379)"," (13791381)"," (13811384)"," (13841392)"," (13841387)"," (13871389)"," (13891390)"," (13901394)"," (13941428)"," (14281429)"," (14291441)"," (14411444)"," (14441449)"," (14491452)"," (14521455)"," (14551457)"," (14571460)"," (14601466)"," (14661467)"," (14671469)"," (14691487)"," (14871489)"," (14891492)"," (14921501)"," (15011504)"," (15041521)"," (15211528)"," (15281532)"," (15321555)"," (15551558)"," (15581570)"," (15701573)"," (15731592)"," (15921596)"," (15961615)"," (16151624)"," (16241644)"," (16441648)"," (16481652)"," (16521655)"," (16551658)"," (16581661)"," (16611673)"," (16731681)"," (16811684)"," (16841688)"," (16881704)"," (17041711)"," (17111716)"," (17161736)"," (17361741)"," (17411744)"," (17441748)"," (17481751)"," (17511764)"," (17641772)"," (17721781)"," (17811789)"," (17891801)"," (18011804)"," (18041818)"," (18181830)"," (18301844)"," (18441848)"," (18481854)"," (18541860)"," (18601861)"," (18611864)"," (18641865)"," (18651868)","","","",""],long:[" (645650)"," (650671)"," (672686)"," (686701)"," (701704)"," (704708)"," (708715)"," (715717)"," (717724)"," (724729)"," (729749)","- (749-749)","- (749-757)","- (757-765)","- (765-767)","- (767-770)"," (770780)"," (781782)"," (782806)"," (806810)"," (810824)"," (824834)"," (834848)"," (848851)"," (851854)"," (854857)"," (857859)"," (859877)"," (877885)"," (885889)"," (889898)"," (898901)"," (901923)"," (923931)"," (931938)"," (938947)"," (947957)"," (957961)"," (961964)"," (964968)"," (968970)"," (970973)"," (973976)"," (976978)"," (978983)"," (983985)"," (985987)"," (987989)"," (989990)"," (990995)"," (995999)"," (9991004)"," (10041012)"," (10121017)"," (10171021)"," (10211024)"," (10241028)"," (10281037)"," (10371040)"," (10401044)"," (10441046)"," (10461053)"," (10531058)"," (10581065)"," (10651069)"," (10691074)"," (10741077)"," (10771081)"," (10811084)"," (10841087)"," (10871094)"," (10941096)"," (10961097)"," (10971099)"," (10991104)"," (11041106)"," (11061108)"," (11081110)"," (11101113)"," (11131118)"," (11181120)"," (11201124)"," (11241126)"," (11261131)"," (11311132)"," (11321135)"," (11351141)"," (11411142)"," (11421144)"," (11441145)"," (11451151)"," (11511154)"," (11541156)"," (11561159)"," (11591160)"," (11601161)"," (11611163)"," (11631165)"," (11651166)"," (11661169)"," (11691171)"," (11711175)"," (11751177)"," (11771181)"," (11811182)"," (11821184)"," (11841185)"," (11851190)"," (11901199)"," (11991201)"," (12011204)"," (12041206)"," (12061207)"," (12071211)"," (12111213)"," (12131219)"," (12191222)"," (12221224)"," (12241225)"," (12251227)"," (12271229)"," (12291232)"," (12321233)"," (12331234)"," (12341235)"," (12351238)"," (12381239)"," (12391240)"," (12401243)"," (12431247)"," (12471249)"," (12491256)"," (12561257)"," (12571259)"," (12591260)"," (12601261)"," (12611264)"," (12641275)"," (12751278)"," (12781288)"," (12881293)"," (12931299)"," (12991302)"," (13021303)"," (13031306)"," (13061308)"," (13081311)"," (13111312)"," (13121317)"," (13171319)"," (13191321)"," (13211324)"," (13241326)"," (13261329)"," (13291331)"," (13311334)"," (13341336)"," (13361340)"," (13401346)"," (13461370)"," (13701372)"," (13721375)"," (13751379)"," (13791381)"," (13811384)"," (13841392)"," (13841387)"," (13871389)"," (13891390)"," (13901394)"," (13941428)"," (14281429)"," (14291441)"," (14411444)"," (14441449)"," (14491452)"," (14521455)"," (14551457)"," (14571460)"," (14601466)"," (14661467)"," (14671469)"," (14691487)"," (14871489)"," (14891492)"," (14921501)"," (15011504)"," (15041521)"," (15211528)"," (15281532)"," (15321555)"," (15551558)"," (15581570)"," (15701573)"," (15731592)"," (15921596)"," (15961615)"," (16151624)"," (16241644)"," (16441648)"," (16481652)"," (16521655)"," (16551658)"," (16581661)"," (16611673)"," (16731681)"," (16811684)"," (16841688)"," (16881704)"," (17041711)"," (17111716)"," (17161736)"," (17361741)"," (17411744)"," (17441748)"," (17481751)"," (17511764)"," (17641772)"," (17721781)"," (17811789)"," (17891801)"," (18011804)"," (18041818)"," (18181830)"," (18301844)"," (18441848)"," (18481854)"," (18541860)"," (18601861)"," (18611864)"," (18641865)"," (18651868)","","","",""]},dayPeriods:{am:"",pm:""}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},roc:{months:{narrow:["..","..","..","..","..","..","..","..","..","..","..",".."],short:["..","..","..","..","..","..","..","..","..","..","..",".."],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:[".",".",".",".",".",".","."],long:["","","","","","",""]},eras:{narrow:["",""],short:["",""],long:["",""]},dayPeriods:{am:"",pm:""}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""},thai:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"CN",EUR:"",GBP:"",HKD:"HK$",ILS:"",INR:"",JPY:"",KRW:"",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"US$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},320:()=>{IntlPolyfill.__addLocaleData({locale:"zh",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"dE",Ehm:"E ah:mm",EHm:"EHH:mm",Ehms:"E ah:mm:ss",EHms:"EHH:mm:ss",Gy:"Gy",GyMMM:"GyM",GyMMMd:"GyMd",GyMMMEd:"GyMdE",h:"ah",H:"H",hm:"ah:mm",Hm:"HH:mm",hms:"ah:mm:ss",Hms:"HH:mm:ss",hmsv:"v ah:mm:ss",Hmsv:"v HH:mm:ss",hmv:"v ah:mm",Hmv:"v HH:mm",M:"M",Md:"M/d",MEd:"M/dE",MMdd:"MM/dd",MMM:"LLL",MMMd:"Md",MMMEd:"MdE",MMMMd:"Md",ms:"mm:ss",y:"y",yM:"yM",yMd:"y/M/d",yMEd:"y/M/dE",yMM:"yM",yMMM:"yM",yMMMd:"yMd",yMMMEd:"yMdE",yMMMM:"yM",yQQQ:"yQ",yQQQQ:"yQ"},dateFormats:{yMMMMEEEEd:"yMdEEEE",yMMMMd:"yMd",yMMMd:"yMd",yMd:"y/M/d"},timeFormats:{hmmsszzzz:"zzzz ah:mm:ss",hmsz:"z ah:mm:ss",hms:"ah:mm:ss",hm:"ah:mm"}},calendars:{buddhist:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},chinese:{months:{narrow:["","","","","","","","","","","",""],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},dayPeriods:{am:"",pm:""}},coptic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["1","2","3","4","5","6","7","8","9","10","11","12","13"],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},dangi:{months:{narrow:["","","","","","","","","","","",""],short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},dayPeriods:{am:"",pm:""}},ethiopic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["1","2","3","4","5","6","7","8","9","10","11","12","13"],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},ethioaa:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13"],short:["1","2","3","4","5","6","7","8","9","10","11","12","13"],long:["","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0"],short:["ERA0"],long:["ERA0"]},dayPeriods:{am:"",pm:""}},generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"",pm:""}},gregory:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["","","",""],short:["","","",""],long:["","","",""]},dayPeriods:{am:"",pm:""}},hebrew:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],short:["1","2","3","4","5","6","7","8","9","10","11","12","13","7"],long:["","","","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},indian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},islamic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},islamicc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},japanese:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["Taika (645650)","Hakuchi (650671)","Hakuh (672686)","Shuch (686701)","Taih (701704)","Keiun (704708)","Wad (708715)","Reiki (715717)","Yr (717724)","Jinki (724729)","Tenpy (729749)","Tenpy-kamp (749-749)","Tenpy-shh (749-757)","Tenpy-hji (757-765)","Tenpy-jingo (765-767)","Jingo-keiun (767-770)","Hki (770780)","Ten- (781-782)","Enryaku (782806)","Daid (806810)","Knin (810824)","Tench (824834)","Jwa (834848)","Kaj (848851)","Ninju (851854)","Saik (854857)","Ten-an (857-859)","Jgan (859877)","Gangy (877885)","Ninna (885889)","Kanpy (889898)","Shtai (898901)","Engi (901923)","Ench (923931)","Jhei (931938)","Tengy (938947)","Tenryaku (947957)","Tentoku (957961)","wa (961964)","Kh (964968)","Anna (968970)","Tenroku (970973)","Tenen (973976)","Jgen (976978)","Tengen (978983)","Eikan (983985)","Kanna (985987)","Eien (987989)","Eiso (989990)","Shryaku (990995)","Chtoku (995999)","Chh (9991004)","Kank (10041012)","Chwa (10121017)","Kannin (10171021)","Jian (10211024)","Manju (10241028)","Chgen (10281037)","Chryaku (10371040)","Chky (10401044)","Kantoku (10441046)","Eish (10461053)","Tengi (10531058)","Khei (10581065)","Jiryaku (10651069)","Enky (10691074)","Shho (10741077)","Shryaku (10771081)","Eih (10811084)","toku (10841087)","Kanji (10871094)","Kah (10941096)","Eich (10961097)","Jtoku (10971099)","Kwa (10991104)","Chji (11041106)","Kash (11061108)","Tennin (11081110)","Ten-ei (1110-1113)","Eiky (11131118)","Genei (11181120)","Han (11201124)","Tenji (11241126)","Daiji (11261131)","Tensh (11311132)","Chsh (11321135)","Hen (11351141)","Eiji (11411142)","Kji (11421144)","Teny (11441145)","Kyan (11451151)","Ninpei (11511154)","Kyju (11541156)","Hgen (11561159)","Heiji (11591160)","Eiryaku (11601161)","ho (11611163)","Chkan (11631165)","Eiman (11651166)","Ninan (11661169)","Ka (11691171)","Shan (11711175)","Angen (11751177)","Jish (11771181)","Ywa (11811182)","Juei (11821184)","Genryaku (11841185)","Bunji (11851190)","Kenky (11901199)","Shji (11991201)","Kennin (12011204)","Genky (12041206)","Kenei (12061207)","Jgen (12071211)","Kenryaku (12111213)","Kenp (12131219)","Jky (12191222)","J (12221224)","Gennin (12241225)","Karoku (12251227)","Antei (12271229)","Kanki (12291232)","Jei (12321233)","Tenpuku (12331234)","Bunryaku (12341235)","Katei (12351238)","Ryakunin (12381239)","En (12391240)","Ninji (12401243)","Kangen (12431247)","Hji (12471249)","Kench (12491256)","Kgen (12561257)","Shka (12571259)","Shgen (12591260)","Bun (12601261)","Kch (12611264)","Bunei (12641275)","Kenji (12751278)","Kan (12781288)","Sh (12881293)","Einin (12931299)","Shan (12991302)","Kengen (13021303)","Kagen (13031306)","Tokuji (13061308)","Enky (13081311)","ch (13111312)","Shwa (13121317)","Bunp (13171319)","Gen (13191321)","Genk (13211324)","Shch (13241326)","Karyaku (13261329)","Gentoku (13291331)","Genk (13311334)","Kenmu (13341336)","Engen (13361340)","Kkoku (13401346)","Shhei (13461370)","Kentoku (13701372)","Bunch (13721375)","Tenju (13751379)","Kryaku (13791381)","Kwa (13811384)","Gench (13841392)","Meitoku (13841387)","Kakei (13871389)","K (13891390)","Meitoku (13901394)","ei (13941428)","Shch (14281429)","Eiky (14291441)","Kakitsu (14411444)","Bunan (14441449)","Htoku (14491452)","Kytoku (14521455)","Ksh (14551457)","Chroku (14571460)","Kansh (14601466)","Bunsh (14661467)","nin (14671469)","Bunmei (14691487)","Chky (14871489)","Entoku (14891492)","Mei (14921501)","Bunki (15011504)","Eish (15041521)","Taiei (15211528)","Kyroku (15281532)","Tenbun (15321555)","Kji (15551558)","Eiroku (15581570)","Genki (15701573)","Tensh (15731592)","Bunroku (15921596)","Keich (15961615)","Genna (16151624)","Kanei (16241644)","Shho (16441648)","Keian (16481652)","J (16521655)","Meireki (16551658)","Manji (16581661)","Kanbun (16611673)","Enp (16731681)","Tenna (16811684)","Jky (16841688)","Genroku (16881704)","Hei (17041711)","Shtoku (17111716)","Kyh (17161736)","Genbun (17361741)","Kanp (17411744)","Enky (17441748)","Kanen (17481751)","Hreki (17511764)","Meiwa (17641772)","Anei (17721781)","Tenmei (17811789)","Kansei (17891801)","Kywa (18011804)","Bunka (18041818)","Bunsei (18181830)","Tenp (18301844)","Kka (18441848)","Kaei (18481854)","Ansei (18541860)","Manen (18601861)","Bunky (18611864)","Genji (18641865)","Kei (18651868)","M","T","S","H"],short:[" (645650)"," (650671)"," (672686)"," (686701)"," (701704)"," (704708)"," (708715)"," (715717)"," (717724)"," (724729)"," (729749)"," (749749)"," (749757)"," (757765)"," (765767)"," (767770)"," (770780)"," (781782)"," (782806)"," (806810)"," (810824)"," (824834)"," (834848)"," (848851)"," (851854)"," (854857)"," (857859)"," (859877)"," (877885)"," (885889)"," (889898)"," (898901)"," (901923)"," (923931)"," (931938)"," (938947)"," (947957)"," (957961)"," (961964)"," (964968)"," (968970)"," (970973)"," (973976)"," (976978)"," (978983)"," (983985)"," (985987)"," (987989)"," (989990)"," (990995)"," (995999)"," (9991004)"," (10041012)"," (10121017)"," (10171021)"," (10211024)"," (10241028)"," (10281037)"," (10371040)"," (10401044)"," (10441046)"," (10461053)"," (10531058)"," (10581065)"," (10651069)"," (10691074)"," (10741077)"," (10771081)"," (10811084)"," (10841087)"," (10871094)"," (10941096)"," (10961097)"," (10971099)"," (10991104)"," (11041106)"," (11061108)"," (11081110)"," (11101113)"," (11131118)"," (11181120)"," (11201124)"," (11241126)"," (11261131)"," (11311132)"," (11321135)"," (11351141)"," (11411142)"," (11421144)"," (11441145)"," (11451151)"," (11511154)"," (11541156)"," (11561159)"," (11591160)"," (11601161)"," (11611163)"," (11631165)"," (11651166)"," (11661169)"," (11691171)"," (11711175)"," (11751177)"," (11771181)"," (11811182)"," (11821184)"," (11841185)"," (11851190)"," (11901199)"," (11991201)"," (12011204)"," (12041206)"," (12061207)"," (12071211)"," (12111213)"," (12131219)"," (12191222)"," (12221224)"," (12241225)"," (12251227)"," (12271229)"," (12291232)"," (12321233)"," (12331234)"," (12341235)"," (12351238)"," (12381239)"," (12391240)"," (12401243)"," (12431247)"," (12471249)"," (12491256)"," (12561257)"," (12571259)"," (12591260)"," (12601261)"," (12611264)"," (12641275)"," (12751278)"," (12781288)"," (12881293)"," (12931299)"," (12991302)"," (13021303)"," (13031306)"," (13061308)"," (13081311)"," (13111312)"," (13121317)"," (13171319)"," (13191321)"," (13211324)"," (13241326)"," (13261329)"," (13291331)"," (13311334)"," (13341336)"," (13361340)"," (13401346)"," (13461370)"," (13701372)"," (13721375)"," (13751379)"," (13791381)"," (13811384)"," (13841392)"," (13841387)"," (13871389)"," (13891390)"," (13901394)"," (13941428)"," (14281429)"," (14291441)"," (14411444)"," (14441449)"," (14491452)"," (14521455)"," (14551457)"," (14571460)"," (14601466)"," (14661467)"," (14671469)"," (14691487)"," (14871489)"," (14891492)"," (14921501)"," (15011504)"," (15041521)"," (15211528)"," (15281532)"," (15321555)"," (15551558)"," (15581570)"," (15701573)"," (15731592)"," (15921596)"," (15961615)"," (16151624)"," (16241644)"," (16441648)"," (16481652)"," (16521655)"," (16551658)"," (16581661)"," (16611673)"," (16731681)"," (16811684)"," (16841688)"," (16881704)"," (17041711)"," (17111716)"," (17161736)"," (17361741)"," (17411744)"," (17441748)"," (17481751)"," (17511764)"," (17641772)"," (17721781)"," (17811789)"," (17891801)"," (18011804)"," (18041818)"," (18181830)"," (18301844)"," (18441848)"," (18481854)"," (18541860)"," (18601861)"," (18611864)"," (18641865)"," (18651868)","","","",""],long:[" (645650)"," (650671)"," (672686)"," (686701)"," (701704)"," (704708)"," (708715)"," (715717)"," (717724)"," (724729)"," (729749)"," (749749)"," (749757)"," (757765)"," (765767)"," (767770)"," (770780)"," (781782)"," (782806)"," (806810)"," (810824)"," (824834)"," (834848)"," (848851)"," (851854)"," (854857)"," (857859)"," (859877)"," (877885)"," (885889)"," (889898)"," (898901)"," (901923)"," (923931)"," (931938)"," (938947)"," (947957)"," (957961)"," (961964)"," (964968)"," (968970)"," (970973)"," (973976)"," (976978)"," (978983)"," (983985)"," (985987)"," (987989)"," (989990)"," (990995)"," (995999)"," (9991004)"," (10041012)"," (10121017)"," (10171021)"," (10211024)"," (10241028)"," (10281037)"," (10371040)"," (10401044)"," (10441046)"," (10461053)"," (10531058)"," (10581065)"," (10651069)"," (10691074)"," (10741077)"," (10771081)"," (10811084)"," (10841087)"," (10871094)"," (10941096)"," (10961097)"," (10971099)"," (10991104)"," (11041106)"," (11061108)"," (11081110)"," (11101113)"," (11131118)"," (11181120)"," (11201124)"," (11241126)"," (11261131)"," (11311132)"," (11321135)"," (11351141)"," (11411142)"," (11421144)"," (11441145)"," (11451151)"," (11511154)"," (11541156)"," (11561159)"," (11591160)"," (11601161)"," (11611163)"," (11631165)"," (11651166)"," (11661169)"," (11691171)"," (11711175)"," (11751177)"," (11771181)"," (11811182)"," (11821184)"," (11841185)"," (11851190)"," (11901199)"," (11991201)"," (12011204)"," (12041206)"," (12061207)"," (12071211)"," (12111213)"," (12131219)"," (12191222)"," (12221224)"," (12241225)"," (12251227)"," (12271229)"," (12291232)"," (12321233)"," (12331234)"," (12341235)"," (12351238)"," (12381239)"," (12391240)"," (12401243)"," (12431247)"," (12471249)"," (12491256)"," (12561257)"," (12571259)"," (12591260)"," (12601261)"," (12611264)"," (12641275)"," (12751278)"," (12781288)"," (12881293)"," (12931299)"," (12991302)"," (13021303)"," (13031306)"," (13061308)"," (13081311)"," (13111312)"," (13121317)"," (13171319)"," (13191321)"," (13211324)"," (13241326)"," (13261329)"," (13291331)"," (13311334)"," (13341336)"," (13361340)"," (13401346)"," (13461370)"," (13701372)"," (13721375)"," (13751379)"," (13791381)"," (13811384)"," (13841392)"," (13841387)"," (13871389)"," (13891390)"," (13901394)"," (13941428)"," (14281429)"," (14291441)"," (14411444)"," (14441449)"," (14491452)"," (14521455)"," (14551457)"," (14571460)"," (14601466)"," (14661467)"," (14671469)"," (14691487)"," (14871489)"," (14891492)"," (14921501)"," (15011504)"," (15041521)"," (15211528)"," (15281532)"," (15321555)"," (15551558)"," (15581570)"," (15701573)"," (15731592)"," (15921596)"," (15961615)"," (16151624)"," (16241644)"," (16441648)"," (16481652)"," (16521655)"," (16551658)"," (16581661)"," (16611673)"," (16731681)"," (16811684)"," (16841688)"," (16881704)"," (17041711)"," (17111716)"," (17161736)"," (17361741)"," (17411744)"," (17441748)"," (17481751)"," (17511764)"," (17641772)"," (17721781)"," (17811789)"," (17891801)"," (18011804)"," (18041818)"," (18181830)"," (18301844)"," (18441848)"," (18481854)"," (18541860)"," (18601861)"," (18611864)"," (18641865)"," (18651868)","","","",""]},dayPeriods:{am:"",pm:""}},persian:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:[""],short:[""],long:[""]},dayPeriods:{am:"",pm:""}},roc:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1","2","3","4","5","6","7","8","9","10","11","12"],long:["","","","","","","","","","","",""]},days:{narrow:["","","","","","",""],short:["","","","","","",""],long:["","","","","","",""]},eras:{narrow:["",""],short:["",""],long:["",""]},dayPeriods:{am:"",pm:""}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{hanidec:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""},latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:""}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"",EUR:"",GBP:"",HKD:"HK$",ILR:"ILS",ILS:"",INR:"",JPY:"JP",KRW:"",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"US$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}})},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),h=1;h<arguments.length;h++){for(var l in o=Object(arguments[h]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(u[s[c]]=o[s[c]])}}return u}},587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var h=0;h<u;++h){var l,c,d,f,p=e[h].replace(o,"%20"),g=p.indexOf(r);g>=0?(l=p.substr(0,g),c=p.substr(g+1)):(l=p,c=""),d=decodeURIComponent(l),f=decodeURIComponent(c),t(a,d)?Array.isArray(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a}},361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var a=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return a+encodeURIComponent(t(e))})).join(n):a+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},673:(e,t,n)=>{"use strict";t.decode=t.parse=n(587),t.encode=t.stringify=n(361)},294:e=>{e.exports=function(e){var t=e.file.readJSON("package.json");e.initConfig({pkg:t,banner:e.file.read("./src/copy.js").replace(/@VERSION/,t.version).replace(/@DATE/,e.template.today("yyyy-mm-dd"))+"\n",uglify:{options:{banner:"<%= banner %>",report:"min"},dist:{src:"<%= concat.target.dest %>",dest:"dist/snap.svg-min.js"}},concat:{options:{banner:"<%= banner %>"},target:{dest:"dist/snap.svg.js",src:["./node_modules/eve/eve.js","./src/amd-banner.js","./src/mina.js","./src/svg.js","./src/matrix.js","./src/attr.js","./src/attradd.js","./src/paper.js","./src/path.js","./src/set.js","./src/equal.js","./src/mouse.js","./src/filter.js","./src/amd-footer.js"]}},exec:{dr:{command:"node node_modules/dr.js/dr dr.json"}}}),e.loadNpmTasks("grunt-contrib-concat"),e.loadNpmTasks("grunt-contrib-uglify"),e.loadNpmTasks("grunt-exec"),e.registerTask("default",["concat","uglify","exec"])}},511:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof n.g&&n.g;a.global!==a&&a.window!==a&&a.self;var o,s=2147483647,u=36,h=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function g(e){throw RangeError(d[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function v(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(c,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function b(e){return m(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;r+=u)e=f(e/35);return f(r+36*e/(e+38))}function T(e){var t,n,r,i,a,o,h,l,c,d,p,m=[],v=e.length,y=0,_=128,T=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(a=y,o=1,h=u;i>=v&&g("invalid-input"),((l=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||l>f((s-y)/o))&&g("overflow"),y+=l*o,!(l<(c=h<=T?1:h>=T+26?26:h-T));h+=u)o>f(s/(d=u-c))&&g("overflow"),o*=d;T=E(y-a,t=m.length+1,0==a),f(y/t)>s-_&&g("overflow"),_+=f(y/t),y%=t,m.splice(y++,0,_)}return b(m)}function x(e){var t,n,r,i,a,o,h,l,c,d,m,v,b,T,x,k=[];for(v=(e=y(e)).length,t=128,n=0,a=72,o=0;o<v;++o)(m=e[o])<128&&k.push(p(m));for(r=i=k.length,i&&k.push("-");r<v;){for(h=s,o=0;o<v;++o)(m=e[o])>=t&&m<h&&(h=m);for(h-t>f((s-n)/(b=r+1))&&g("overflow"),n+=(h-t)*b,t=h,o=0;o<v;++o)if((m=e[o])<t&&++n>s&&g("overflow"),m==t){for(l=n,c=u;!(l<(d=c<=a?1:c>=a+26?26:c-a));c+=u)x=l-d,T=u-d,k.push(p(_(d+x%T,0))),l=f(x/T);k.push(p(_(l,0))),a=E(n,b,r==i),n=0,++r}++n,++t}return k.join("")}o={version:"1.3.2",ucs2:{decode:y,encode:b},decode:T,encode:x,toASCII:function(e){return v(e,(function(e){return l.test(e)?"xn--"+x(e):e}))},toUnicode:function(e){return v(e,(function(e){return h.test(e)?T(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},575:(e,t,n)=>{"use strict";var r=n(511),i=n(502);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=b,t.DB=function(e,t){return b(e,!1,!0).resolve(t)},t.WU=function(e){return i.isString(e)&&(e=b(e)),e instanceof a?e.format():a.prototype.format.call(e)};var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),c=["%","/","?",";","#"].concat(l),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(673);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,n),r}a.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",h=e.split(s);h[0]=h[0].replace(/\\/g,"/");var b=e=h.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var _=u.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=o.exec(b);if(E){var T=(E=E[0]).toLowerCase();this.protocol=T,b=b.substr(E.length)}if(n||E||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||E&&m[E]||(b=b.substr(2),this.slashes=!0)}if(!m[E]&&(x||E&&!v[E])){for(var k,S,w=-1,M=0;M<d.length;M++)-1!==(A=b.indexOf(d[M]))&&(-1===w||A<w)&&(w=A);for(-1!==(S=-1===w?b.lastIndexOf("@"):b.lastIndexOf("@",w))&&(k=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(k)),w=-1,M=0;M<c.length;M++){var A;-1!==(A=b.indexOf(c[M]))&&(-1===w||A<w)&&(w=A)}-1===w&&(w=b.length),this.host=b.slice(0,w),b=b.slice(w),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var C=this.hostname.split(/\./),P=(M=0,C.length);M<P;M++){var I=C[M];if(I&&!I.match(f)){for(var N="",O=0,D=I.length;O<D;O++)I.charCodeAt(O)>127?N+="x":N+=I[O];if(!N.match(f)){var L=C.slice(0,M),B=C.slice(M+1),F=I.match(p);F&&(L.push(F[1]),B.unshift(F[2])),B.length&&(b="/"+B.join(".")+b),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var G=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+G,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[T])for(M=0,P=l.length;M<P;M++){var H=l[M];if(-1!==b.indexOf(H)){var j=encodeURIComponent(H);j===H&&(j=escape(H)),b=b.split(H).join(j)}}var K=b.indexOf("#");-1!==K&&(this.hash=b.substr(K),b=b.slice(0,K));var X=b.indexOf("?");if(-1!==X?(this.search=b.substr(X),this.query=b.substr(X+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,X)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var z=this.search||"";this.path=G+z}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),h=0;h<u.length;h++){var l=u[h];"protocol"!==l&&(n[l]=e[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var c=Object.keys(e),d=0;d<c.length;d++){var f=c[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=_||b||n.host&&e.pathname,T=E,x=n.pathname&&n.pathname.split("/")||[],k=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(k&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),E=E&&(""===p[0]||""===x[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return k&&(n.hostname=n.host=x.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=x.slice(-1)[0],w=(n.host||e.host||x.length>1)&&("."===S||".."===S)||""===S,M=0,A=x.length;A>=0;A--)"."===(S=x[A])?x.splice(A,1):".."===S?(x.splice(A,1),M++):M&&(x.splice(A,1),M--);if(!E&&!T)for(;M--;M)x.unshift("..");!E||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),w&&"/"!==x.join("/").substr(-1)&&x.push("");var R,C=""===x[0]||x[0]&&"/"===x[0].charAt(0);return k&&(n.hostname=n.host=C?"":x.length?x.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),(E=E||n.host&&x.length)&&!C&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},374:()=>{},482:()=>{},61:(e,t,n)=>{var r=n(698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new w(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f={};function p(){}function g(){}function m(){}var v={};l(v,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(M([])));b&&b!==n&&a.call(b,s)&&(v=b);var _=m.prototype=p.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,o,s,u){var h=d(e[i],e,o);if("throw"!==h.type){var l=h.arg,c=l.value;return c&&"object"==r(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(h.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function M(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return g.prototype=m,l(_,"constructor",m),l(m,"constructor",g),g.displayName=l(m,h,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,h,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},E(T.prototype),l(T.prototype,u,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(_),l(_,h,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:(e,t,n)=>{var r=n(61)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(334);function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var i=function(){function e(){t(this,e)}return r(e,null,[{key:"set",value:function(e,t){var n=new Date;n.setTime(n.getTime()+31536e6);var r="; expires=".concat(n.toGMTString());document.cookie="".concat(e,"=").concat(t).concat(r,"; path=/")}},{key:"get",value:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}}]),e}(),a=__webpack_require__(267),o=__webpack_require__.n(a);function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var l=__webpack_require__(687),c=__webpack_require__.n(l),d=function(){function n(r,i){t(this,n),e.Dt?(this.url=r,this.soundPlayId=null):(this.name=r,this.time=i,this.playing=!1)}return r(n,[{key:"play",value:function(){e.Dt?(this.soundPlayId&&this.stop(),this.soundPlayId=AndroidInterface.audio_play(this.url,1)):(this.playing&&this.stop(),ny.playSound(this.name),this.playing=!0)}},{key:"done",value:function(){return e.Dt?!this.soundPlayId||!AndroidInterface.audio_isplaying(this.soundPlayId):!this.playing}},{key:"clear",value:function(){e.Dt?this.soundPlayId=null:this.playing=!1}},{key:"stop",value:function(){e.Dt?(this.soundPlayId&&AndroidInterface.audio_stop(this.soundPlayId),this.soundPlayId=null):(ny.stopSound(this.name),this.playing=!1)}}]),n}(),f={},p=["cut.wav","snap.wav","copy.wav","grab.wav","boing.wav","tap.wav","keydown.wav","entertap.wav","exittap.wav","splash.wav"],g={},m=function(){function n(){t(this,n)}return r(n,null,[{key:"uiSounds",get:function(){return f}},{key:"projectSounds",get:function(){return g}},{key:"sndFX",value:function(e){n.sndFXWithVolume(e,1)}},{key:"sndFXWithVolume",value:function(t,n){if(e.Dt)AndroidInterface.audio_sndfxwithvolume(t,n);else{if(!f[t])return;f[t].play()}}},{key:"init",value:function(t){t||(t=""),e.Dt||(t="HTML5/"),f={};for(var r=0;r<p.length;r++)n.addSound("".concat(t,"sounds/"),p[r],f);n.addSound(t,"pop.mp3",g)}},{key:"addSound",value:function(t,n,r,i){var a=n;e.Dt?(r[n]=new d(t+n),i&&i(n)):ny.registerSound(t,n,(function(e){if("error"===e)a="error";else{var t=n.split(",");r[n]=new d(t[0],t[1])}i&&i(a)}))}},{key:"soundDone",value:function(e){g[e]&&(g[e].playing=!1)}},{key:"loadProjectSound",value:function(t,r){if(t){var i="";e.Dt||(t.indexOf("/")>-1?i="HTML5/":(t.indexOf("wav")>-1||t.indexOf("mp3")>-1)&&(i="Documents")),n.loadFromLocal(i,t,r)}}},{key:"loadFromLocal",value:function(e,t,r){g[t]||n.addSound(e,t,g,r)}}]),n}();window.ScratchAudio=m;var v,y=0,b={},_=["#c4281b","#da8540","#ffdd33","#287f46","#0d50ab","#ff8ae9","#8f56e3","#f2f3f2","#6d6e6c","#1b2a34"],E=[16,24,36,48,56,72],T=["LetterGet_Orange","LetterGet_Red","LetterGet_Yellow","LetterGet_Green","LetterGet_Blue","LetterGet_Purple"],x=["LetterSend_Orange","LetterSend_Red","LetterSend_Yellow","LetterSend_Green","LetterSend_Blue","LetterSend_Purple"],k=["speed0","speed1","speed2"],S=function(){function e(){t(this,e)}return r(e,null,[{key:"loadCount",get:function(){return y},set:function(e){y=e}},{key:"fontcolors",get:function(){return _}},{key:"fontsizes",get:function(){return E}},{key:"speeds",get:function(){return k}},{key:"initBlocks",value:function(){b=new Object,e.loadGraphics(),e.defs=e.setupBlocksSpecs(),e.palettes=e.setupPalettesDef(),e.categories=e.setupCategories(),"PBS"===window.Settings.edition?e.canvasMask=e.getImageFrom("assets/ui/canvasmask","svg"):e.canvasMask=e.getImageFrom("assets/ui/canvasmask"),"PBS"!==window.Settings.edition&&(e.projectThumb=e.getImageFrom("assets/lobby/pmask")),sy.requestFromServer("assets/balloon.svg",e.setBalloon),y++}},{key:"setBalloon",value:function(t){y--,e.balloon=t}},{key:"loadGraphics",value:function(){e.mic=e.getImageFrom("assets/ui/recordslot","svg"),e.yellowStart=e.getImageFrom("assets/blocks/start","svg"),e.yellowStartH=e.getImageFrom("assets/blocks/eh/startH"),e.yellowCmd=e.getImageFrom("assets/blocks/yellowCmd","svg"),e.yellowCmdH=e.getImageFrom("assets/blocks/eh/yellowCmdH"),e.redEnd=e.getImageFrom("assets/blocks/endshort","svg"),e.redEndH=e.getImageFrom("assets/blocks/eh/stopH"),e.orangeCmd=e.getImageFrom("assets/blocks/flow","svg"),e.orangeCmdH=e.getImageFrom("assets/blocks/eh/flowH"),e.limeCmd=e.getImageFrom("assets/blocks/sounds","svg"),e.limeCmdH=e.getImageFrom("assets/blocks/eh/soundsH"),e.pinkCmd=e.getImageFrom("assets/blocks/looks","svg"),e.pinkCmdH=e.getImageFrom("assets/blocks/eh/looksH"),e.redEndLong=e.getImageFrom("assets/blocks/endlong","svg"),e.redEndLongH=e.getImageFrom("assets/blocks/eh/stoplongH"),e.cShape=e.getImageFrom("assets/blocks/repeat"),e.cShapeH=e.getImageFrom("assets/blocks/eh/repeatH"),e.blueCmd=e.getImageFrom("assets/blocks/blueCmd","svg"),e.blueCmdH=e.getImageFrom("assets/blocks/eh/blueCmdH"),e.textfieldimg=e.getImageFrom("assets/misc/Text-01"),e.numfieldimg=e.getImageFrom("assets/misc/Number-01"),e.pressbutton=e.getImageFrom("assets/misc/pushbutton-01","svg"),e.pressbuttonSmall=e.getImageFrom("assets/misc/pushbutton","svg"),e.caretrepeat=e.getImageFrom("assets/blocks/caretrepeat"),e.cmdS=e.getImageFrom("assets/blocks/shadowCmd","svg"),e.startS=e.getImageFrom("assets/blocks/shadowStart","svg"),e.endS=e.getImageFrom("assets/blocks/shadowEndShort","svg"),e.endLongS=e.getImageFrom("assets/blocks/shadowEndLong","svg"),e.repeatS=e.getImageFrom("assets/blocks/shadowRepeat")}},{key:"getImageFrom",value:function(e,t){var n=document.createElement("img");return n.src=e+(t?".".concat(t):".png"),n.complete||(b[n.src]=n,y++,n.onload=function(){delete b[n.src],y--}),n}},{key:"refreshLoading",value:function(){for(var e in b)b[e].complete&&y--}},{key:"setupCategories",value:function(){return new Array([e.getImageFrom("assets/categories/StartOn","svg"),e.getImageFrom("assets/categories/StartOff","svg"),window.Settings.categoryStartColor],[e.getImageFrom("assets/categories/MotionOn","svg"),e.getImageFrom("assets/categories/MotionOff","svg"),window.Settings.categoryMotionColor],[e.getImageFrom("assets/categories/LooksOn","svg"),e.getImageFrom("assets/categories/LooksOff","svg"),window.Settings.categoryLooksColor],[e.getImageFrom("assets/categories/SoundOn","svg"),e.getImageFrom("assets/categories/SoundOff","svg"),window.Settings.categorySoundColor],[e.getImageFrom("assets/categories/FlowOn","svg"),e.getImageFrom("assets/categories/FlowOff","svg"),window.Settings.categoryFlowColor],[e.getImageFrom("assets/categories/StopOn","svg"),e.getImageFrom("assets/categories/StopOff","svg"),window.Settings.categoryStopColor])}},{key:"setupPalettesDef",value:function(){return[["onflag","onclick","ontouch","onmessage","message"],["forward","back","up","down","right","left","hop","home"],["say","space","grow","shrink","same","space","hide","show"],[],["wait","stopmine","setspeed","repeat"],["endstack","forever"]]}},{key:"setupBlocksSpecs",value:function(){return{onflag:["onflag",e.getImageFrom("assets/blockicons/greenFlag","svg"),e.yellowStart,null,null,e.yellowStartH,null,null,e.startS],onmessage:["onmessage",T,e.yellowStart,"m","Orange",e.yellowStartH,null,null,e.startS],onclick:["onclick",e.getImageFrom("assets/blockicons/OnTouch","svg"),e.yellowStart,null,null,e.yellowStartH,null,null,e.startS],ontouch:["ontouch",e.getImageFrom("assets/blockicons/Bump","svg"),e.yellowStart,null,null,e.yellowStartH,null,null,e.startS],message:["message",x,e.yellowCmd,"m","Orange",e.yellowCmdH,null,null,e.cmdS],repeat:["repeat",e.getImageFrom("assets/blockicons/Repeat","svg"),e.cShape,"n",4,e.cShapeH,0,24,e.repeatS],forward:["forward",e.getImageFrom("assets/blockicons/Foward","svg"),e.blueCmd,"n",1,e.blueCmdH,-20,20,e.cmdS],back:["back",e.getImageFrom("assets/blockicons/Back","svg"),e.blueCmd,"n",1,e.blueCmdH,-20,20,e.cmdS],up:["up",e.getImageFrom("assets/blockicons/Up","svg"),e.blueCmd,"n",1,e.blueCmdH,-15,15,e.cmdS],down:["down",e.getImageFrom("assets/blockicons/Down","svg"),e.blueCmd,"n",1,e.blueCmdH,-15,15,e.cmdS],right:["right",e.getImageFrom("assets/blockicons/Right","svg"),e.blueCmd,"n",1,e.blueCmdH,-12,12,e.cmdS],left:["left",e.getImageFrom("assets/blockicons/Left","svg"),e.blueCmd,"n",1,e.blueCmdH,-12,12,e.cmdS],home:["home",e.getImageFrom("assets/blockicons/Home","svg"),e.blueCmd,null,null,e.blueCmdH,null,null,e.cmdS],hop:["hop",e.getImageFrom("assets/blockicons/Hop","svg"),e.blueCmd,"n",2,e.blueCmdH,-15,15,e.cmdS],wait:["wait",e.getImageFrom("assets/blockicons/Wait","svg"),e.orangeCmd,"n",10,e.orangeCmdH,0,50,e.cmdS],setspeed:["setspeed",k,e.orangeCmd,"d",1,e.orangeCmdH,null,null,e.cmdS],stopmine:["stopmine",e.getImageFrom("assets/blockicons/Stop","svg"),e.orangeCmd,null,null,e.orangeCmdH,null,null,e.cmdS],say:["say",e.getImageFrom("assets/blockicons/Say","svg"),e.pinkCmd,"t",fy.localize("SAY_BLOCK_DEFAULT_ARGUMENT"),e.pinkCmdH,null,null,e.cmdS],show:["show",e.getImageFrom("assets/blockicons/Appear","svg"),e.pinkCmd,null,null,e.pinkCmdH,null,null,e.cmdS],hide:["hide",e.getImageFrom("assets/blockicons/Disappear","svg"),e.pinkCmd,null,null,e.pinkCmdH,null,null,e.cmdS],grow:["grow",e.getImageFrom("assets/blockicons/Grow","svg"),e.pinkCmd,"n",2,e.pinkCmdH,-10,10,e.cmdS],shrink:["shrink",e.getImageFrom("assets/blockicons/Shrink","svg"),e.pinkCmd,"n",2,e.pinkCmdH,-10,10,e.cmdS],same:["same",e.getImageFrom("assets/blockicons/Reset","svg"),e.pinkCmd,null,null,e.pinkCmdH,null,null,e.cmdS],playsnd:["playsnd",e.getImageFrom("assets/blockicons/Speaker","svg"),e.limeCmd,"s","pop.mp3",e.limeCmdH,null,null,e.cmdS],playusersnd:["playusersnd",e.getImageFrom("assets/blockicons/Microphone","svg"),e.limeCmd,"r","1",e.limeCmdH,null,null,e.cmdS],endstack:["endstack",null,e.redEnd,null,null,e.redEndH,null,null,e.endS],forever:["forever",e.getImageFrom("assets/blockicons/Forever","svg"),e.redEnd,null,null,e.redEndH,null,null,e.endS],gotopage:["gotopage",null,e.redEndLong,"p","2",e.redEndLongH,null,null,e.endLongS],caretstart:["caretstart",null,e.getImageFrom("assets/blocks/caretstart","svg"),null,null,null,null,null],caretend:["caretend",null,e.getImageFrom("assets/blocks/caretend","svg"),null,null,null,null,null],caretrepeat:["caretrepeat",null,e.getImageFrom("assets/blocks/caretrepeat"),null,null,null,null,null],caretcmd:["caretcmd",null,e.getImageFrom("assets/blocks/caretcmd","svg"),null,null,null,null,null]}}},{key:"blockDesc",value:function(e,t){var n=e.getArgValue()?e.getArgValue().toString():"playsnd"===e.blocktype?"SOUND":"";return{onflag:fy.localize("BLOCK_DESC_GREEN_FLAG"),onclick:fy.localize("BLOCK_DESC_ON_TAP",{CHARACTER_NAME:t.name}),ontouch:fy.localize("BLOCK_DESC_ON_BUMP",{CHARACTER_NAME:t.name?t.name:""}),onmessage:fy.localize("BLOCK_DESC_ON_MESSAGE",{COLOR:fy.localize("BLOCK_DESC_MESSAGE_COLOR_ORANGE")}),repeat:fy.localize("BLOCK_DESC_REPEAT"),forward:fy.localize("BLOCK_DESC_MOVE_RIGHT"),back:fy.localize("BLOCK_DESC_MOVE_LEFT"),up:fy.localize("BLOCK_DESC_MOVE_UP"),down:fy.localize("BLOCK_DESC_MOVE_DOWN"),home:fy.localize("BLOCK_DESC_GO_HOME"),left:fy.localize("BLOCK_DESC_TURN_LEFT"),right:fy.localize("BLOCK_DESC_TURN_RIGHT"),hop:fy.localize("BLOCK_DESC_HOP"),wait:fy.localize("BLOCK_DESC_WAIT"),setspeed:fy.localize("BLOCK_DESC_SET_SPEED"),stopmine:fy.localize("BLOCK_DESC_STOP",{CHARACTER_NAME:t.name?t.name:t.str}),say:fy.localize("BLOCK_DESC_SAY"),show:fy.localize("BLOCK_DESC_SHOW"),hide:fy.localize("BLOCK_DESC_HIDE"),grow:fy.localize("BLOCK_DESC_GROW"),shrink:fy.localize("BLOCK_DESC_SHRINK"),same:fy.localize("BLOCK_DESC_RESET_SIZE"),playsnd:fy.localize("BLOCK_DESC_PLAY_SOUND",{SOUND_NAME:fy.localize("BLOCK_DESC_PLAY_SOUND_POP")}),playusersnd:fy.localize("BLOCK_DESC_PLAY_RECORDED_SOUND"),endstack:fy.localize("BLOCK_DESC_END"),stopall:fy.localize("BLOCK_DESC_STOP",{CHARACTER_NAME:t.name?t.name:""}),forever:fy.localize("BLOCK_DESC_REPEAT_FOREVER"),gotopage:fy.localize("BLOCK_DESC_GO_TO_PAGE",{PAGE:n}),message:fy.localize("BLOCK_DESC_SEND_MESSAGE",{COLOR:fy.localize("BLOCK_DESC_MESSAGE_COLOR_ORANGE")})}}}]),e}(),w=function(){function e(){t(this,e)}return r(e,null,[{key:"sum",value:function(e,t){var n={};return n.x=e.x+t.x,n.y=e.y+t.y,n}},{key:"diff",value:function(e,t){var n={};return n.x=e.x-t.x,n.y=e.y-t.y,n}},{key:"equal",value:function(t,n){return 0===e.len(e.diff(t,n))}},{key:"floor",value:function(e){var t={};return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t}},{key:"neg",value:function(e){var t={};return t.x=-e.x,t.y=-e.y,t}},{key:"len",value:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}},{key:"norm",value:function(t){var n=e.len(t),r={};return 0===n&&(n=.001),r.x=t.x/n,r.y=t.y/n,r}},{key:"perp",value:function(e){var t={};return t.x=-e.y,t.y=e.x,t}},{key:"scale",value:function(e,t){var n={};return n.x=e.x*t,n.y=e.y*t,n}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"mid",value:function(e,t){var n={};return n.x=(e.x+t.x)/2,n.y=(e.y+t.y)/2,n}},{key:"lineIntersect",value:function(t,n,r,i){var a=e.diff(n,t),o=e.diff(i,r),s=e.diff(t,r),u=o.y*a.x-o.x*a.y,h=o.x*s.y-o.y*s.x,l=a.x*s.y-a.y*s.x;if(0===u)return null;var c=h/u,d=l/u;return c<0||c>1||d<0||d>1?null:{x:t.x+c*a.x,y:t.y+c*a.y}}}]),e}(),M=function(){function e(n,r,i,a){t(this,e),this.x=n,this.y=r,this.width=i,this.height=a}return r(e,[{key:"hitRect",value:function(e){var t=e.x,n=e.y;return!(t<this.x||t>this.x+this.width||n<this.y||n>this.y+this.height)}},{key:"intersects",value:function(e){return Math.max(this.x,e.x)<=Math.min(this.x+this.width,e.x+e.width)&&Math.max(this.y,e.y)<=Math.min(this.y+this.height,e.y+e.height)}},{key:"overlapElemBy",value:function(e,t){return this.overlapElem(e)>=t}},{key:"overlapElem",value:function(e){var t=this.intersection(e);return t.isEmpty()?0:t.isEqual(e)||t.isEqual(this)?1:t.width*t.height/(e.width*e.height)}},{key:"intersection",value:function(t){var n=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width);if(n<=r){var i=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return i>a?new e(0,0,0,0):new e(n,i,r-n,a-i)}return new e(0,0,0,0)}},{key:"union",value:function(t){var n=new e(0,0,0,0);return n.x=this.x<t.x?this.x:t.x,n.y=this.y<t.y?this.y:t.y,this.extentsw=9999999===this.x?0:this.x+this.width,this.extentsh=9999999===this.y?0:this.y+this.height,t.extentsw=9999999===t.x?0:t.x+t.width,t.extentsh=9999999===t.y?0:t.y+t.height,n.width=this.extentsw>t.extentsw?this.extentsw:t.extentsw,n.height=this.extentsh>t.extentsh?this.extentsh:t.extentsh,n.width-=n.x,n.height-=n.y,n.isEmpty()&&(n={x:9999999,y:9999999,width:0,height:0}),n}},{key:"expandBy",value:function(e){return this.x-=e/2,this.y-=e/2,this.width+=e,this.height+=e,this}},{key:"crop",value:function(e){this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.width+this.x>e.width+e.x&&(this.width+=e.width+e.x-(this.width+this.x)),this.height+this.y>e.height+e.y&&(this.height+=e.height+e.y-(this.height+this.y))}},{key:"getArea",value:function(){return this.width*this.height}},{key:"rounded",value:function(){return new e(Math.floor(this.x),Math.floor(this.y),Math.round(this.width)+1,Math.round(this.height)+1)}},{key:"isEqual",value:function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}},{key:"isEmpty",value:function(){return 0===this.x&&0===this.y&&0===this.width&&0===this.height}},{key:"scale",value:function(e,t){this.x*=e,this.y*=t,this.width*=e,this.height*=t}}]),e}(),A=__webpack_require__(294),R=__webpack_require__.n(A),C=!1,P=void 0,I=0,N=0,O=void 0,D=void 0,L=void 0,B=void 0,F=void 0,G=void 0,U=void 0,H=1,j=10,K={x:0,y:0,distance:0},X=1,z=function(){function n(){t(this,n)}return r(n,null,[{key:"dragged",get:function(){return C},set:function(e){C=e}},{key:"dragthumbnail",get:function(){return P},set:function(e){P=e}},{key:"dragmousex",get:function(){return I},set:function(e){I=e}},{key:"dragmousey",get:function(){return N},set:function(e){N=e}},{key:"timeoutEvent",get:function(){return O},set:function(e){O=e}},{key:"dragcanvas",get:function(){return D},set:function(e){D=e}},{key:"dragDiv",get:function(){return L}},{key:"scaleStartsAt",get:function(){return H},set:function(e){H=e}},{key:"pinchcenter",get:function(){return K}},{key:"init",value:function(){(L=document.createElement("div")).id="dragDiv",L.style.position="absolute",L.style.width="0px",L.style.height="0px",L.style.zIndex=7001,(0,e.gn)("frame").appendChild(L)}},{key:"startDrag",value:function(t,r,i,a,o,s,u){C=!1;var h=n.getTargetPoint(t);I=h.x,N=h.y,P=r,B=i,F=a,U=s,u&&n.holdit(r,u),G=o,e.Em?(j=10*e._X,window.ontouchleave=function(e){n.mouseUp(e)},window.ontouchcancel=function(e){n.mouseUp(e)}):j=7,window.ontouchmove=function(e){n.mouseMove(e)},window.ontouchend=function(e){n.mouseUp(e)},window.onmousemove=function(e){n.mouseMove(e)},window.onmouseup=function(e){n.mouseUp(e)}}},{key:"holdit",value:function(e,t){O||(O=setTimeout((function(){n.clearEvents(),t(P),n.clearDragAndDrop()}),500))}},{key:"clearDragAndDrop",value:function(){O=void 0,D=void 0,C=!1,P=void 0,B=void 0,F=void 0,G=void 0,U=void 0}},{key:"mouseMove",value:function(e){var t=n.getTargetPoint(e);!C&&n.distance(I-t.x,N-t.y)<j||(O&&clearTimeout(O),O=void 0,C||B(e),C=!0,G&&G(e,D),I=t.x,N=t.y)}},{key:"distance",value:function(e,t){return Math.round(Math.sqrt(e*e+t*t))}},{key:"mouseUp",value:function(e){O&&clearTimeout(O),O=void 0,n.clearEvents(),C?n.performMouseUpAction(e):n.itIsAClick(e),n.clearDragAndDrop()}},{key:"cancelAll",value:function(){O&&clearTimeout(O),O=void 0,n.clearEvents()}},{key:"clearEvents",value:function(){window.ontouchmove=void 0,window.ontouchend=void 0,window.onmousemove=function(e){e.preventDefault()},window.onmouseup=void 0}},{key:"performMouseUpAction",value:function(e){F&&F(e,D)}},{key:"itIsAClick",value:function(e){U&&U(e,P)}},{key:"moveThumbnail",value:function(e,t,n){e&&(e.top+=n,e.left+=t,e.style.top="".concat(e.top,"px"),e.style.left="".concat(e.left,"px"))}},{key:"move3D",value:function(e,t,n){if(e){var r=new WebKitCSSMatrix(window.getComputedStyle(e).webkitTransform);e.top=n+r.m42,e.left=t+r.m41,e.style.webkitTransform="translate3d(".concat(e.left,"px,").concat(e.top,"px, 0)")}}},{key:"getTargetPoint",value:function(t){if(e.Em){if(t.touches&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(t.changedTouches)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}}return{x:t.clientX,y:t.clientY}}},{key:"updatePinchCenter",value:function(e){if(2===e.touches.length){var t=e.touches[0].clientX,n=e.touches[0].clientY,r=e.touches[1].clientX,i=e.touches[1].clientY,a=t+(r-t)/2,o=n+(i-n)/2,s=Math.sqrt((r-t)*(r-t)+(i-n)*(i-n));K={x:a,y:o,distance:s}}}},{key:"zoomScale",value:function(e){if(2!==e.touches.length)return X;var t=e.touches[0].clientX,n=e.touches[0].clientY,r=e.touches[1].clientX,i=e.touches[1].clientY,a=Math.sqrt((r-t)*(r-t)+(i-n)*(i-n));return X=a/K.distance}}]),n}(),V=void 0,W=void 0,Y=[],J=0,q=!1,Q=10,Z={},$={},ee={},te={},ne=function(){function n(){t(this,n)}return r(n,null,[{key:"target",set:function(e){W=e}},{key:"dragGroup",get:function(){return Y}},{key:"mouseDown",value:function(t){if(W=void 0,(0,e.gn)("layer1")&&!(t.touches&&t.touches.length>1)){n.clearDragGroup(),q=!1;var r=n.getMouseTarget(t);r&&("div"!==r.tagName.toLowerCase()&&"svg"!==r.tagName.toLowerCase()&&(W=r),t.preventDefault(),wt.initialPoint=n.getScreenPt(t),wt.deltaPoint=n.getScreenPt(t),Se.hitDot(t)&&(wt.mode="grab"),V=void 0,n.clearEvents(),Z[wt.mode](t),n.setEvents())}}},{key:"clearDragGroup",value:function(){for(var t=0;t<(0,e.gn)("layer1").childElementCount;t++){var n=(0,e.gn)("layer1").childNodes[t],r=Ze.getRotation(n);if(0!==r.angle){for(var i=[],a=0;a<n.childElementCount;a++){var o=n.childNodes[a];o&&(Ze.rotateFromPoint(r,o),i.push(o))}for(var s=0;s<n.childElementCount;s++)(0,e.gn)("layer1").appendChild(i[s]);(0,e.gn)("layer1").removeChild(n)}}}},{key:"clearEvents",value:function(){V=void 0,window.ontouchmove=void 0,window.ontouchend=void 0,window.onmousemove=void 0,window.onmouseup=void 0}},{key:"stopAction",value:function(e){var t=["path","ellipse","rect","tri"].indexOf(wt.mode)>-1;if(V&&V.parentNode&&t)n.removeShape(null);else{if(["select","grab","rotate"].indexOf(wt.mode)<0)return;"select"===wt.mode&&(v&&clearTimeout(v),q&&n.stopDrag()),"grab"!==wt.mode&&"rotate"!==wt.mode||ee[wt.mode](e),oe.clearLayer(),(W||V)&&ve.record(),Ze.updateAll(V),oe.drawOffscreen()}}},{key:"setEvents",value:function(){window.ontouchmove=function(e){n.mouseMove(e)},window.ontouchend=function(e){n.mouseUp(e)},window.onmousemove=function(e){n.mouseMove(e)},window.onmouseup=function(e){n.mouseUp(e)},window.ontouchcancel=function(e){n.mouseMove(e),n.mouseUp(e)}}},{key:"mouseMove",value:function(e){e.preventDefault(),$[wt.mode](e),wt.deltaPoint=n.getScreenPt(e)}},{key:"mouseUp",value:function(e){e.preventDefault(),ee[wt.mode](e),oe.clearLayer(),q?(W||V)&&ve.record():n.getMouseTarget(e)&&te[wt.mode](e),"grab"===wt.mode&&(wt.mode="select");var t=V;V=void 0,Y=[],q=!1,Ze.updateAll(t),n.clearEvents(),oe.drawOffscreen()}},{key:"selectMouseDown",value:function(e){n.fingerDown(e),V&&(V="yes"===V.getAttribute("stencil")?null:V),V&&"yes"!==V.getAttribute("stencil")&&n.startHold(e)}},{key:"fingerDown",value:function(e){V=oe.findTarget(e),W=V||W,Y=[]}},{key:"fingerUp",value:function(e){V=void 0,W=void 0,n.fingerDown(e)}},{key:"startHold",value:function(){V&&(v=setTimeout((function(){_e.bringToFront(V),v=null}),600))}},{key:"cloneMouseDown",value:function(e){n.fingerDown(e),n.selectTarget(),V&&"staticbkg"===V.id&&(V=null)}},{key:"pathMouseDown",value:function(){V=et.addPolyline((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y);var t=Se.getClosestPath(wt.initialPoint,V,(0,e.gn)("layer1"),Se.maxDistance());if(t){var n=V.getAttribute("stroke"),r=V.getAttribute("stroke-width");if(n===t.getAttribute("stroke")&&r===t.getAttribute("stroke-width")){var i=et.createGroup((0,e.gn)("draglayer"),"cusorstate");oe.getKid(i,t,.7),W=t}}}},{key:"selectTarget",value:function(){if(V)for(;"g"===V.parentNode.tagName&&"layer1"!==V.parentNode.id;)V=V.parentNode}},{key:"makeAgroup",value:function(t){for(var n=(0,e.gn)("layer1"),r=et.createGroup(n,(0,e.N7)("group")),i=0;i<t.length;i++)n.removeChild(t[i]),r.appendChild(t[i]);return r}},{key:"ellipseMouseDown",value:function(){V=et.addEllipse((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y)}},{key:"rectMouseDown",value:function(){V=et.addRect((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y)}},{key:"triMouseDown",value:function(){V=et.addTriangle((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y)}},{key:"grabMouseDown",value:function(){(V=W).setAttributeNS(null,"fill",Se.selectedDotColor),V.setAttributeNS(null,"r",1.5*V.getAttribute("r"))}},{key:"selectMouseMove",value:function(e){if(!(e.touches&&e.touches.length>1))return n.onBackground()?(n.clearEvents(),void wt.Scroll(e)):void n.moveObject(e)}},{key:"moveObject",value:function(t){if(W){var r=n.getScreenPt(t),i=w.diff(r,wt.initialPoint);if(!q&&w.len(i)>Q&&n.startDragShape(t),q){for(var a=0;a<Y.length;a++)Ze.extract(Y[a],2).setTranslate(i.x,i.y);Ze.extract((0,e.gn)("ghostgroup"),2).setTranslate(i.x,i.y)}}}},{key:"onBackground",value:function(){return!V||W.id.indexOf("staticbkg")>-1||"yes"===V.getAttribute("stencil")}},{key:"paintBucketMouseMove",value:function(e){oe.findTarget(e)}},{key:"isMoving",value:function(e){if(q)return!0;var t=n.getScreenPt(e),r=w.diff(t,wt.initialPoint);return!q&&w.len(r)>Q}},{key:"fingerMove",value:function(e){oe.findTarget(e)}},{key:"cloneMouseMove",value:function(e){oe.findTarget(e)}},{key:"startDragShape",value:function(){v&&clearTimeout(v),n.selectTarget(),v=void 0,Se.quitEditMode(),Y=_e.findGroup(V);for(var t=0;t<Y.length;t++)Ze.eleminateTranslates(Y[t]),(0,e.gn)("layer1").appendChild(Y[t]);oe.highlight(Y);for(var r=0;r<Y.length;r++)Ze.appendForMove(Y[r],Ze.getTranslateTransform());Ze.appendForMove((0,e.gn)("ghostgroup"),Ze.getTranslateTransform()),q=!0}},{key:"rotateMouseMove",value:function(t){if(W){var r=n.getScreenPt(t),i=w.diff(r,wt.initialPoint);!q&&w.len(i)>Q&&n.startRotateShape(t),V&&q&&(n.rotateFromMouse(t,V),n.rotateFromMouse(t,(0,e.gn)("ghostgroup")))}}},{key:"startRotateShape",value:function(e){if(n.selectTarget(),V&&(V&&"svg"===V.tagName.toLowerCase()&&(V=void 0),n.onBackground()&&(V=void 0),V)){Y=_e.findGroup(V),oe.highlight(Y),V=n.makeAgroup(Y);var t=n.getScreenPt(e),r=Ze.getCombinedMatrices(V);n.center=et.getBoxCenter(V);var i={x:n.center.x,y:n.center.y};i=Ze.point(i.x,i.y,r);var a=w.diff(i,t);J=Math.atan2(a.y,a.x)*(180/Math.PI)%360,J-=90,et.getBoxCenter(V),q=!0}}},{key:"rotateFromMouse",value:function(e,t){var r=n.getScreenPt(e),i=Ze.getRotation(t),a=Ze.getCombinedMatrices(t),o={x:n.center.x,y:n.center.y};o=Ze.point(o.x,o.y,a);var s=w.diff(o,r),u=Math.atan2(s.y,s.x)*(180/Math.PI)%360;u-=90,u=(u-=J)<0?360+u:u,u%=360,i.setRotate(u,o.x,o.y)}},{key:"rectMouseMove",value:function(e){var t=n.getScreenPt(e),r=w.diff(t,wt.initialPoint);if(!q&&w.len(r)>Q&&(q=!0),q){var i,a,o=Math.abs(r.x),s=Math.abs(r.y);e.shiftKey?(o=s=Math.max(o,s),i=wt.initialPoint.x<t.x?wt.initialPoint.x:wt.initialPoint.x-o,a=wt.initialPoint.y<t.y?wt.initialPoint.y:wt.initialPoint.y-s):(i=Math.min(wt.initialPoint.x,t.x),a=Math.min(wt.initialPoint.y,t.y));var u={width:o,height:s,x:i,y:a};for(var h in u)V.setAttributeNS(null,h,u[h])}}},{key:"triMouseMove",value:function(e){var t=n.getScreenPt(e),r=w.diff(t,wt.initialPoint);if(!q&&w.len(r)>Q&&(q=!0),q){var i=r.x,a=r.y,o=wt.initialPoint.x,s=wt.initialPoint.y,u=[["M",o,s+a],["L",o+.5*i,s],["L",o+i,s+a],["L",o,s+a],["z"]],h=Oe.arrayToString(u);V.setAttribute("d",h)}}},{key:"pathMouseMove",value:function(e){var t=n.getScreenPt(e),r=w.diff(t,wt.initialPoint);if(!q&&w.len(r)>Q&&(q=!0),q){var i=" ".concat(t.x,",").concat(t.y," "),a=V.getAttribute("points");a+=i,V.setAttributeNS(null,"points",a)}}},{key:"ellipseMouseMove",value:function(e){var t=n.getScreenPt(e),r=w.diff(t,wt.initialPoint);if(!q&&w.len(r)>Q&&(q=!0),q){var i,a,o=Math.abs(r.x),s=Math.abs(r.y);e.shiftKey?(o=s=Math.max(o,s),i=wt.initialPoint.x<t.x?wt.initialPoint.x:wt.initialPoint.x-o,a=wt.initialPoint.y<t.y?wt.initialPoint.y:wt.initialPoint.y-s):(i=Math.min(wt.initialPoint.x,t.x),a=Math.min(wt.initialPoint.y,t.y));var u=o/2,h=s/2,l={cx:i+u,cy:a+h,rx:u,ry:h};for(var c in l)V.setAttributeNS(null,c,l[c])}}},{key:"grabMouseMove",value:function(t){var r=n.getScreenPt(t),i=w.diff(r,wt.deltaPoint);n.movePointByDrag(i.x,i.y),q=!0;var a=(0,e.gn)(V.getAttribute("parentid")),o=Oe.isCloseDPath(a);if(Se.reshape(a),o!==Oe.isCloseDPath(a)&&n.playSnapSound(o),!Oe.isCloseDPath(a)&&Se.isTip(V)){oe.clearLayer();var s=Se.getClosestPath(r,a,(0,e.gn)("layer1"),Se.maxDistance());if(s){var u=et.createGroup((0,e.gn)("draglayer"),"cusorstate");oe.getKid(u,s,.7),W=s}}}},{key:"playSnapSound",value:function(e){m.sndFX(e?"cut.wav":"snap.wav")}},{key:"movePointByDrag",value:function(e,t){var n=V.getAttribute("cx"),r=V.getAttribute("cy"),i=Number(n)+e,a=Number(r)+t;V.setAttributeNS(null,"cx",i),V.setAttributeNS(null,"cy",a)}},{key:"rectMouseUp",value:function(e){var t=Number(V.getAttribute("width")),r=Number(V.getAttribute("height")),i=Number(V.getAttribute("x")),a=Number(V.getAttribute("y")),o=[{x:i,y:a},{x:i+t,y:a},{x:i+t,y:a+r},{x:i,y:a+r}],s=Se.makeRectangle(V.parentNode,o);V.parentNode.removeChild(V),V=s;var u=et.getBox(V);(et.notValidBox(u)||u.isEmpty())&&n.removeShape(e)}},{key:"triMouseUp",value:function(e){var t=et.getBox(V);et.notValidBox(t)&&n.removeShape(e)}},{key:"ellipseMouseUp",value:function(e){var t=et.getBox(V);if(et.notValidBox(t))n.removeShape(e);else{var r=Se.makeEllipse(V);V.parentNode.removeChild(V),V=r}}},{key:"rotateMouseUp",value:function(t){if(V&&q){n.rotateFromMouse(t,V);for(var r=Ze.getRotation(V),i=0;i<Y.length;i++)(0,e.gn)("layer1").appendChild(Y[i]),0!==r.angle&&Ze.rotateFromPoint(r,Y[i]);(0,e.gn)("layer1").removeChild(V),V=W}}},{key:"pathMouseUp",value:function(t){if(q){V=Se.process(V);var r=et.getBox(V),i=new M(0,0,wt.workspaceWidth,wt.workspaceHeight);if(r.intersects(i)){if(!Oe.isCloseDPath(V)){var a=n.getScreenPt(t),o=Se.getClosestPath(a,V,(0,e.gn)("layer1"),Se.maxDistance());o||(a=Se.getCommands(V.getAttribute("d"))[0].pt,o=Se.getClosestPath(a,V,(0,e.gn)("layer1"),Se.maxDistance()));var s=V.getAttribute("stroke"),u=V.getAttribute("stroke-width");o&&s===o.getAttribute("stroke")&&u===o.getAttribute("stroke-width")&&(V=Se.join(V,o,a)),(0,e.gn)("staticbkg")&&Se.checkBackgroundCrop(V)}}else n.removeShape(t)}else n.removeShape(t)}},{key:"selectMouseUp",value:function(e){if(v&&clearTimeout(v),q)n.stopDrag();else{if(n.fingerUp(e),Se.selector&&Se.selector!==V&&Se.quitEditMode(),!V)return;q&&!Se.selector&&Se.enterEditMode(V)}}},{key:"scissorsMouseUp",value:function(t){if(n.fingerUp(t),n.selectTarget(),V&&"fixed"===V.id&&(V=null),V){m.sndFX("cut.wav");for(var r=we.getImage(V),i=V.parentNode,a=[],o=0;o<i.childElementCount;o++){var s=i.childNodes[o];s.getAttribute("relatedto")===V.id&&a.push(s)}for(var u=0;u<a.length;u++)i.removeChild(a[u]);r?we.removeClip(r):V.parentNode&&V.parentNode.removeChild(V),et.cleanup((0,e.gn)("layer1")),ve.record()}}},{key:"cameraMouseUp",value:function(t){e.Em&&n.fingerUp(t),V&&(le.startFeed(V),Sv.onBackButtonCallback.push((function(){wt.closeCameraMode()})))}},{key:"cloneMouseUp",value:function(e){n.fingerUp(e),n.selectTarget(),V&&"staticbkg"===V.id&&(V=null),V&&(m.sndFX("copy.wav"),et.cloneSVGelement(V),oe.clearLayer(),ve.record(),n.backToSelect(e))}},{key:"setStrokeSizeAndColor",value:function(){V&&(V.getAttribute("stroke")===wt.fillcolor&&V.getAttribute("stroke-width")===wt.strokewidth||(V.getAttribute("stroke")?(V.setAttribute("stroke",wt.fillcolor),V.setAttribute("stroke-width",wt.strokewidth)):(V=(0,e.gn)("".concat(V.id,"Border"))?(0,e.gn)("".concat(V.id,"Border")):V).id.indexOf("Border")>-1&&V.setAttribute("fill",wt.fillcolor),ve.record()))}},{key:"paintBucketMouseUp",value:function(e){n.fingerUp(e),V&&n.paintRegion(e)}},{key:"paintRegion",value:function(){switch(m.sndFX("splash.wav"),n.getPaintType()){case"paths":Se.setData(V);break;case"image":var e=we.getImage(V);we.paint(e);break;case"check":for(var t=_e.findGroup(V),r=0;r<t.length;r++)t[r].id!==V.id&&t[r].getAttribute("relatedto")!==V.id||t[r].setAttribute("stroke",wt.fillcolor)}V.setAttribute("fill",wt.fillcolor),ve.record()}},{key:"getPaintType",value:function(){return we.getImage(V)?"image":n.justPaint(V)&&(V.getAttribute("fill")||V.getAttribute("stroke"))?V.getAttribute("fill")===V.getAttribute("stroke")?"check":"none":"paths"}},{key:"justPaint",value:function(e){return"path"!==e.tagName||!!Oe.isCompoundPath(e)||"none"!==e.getAttribute("fill")||null!==e.getAttribute("fill")}},{key:"stopDrag",value:function(){if(q&&0!==Y.length){for(var e=0;e<Y.length;e++)Ze.eleminateTranslates(Y[e]);for(var t=et.getTransformedBox(Y[0]),n={x:0,y:0,width:wt.workspaceWidth,height:wt.workspaceHeight},r=1;r<Y.length;r++)t=t.union(et.getTransformedBox(Y[r]).expandBy(et.getPenWidthForm(Y[r])));if(!t.intersects(n)){m.sndFX("boing.wav");var i={x:0,y:0};t.x>wt.workspaceWidth&&(i.x=Math.floor(wt.workspaceWidth-t.x-.25*t.width)),t.y>n.height&&(i.y=Math.floor(wt.workspaceHeight-t.y-.25*t.height)),t.x<0&&(i.x=Math.floor(-t.x-.75*t.width)),t.y<0&&(i.y=Math.floor(-t.y-.75*t.height)),window.xform.setTranslate(i.x,i.y);for(var a=0;a<Y.length;a++)Ze.translateTo(Y[a],window.xform)}Y=[]}}},{key:"ignoreEvt",value:function(){}},{key:"backToSelect",value:function(){wt.selectButton("select")}},{key:"grabMouseUp",value:function(t){var r=(0,e.gn)(V.getAttribute("parentid"));V.setAttributeNS(null,"fill",Se.getDotColor(r,V)),V.setAttributeNS(null,"r",V.getAttribute("r")/1.5);var i=n.getScreenPt(t);if(q){var a=w.diff(i,wt.deltaPoint);if(n.movePointByDrag(a.x,a.y),Se.reshape(r),Se.isTip(V)&&!Oe.isCloseDPath(r)){var o=Se.getClosestPath(i,r,(0,e.gn)("layer1"),Se.maxDistance());if(!o)return;o!==r&&(r=Se.join(r,o,i))}Se.showDots(r)}else Se.deleteDot(V,r)}},{key:"removeShape",value:function(){V&&(V.parentNode.removeChild(V),V=void 0)}},{key:"rectClick",value:function(t){if(V){n.removeShape(t);var r=(V=et.addRect((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y)).getAttribute("stroke"),i={width:16/wt.currentZoom,height:16/wt.currentZoom};for(var a in i)V.setAttribute(a,i[a]);for(var o in n.rectMouseUp(t),i={fill:r,"stroke-width":4})V.setAttribute(o,i[o]);ve.record()}}},{key:"ellipseClick",value:function(t){if(V){n.removeShape(t);var r=(V=et.addEllipse((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y)).getAttribute("stroke"),i={rx:8/wt.currentZoom,ry:8/wt.currentZoom};for(var a in i)V.setAttribute(a,i[a]);for(var o in n.ellipseMouseUp(t),i={fill:r,"stroke-width":4})V.setAttribute(o,i[o]);ve.record()}}},{key:"pathClick",value:function(e){(V=oe.findWho(e))&&"yes"!==V.getAttribute("fixed")&&n.setStrokeSizeAndColor()}},{key:"triClick",value:function(t){if(V){n.removeShape(t),V=et.addTriangle((0,e.gn)("layer1"),wt.initialPoint.x,wt.initialPoint.y);var r=16/wt.currentZoom,i=16/wt.currentZoom,a=wt.initialPoint.x,o=wt.initialPoint.y,s=[["M",a,o+i],["L",a+.5*r,o],["L",a+r,o+i],["L",a,o+i]],u=Oe.arrayToString(s);u+="z";var h={fill:V.getAttribute("stroke"),"stroke-width":2,d:u};for(var l in h)V.setAttribute(l,h[l]);ve.record()}}},{key:"selectClick",value:function(e){if(v&&(v=void 0,V&&!(V&&V.parentNode&&"g"===V.parentNode.tagName&&"layer1"!==V.parentNode.id||V&&"staticbkg"===V.id||V&&"g"===V.tagName))){var t=n.getScreenPt(e);w.len(w.diff(t,wt.initialPoint))>Q||(Se.selector&&Se.selector===V&&Se.addDot(Se.selector),Se.selector||Se.enterEditMode(V))}}},{key:"paintBucketClick",value:function(){}},{key:"getMouseTarget",value:function(e){var t;if(!e)return null;if(!(t=window.event?window.event.srcElement:e.target))return null;if(t.correspondingUseElement&&(t=t.correspondingUseElement),"maincanvas"===t.id)return t.childNodes[0];if("workspacebkg"===t.id)return t;for(;t&&wt.xmlns!==t.namespaceURI&&t!==wt.root&&t!==wt.frame;)t=t.parentNode;return t&&t.parentNode?t.parentNode.id.indexOf("group_")>-1?t.parentNode:t:null}},{key:"getScreenPt",value:function(e){var t=z.getTargetPoint(e);return n.zoomPt(t)}},{key:"zoomPt",value:function(t){if(!(0,e.gn)("maincanvas"))return t;var n=wt.root.createSVGPoint();n.x=t.x,n.y=t.y;var r=wt.root.getScreenCTM();return r.a=wt.currentZoom,r.d=wt.currentZoom,n.matrixTransform(r.inverse())}}]),n}();Object.assign(Z,{select:ne.selectMouseDown,rotate:ne.fingerDown,tri:ne.triMouseDown,rect:ne.rectMouseDown,path:ne.pathMouseDown,ellipse:ne.ellipseMouseDown,grab:ne.grabMouseDown,paintbucket:ne.fingerDown,stamper:ne.cloneMouseDown,scissors:ne.cloneMouseDown,camera:ne.fingerDown}),Object.assign($,{select:ne.selectMouseMove,rotate:ne.rotateMouseMove,tri:ne.triMouseMove,rect:ne.rectMouseMove,path:ne.pathMouseMove,ellipse:ne.ellipseMouseMove,grab:ne.grabMouseMove,paintbucket:ne.paintBucketMouseMove,stamper:ne.cloneMouseMove,scissors:ne.cloneMouseMove,camera:ne.fingerMove}),Object.assign(ee,{select:ne.selectMouseUp,rotate:ne.rotateMouseUp,tri:ne.triMouseUp,rect:ne.rectMouseUp,path:ne.pathMouseUp,ellipse:ne.ellipseMouseUp,grab:ne.grabMouseUp,paintbucket:ne.paintBucketMouseUp,stamper:ne.ignoreEvt,scissors:ne.scissorsMouseUp,camera:ne.cameraMouseUp}),Object.assign(te,{select:ne.selectClick,rotate:ne.ignoreEvt,tri:ne.triClick,rect:ne.rectClick,path:ne.pathClick,ellipse:ne.ellipseClick,grab:ne.ignoreEvt,paintbucket:ne.paintBucketClick,stamper:ne.cloneMouseUp,scissors:ne.ignoreEvt,camera:ne.ignoreEvt});var re=document.createElement("canvas"),ie={},ae=16,oe=function(){function n(){t(this,n)}return r(n,null,[{key:"maskCanvas",get:function(){return re}},{key:"maskData",get:function(){return ie},set:function(e){ie=e}},{key:"linemask",get:function(){return 16}},{key:"highlight",value:function(t){n.clearLayer();var r=et.createGroup((0,e.gn)("draglayer"),"ghostgroup");r.setAttribute("class","active3d");for(var i=0;i<t.length;i++)n.hightlightElem(r,t[i],.5,"5,5","black",3)}},{key:"hightlightElem",value:function(e,t,r,i,a,o){if("g"===t.tagName)for(var s=0;s<t.childElementCount;s++)n.hightlightElem(e,t.childNodes[s],r,i,a,o);else n.hasGhost(t)&&n.getKid(e,t,r,i,a,o)}},{key:"hasGhost",value:function(t){if(!t.id)return!0;if(t.id.indexOf("Border")<0)return!0;var n=t.id.split("Border")[0];return""===n||!(0,e.gn)(n)}},{key:"clearLayer",value:function(){var t=(0,e.gn)("draglayer");if(t)for(;t.childElementCount>0;)t.removeChild(t.childNodes[0])}},{key:"findTarget",value:function(e){if(n.clearLayer(),!e)return null;var t=ne.getScreenPt(e);return n.outsideArea(w.floor(w.scale(t,wt.currentZoom)),re)?null:n.allTools(t)}},{key:"findWho",value:function(t){if(n.clearLayer(),!t)return null;var r=ne.getScreenPt(t),i=n.getPtColor(r),a=ie[i],o=a&&(0,e.gn)(a)?(0,e.gn)(a):null;return o&&"yes"!==o.getAttribute("fixed")?o:n.getHitObject(r)}},{key:"allTools",value:function(e){var t=n.getPtColor(e),r=ie[t];return r?n.hitSomething(e,r,t):n.notHitted(e)}},{key:"hitSomething",value:function(t,r){var i=(0,e.gn)(r),a=!0;switch(i&&i.getAttribute("relatedto")&&(i=(0,e.gn)(i.getAttribute("relatedto"))),wt.mode){case"select":case"rotate":case"stamper":case"scissors":case"path":"yes"===i.getAttribute("fixed")&&(i=n.getHitObject(t,"path"===wt.mode)),a=!!i&&"yes"!==i.getAttribute("fixed");break;case"paintbucket":case"camera":i=n.getHitObject(t,"path"===wt.mode)}return i&&a?n.setGhostTo(i):null}},{key:"svgHit",value:function(t){var r=wt.root.createSVGRect();r.x=t.x,r.y=t.y,r.width=1,r.height=1;var i=wt.root.getIntersectionList(r,null);return null!==i?i:n.svgHitHelper((0,e.gn)("layer1"),t)}},{key:"svgHitHelper",value:function(e,t){var n=[];if(!e)return n;for(var r=e.getElementsByTagName("path"),i=0;i<r.length;++i){var a=r[i].getAttribute("d");a&&R().path.isPointInside(a,t.x,t.y)&&n.push(r[i])}return n}},{key:"setGhostTo",value:function(t){var r=et.createGroup((0,e.gn)("draglayer"),"ghostlayer");return n.setDashBorder(r,t,.7,"5,5","black",3),t}},{key:"notHitted",value:function(t){var r;switch(wt.mode){case"select":case"rotate":case"stamper":case"scissors":(r=n.getActualHit(n.getHitObject(t,"path"!==wt.mode),t))&&r.id&&(r.getAttribute("relatedto")&&(r=(0,e.gn)(r.getAttribute("relatedto"))),(r.id.indexOf("staticbkg")>-1||"yes"===r.getAttribute("stencil")||"yes"===r.getAttribute("fixed"))&&(r=void 0));break;case"camera":case"paintbucket":var i=n.getHitObject(t,!1),a=n.getActualHit(i,t);a&&"g"!==a.nodeName&&(r=a)}return r?n.setGhostTo(r):null}},{key:"getActualHit",value:function(e,t){if(!e)return null;t=w.floor(w.scale(t,wt.currentZoom));for(var r=_e.findUnderMe(e),i=0;i<r.length;i++){var a=r[i];n.contains(e,a)&&n.hittedSingleObject(a,t)&&(e=a)}return e}},{key:"contains",value:function(e,t){var n=et.getBox(e),r=et.getBox(t),i=n.intersection(r);return!i.isEmpty()&&i.isEqual(r)}},{key:"hittedSingleObject",value:function(e,t){var n=Sv.workingCanvas.getContext("2d");return n.clearRect(0,0,Sv.workingCanvas.width,Sv.workingCanvas.height),n.save(),_e.drawInContext(e,n,wt.currentZoom),n.restore(),0!==n.getImageData(t.x,t.y,1,1).data[3]}},{key:"getPtColor",value:function(e){if(e=w.floor(w.scale(e,wt.currentZoom)),n.outsideArea(e,re))return 0;var t=re.getContext("2d").getImageData(e.x,e.y,1,1).data,r=t[0],i=t[1],a=t[2];return n.getHex([r,i,a])}},{key:"outsideArea",value:function(e,t){return e.x<0||e.x>t.width-1||e.y<0||e.y>t.height-1}},{key:"setDashBorder",value:function(e,t,r,i,a,o){if("g"===t.tagName)for(var s=0;s<t.childElementCount;s++)n.setDashBorder(e,t.childNodes[s],r,i,a,o);else n.getKid(e,t,r,i,a,o)}},{key:"getKid",value:function(e,t,n,r,i,a){a||(a=t.getAttribute("stroke-width"));var o=et.attributeTable[t.tagName];o||(o=[]);var s=et.attributePenTable[t.tagName];s||(s=[]);var u=document.createElementNS(wt.xmlns,t.tagName);e.appendChild(u),o=o.concat(s);for(var h=0;h<o.length;h++)t.getAttribute(o[h])&&u.setAttribute(o[h],t.getAttribute(o[h]));u.setAttribute("fill","none"),u.setAttribute("stroke",i),u.setAttribute("stroke-width",a/wt.currentZoom),u.setAttribute("class","active3d");var l=Ze.getRotationAngle(t);0!==l&&Ze.applyRotation(u,l),n&&u.setAttribute("opacity",n);var c=document.createElementNS(wt.xmlns,t.tagName);e.appendChild(c),o=o.concat(s);for(var d=0;d<o.length;d++)t.getAttribute(o[d])&&c.setAttribute(o[d],t.getAttribute(o[d]));return c.setAttribute("fill","none"),c.setAttribute("stroke","white"),c.setAttribute("stroke-width",3/wt.currentZoom),c.setAttribute("stroke-dasharray",r),c.setAttribute("class","active3d"),n&&c.setAttribute("opacity",n),0!==l&&Ze.applyRotation(c,l),c}},{key:"drawOffscreen",value:function(){(0,e.ge)(re,Math.round(Number(wt.root.getAttribute("width"))*wt.currentZoom),Math.round(Number(wt.root.getAttribute("height"))*wt.currentZoom));var t=re.getContext("2d");t.clearRect(0,0,re.width,re.height);var r=(0,e.gn)("layer1");r&&(ie={},ae=16,n.drawElements(r,t))}},{key:"drawElements",value:function(e,t){for(var r=0;r<e.childElementCount;r++){var i=e.childNodes[r];"pathdots"!==i.id&&"image"!==i.tagName&&"clipPath"!==i.tagName&&("g"===i.nodeName?n.drawElements(i,t):n.drawElement(i,t))}}},{key:"drawElement",value:function(e,t){var r=n.getRGB(ae),i=n.getRGB(ae+8);ae+=16,t.save();var a=!e.getAttribute("stroke")||"none"===e.getAttribute("stroke"),o=Number(e.getAttribute("stroke-width"));t.lineWidth=a?0:o,t.fillStyle="none"===e.getAttribute("fill")?"rgba(0,0,0,0)":"rgba(".concat(r[0],",").concat(r[1],",").concat(r[2],",255)"),t.strokeStyle=e.getAttribute("stroke")?"rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",255)"):"rgba(0,0,0,0)",Oe.isCloseDPath(e)||(t.strokeStyle="rgba(".concat(r[0],",").concat(r[1],",").concat(r[2],",255)")),e.id.indexOf("pathborder_image")>-1&&(t.fillStyle="rgba(".concat(r[0],",").concat(r[1],",").concat(r[2],",255)")),e.getAttribute("fill")||e.getAttribute("stroke")||(t.fillStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",255)")),ie[n.getHex(r)]=e.id,ie[n.getHex(i)]=e.id;var s=Ze.extract(e,4);0!==s.angle&&_e.rotateFromCenter(t,e,s.angle),t.scale(wt.currentZoom,wt.currentZoom),Oe.processXMLnode(e,t,!0),t.restore(),Oe.isCloseDPath(e)||(t.save(),t.scale(wt.currentZoom,wt.currentZoom),t.lineWidth=16<o?o:16,t.fillStyle="rgba(".concat(r[0],",").concat(r[1],",").concat(r[2],",255)"),t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",255)"),0!==(s=Ze.extract(e,4)).angle&&_e.rotateFromCenter(t,e,s.angle),Oe.renderPathTips(e,t),t.restore())}},{key:"getRGB",value:function(e){return[Number(e>>16&255),Number(e>>8&255),Number(255&e)]}},{key:"getHex",value:function(e){var t=e[0].toString(16);t.length<2&&(t="0".concat(t));var n=e[1].toString(16);n.length<2&&(n="0".concat(n));var r=e[2].toString(16);return r.length<2&&(r="0".concat(r)),t+n+r}},{key:"getHitObject",value:function(t,r,i){var a=n.svgHit(t);if(t=w.floor(w.scale(t,wt.currentZoom)),!wt.root)return!1;(0,e.ge)(Sv.workingCanvas,Math.round(wt.root.getAttribute("width")*wt.currentZoom),Math.round(wt.root.getAttribute("height")*wt.currentZoom));var o=Sv.workingCanvas.getContext("2d");return n.outsideArea(t,Sv.workingCanvas)?null:(o.clearRect(0,0,Sv.workingCanvas.width,Sv.workingCanvas.height),n.findHit(a,t,Sv.workingCanvas.getContext("2d"),r,i))}},{key:"findHit",value:function(e,t,n,r,i){for(var a=e.length-1;a>=0;a--){var o=e[a];if(!i||o!==i){var s=o.getAttribute("stroke-width")?o.getAttribute("stroke-width"):0;if(n.save(),_e.drawInContext(o,n,wt.currentZoom,s,r),n.restore(),0!==n.getImageData(t.x,t.y,1,1).data[3])return o}}return null}},{key:"showmask",value:function(){var t=(0,e.um)(wt.frame,0,0,re.width,re.height,{position:"absolute",zIndex:Sv.layerTop+20});t.setAttribute("id","ghostmask"),t.appendChild(re)}},{key:"off",value:function(){(0,e.gn)("ghostmask").style.visibility="hidden"}},{key:"on",value:function(){(0,e.gn)("ghostmask").style.visibility="visible"}}]),n}(),se="front",ue=void 0,he=!1,le=function(){function n(){t(this,n)}return r(n,null,[{key:"available",get:function(){return he},set:function(e){he=e}},{key:"startFeed",value:function(t){m.sndFX("entertap.wav"),wt.canvasFits()||wt.scaleToFit(),ue=t,n.active=!0;var r=window.devicePixelRatio,i=et.getBox(ue).rounded(),a=new M(0,0,wt.workspaceWidth,wt.workspaceHeight);(i=i.expandBy(20)).crop(a);var o=n.getLayerMask(ue),s=new Object,u=Math.floor((i.x+i.width/2)*wt.currentZoom-i.width/2),h=Math.floor((i.y+i.height/2)*wt.currentZoom-i.height/2);s.x=(0,e.$1)((0,e.gn)("workspacebkg"))+u+(0,e.gn)("maincanvas").dx+(0,e.gn)("maincanvas").cx-(0,e.gn)("maincanvas").cx*wt.currentZoom,s.y=(0,e.Q7)((0,e.gn)("workspacebkg"))+h+(0,e.gn)("maincanvas").dy+(0,e.gn)("maincanvas").cy-(0,e.gn)("maincanvas").cy*wt.currentZoom,s.width=i.width,s.height=i.height,s.scale=wt.currentZoom,s.devicePixelRatio=r,s.mx=(0,e.$1)((0,e.gn)("workspacebkg"))+(0,e.gn)("maincanvas").dx,s.my=(0,e.Q7)((0,e.gn)("workspacebkg"))+(0,e.gn)("maincanvas").dy,s.mw=wt.workspaceWidth,s.mh=wt.workspaceHeight,s.image=o.toDataURL("image/png"),ny.startfeed(s,ny.trace),wt.cameraToolsOn()}},{key:"prepareForLandscapeMode",value:function(t){var n=document.createElement("canvas");(0,e.ge)(n,t.height,t.width);var r=n.getContext("2d"),i=Math.min(t.width,t.height),a=(Math.max(t.width,t.height)-i)/2,o={x:t.width/2,y:t.height/2};return r.translate(o.x,o.y),r.rotate(90*e.Zh),r.translate(-o.x,-o.y),r.drawImage(t,a,a),n}},{key:"doAction",value:function(e){switch(e){case"cameraflip":m.sndFX("tap.wav"),se="front"===se?"back":"front",ny.choosecamera(se,n.flip);break;case"camerasnap":n.snapShot(),wt.cameraToolsOff();break;case"cammera":n.close(),wt.selectButton("select");break;default:n.close(),wt.selectButton(e)}}},{key:"close",value:function(){ue=void 0,se="front",n.active=!1,ny.stopfeed(),wt.cameraToolsOff(),e.Dt&&Sv.onBackButtonCallback.pop()}},{key:"snapShot",value:function(){ny.captureimage("Camera.processimage")}},{key:"getLayerMask",value:function(t){var r,i;if(e.Dt){var a=(0,e.gn)("maincanvas").getBoundingClientRect();r=a.width,i=a.height}else r=wt.workspaceWidth,i=wt.workspaceHeight;var o=document.createElement("canvas");(0,e.ge)(o,r,i);var s=o.getContext("2d");s.fillStyle=Sv.stagecolor,s.fillRect(0,0,o.width,o.height),e.Dt&&(s.save(),s.scale(wt.currentZoom,wt.currentZoom)),Oe.drawImage((0,e.gn)("paintgrid"),s);var u,h=t.parentNode&&"layer1"!==t.parentNode.id,l=h?_e.groupStartsAt((0,e.gn)("layer1"),t.parentNode):_e.groupStartsAt((0,e.gn)("layer1"),t);return n.drawLayers((0,e.gn)("layer1"),s,0,l),h&&(u=_e.groupStartsAt(t.parentNode,t),n.drawLayers(t.parentNode,s,0,u)),n.drawHole(t,s),h&&n.drawLayers(t.parentNode,s,u+1,t.parentNode.childElementCount),n.drawLayers((0,e.gn)("layer1"),s,l+1,(0,e.gn)("layer1").childElementCount),e.Dt&&s.restore(),o}},{key:"drawLayers",value:function(e,t,n,r){for(var i=Math.min(n,e.childElementCount),a=Math.min(r,e.childElementCount),o=i;o<a;o++)Oe.drawLayer(e.childNodes[o],t,Oe.drawLayer)}},{key:"drawHole",value:function(e,t){t.save(),t.globalCompositeOperation="destination-out",Oe.drawElementHole(e,t),t.restore(),t.fillStyle="rgba(0, 0, 0,0)",t.strokeStyle=e.getAttribute("stroke")?e.getAttribute("stroke"):"none",t.lineCap=e.getAttribute("stroke-linecap")?e.getAttribute("stroke-linecap"):Oe.strokevalues["stroke-linecap"],t.lineWidth=e.getAttribute("stroke-width")?Number(e.getAttribute("stroke-width")):Number(Oe.strokevalues["stroke-width"]),t.miterLimit=e.getAttribute("stroke-miterlimit")?e.getAttribute("stroke-miterlimit"):Oe.strokevalues["stroke-miterlimit"],t.linejoin=e.getAttribute("stroke-linejoin")?e.getAttribute("stroke-linejoin"):Oe.strokevalues["stroke-linejoin"],Oe.processXMLnode(e,t,!0)}},{key:"processimage",value:function(e){ue&&("error getting a still"!==e&&we.addCameraFill(ue,e),n.close(),wt.cameraToolsOff(),wt.selectButton("select"),"error getting a still"!==e&&(ve.record(),oe.drawOffscreen()))}}]),n}();window.Camera=le;var ce,de,fe,pe,ge=[],me=0,ve=function(){function n(){t(this,n)}return r(n,null,[{key:"buffer",set:function(e){ge=e}},{key:"index",get:function(){return me},set:function(e){me=e}},{key:"setup",value:function(t){var r=(0,e.HS)("div","paintundo",t);r.setAttribute("id","paintundocontrols");for(var i=[["undo",n.undo],["redo",n.redo]],a=0;a<i.length;a++)n.newToggleClicky(r,"id_p",i[a][0],i[a][1]);n.updateActiveUndo()}},{key:"newToggleClicky",value:function(t,n,r,i){var a=(0,e.HS)("div","undocircle",t);return(0,e.HS)("div","".concat(r," off"),a),a.setAttribute("type","toggleclicky"),a.setAttribute("id",n+r),i&&(a.ontouchstart=function(e){i(e)},a.onmousedown=function(e){i(e)}),a}},{key:"runUndo",value:function(){Se.quitEditMode(),wt.root.removeChild((0,e.gn)("layer1")),wt.root.appendChild(et.toObject(ge[me])),wt.root.appendChild((0,e.gn)("draglayer")),wt.root.appendChild((0,e.gn)("paintgrid")),wt.setZoomTo(wt.currentZoom)}},{key:"record",value:function(t){me+1<=ge.length&&ge.splice(me+1,ge.length),ge.push(n.getCanvas()),me++,(0,e.gn)("id_pundo")&&n.updateActiveUndo(),t||Sv.storyStart("PaintUndo.record")}},{key:"getCanvas",value:function(){return et.svg2string((0,e.gn)("layer1"))}},{key:"undo",value:function(e){if(!(e.touches&&e.touches.length>1)){e.preventDefault(),e.stopPropagation(),le.active&&le.doAction("undo");var t=wt.getCurrentName();for(t!==document.forms.spriteform.name.value&&(document.forms.spriteform.name.value=t);me>=ge.length;)me--;var r=--me<0?"boing.wav":"tap.wav";m.sndFX(r),me<0?me=0:n.runUndo(),n.updateActiveUndo()}}},{key:"redo",value:function(e){if(!(e.touches&&e.touches.length>1)){e.preventDefault(),e.stopPropagation(),le.active&&le.doAction("undo");var t=++me>ge.length-1?"boing.wav":"tap.wav";m.sndFX(t),me>ge.length-1?me=ge.length-1:n.runUndo(),n.updateActiveUndo()}}},{key:"updateActiveUndo",value:function(){(0,e.gn)("id_pundo")&&(1===ge.length||me<1?n.tunOffButton((0,e.gn)("id_pundo")):n.tunOnButton((0,e.gn)("id_pundo")),me>=ge.length-1?n.tunOffButton((0,e.gn)("id_predo")):n.tunOnButton((0,e.gn)("id_predo")))}},{key:"tunOnButton",value:function(e){var t=e.childNodes[0],n=t.getAttribute("class").split(" ")[0];t.setAttribute("class","".concat(n," on"))}},{key:"tunOffButton",value:function(e){var t=e.childNodes[0],n=t.getAttribute("class").split(" ")[0];t.setAttribute("class","".concat(n," off"))}}]),n}(),ye=document.createElement("canvas"),be=document.createElement("canvas"),_e=function(){function n(){t(this,n)}return r(n,null,[{key:"bringToFront",value:function(t){if(t&&"yes"!==t.getAttribute("fixed")&&t.parentNode){for(;t.parentNode&&"layer1"!==t.parentNode.id;)t=t.parentNode;for(var r=n.groupStartsAt((0,e.gn)("layer1"),t),i=n.onTopOfBy((0,e.gn)("layer1"),t,1,r,n.getRelated(t)),a=t.parentNode,o=0;o<i.length;o++)a.appendChild(i[o]);i.length>1&&ve.record()}}},{key:"bringElementsToFront",value:function(){for(var t=[],n=0;n<(0,e.gn)("layer1").childElementCount;n++){var r=(0,e.gn)("layer1").childNodes[n];"yes"!==r.getAttribute("fixed")&&"yes"!==r.getAttribute("stencil")&&t.push(r)}for(var i=0;i<t.length;i++)(0,e.gn)("layer1").appendChild(t[i])}},{key:"onTopOf",value:function(e,t){for(var n=[],r=t;r<e.childElementCount;r++)n.push(e.childNodes[r]);return n}},{key:"ordering",value:function(e,t){for(var n=[],r=0;r<e.childElementCount;r++)t.indexOf(e.childNodes[r])>-1&&n.push(e.childNodes[r]);return n}},{key:"groupStartsAt",value:function(e,t){var n;for(n=0;n<e.childElementCount;n++)if(e.childNodes[n]===t)return n;return n}},{key:"onTopOfBy",value:function(e,t,r,i,a){i=Math.max(0,i),n.drawInOffscreen(t,ye);for(var o=i;o<e.childElementCount;o++){var s=e.childNodes[o];if("yes"!==s.getAttribute("stencil")&&"yes"!==s.getAttribute("fixed")&&"clipPath"!==s.nodeName&&"image"!==s.nodeName&&!(s.id.indexOf("group_image_")>-1||a.indexOf(s)>-1)){var u=n.overlapBox(t,s);if(1!==u){if(u>r||u>.34&&et.getArea(s)/et.getArea(t)<.1){if(!n.verifyCollision(t,s))continue;a.indexOf(s)<0&&(a=a.concat(n.getRelated(s))),n.onTopOfBy(e,s,r,o,a),n.drawInOffscreen(t,ye)}}else{if(!n.verifyCollision(t,s))continue;a=a.concat(n.getRelated(s))}}}return a}},{key:"addFromBelow",value:function(e,t,r,i){r=Math.min(e.childElementCount,r);for(var a=0;a<r;a++){var o=e.childNodes[a];"yes"!==o.getAttribute("stencil")&&"yes"!==o.getAttribute("fixed")&&"clipPath"!==o.nodeName&&"image"!==o.nodeName&&(i.indexOf(o)>-1||"none"===o.getAttribute("fill")&&n.overlapBox(t,o)>.5&&i.indexOf(o)<0&&(i=i.concat(n.getRelated(o))))}return i}},{key:"getRelated",value:function(t){var n=[];if(t.id.indexOf("pathborder_image")>-1){var r=t.id.substring(String("pathborder_").length,t.id.length),i=(0,e.gn)("group_".concat(r));if(i)n.push(i);else{var a=we.getImage(t);a&&n.push(a);var o=we.getPathMask(t);o&&n.push(o)}}return n.push(t),n}},{key:"inContactWith",value:function(e,t,r,i){for(var a=[],o=i;o<e.childElementCount;o++){var s=e.childNodes[o];s.id!==t.id&&"yes"!==s.getAttribute("stencil")&&n.overlapBox(t,s)>0&&a.push(s)}return a}},{key:"includesBox",value:function(e,t){var n=et.getBox(e),r=et.getBox(t);if(r.width*r.height>n.width*n.height)return!1;var i=n.intersection(r);return i.isEmpty()?0:i.isEqual(r)||i.isEqual(n)?1:i.width*i.height/(r.width*r.height)==1}},{key:"getContainedMost",value:function(e,t,r,i){e=t.parentNode;for(var a=0;a<r;a++){var o=e.childNodes[a];if(o.id!==t.id&&n.overlapBoxBy(t,o,i))return a}return null}},{key:"overlapBox",value:function(e,t){var n=et.getBox(e),r=et.getBox(t);if("g"!==e.nodeName&&"g"!==t.nodeName&&0===Se.getPathCrossing(t,e).length&&r.width*r.height>n.width*n.height)return 0;var i=n.intersection(r);return i.isEmpty()?0:i.isEqual(r)?1:i.width*i.height/(r.width*r.height)}},{key:"insideMe",value:function(e,t){var n=et.getBox(e),r=et.getBox(t);return!n.intersection(r).isEmpty()&&0===Se.getPathCrossing(t,e).length&&r.width*r.height>n.width*n.height}},{key:"overlapBoxBy",value:function(e,t,r){return n.overlapBox(e,t)>=r}},{key:"findUnderMe",value:function(t){for(var r=(0,e.gn)("layer1"),i=n.groupStartsAt(r,t),a=[],o=et.getBox(t),s=i-1;s>-1;s--){var u=r.childNodes[s];if("staticbkg"!==u.id&&!(u.id.indexOf("erasertemp")>-1)){var h=et.getBox(u);o.intersects(h)&&a.push(u)}}return a}},{key:"findGroup",value:function(t){var r=Sv.getTime();Sv.log("findGroup start",r,"sec"),(0,e.ge)(Sv.workingCanvas,wt.workspaceWidth,wt.workspaceHeight);var i=n.getRelated(t),a=n.groupStartsAt(t.parentNode,t);i="none"===t.getAttribute("fill")&&Oe.isCloseDPath(t)&&t.id.indexOf("pathborder_image")<0?n.addFromBelow(t.parentNode,t,a,i):i;var o=n.onTopOfBy(t.parentNode,t,.5,a,i),s=n.ordering(t.parentNode,o);return Sv.log("findGroup end",Sv.getTime()-r,"sec"),s}},{key:"verifyCollision",value:function(t,r){var i=et.getBox(t),a=et.getBox(r);if(!i.intersects(a))return!1;var o=i.intersection(a);if(0===o.width)return!1;if(0===o.height)return!1;o.x=Math.floor(o.x),o.y=Math.floor(o.y),o.width=Math.floor(o.width)+2,o.height=Math.floor(o.height)+2,n.drawInOffscreen(r,be),(0,e.ge)(Sv.workingCanvas,wt.workspaceWidth,wt.workspaceHeight);var s=Sv.workingCanvas.getContext("2d");s.clearRect(0,0,wt.workspaceWidth,wt.workspaceHeight),s.save(),s.globalCompositeOperation="source-over",s.drawImage(be,0,0),s.globalCompositeOperation="source-in",s.drawImage(ye,0,0),s.restore();for(var u=s.getImageData(o.x,o.y,o.width,o.height).data,h=Math.floor(u.length/4),l=0;l<h;l++){var c={x:l%o.width,y:Math.floor(l/o.width)};if(!n.isTransparent(u,c,o.width))return!0}return!1}},{key:"drawInOffscreen",value:function(t,r){var i=r.getContext("2d");(0,e.ge)(r,wt.workspaceWidth,wt.workspaceHeight),i.clearRect(0,0,wt.workspaceWidth,wt.workspaceHeight);var a=t.getAttribute("stroke-width");i.save(),n.drawInContext(t,i,1,a,!1),i.restore()}},{key:"isTransparent",value:function(e,t,n){return 0===e[4*t.x+t.y*n*4+3]}},{key:"drawInContext",value:function(e,t,r,i,a){var o=Ze.extract(e,4);switch(0!==o.angle&&n.rotateFromCenter(t,e,o.angle),t.scale(r,r),t.fillStyle=a&&!Oe.isCloseDPath(e)||"image"===e.tagName?"#ff00FF":Se.endDotColor,t.lineWidth=i,t.strokeStyle="#ff00FF",e.getAttribute("fill")||e.getAttribute("stroke")||(t.strokeStyle="rgba(0,0,0,0)",t.fillStyle="#ff00FF"),e.tagName){case"path":a&&!Oe.isCloseDPath(e)?("path"!==wt.mode&&Oe.renderPath(e,t),Oe.renderPathTips(e,t)):Oe.renderPath(e,t);break;case"g":for(var s=0;s<e.childElementCount;s++)t.restore(),t.save(),n.drawInContext(e.childNodes[s],t,r,i,a),t.restore(),t.save();break;default:Oe.processXMLnode(e,t,!0)}}},{key:"rotateFromCenter",value:function(t,n,r){var i=et.getBoxCenter(n);t.translate(i.x,i.y),t.rotate(r*e.Zh),t.translate(-i.x,-i.y)}},{key:"showmask",value:function(){var t=(0,e.um)(wt.frame,0,0,Sv.workingCanvas.width,Sv.workingCanvas.height,{position:"absolute",zIndex:2e5,visibility:"visible"});t.setAttribute("id","layermask"),t.appendChild(Sv.workingCanvas)}},{key:"on",value:function(){(0,e.gn)("layermask").style.visibility="visible"}},{key:"off",value:function(){(0,e.gn)("layermask").style.visibility="hidden"}}]),n}(),Ee="white",Te="#009eff",xe="#ffaa00",ke=void 0,Se=function(){function n(){t(this,n)}return r(n,null,[{key:"endDotColor",get:function(){return xe}},{key:"selectedDotColor",get:function(){return"lime"}},{key:"selector",get:function(){return ke}},{key:"process",value:function(e){var t=n.getPolyPoints(e),r=t[0];t=n.addPoints(t),(t=n.smoothPoints(t)).unshift(r),t=n.addPoints(t),t=n.deletePoints(t);var i=n.drawBezier(t);return e.parentNode.removeChild(e),i}},{key:"getPolyPoints",value:function(e){for(var t=e.points,n=[],r=0;r<t.numberOfItems;r++)n.push(t.getItem(r));return n}},{key:"smoothPoints",value:function(e){var t,n=e.length,r=[];for(t=0;t<n-1;t++){for(var i=0,a=0,o=-3;o<=3;o++){var s=Math.max(0,t+o);i+=e[s=Math.min(s,n-1)].x,a+=e[s].y}i/=7,a/=7,r.push({x:i,y:a})}return r.push(e[n-1]),r}},{key:"addPoints",value:function(e){for(var t,r=0,i=!0;i;)if(i=(t=n.fillWithPoints(e))[0],++r>10)return t[1];return t[1]}},{key:"fillWithPoints",value:function(e){for(var t=e.length,n=1,r=!1,i=[e[0]];n<t-1;){var a=e[n],o=e[n+1],s=w.len(w.diff(o,a));if(i.push(e[n]),s>5){var u=w.mid(a,o);i.push({x:u.x,y:u.y}),r=!0}n++}return i.push(e[t-1]),[r,i]}},{key:"deletePoints",value:function(t){var n=t.length,r=1,i=0,a=[];a.push(t[0]);for(var o,s,u,h=e.Em?40:30;r<n-1;){o=t[i],s=t[r],u=t[r+1];var l=w.diff(o,s),c=w.diff(u,s),d=w.len(l)*w.len(c);0===d&&(d=.01),(w.dot(l,c)/d>-.9||w.len(c)>h||w.len(l)>h)&&(a.push(t[r]),i=r),r++}return o=t[n-2],s=t[n-1],a.length>2&&w.len(w.diff(o,s))<3&&a.pop(),a.push(t[n-1]),a}},{key:"drawBezier",value:function(t){var r=t[0],i=et.addPath((0,e.gn)("layer1"),r.x,r.y);if(t.length<2)return i;var a=n.getBezier(t);return i.setAttributeNS(null,"d",a),i}},{key:"getBezier",value:function(e){Oe.lastcxy=e[0];var t=e[e.length-1],r="M".concat(Oe.lastcxy.x,",").concat(Oe.lastcxy.y),i="";if(e.length<3)i=n.lineSeg(e[1]);else{for(var a=w.len(w.diff(e[0],t)),o=n.curveSeg(e[0],e[1],e[2]),s=2;s<e.length-1;s++)i+=n.curveSeg(e[s-1],e[s],e[s+1]);0===a?(i+=n.curveSeg(e[e.length-2],t,e[1]),o=n.curveSeg(e[0],e[1],e[2])):i+=n.curveSeg(e[e.length-2],t,t),r+=o}return r+i}},{key:"getControlPoint",value:function(e,t,n){var r,i=w.len(w.diff(e,t)),a=w.len(w.diff(t,n)),o=w.len(w.diff(e,n));r=i+a===0?0:o/(i+a);var s=Math.min(i,a),u=w.diff(e,t),h=w.diff(n,t),l=w.sum(w.norm(u),w.norm(h)),c=w.perp(l);if(w.dot(c,h)<0&&(c=w.neg(c)),0===l.x||0===l.y){var d=(Math.sqrt(2)-1)/3*4;c=w.norm(c);var f=w.dot(w.diff(t,e),c);return w.diff(t,w.scale(c,f*d))}return w.diff(t,w.scale(c,r*r*s*.666))}},{key:"curveSeg",value:function(e,t,r){var i=n.getControlPoint(e,t,r),a=w.sum(e,w.diff(e,Oe.lastcxy));return Oe.lastcxy=i,"C".concat(a.x,",").concat(a.y,",").concat(i.x,",").concat(i.y,",").concat(t.x,",").concat(t.y)}},{key:"makeRectangle",value:function(e,t){var r=t[0],i=et.addPath(e,r.x,r.y),a=n.getRectangularD(t);return i.setAttributeNS(null,"d",a),i.setAttribute("fill","none"),i}},{key:"getRectangularD",value:function(e){for(var t=e[0],r="M".concat(t.x,",").concat(t.y),i=1;i<e.length;i++)r+=n.lineSeg(e[i]);return(r+=n.lineSeg(e[0]))+"z"}},{key:"lineSeg",value:function(e){return Oe.lastcxy=e,"L".concat(e.x,",").concat(e.y)}},{key:"moveToCmd",value:function(e){return Oe.lastcxy=e,"M".concat(e.x,",").concat(e.y)}},{key:"convertPoints",value:function(t){for(var r=n.getPolyPoints(t),i="M".concat(r[0].x,",").concat(r[0].y),a=1;a<r.length;a++)i+=n.lineSeg(r[a]);i+="z";var o=n.getStylingFrom(t);o.d=i,o.id=(0,e.N7)("path"),o["stroke-miterlimit"]=t.getAttribute("stroke-miterlimit");var s=et.addChild((0,e.gn)("layer1"),"path",o);return t.parentNode.removeChild(t),s}},{key:"getStylingFrom",value:function(e){return{opacity:1,fill:e.getAttribute("fill"),stroke:e.getAttribute("stroke"),"stroke-width":e.getAttribute("stroke-width")}}},{key:"makeEllipse",value:function(t){var r=Number(t.getAttribute("rx")),i=Number(t.getAttribute("ry")),a=Number(t.getAttribute("cx")),o=Number(t.getAttribute("cy")),s=(Math.sqrt(2)-1)/3*4,u=[["M",a-r,o],["C",a-r,o-i*s,a-r*s,o-i,a,o-i],["C",a+r*s,o-i,a+r,o-i*s,a+r,o],["C",a+r,o+i*s,a+r*s,o+i,a,o+i],["C",a-r*s,o+i,a-r,o+i*s,a-r,o]],h=n.getStylingFrom(t);return h.d=Oe.arrayToString(u),h.id=(0,e.N7)("path"),h["stroke-miterlimit"]=t.getAttribute("stroke-miterlimit"),et.addChild((0,e.gn)("layer1"),"path",h)}},{key:"getAnchorpoints",value:function(e){for(var t=Oe.getCommandList(e),n=[],r=0;r<t.length;r++)"z"!==Oe.getAbsoluteCommand(t[r])[0]&&n.push(Oe.endp);return n}},{key:"getPointsAndCmds",value:function(e){return n.getCommands(e.getAttribute("d"))}},{key:"getCommands",value:function(e){for(var t,n=Oe.getCommandList(e),r=[],i=0;i<n.length;i++){var a=Oe.getAbsoluteCommand(n[i]);"m"===a[0].toLowerCase()&&(t=Oe.endp),"z"===a[0].toLowerCase()?r.push({cmd:a[0],pt:t}):r.push({cmd:a[0],pt:Oe.endp})}return r}},{key:"getPointsForFirst",value:function(e){var t,r=e.getAttribute("d").match(/[M][^M]*/g);return t=r?r[0]:e.getAttribute("d"),n.getCommands(t)}},{key:"getDattribute",value:function(e){Oe.lastcxy=e[0].pt;var t="M".concat(Oe.lastcxy.x,",").concat(Oe.lastcxy.y),r="";if(e.length<3)return"z"===e[1].cmd.toLowerCase()?null:t+n.lineSeg(e[1].pt);wt.skipNext=!1;for(var i=n.thisCommand(e,1),a=e[1],o=e[e.length-1],s=w.len(w.diff(e[0].pt,o.pt)),u="C"===a.cmd&&"C"===o.cmd&&0===s?"ellipse":"C"===a.cmd&&"C"===e[e.length-2].cmd&&"z"===o.cmd.toLowerCase()?"closecurve":"L"===a.cmd&&"L"===e[e.length-2].cmd&&0===s?"polygon":"C"===a.cmd&&"C"===o.cmd?"curve":"line",h=2;h<e.length-1;h++)r+=n.thisCommand(e,h);switch(u){case"ellipse":r+=n.curveSeg(e[e.length-2].pt,o.pt,a.pt),i=n.curveSeg(e[0].pt,a.pt,e[2].pt);break;case"closecurve":case"polygon":r+="z";break;case"curve":r+=n.curveSeg(e[e.length-2].pt,o.pt,o.pt);break;case"line":r+="z"===o.cmd.toLowerCase()?"z":n.lineSeg(o.pt);break;default:r+=n.lineSeg(o.pt)}return t+i+r}},{key:"thisCommand",value:function(e,t){var r,i=e[t].cmd,a=e[t].pt;if(wt.skipNext)return wt.skipNext=!1,"";if(n.skipCmd(e,t))return"";switch(i.toUpperCase()){case"C":case"S":var o=e[t-1].pt,s=e[t+1].pt;r=n.curveSeg(o,a,s);break;case"Z":r="Z";break;case"M":r=n.moveToCmd(a);break;default:r=n.lineSeg(a)}return r}},{key:"skipCmd",value:function(e,t){var n=e[t].cmd.toLowerCase(),r=e[t+1].cmd.toLowerCase();return"m"===n&&"m"===r||"m"===n&&"z"===r&&(wt.skipNext=!0,!0)}},{key:"maxDistance",value:function(){return 20/wt.currentZoom}},{key:"importPath",value:function(e){var t=e.getAttribute("d"),r=Oe.getCommandList(t),i=n.adaptPath(r),a=Oe.arrayToString(i);e.setAttribute("d",a)}},{key:"adaptPath",value:function(e){var t,n=[],r={x:e[0][1],y:e[0][2]};n.push(e[0]);for(var i=1;i<e.length;i++){var a=e[i].concat();switch(a.shift().toLowerCase()){case"h":r={x:a[0],y:r.y},n.push(["L",r.x,r.y]);break;case"v":r={x:r.x,y:a[0]},n.push(["L",r.x,r.y]);break;case"l":r={x:a[0],y:a[1]},n.push(["L",r.x,r.y]);break;case"c":var o={x:a[(t=a.length)-2],y:a[t-1]},s={x:a[0],y:a[1]};0===Math.floor(w.len(w.diff(r,s)))&&n.push(["L",r.x,r.y]),n.push(e[i]);var u={x:a[t-4],y:a[t-3]};0===Math.floor(w.len(w.diff(u,o)))&&n.push(["L",o.x,o.y]),r=o;break;case"z":n.push(e[i]);break;default:r={x:a[(t=a.length)-2],y:a[t-1]},n.push(e[i])}}return n}},{key:"showDots",value:function(t){Ze.applyToCmds(t,Ze.combineAll(t)),Ze.eliminateAll(t);var r=n.getPointsForFirst(t),i=(0,e.gn)("pathdots");null!==i&&i.parentNode.removeChild(i),(i=document.createElementNS(wt.xmlns,"g")).setAttribute("style","pointer-events:none"),i.setAttribute("id","pathdots"),document.getElementById("layer1").parentNode.appendChild(i);for(var a=n.getPathDotsElem(i,r),o=0;o<a.length;o++)a[o].setAttribute("parentid",t.id);t.setAttribute("style","pointer-events:visibleStroke;");var s=a[a.length-1],u=Oe.curveoptions.indexOf(s.getAttribute("cmd"))>-1;s.setAttribute("fill",u?Te:Ee),s.setAttribute("opacity",.6);var h=n.getDotPoint(a[0]),l=n.getDotPoint(s);w.len(w.diff(l,h))<10&&"Z"!==s.getAttribute("cmd")&&s.setAttribute("fill",xe)}},{key:"getPathDotsElem",value:function(e,t){for(var r,i,a=[],o=0;o<t.length-1;o++)"M"===t[o].cmd&&(r=t[o].pt),i=n.getDot(e,t[o].cmd,t[o].pt),a.push(i),i.onmouseover=function(e){n.highlightDot(e)},i.onmouseout=function(e){n.unhighlightDot(e)};var s=t[t.length-1],u=s.pt,h=s.cmd,l=t[t.length-2];return"z"!==h.toLowerCase()&&0===w.len(w.diff(r,u))?(h="x",(i=n.getDot(e,h,u)).style.visibility="hidden"):0===w.len(w.diff(r,u))&&"z"===h.toLowerCase()&&0===w.len(w.diff(r,l.pt))?(i.setAttribute("cmd","x"),i.style.visibility="hidden"):("z"===h.toLowerCase()&&(h="C"===l.cmd?"C":"L"),i=n.getDot(e,h,u)),a.push(i),i.onmouseover=function(e){n.highlightDot(e)},i.onmouseout=function(e){n.unhighlightDot(e)},a}},{key:"reshape",value:function(e){for(var t=n.getDotsCoodinates(e),r=n.getPointsForFirst(e),i=w.len(w.diff(t[0].pt,t[t.length-1].pt)),a="x"!==t[t.length-1].cmd.toLowerCase(),o=[],s=0;s<r.length;s++)0===t.length?o.push(r[s]):("x"===t[0].cmd.toLowerCase()&&(t[0].cmd=r[s].cmd,t[0].pt=o[0].pt),o.push(t[0]),t.shift());a&&(i<10&&o.length>3?(o[o.length-1].cmd="z",o[0].pt={x:o[o.length-1].pt.x,y:o[o.length-1].pt.y}):o[o.length-1].cmd="L"===o[1].cmd?"L":"C");var u=n.getDattribute(o);if(Oe.isCompoundPath(e))for(var h=e.getAttribute("d").match(/[M][^M]*/g),l=1;l<h.length;l++)u+=h[l];e.setAttributeNS(null,"d",u),we.getImage(e)&&we.rotatePointsOf(e)}},{key:"getDotColor",value:function(e,t){var r=n.getPointsForFirst(e),i=n.getDotPos(t);if(i<0)return Te;if(i>=r.length-1)return xe;var a=r[i].cmd;return Oe.curveoptions.indexOf(a)>-1?Te:Ee}},{key:"getDotPos",value:function(e){var t=e.id.split(" ");return t.length<2||"grab"!==t[0]?-1:Number(t[1])-1}},{key:"getDotPoint",value:function(t){var n=Ze.extract((0,e.gn)(t.getAttribute("parentid")),4),r=Ze.getCombinedMatrices((0,e.gn)(t.getAttribute("parentid"))),i=Ze.point(Number(t.getAttribute("cx")),Number(t.getAttribute("cy")),r.inverse());return Ze.point(i.x,i.y,n.matrix.inverse())}},{key:"isTip",value:function(t){var r=n.getDotPos(t);return!(r<0||0!==r&&r!==(0,e.gn)("pathdots").childElementCount-1)}},{key:"getDot",value:function(t,n,r){n=n.toUpperCase();var i=Oe.curveoptions.indexOf(n)>-1,a=Math.floor((e.Em?10:6)/wt.currentZoom)+1,o="Z"===n,s=et.addChild(t,"circle",{id:(0,e.N7)("grab"),fill:i?Te:Ee,r:a,stroke:o?"none":"#064268","stroke-width":1,"pointer-events":o?"none":"all",opacity:o?0:.8});return s.setAttributeNS(null,"cx",r.x),s.setAttributeNS(null,"cy",r.y),s.setAttribute("cmd",n),s}},{key:"highlightDot",value:function(e){var t=e.target;t.setAttribute("fill","#00ffff"),t.setAttribute("opacity",1)}},{key:"unhighlightDot",value:function(e){var t=e.target;if(t){var n=Oe.curveoptions.indexOf(t.getAttribute("cmd"))>-1;t.setAttribute("fill",n?Te:Ee),t.setAttribute("opacity",.6)}}},{key:"hideDots",value:function(t){t&&t.setAttribute("style","pointer-events:visiblePainted;");var n=(0,e.gn)("pathdots");n&&n.parentNode.removeChild(n)}},{key:"getDotsCoodinates",value:function(){for(var t=[],r=0;r<(0,e.gn)("pathdots").childElementCount;r++){var i=(0,e.gn)("pathdots").childNodes[r];t.push({cmd:i.getAttribute("cmd"),pt:n.getDotPoint(i)})}return t}},{key:"getDots",value:function(){for(var t=[],n=0;n<(0,e.gn)("pathdots").childElementCount;n++)t.push((0,e.gn)("pathdots").childNodes[n]);return t}},{key:"addDot",value:function(t){var r=(0,e.gn)("pathdots");r.parentNode.removeChild(r);var i=Ze.extract(t,4),a=Ze.point(wt.initialPoint.x,wt.initialPoint.y,i.matrix.inverse());(0,e.ge)(Sv.workingCanvas,wt.root.getAttribute("width")*wt.currentZoom,wt.root.getAttribute("height")*wt.currentZoom);var o=Sv.workingCanvas.getContext("2d");o.clearRect(0,0,Sv.workingCanvas.width,Sv.workingCanvas.height),o.fillStyle="rgba(0,0,0,0)",o.lineWidth=oe.linemask,o.strokeStyle="#ff00FF",t.setAttribute("d",n.addPoint(t,o,a)),n.showDots(t),ve.record()}},{key:"getHitIndex",value:function(e,t,n){var r=function(r){e.save(),e.lineWidth=r,e.beginPath();for(var i=0;i<t.length;i++)if(Oe.drawCommand(e,t[i]),e.stroke(),n=w.floor(n),0!==e.getImageData(n.x,n.y,1,1).data[3])return i;e.stroke(),e.restore()},i=r(2);return i>-1?i:r(oe.linemask)}},{key:"getHitPointIndex",value:function(e,t){for(var n=0;n<e.length;n++)if(0===w.len(w.diff(e[n].pt,t)))return n;return-1}},{key:"addPoint",value:function(e,t,r){var i,a=Oe.getSVGcommands(e),o=n.getPointsAndCmds(e),s=n.getHitIndex(t,a,w.floor(r));if(s>-1){var u=o[s].cmd;i=Oe.curveoptions.indexOf(u)>-1||"z"===u.toLowerCase()?{cmd:"C",pt:r}:{cmd:"L",pt:n.inLine(r,s,o)},o.splice(s,0,i)}return n.getDattribute(o)}},{key:"inLine",value:function(e,t,n){var r=n[t-1].pt,i=n[t].pt,a=w.norm(w.diff(i,r)),o=w.dot(a,w.diff(e,r));return w.sum(r,w.scale(a,o))}},{key:"deleteDot",value:function(t,r){var i=n.getPointsForFirst(r),a=n.getPointsAndCmds(r),o="x"===(0,e.gn)("pathdots").childNodes[(0,e.gn)("pathdots").childElementCount-1].getAttribute("cmd");if(!(a.length!==i.length&&i.length<5||a.length<(o?6:3))){var s=n.getDotPoint(t),u=n.getHitPointIndex(a,s);if(u>0&&a.splice(u,1),0===u){var h=a[0].pt,l=a[a.length-1].pt;if(0===w.len(w.diff(h,l))){if(a.splice(u,1),o){a.splice(a.length-1,1),a[0].cmd="M";var c={x:a[0].pt.x,y:a[0].pt.y};a[a.length-1].pt=c;var d={cmd:"z",pt:c};a.push(d)}a[a.length-1].pt=a[0].pt}else a.splice(u,1),2===a.length&&(a[0].cmd="M",a[a.length-1].cmd="L")}var f=n.getDattribute(a),p=we.getImage(r);f?(r.setAttribute("d",f),n.showDots(r),p&&we.rotatePointsOf(r)):(n.hideDots(r),r.parentNode.removeChild(r),p&&we.removeClip(p)),ve.record()}}},{key:"enterEditMode",value:function(e){ke=we.getPathBorder(e),n.showDots(ke)}},{key:"quitEditMode",value:function(){n.hideDots(ke),ke=void 0}},{key:"hitDot",value:function(t){if(!ke)return!1;var r=ne.getScreenPt(t),i=n.getClosestDotTo(r,2*Math.floor((e.Em?14:6)/wt.currentZoom));return i&&(ne.target=i),null!==i}},{key:"getClosestDotTo",value:function(t,r){for(var i=n.getDotsCoodinates(ke),a=99999,o=null,s=0;s<i.length;s++){var u=i[s].pt,h=w.len(w.diff(u,t));h<a&&(a=h,o=s+1)}return a<=r?(0,e.gn)("grab ".concat(o)):null}},{key:"hitLine",value:function(e,t){return n.getPointIndex(e,t)>-1}},{key:"getPointIndex",value:function(t,r){var i=Ze.extract(t,4),a=Ze.point(r.x,r.y,i.matrix.inverse());(0,e.ge)(Sv.workingCanvas,wt.root.getAttribute("width"),wt.root.getAttribute("height"));var o=Sv.workingCanvas.getContext("2d");return o.clearRect(0,0,Sv.workingCanvas.width,Sv.workingCanvas.height),o.fillStyle="rgba(0,0,0,0)",o.lineWidth=oe.linemask,o.strokeStyle="#ff00FF",n.getHitIndex(o,Oe.getSVGcommands(t),w.floor(a))}},{key:"getClosestPath",value:function(e,t,r,i){for(var a,o=999999,s=0;s<r.childElementCount;s++){var u=r.childNodes[s];if(u.id!==t.id&&!Oe.isCloseDPath(u)){var h=n.getStartPoint(u),l=z.distance(h.x-e.x,h.y-e.y);l<o&&(o=l,a=u)}}return o<=i?a:null}},{key:"getStartPoint",value:function(e){var t=e.getAttribute("d");return n.getAnchorpoints(t)[0]}},{key:"getLastPoint",value:function(e){var t=e.getAttribute("d"),r=n.getAnchorpoints(t);return r[r.length-1]}},{key:"join",value:function(e,t,r){Ze.applyToCmds(t,Ze.combineAll(t)),Ze.applyToCmds(e,Ze.combineAll(e));var i,a=n.getCommands(e.getAttribute("d")),o=w.len(w.diff(r,a[0].pt)),s=w.len(w.diff(r,a[a.length-1].pt)),u=o>s,h=n.getCommands(t.getAttribute("d"));u?s<o?(a[0].cmd="C",i=h.concat(a.reverse())):(h.shift(),i=a.concat(h)):o<s?(h[0].cmd="L",a[0].cmd="C",i=a.reverse().concat(h)):(a[0].cmd="L",i=h.concat(a));var l=n.getDattribute(i);w.len(w.diff(i[0].pt,i[i.length-1].pt))<10&&"z"!==l.charAt(l.length-1)&&(l+="z"),e.setAttributeNS(null,"d",l);var c=n.getStylingFrom(t);for(var d in c)e.setAttribute(d,c[d]);return t.parentNode&&t.parentNode.removeChild(t),e}},{key:"checkBackgroundCrop",value:function(e){var t=n.getPointsAndCmds(e),r=_e.findUnderMe(e);if(0===r.length?n.createFromBkg(e):n.someOverlaps(e,r))e.parentNode.removeChild(e,r),_e.bringElementsToFront();else{var i=n.getDattribute(t);e.setAttribute("d",i)}}},{key:"someOverlaps",value:function(e,t){var r=!1;n.strechEdges(e);var i=et.getBox(e),a={x:0,y:0,width:480,height:360};if(n.withinBounds(i,a))return r;n.isClockWise(e.getAttribute("d"))||e.setAttribute("d",n.flip(e));for(var o=0;o<t.length;o++){var s=t[o];"image"!==s.tagName.toLowerCase()&&"clipPath"!==s.tagName&&(n.getContactPoints(e,s).length<2||s.id.indexOf("staticbkg")<0&&"yes"!==s.getAttribute("stencil")||n.withinBounds(i,a)&&(n.endsSameSide(e)||(n.isClockWise(s.getAttribute("d"))&&s.setAttribute("d",n.flip(s)),n.createStencil(e,s)&&(r=!0))))}return r}},{key:"createStencil",value:function(t,r){for(var i=null!==we.getImage(r),a=n.getPointsAndCmds(t),o=n.getPointsAndCmds(r),s=_e.groupStartsAt((0,e.gn)("layer1"),r),u=_e.onTopOf((0,e.gn)("layer1"),s),h=r.parentNode,l=0;l<u.length;l++)h.appendChild(u[l]);var c=n.getContactPoints(t,r);if(c.length<2)return!1;var d=n.getStylingFrom(r);i&&(d.fill="none");var f=n.makeAcut(t,a,o,c[0],c[1],d);f.setAttribute("stencil","yes"),(0,e.gn)("layer1").appendChild(f);var p=n.getStylingFrom(t);for(var g in p.fill=i?"none":r.getAttribute("fill"),p["stroke-width"]=i?0:wt.strokewidth,p)r.setAttribute(g,p[g]);p.id=(0,e.N7)("path"),p.d=r.getAttribute("d"),i&&(r=et.addChild((0,e.gn)("layer1"),"path",p)),r.setAttribute("d",n.getComplement(t,r,c[0],c[1])),r.setAttribute("d",n.flip(r)),r.setAttribute("stencil","yes");for(var m=0;m<u.length;m++)h.appendChild(u[m]);return c.length>2&&n.cutBoard((0,e.gn)("layer1"),c,t,f,2),!i}},{key:"cutBoard",value:function(t,r,i,a,o){if(!(o>r.length-2)){n.isClockWise(a.getAttribute("d"))&&a.setAttribute("d",n.flip(a));var s=n.getPointsAndCmds(i),u=n.getPointsAndCmds(a),h=r[o],l=r[o+1],c=n.getStylingFrom(a),d=n.updateContactPoints(h,l,s,u);if(n.isValidSegment(d)){var f=n.makeAcut(i,s,u,d[0],d[1],c);t.appendChild(f),f.setAttribute("stencil","yes"),(0,e.gn)("layer1").appendChild(f);var p=n.getStylingFrom(i);for(var g in p.fill=a.getAttribute("fill"),p["stroke-width"]=wt.strokewidth,p)a.setAttribute(g,p[g]);a.setAttribute("d",n.getComplement(i,a,d[0],d[1])),a.setAttribute("d",n.flip(a)),a.setAttribute("stencil","yes"),n.cutBoard(t,r,i,f,o+2)}}}},{key:"moveToEdge",value:function(e){return e.x<=-10||e.x>=490||e.y>=370||e.y<=-10?null:e.x<=0?{x:-10,y:e.y}:e.y<=0?{x:e.x,y:-10}:e.x>=480?{x:490,y:e.y}:e.y>=360?{x:e.x,y:370}:null}},{key:"atEdge",value:function(e){return e.x<=-10||e.x>=490||e.y>=370||e.y<=-10}},{key:"endsSameSide",value:function(e){var t=n.getPointsAndCmds(e),r=t[t.length-1].pt,i=t[0].pt;return n.findEdge(i)===n.findEdge(r)}},{key:"findEdge",value:function(e){return e.x<=0?"W":e.x>=480?"E":e.y>=360?"S":"N"}},{key:"createFromBkg",value:function(t){n.strechEdges(t);var r=et.getBox(t);if(n.withinBounds(r,{x:0,y:0,width:480,height:360}))return!1;if(n.endsSameSide(t))return!1;var i={id:(0,e.N7)("path"),opacity:1,fill:"white"};i.d=Oe.arrayToString([["M",-10,-10],["L",490,-10],["L",490,370],["L",-10,370],["L",-10,-10]]);var a=et.addChild((0,e.gn)("layer1"),"path",i);a.setAttribute("stencil","yes"),n.isClockWise(t.getAttribute("d"))||t.setAttribute("d",n.flip(t)),n.isClockWise(a.getAttribute("d"))&&a.setAttribute("d",n.flip(a));var o=n.getStylingFrom((0,e.gn)("staticbkg"));for(var s in o)a.setAttribute(s,o[s]);return n.createStencil(t,a)}},{key:"withinBounds",value:function(e,t){return!(e.x<=t.x&&e.width+e.x>=t.width)&&(e.y>t.y||e.height+e.y<t.height)}},{key:"strechEdges",value:function(e){var t,r=n.getPointsAndCmds(e),i=r[r.length-1].pt;if(!n.atEdge(i)){var a=n.moveToEdge(i);a?r.push({cmd:"C",pt:a}):(t=w.sum(i,w.diff(i,r[r.length-2].pt)),r.push({cmd:"C",pt:t}))}var o=r[0].pt;if(!n.atEdge(o)){r[0].cmd="L";var s=n.moveToEdge(o);s?r.unshift({cmd:"M",pt:s}):(t=w.sum(o,w.diff(o,r[1].pt)),r.unshift({cmd:"M",pt:t}))}var u=n.getDattribute(r);e.setAttribute("d",u)}},{key:"getContactPoints",value:function(e,t){for(var r=n.getPointsAndCmds(e),i=n.getPointsAndCmds(t),a=[],o=1;o<r.length;o++)for(var s=r[o-1].pt,u=r[o].pt,h=1;h<i.length;h++){var l=i[h-1].pt,c=i[h].pt,d=w.lineIntersect(s,u,l,c);d&&a.push([o,h,d])}return a}},{key:"makeAcut",value:function(t,r,i,a,o,s){var u=Oe.getSVGcommands(t);s.d=n.chopSection(r,u,i,a,o),s.id=(0,e.N7)("path");var h=et.addChild((0,e.gn)("layer1"),"path",s);return h.setAttribute("d",n.flip(h)),h}},{key:"chopSection",value:function(e,t,r,i,a){var o="M".concat(i[2].x,",").concat(i[2].y);o+=Oe.arrayToString(t.slice(i[0],a[0])),o+=n.lineSeg(a[2]);var s=i[1],u=a[1],h=n.getShapeFromPoints(s,u,i[2],r);return n.fromPointsToPath(o,h)}},{key:"getShapeFromPoints",value:function(e,t,n,r){var i=[];if(t>e){var a=r.length;i=(i=r.slice(t,a)).concat(r.slice(0,e))}else t!==e&&(i=r.slice(t,e));return i.push({cmd:"L",pt:n}),i}},{key:"fromPointsToPath",value:function(e,t){var r=t[0];e+=n.lineSeg(r.pt);for(var i=1;i<t.length-1;i++)e+=n.getNextCmd(i,r,t),r=t[i];return e+n.lineSeg(t[t.length-1].pt)}},{key:"getNextCmd",value:function(e,t,r,i){var a="";switch(r[e].cmd.toUpperCase()){case"M":if("C"===t.cmd){var o=i||r[e+1].pt;a=n.curveSeg(t.pt,r[e].pt,o)}else a=n.lineSeg(r[e].pt);break;case"C":case"S":a=n.curveSeg(t.pt,r[e].pt,i||r[e+1].pt);break;default:a=n.lineSeg(r[e].pt)}return a}},{key:"getComplement",value:function(e,t,r,i){var a=Oe.getSVGcommands(e),o=n.getPointsAndCmds(t),s="M".concat(r[2].x,",").concat(r[2].y);s+=Oe.arrayToString(a.slice(r[0],i[0])),s+=n.lineSeg(i[2]);var u=r[1],h=i[1],l=n.getFromPoints(u,h,r[2],o);return n.fromPointsToPath(s,l)}},{key:"getFromPoints",value:function(e,t,n,r){var i=[];if(e>=t){var a=r.length;i=(i=r.slice(e,a)).concat(r.slice(0,t))}else i=r.slice(e,t);return i.length>0&&i.reverse(),i.push({cmd:"L",pt:n}),i}},{key:"updateContactPoints",value:function(e,t,r,i){var a,o,s=n.updateContact(e[0],r,i);if(s)o=[e[0],s,e[2]];else{var u=n.extendSearch(e[0],t[0]-1,r,i);if(!u)return null;o=[u[0],u[1],u[2]]}var h=n.updateContact(t[0],r,i);if(h)a=[t[0],h,t[2]];else{var l=n.extendSearch(e[0]+1,t[0]+1,r,i);if(!l)return null;a=[l[0],l[1],l[2]]}return[o,a]}},{key:"extendSearch",value:function(e,t,n,r){for(var i=e;i<n.length;i++)for(var a=n[i-1].pt,o=n[i].pt,s=1;s<r.length;s++){var u=r[s-1].pt,h=r[s].pt,l=w.lineIntersect(a,o,u,h);if(l)return[i,s,l]}return null}},{key:"updateContact",value:function(e,t,n){for(var r=t[e-1].pt,i=t[e].pt,a=1;a<n.length;a++){var o=n[a-1].pt,s=n[a].pt;if(w.lineIntersect(r,i,o,s))return a}return null}},{key:"isValidSegment",value:function(e){return!!e&&e[0][1]!==e[1][1]&&e[0][2]!==e[1][1]}},{key:"isClockWise",value:function(e){return"clockwise"===n.getTurnType(n.getAnchorpoints(e))}},{key:"getTurnType",value:function(e){if(e.length<3)return"colinear";var t=n.getMinMaxPoints(e),r=n.findGreaterThanIndex(t,-1);if(!r)return"colinear";var i=n.findGreaterThanIndex(t,r.index);if(!i)return"colinear";var a=n.findGreaterThanIndex(t,i.index);return a?n.triangleAreaDir(r,i,a):"colinear"}},{key:"findGreaterThanIndex",value:function(e,t){for(var n,r=99999999,i=0;i<e.length;i++)e[i].index>t&&e[i].index<r&&(r=e[i].index,n=e[i]);return n}},{key:"triangleAreaDir",value:function(e,t,n){var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x);return r>0?"clockwise":r<0?"counterclockwise":"colinear"}},{key:"getMinMaxPoints",value:function(e){var t=[0,0,0,0];if(e.length<1)return t;for(var n=9999999,r=9999999,i=-9999999,a=-9999999,o=0;o<e.length;o++)e[o].x<n&&(n=e[o].x,t[0]={type:"minx",x:e[o].x,y:e[o].y,index:o}),e[o].x>i&&(i=e[o].x,t[2]={type:"maxx",x:e[o].x,y:e[o].y,index:o}),e[o].y<r&&(r=e[o].y,t[1]={type:"miny",x:e[o].x,y:e[o].y,index:o}),e[o].y>a&&(a=e[o].y,t[3]={type:"maxy",x:e[o].x,y:e[o].y,index:o});return t}},{key:"flip",value:function(e){for(var t=e.getAttribute("d").match(/[M][^M]*/g),r="",i=0;i<t.length;i++)r+=n.reverse(t[i]);return r}},{key:"reverse",value:function(e){var t=n.getCommands(e);if(t.length<2)return"";var r=t[t.length-1].cmd.toLowerCase();return t[0].cmd="z"===r?"z":r.toUpperCase(),t[t.length-1].cmd="M",t=t.reverse(),n.getDattribute(t)}},{key:"setData",value:function(e){e.getAttribute("relatedto")?n.breakRelationship(e,e.getAttribute("relatedto")):n.makeCompoundPath(e)}},{key:"breakRelationship",value:function(t,r){var i=(0,e.gn)(r);if(i){var a=i.getAttribute("d").match(/[M][^M]*/g),o=n.getMatchPathIndex(t,a);if(!(o<0)){a.splice(o,1);for(var s="",u=0;u<a.length;u++)s+=a[u];i.setAttribute("d",s),t.setAttribute("d",n.flip(t)),t.removeAttribute("relatedto")}}}},{key:"getMatchPathIndex",value:function(e,t){for(var r=n.getPointsAndCmds(e),i=0;i<t.length;i++){var a=t[i],o=n.getCommands(a);if(n.countMatchingPoints(r,o)>=r.length)return i}return-1}},{key:"countMatchingPoints",value:function(e,t){for(var n=0,r=0;r<e.length;r++)for(var i=e[r].pt,a=0;a<t.length;a++){var o=t[a].pt;0===w.len(w.diff(i,o))&&n++}return n}},{key:"makeCompoundPath",value:function(e){var t=n.findIntersecting(e);if(0===t.length||n.containsImage(t)||n.anyCrossing(t,e))e.setAttribute("fill",wt.fillcolor);else{var r=!1;t.sort((function(e,t){var n=et.getArea(e),r=et.getArea(t);return n>r?-1:n<r?1:0}));for(var i=[],a=0;a<t.length;a++)"none"!==t[a].getAttribute("fill")&&(r=!0),"image"===t[a].nodeName&&(r=!0),"path"!==t[a].tagName||Oe.isCloseDPath(t[a])||(r=!0),0===a&&i.push(t[a]),a>0&&(_e.insideMe(t[a],t[a-1])||i.push(t[a]));r?e.setAttribute("fill",wt.fillcolor):n.processCompoundPath(e,i)}}},{key:"findIntersecting",value:function(e){var t=wt.root.createSVGRect(),n=et.getBox(e);t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height;var r=wt.root.getIntersectionList(t,null),i=[];if(null!==r)for(var a=0;a<r.length;a++)"ghostlayer"!==r[a].parentNode.id&&r[a].id!==e.id&&_e.includesBox(e,r[a])&&i.push(r[a]);return i}},{key:"containsImage",value:function(e){for(var t=0;t<e.length;t++)if("image"===e[t].nodeName)return!0;return!1}},{key:"anyCrossing",value:function(e,t){for(var r=0;r<e.length;r++)if(t!==e[r]&&"g"!==e[r].nodeName&&n.getPathCrossing(e[r],t).length>0)return!0;return!1}},{key:"getPathCrossing",value:function(e,t){for(var r=n.getAllPoints(e.getAttribute("d")),i=n.getAllPoints(t.getAttribute("d")),a=[],o=1;o<r.length;o++)for(var s=r[o-1],u=r[o],h=1;h<i.length;h++){var l=i[h-1],c=i[h],d=w.lineIntersect(s,u,l,c);d&&a.push([o,h,d])}return a}},{key:"getAllPoints",value:function(e){var t=Oe.getCommandList(e);if(0===t.length)return[];var r=[],i={x:t[0][1],y:t[0][2]};r.push(i);for(var a=1;a<t.length;a++){var o=t[a];switch(o.shift().toLowerCase()){case"l":i={x:o[0],y:o[1]},r.push(i);break;case"c":o.unshift(i.y),o.unshift(i.x);var s=o.length;i={x:o[s-2],y:o[s-1]};var u=n.getBezierPoints(o);r=r.concat(u);break;case"z":i={x:r[0].x,y:r[0].y},r.push(i)}}var h=n.cleanBezier(r,5);return h.length<5?r:h}},{key:"getBezierPoints",value:function(e){if(e.length<8)return[];var t,n,r,i=e[0],a=e[1],o=e[2],s=e[3],u=e[4],h=e[5],l=e[6],c=e[7],d=i-1,f=a-1;r=0;for(var p=1,g=new Array;r<=1&&r>=0;)t=0,n=0,t=(1-r)*(1-r)*(1-r)*i+3*(1-r)*(1-r)*r*o+3*(1-r)*r*r*u+r*r*r*l,n=(1-r)*(1-r)*(1-r)*a+3*(1-r)*(1-r)*r*s+3*(1-r)*r*r*h+r*r*r*c,t=Math.round(t),n=Math.round(n),t!==d||n!==f?(0===r&&(d=t,f=n),t-d>1||n-f>1||d-t>1||f-n>1?(r-=p,p/=1.1):(g[g.length]={x:t,y:n},d=t,f=n)):(r-=p,p*=1.1),r+=p;return g}},{key:"placePoint",value:function(e,t,n){var r=et.addEllipse(e,t.x,t.y);r.setAttributeNS(null,"stroke-width",.5),r.setAttributeNS(null,"rx",4),r.setAttributeNS(null,"ry",4),r.setAttributeNS(null,"fill",n)}},{key:"cleanBezier",value:function(e,t){var n=e.length,r=1,i=0,a=[];for(a.push(e[0]);r<n-1;){var o=e[i],s=e[r],u=e[r+1],h=w.diff(o,s),l=w.diff(u,s);(w.len(l)>t||w.len(h)>t)&&(a.push(e[r]),i=r),r++}return a}},{key:"processCompoundPath",value:function(e,t){var r=n.isClockWise(e.getAttribute("d"));Ze.applyToCmds(e,Ze.combineAll(e)),Ze.eliminateAll(e);for(var i=e.getAttribute("d"),a=0;a<t.length;a++)if(t[a]!==e)if("none"===t[a].getAttribute("fill"))if(t[a].setAttribute("relatedto",e.id),Oe.isCompoundPath(t[a])){Ze.applyToCmds(t[a],Ze.combineAll(t[a])),Ze.eliminateAll(t[a]);var o=t[a].getAttribute("d").match(/[M][^M]*/g);i+=r===n.isClockWise(o[0])?n.reverse(o[0]):o[0]}else r===n.isClockWise(t[a].getAttribute("d"))&&t[a].setAttribute("d",n.flip(t[a])),Ze.applyToCmds(t[a],Ze.combineAll(t[a])),Ze.eliminateAll(t[a]),i+=t[a].getAttribute("d");else t[a].parentNode.appendChild(t[a]);e.setAttribute("d",i)}}]),n}(),we=function(){function n(){t(this,n)}return r(n,null,[{key:"addCameraFill",value:function(t,r){t.getAttribute("relatedto")&&Se.breakRelationship(t,t.getAttribute("relatedto"));var i=n.getImage(t);i&&(n.removeClip(i,!0),t.setAttribute("id",(0,e.N7)(t.nodeName))),n.createImageFromFeed(t,r)}},{key:"replaceImage",value:function(e,t){e.setAttributeNS(wt.xmlnslink,"xlink:href","data:image/png;base64,".concat(t))}},{key:"createImageFromFeed",value:function(t,n){var r=t.parentNode,i="staticbkg"===t.id,a=_e.groupStartsAt(r,t),o=_e.onTopOf(r,a),s=et.getBox(t).rounded(),u=new M(0,0,wt.workspaceWidth,wt.workspaceHeight);(s=s.expandBy(20)).crop(u);var h=(0,e.t9)("image");i&&(h+="staticbkg");var l=et.createGroup(r,"group_".concat(h)),c=et.getCopy(t),d={id:"pathmask_".concat(h)};for(var f in d)c.setAttribute(f,d[f]);et.addChild(l,"clipPath",{id:"clip_".concat(h),clipPathUnits:"userSpaceOnUse"}).appendChild(c);var p=document.createElementNS(wt.xmlns,"image"),g={x:s.x,y:s.y,width:s.width,height:s.height,id:h};for(var m in g)p.setAttribute(m,g[m]);p.setAttributeNS(wt.xmlnslink,"xlink:href","data:image/png;base64,".concat(n)),p.setAttribute("clip-path","url(#clip_".concat(h,")")),l.appendChild(p);var v={id:"pathborder_".concat(h),fill:"none"};for(var y in v)t.setAttribute(y,v[y]);for(var b=0;b<o.length;b++)r.appendChild(o[b])}},{key:"removeClip",value:function(t,n){var r=t.getAttribute("id"),i=r.indexOf("staticbkg")>-1,a=(0,e.gn)("clip_".concat(r)),o=(0,e.gn)("group_".concat(r)),s=(0,e.gn)("pathborder_".concat(r));if(i&&!n){var u=a.childNodes[0];u.id="staticbkg",(0,e.gn)("layer1").appendChild(u)}else o?o.parentNode.removeChild(o):(a&&a.parentNode.removeChild(a),t.parentNode.removeChild(t));s&&!n&&s.parentNode.removeChild(s)}},{key:"paint",value:function(t){var n=t.getAttribute("id"),r=t.id.indexOf("staticbkg")>-1,i=(0,e.gn)("pathborder_".concat(n));i.setAttribute("id",r?"staticbkg":(0,e.N7)("path"));var a=(0,e.gn)("clip_".concat(n)),o=(0,e.gn)("group_".concat(n));o?o.parentNode.removeChild(o):(a&&a.parentNode.removeChild(a),t.parentNode.removeChild(t)),ne.currentshape=i}},{key:"draw",value:function(t,n,r,i){var a=Ze.getRotationAngle(t),o=et.getBoxCenter(t),s=document.createElement("canvas");(0,e.ge)(s,r.canvas.width,r.canvas.height);var u=s.getContext("2d"),h=t.getAttribute("xlink:href"),l=document.createElement("img");l.src=h;var c=function(u){var h=Number(t.getAttribute("x")),c=Number(t.getAttribute("y")),d=Number(t.getAttribute("width")),f=Number(t.getAttribute("height"));u.fillStyle="red",u.fillRect(h,c,d,f),u.save(),u.translate(o.x,o.y),u.rotate(a*e.Zh),u.translate(-o.x,-o.y),u.drawImage(l,h,c,d,f),u.restore(),u.save(),u.globalCompositeOperation="destination-in",u.fillStyle="#f30",u.strokeStyle="rgba(0,0,0,0)",Oe.processXMLnode(n,u),u.restore(),r.drawImage(s,0,0),i&&i()};l.complete?c(u):l.onload=function(){c(u)}}},{key:"getImage",value:function(t){if(!t)return null;if("image"===t.nodeName)return t;if("g"===t.nodeName){var n=t.id,r=n.indexOf("group_image_")>-1?(0,e.gn)(n.substr(6,n.length)):null;return r&&"image"===r.tagName?r:null}if(t.id.indexOf("pathborder_image")<0&&t.id.indexOf("pathmask_image")<0)return null;var i=t.id.indexOf("pathborder_image")<0?t.id.substring(String("pathmask_").length,t.id.length):t.id.substring(String("pathborder_").length,t.id.length);return(0,e.gn)(i)}},{key:"getPathMask",value:function(t){if(t.id.indexOf("pathborder_image")<0)return null;var n=t.id.substring(String("pathborder_").length,t.id.length);return(0,e.gn)("pathmask_".concat(n))}},{key:"getPathBorder",value:function(t){if(0===t.id.indexOf("image_"))return(0,e.gn)("pathborder_".concat(t.id));if(t.id.indexOf("pathmask_")>-1){var n=t.id.substring(String("pathmask_").length,t.id.length);return(0,e.gn)("pathborder_".concat(n))}return t}},{key:"cloneImage",value:function(t,r){var i=n.getClonedImage(r),a=i.id,o=r.getAttribute("xlink:href"),s=document.createElement("img"),u=function(t){var n=document.createElement("canvas");(0,e.ge)(n,Number(t.getAttribute("width")),Number(t.getAttribute("height"))),n.getContext("2d").drawImage(s,0,0);var r=n.toDataURL("image/png");t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r)};s.src=o,s.complete?u(i):s.onload=function(){u(i)};var h=et.getCopy((0,e.gn)("pathmask_".concat(r.id))),l={id:"pathmask_".concat(a)};for(var c in l)h.setAttribute(c,l[c]);var d=et.createGroup(t,"group_".concat(a));et.addChild(d,"clipPath",{id:"clip_".concat(a),clipPathUnits:"userSpaceOnUse"}).appendChild(h),i.setAttribute("clip-path","url(#clip_".concat(a,")")),d.appendChild(i);var f=et.getCopy((0,e.gn)("pathborder_".concat(r.id))),p={id:"pathborder_".concat(a)};for(var g in p)f.setAttribute(g,p[g]);return t.appendChild(f),Ze.translateTo(i,window.xform),Ze.translateTo(h,window.xform),Ze.translateTo(f,window.xform),i}},{key:"getClonedImage",value:function(t){for(var n=et.attributeTable[t.tagName],r=document.createElementNS(wt.xmlns,t.tagName),i=0;i<n.length;i++)r.setAttribute(n[i],t.getAttribute(n[i]));var a=(0,e.t9)("image");r.setAttribute("id",a);var o=Ze.getRotationAngle(t);return 0!==o&&Ze.applyRotation(r,o),r}},{key:"rotatePointsOf",value:function(e){var t=n.getImage(e),r=n.getPathMask(e);if(r){var i=Ze.getRotationAngle(t);if(r.setAttributeNS(null,"d",e.getAttribute("d")),0!==i){var a=et.getBoxCenter(t),o=wt.root.createSVGTransform();o.setRotate(-i,a.x,a.y),Ze.rotateFromPoint(o,r)}}}}]),n}(),Me=["C","c","s","S"],Ae=["Q","q","T","t"],Re=!1,Ce=!1,Pe={"stroke-width":1,"stroke-linecap":"butt",stroke:"rgba(0, 0, 0,0)","stroke-linejoin":"miter","stroke-miterlimit":4,"stroke-dasharray":"none","stroke-dashoffset":0,"stroke-opacity":1},Ie={},Ne={},Oe=function(){function n(){t(this,n)}return r(n,null,[{key:"endp",get:function(){return ce}},{key:"curveoptions",get:function(){return Me}},{key:"lastcxy",get:function(){return fe},set:function(e){fe=e}},{key:"svgerror",get:function(){return pe}},{key:"strokevalues",get:function(){return Pe}},{key:"drawInCanvas",value:function(t){pe=!1,(0,e.ge)(t.outline,t.originalImg.width,t.originalImg.height);var r=t.outline.getContext("2d");n.drawImage(t.svg,r)}},{key:"drawLayers",value:function(e,t,n){for(var r=0;r<e.childElementCount;r++)n(e.childNodes[r],t)}},{key:"drawImage",value:function(e,t){for(var r=0;r<e.childElementCount;r++)n.drawLayer(e.childNodes[r],t)}},{key:"drawLayer",value:function(t,r){r.fillStyle=t.getAttribute("fill")?"none"===t.getAttribute("fill")?"rgba(0, 0, 0,0)":t.getAttribute("fill"):"black",t.getAttribute("opacity")&&(r.fillStyle=(0,e.te)(r.fillStyle,t.getAttribute("opacity"))),r.strokeStyle=t.getAttribute("stroke")?t.getAttribute("stroke"):"rgba(0, 0, 0,0)",r.lineCap=t.getAttribute("stroke-linecap")?t.getAttribute("stroke-linecap"):n.strokevalues["stroke-linecap"],r.lineWidth=t.getAttribute("stroke-width")?Number(t.getAttribute("stroke-width")):Number(n.strokevalues["stroke-width"]),r.miterLimit=t.getAttribute("stroke-miterlimit")?t.getAttribute("stroke-miterlimit"):n.strokevalues["stroke-miterlimit"],r.linejoin=t.getAttribute("stroke-linejoin")?t.getAttribute("stroke-linejoin"):n.strokevalues["stroke-linejoin"],n.processXMLnode(t,r,n.drawLayer)}},{key:"drawElementHole",value:function(e,t){t.fillStyle=e.getAttribute("fill")&&"none"!==e.getAttribute("fill")?e.getAttribute("fill"):"black",t.strokeStyle=e.getAttribute("stroke")?e.getAttribute("stroke"):"rgba(0, 0, 0,0)",t.lineCap=e.getAttribute("stroke-linecap")?e.getAttribute("stroke-linecap"):n.strokevalues["stroke-linecap"],t.lineWidth=e.getAttribute("stroke-width")?Number(e.getAttribute("stroke-width")):Number(n.strokevalues["stroke-width"]),t.miterLimit=e.getAttribute("stroke-miterlimit")?e.getAttribute("stroke-miterlimit"):n.strokevalues["stroke-miterlimit"],t.linejoin=e.getAttribute("stroke-linejoin")?e.getAttribute("stroke-linejoin"):n.strokevalues["stroke-linejoin"],e.tagName&&n.processXMLnode(e,t,n.drawElementHole)}},{key:"drawElementMask",value:function(e,t){"image"!==e.nodeName&&"clipPath"!==e.nodeName&&(e.id.indexOf("pathborder_image")>-1?t.fillStyle="white":t.fillStyle="none"===e.getAttribute("fill")?"rgba(0, 0, 0,0)":"white",t.strokeStyle=e.getAttribute("stroke")?"white":"rgba(0, 0, 0,0)",t.lineCap=e.getAttribute("stroke-linecap")?e.getAttribute("stroke-linecap"):n.strokevalues["stroke-linecap"],t.lineWidth=e.getAttribute("stroke-width")?Number(e.getAttribute("stroke-width")):Number(n.strokevalues["stroke-width"]),t.miterLimit=e.getAttribute("stroke-miterlimit")?e.getAttribute("stroke-miterlimit"):n.strokevalues["stroke-miterlimit"],t.linejoin=e.getAttribute("stroke-linejoin")?e.getAttribute("stroke-linejoin"):n.strokevalues["stroke-linejoin"],n.processXMLnode(e,t,n.drawElementMask))}},{key:"drawElementOutline",value:function(e,t){"image"!==e.nodeName&&"clipPath"!==e.nodeName&&(e.id.indexOf("pathborder_image")>-1?t.fillStyle=window.Settings.spriteOutlineColor:t.fillStyle="none"===e.getAttribute("fill")?"rgba(0, 0, 0,0)":window.Settings.spriteOutlineColor,t.strokeStyle=window.Settings.spriteOutlineColor,t.lineCap="round",t.lineWidth=e.getAttribute("stroke-width")?Number(e.getAttribute("stroke-width"))+12:12,t.miterLimit=2,t.linejoin="round",n.processXMLnode(e,t,n.drawElementOutline))}},{key:"drawBorder",value:function(e,t){for(var r=0;r<e.childElementCount;r++)n.drawElementOutline(e.childNodes[r],t)}},{key:"drawWaterMark",value:function(e,t){for(var r=0;r<e.childElementCount;r++){var i=e.childNodes[r];"g"===i.tagName?n.drawWaterMark(i,t):n.drawObjectWaterMark(i,t)}}},{key:"drawObjectWaterMark",value:function(t,r){if("image"!==t.nodeName&&"clipPath"!==t.nodeName){t.id.indexOf("pathborder_image")>-1&&(r.fillStyle="black");var i=t.getAttribute("fill");r.fillStyle="none"===i?"rgba(0, 0, 0,0)":"black",r.strokeStyle=t.getAttribute("stroke")?"black":"rgba(0, 0, 0,0)",r.lineCap="round",r.lineWidth=t.getAttribute("stroke-width")?Number(t.getAttribute("stroke-width")):Number(n.strokevalues["stroke-width"]),r.miterLimit=t.getAttribute("stroke-miterlimit")?t.getAttribute("stroke-miterlimit"):n.strokevalues["stroke-miterlimit"],r.linejoin="round",r.lineWidth<2&&(r.lineWidth=2),r.save(),n.processXMLnode(t,r),r.restore(),(t.id.indexOf("pathborder_image")>-1||"none"!==i&&i&&"#080808"!==i&&"#000000"!==i&&!("rgba(0, 0, 0, 0)"===i||(0,e.xP)(i)[2]<.25))&&(r.save(),r.fillStyle="white",r.strokeStyle="rgba(0, 0, 0,0)",r.globalCompositeOperation="destination-out",n.processXMLnode(t,r),r.restore())}}},{key:"processXMLnode",value:function(e,t,r){if(e)switch(e.tagName){case"g":n.drawLayers(e,t,r);break;case"text":n.drawText(e,t);break;case"image":for(var i=e.parentNode;"svg"!==i.tagName;)i=i.parentNode;var a="pathborder_".concat(e.id),o=i.getElementById(a);if(!o)for(var s=i.getElementsByTagName("path"),u=0;u<s.length;u++)s[u].id===a&&(o=s[u]);we.draw(e,o,t);break;case"clipPath":break;case"line":n.drawLine(e,t);break;case"rect":n.drawRect(e,t);break;case"ellipse":n.drawEllipse(e,t);break;case"circle":n.drawCircle(e,t);break;case"polygon":n.drawStraightLines(e,t);break;case"path":n.renderPath(e,t);break;case"polyline":n.drawPolyline(e,t);break;default:pe=!0}}},{key:"drawRect",value:function(e,t){t.save();var n=Number(e.getAttribute("x")),r=Number(e.getAttribute("y")),i=Number(e.getAttribute("width")),a=Number(e.getAttribute("height"));t.strokeStyle&&"rgba(0, 0, 0,0)"!==t.strokeStyle&&t.strokeRect(n,r,i,a),t.fillStyle&&"rgba(0, 0, 0,0)"!==t.fillStyle&&t.fillRect(n,r,i,a),t.restore()}},{key:"drawLine",value:function(e,t){var n=Number(e.getAttribute("x1")),r=Number(e.getAttribute("y1")),i=Number(e.getAttribute("x2")),a=Number(e.getAttribute("y2"));t.beginPath(),t.moveTo(n,r),t.lineTo(i,a),t.stroke(),t.closePath()}},{key:"drawEllipse",value:function(e,t){var r=Number(e.getAttribute("rx")),i=Number(e.getAttribute("ry")),a=Number(e.getAttribute("cx")),o=Number(e.getAttribute("cy")),s=(Math.sqrt(2)-1)/3*4,u=[["M",a-r,o],["C",a-r,o-i*s,a-r*s,o-i,a,o-i],["C",a+r*s,o-i,a+r,o-i*s,a+r,o],["C",a+r,o+i*s,a+r*s,o+i,a,o+i],["C",a-r*s,o+i,a-r,o+i*s,a-r,o]];u=n.arrayToString(u);var h=n.getCommandList(u);if(h){Re=!1,Ce=!1,t.save(),t.beginPath();for(var l=0;l<h.length;l++)n.drawCommand(t,h[l]);h[h.length-1].indexOf("z")>-1&&t.closePath(),t.fill(),t.stroke(),t.restore()}}},{key:"drawCircle",value:function(e,t){var n=Number(e.getAttribute("r")),r=Number(e.getAttribute("cx")),i=Number(e.getAttribute("cy"));t.save(),t.beginPath(),t.arc(r,i,n,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke(),t.restore()}},{key:"drawText",value:function(e,t){t.font="".concat(e.getAttribute("font-weight")," ").concat(e.getAttribute("font-size"),"px ").concat(e.getAttribute("font-family")),t.textAlign="left",t.textBaseline="top",t.fillText(e.textContent,0,0)}},{key:"renderPath",value:function(e,t){var r=e.getAttribute("d"),i=n.getCommandList(r);if(i){Re=!1,Ce=!1,t.save(),t.beginPath();for(var a=0;a<i.length;a++)n.drawCommand(t,i[a]);i[i.length-1].indexOf("z")>-1&&t.closePath(),t.fill(),"destination-in"!==t.globalCompositeOperation&&t.stroke(),t.restore()}}},{key:"renderPathTips",value:function(e,t){var r=e.getAttribute("d"),i=n.getCommandList(r);if(i){Re=!1,Ce=!1,n.getAbsoluteCommand(i[0]),n.drawTip(t,ce.x,ce.y,4);for(var a=1;a<i.length;a++)n.getAbsoluteCommand(i[a]);n.drawTip(t,ce.x,ce.y,4),t.restore()}}},{key:"drawTip",value:function(e,t,n,r){e.save(),e.beginPath(),e.arc(t,n,r,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke(),e.restore()}},{key:"getLastPathCommand",value:function(e){var t=e.getAttribute("d").match(/[A-DF-Za-df-z][^A-Za-df-z]*/g);return t.length>0?t[t.length-1].charAt(0):null}},{key:"isCloseDPath",value:function(e){if("path"!==e.tagName)return!0;if(n.isCompoundPath(e))return!0;var t=e.getAttribute("d").match(/[A-DF-Za-df-z][^A-Za-df-z]*/g);if(t.length<2)return!1;var r=t[t.length-1];if("z"===r.charAt(0))return!0;if(t.length<4)return!1;var i=t[0];if(r.charAt(0).toLocaleUpperCase()!==r.charAt(0))return!1;var a=n.splitNumericArgs(i.substr(1,i.length)),o=n.splitNumericArgs(r.substr(1,r.length));if(a.length<2)return!1;if(o.length<2)return!1;var s={x:a[a.length-2],y:a[a.length-1]},u={x:o[o.length-2],y:o[o.length-1]};return w.len(w.diff(s,u))<10}},{key:"isCompoundPath",value:function(e){var t=e.getAttribute("d").match(/[M][^M]*/g);return!!t&&t.length>1}},{key:"drawCommand",value:function(e,t){var n=t[0];Ie[n](e,t),Re=Me.indexOf(t[0])>-1,Ce=Ae.indexOf(t[0])>-1}},{key:"splitNumericArgs",value:function(e){var t=[];if(!e)return t;for(var n=e.match(/(?:\+|-)?\d+(?:\.\d+)?(?:e(?:\+|-)?\d+)?/g),r=0;r<n.length;r++)t.push(Number(n[r]));return t}},{key:"absoulteMove",value:function(e,t){ce={x:t[1],y:t[2]},e.moveTo(ce.x,ce.y),de=ce}},{key:"relativeMove",value:function(e,t){ce=w.sum(ce,{x:t[1],y:t[2]}),e.moveTo(ce.x,ce.y),de=ce}},{key:"closePath",value:function(e){ce=de,e.lineTo(ce.x,ce.y)}},{key:"absoluteLine",value:function(e,t){ce={x:t[1],y:t[2]},e.lineTo(ce.x,ce.y)}},{key:"relativeLine",value:function(e,t){ce=w.sum(ce,{x:t[1],y:t[2]}),e.lineTo(ce.x,ce.y)}},{key:"absoluteHLine",value:function(e,t){var n=t[1];ce={x:n,y:ce.y},e.lineTo(ce.x,ce.y)}},{key:"relativeHLine",value:function(e,t){var n=ce.x+t[1];ce={x:n,y:ce.y},e.lineTo(ce.x,ce.y)}},{key:"absoluteVLine",value:function(e,t){var n=t[1];ce={x:ce.x,y:n},e.lineTo(ce.x,ce.y)}},{key:"relativeVLine",value:function(e,t){var n=ce.y+t[1];ce={x:ce.x,y:n},e.lineTo(ce.x,ce.y)}},{key:"absoluteCurve",value:function(e,t){e.bezierCurveTo(t[1],t[2],t[3],t[4],t[5],t[6]),fe={x:t[3],y:t[4]},ce={x:t[5],y:t[6]}}},{key:"relativeCurve",value:function(e,t){var n={x:t[1],y:t[2]},r={x:t[3],y:t[4]},i={x:t[5],y:t[6]},a=w.sum(ce,n),o=w.sum(ce,r);fe=o;var s=w.sum(ce,i);e.bezierCurveTo(a.x,a.y,o.x,o.y,s.x,s.y),ce=s}},{key:"absoluteSmooth",value:function(e,t){var n=Re?w.sum(ce,w.diff(ce,fe)):ce,r={x:t[1],y:t[2]},i={x:t[3],y:t[4]};e.bezierCurveTo(n.x,n.y,r.x,r.y,i.x,i.y),ce=i,fe=r}},{key:"relativeSmooth",value:function(e,t){var n=Re?w.sum(ce,w.diff(ce,fe)):ce,r=w.sum(ce,{x:t[1],y:t[2]}),i=w.sum(ce,{x:t[3],y:t[4]});e.bezierCurveTo(n.x,n.y,r.x,r.y,i.x,i.y),ce=i,fe=r}},{key:"absoluteQCurve",value:function(e,t){var n={x:t[1],y:t[2]};ce={x:t[3],y:t[4]},e.quadraticCurveTo(n.x,n.y,ce.x,ce.y),fe=n}},{key:"relativeQCurve",value:function(e,t){var n=w.sum(ce,{x:t[1],y:t[2]});ce=w.sum(ce,{x:t[3],y:t[4]}),fe=n,e.quadraticCurveTo(n.x,n.y,ce.x,ce.y)}},{key:"absoluteQSmooth",value:function(e,t){var n=Ce?w.sum(ce,w.diff(ce,fe)):ce;ce={x:t[1],y:t[2]},fe=n,e.quadraticCurveTo(n.x,n.y,ce.x,ce.y)}},{key:"relativeQSmooth",value:function(e,t){var n=Ce?w.sum(ce,w.diff(ce,fe)):ce;ce=w.sum(ce,{x:t[1],y:t[2]}),fe=n,e.quadraticCurveTo(n.x,n.y,ce.x,ce.y)}},{key:"drawStraightLines",value:function(e,t){var n=e.points;t.save(),t.beginPath(),t.moveTo(n.getItem(0).x,n.getItem(0).y);for(var r=1;r<n.numberOfItems;r++)t.lineTo(n.getItem(r).x,n.getItem(r).y);t.lineTo(n.getItem(0).x,n.getItem(0).y),t.closePath(),t.fill(),t.stroke(),t.restore()}},{key:"drawPolyline",value:function(e,t){var n=e.points;t.save(),t.beginPath(),t.moveTo(n.getItem(0).x,n.getItem(0).y);for(var r=1;r<n.numberOfItems;r++)t.lineTo(n.getItem(r).x,n.getItem(r).y);t.closePath(),t.fill(),t.stroke(),t.restore()}},{key:"setAbsolutePath",value:function(e){var t=e.getAttribute("d"),r=n.getCommandList(t);if(r){var i=n.getAbsoluteCommands(r),a=n.arrayToString(i);e.setAttribute("d",a)}}},{key:"getSVGcommands",value:function(e){return n.getCommandList(e.getAttribute("d"))}},{key:"getCommandList",value:function(e){if(!e)return null;var t=e.match(/[A-DF-Za-df-z][^A-Za-df-z]*/g);if(!t)return null;for(var r=[],i=0;i<t.length;i++){var a=t[i],o=a.charAt(0),s="z"===o.toLowerCase()?[]:n.splitNumericArgs(a.substr(1,a.length));s.unshift(o),r.push(s)}return r}},{key:"arrayToString",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=r[0],r.length>1&&(r.shift(),t+=r.toString())}return t}},{key:"getAbsoluteCommands",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(n.getAbsoluteCommand(e[r]));return t}},{key:"getAbsoluteCommand",value:function(e){var t=e[0];return Re=Me.indexOf(t)>-1,Ce=Ae.indexOf(t)>-1,Ne[t](e)}},{key:"setAbsoluteMove",value:function(e){return Re=!1,Ce=!1,ce={x:e[1],y:e[2]},de=ce,fe=ce,e}},{key:"setRelativeMove",value:function(e){return ce={x:e[1],y:e[2]},de=ce,["M",ce.x,ce.y]}},{key:"setClosePath",value:function(e){return ce=de,e}},{key:"setAbsoluteLine",value:function(e){return ce={x:e[1],y:e[2]},e}},{key:"setRelativeLine",value:function(e){return["L",(ce=w.sum(ce,{x:e[1],y:e[2]})).x,ce.y]}},{key:"setAbsoluteHLine",value:function(e){return["L",(ce={x:e[1],y:ce.y}).x,ce.y]}},{key:"setRelativeHLine",value:function(e){return["L",(ce={x:ce.x+e[1],y:ce.y}).x,ce.y]}},{key:"setAbsoluteVLine",value:function(e){return["L",(ce={x:ce.x,y:e[1]}).x,ce.y]}},{key:"setRelativeVLine",value:function(e){return["L",(ce={x:ce.x,y:ce.y+e[1]}).x,ce.y]}},{key:"setAbsoluteCurve",value:function(e){return fe={x:e[3],y:e[4]},ce={x:e[5],y:e[6]},e}},{key:"setRelativeCurve",value:function(e){var t={x:e[1],y:e[2]},n={x:e[3],y:e[4]},r={x:e[5],y:e[6]},i=w.sum(ce,t),a=w.sum(ce,n);return fe=a,ce=w.sum(ce,r),["C",i.x,i.y,a.x,a.y,ce.x,ce.y]}},{key:"setAbsoluteSmooth",value:function(e){return fe={x:e[1],y:e[2]},ce={x:e[3],y:e[4]},e}},{key:"setRelativeSmooth",value:function(e){var t=Re?w.sum(ce,w.diff(ce,fe)):ce,n=w.sum(ce,{x:e[1],y:e[2]}),r=w.sum(ce,{x:e[3],y:e[4]});return ce=r,fe=n,["C",t.x,t.y,n.x,n.y,r.x,r.y]}},{key:"setAbsoluteQCurve",value:function(e){return fe={x:e[1],y:e[2]},ce={x:e[3],y:e[4]},e}},{key:"setRelativeQCurve",value:function(e){return fe=w.sum(ce,{x:e[1],y:e[2]}),ce=w.sum(ce,{x:e[3],y:e[4]}),["Q",fe.x,fe.y,null,null]}},{key:"setAbsoluteQSmooth",value:function(e){var t=Ce?w.sum(ce,w.diff(ce,fe)):ce;return ce={x:e[1],y:e[2]},fe=t,e}},{key:"setRelativeQSmooth",value:function(e){return fe=Ce?w.sum(ce,w.diff(ce,fe)):ce,["T",(ce=w.sum(ce,{x:e[1],y:e[2]})).x,ce.y]}}]),n}();Object.assign(Ie,{M:Oe.absoulteMove,m:Oe.relativeMove,L:Oe.absoluteLine,l:Oe.relativeLine,H:Oe.absoluteHLine,h:Oe.relativeHLine,V:Oe.absoluteVLine,v:Oe.relativeVLine,C:Oe.absoluteCurve,c:Oe.relativeCurve,S:Oe.absoluteSmooth,s:Oe.relativeSmooth,Q:Oe.absoluteQCurve,q:Oe.relativeQCurve,T:Oe.absoluteQSmooth,t:Oe.relativeQSmooth,Z:Oe.closePath,z:Oe.closePath}),Object.assign(Ne,{M:Oe.setAbsoluteMove,m:Oe.setRelativeMove,L:Oe.setAbsoluteLine,l:Oe.setRelativeLine,H:Oe.setAbsoluteHLine,h:Oe.setRelativeHLine,V:Oe.setAbsoluteVLine,v:Oe.setRelativeVLine,C:Oe.setAbsoluteCurve,c:Oe.setRelativeCurve,S:Oe.setAbsoluteSmooth,s:Oe.setRelativeSmooth,Q:Oe.setAbsoluteQCurve,q:Oe.setRelativeQCurve,T:Oe.setAbsoluteQSmooth,t:Oe.setRelativeQSmooth,Z:Oe.setClosePath,z:Oe.setClosePath});var De,Le,Be,Fe,Ge,Ue,He,je,Ke,Xe,ze,Ve,We,Ye,Je,qe,Qe,Ze=function(){function n(){t(this,n)}return r(n,null,[{key:"getList",value:function(e){return e?e.transform?e.transform.baseVal:e.gradientTransform?e.gradientTransform.baseVal:null:null}},{key:"extract",value:function(e,t){for(var r=n.getList(e),i=0;i<r.numberOfItems;++i)if(r.getItem(i).type===t)return r.getItem(i);return wt.root.createSVGTransform()}},{key:"getIndex",value:function(e,t){for(var r=n.getList(e),i=0;i<r.numberOfItems;++i)if(r.getItem(i).type===t)return i;return null}},{key:"point",value:function(e,t,r){return n.newPoint(e,t).matrixTransform(r)}},{key:"newPoint",value:function(e,t){var n=wt.root.createSVGPoint();return n.x=e,n.y=t,n}},{key:"translateTo",value:function(e,t){if(e){switch(e.tagName){case"g":for(var r=0;r<e.childElementCount;r++)null!==n.getList(e.childNodes[r])&&n.translateTo(e.childNodes[r],t,n.getScaleMatrix(e.childNodes[r]));break;case"ellipse":case"circle":var i=n.point(e.getAttribute("cx"),e.getAttribute("cy"),t.matrix);e.setAttributeNS(null,"cx",i.x),e.setAttributeNS(null,"cy",i.y);break;case"line":n.line(e,t.matrix);break;case"path":n.applyToCmds(e,t.matrix);break;case"clipPath":n.translateTo(e.childNodes[0],t);break;case"image":case"rect":var a=n.point(Number(e.getAttribute("x")),Number(e.getAttribute("y")),t.matrix);e.setAttributeNS(null,"x",a.x),e.setAttributeNS(null,"y",a.y);break;case"polygon":case"polyline":for(var o=e.points,s={x:t.matrix.e,y:t.matrix.f},u=0;u<o.numberOfItems;u++){var h=w.sum(o.getItem(u),s);o.getItem(u).x=h.x,o.getItem(u).y=h.y}}n.updateAll(e),n.updateRotationCenter(e)}}},{key:"updateRotationCenter",value:function(e){if(0!==n.getRotationAngle(e)){var t=n.getRotationAngle(e),r=n.extract(e,4),i=n.getCombinedMatrices(e),a=et.getBoxCenter(e);a=n.point(a.x,a.y,i),r.setRotate(t,a.x,a.y)}}},{key:"line",value:function(e,t){var n=wt.root.createSVGPoint();n.x=Number(e.getAttribute("x1")),n.y=Number(e.getAttribute("y1")),n=n.matrixTransform(t),e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),n.x=Number(e.getAttribute("x2")),n.y=Number(e.getAttribute("y2")),n=n.matrixTransform(t),e.setAttribute("x2",n.x),e.setAttribute("y2",n.y)}},{key:"eleminateTranslates",value:function(t){for(var r=n.getList(t),i=0;i<r.numberOfItems;++i)if(2===r.getItem(i).type){var a=r.getItem(i);if(r.removeItem(i),"image"===t.nodeName){var o=(0,e.gn)("clip_".concat(t.id));o&&n.translateTo(o.childNodes[0],a)}n.translateTo(t,a)}}},{key:"eliminateAll",value:function(e){var t=n.getList(e);if(t&&t.numberOfItems>0)for(var r=t.numberOfItems;r--;)t.removeItem(r);return t}},{key:"combineAll",value:function(e){var t=n.getList(e);if(!t)return wt.root.createSVGMatrix();for(var r=t.numberOfItems,i=wt.root.createSVGMatrix(),a=0;a<r;a++){var o=t.getItem(a);i=i.multiply(o.matrix)}return i}},{key:"appendForMove",value:function(e,t){var r=n.getList(e);r&&(0===r.numberOfItems?r.appendItem(t):r.insertItemBefore(t,0))}},{key:"getTranslateTransform",value:function(){var e=wt.root.createSVGTransform();return e.setTranslate(0,0),e}},{key:"applyRotation",value:function(e,t){var r=wt.root.createSVGTransform(),i=et.getBox(e),a=i.x+i.width/2,o=i.y+i.height/2;r.setRotate(t,a,o),n.getList(e).appendItem(r)}},{key:"getRotationAngle",value:function(t,r){var i=n.getList(t);if(!i)return 0;for(var a=i.numberOfItems,o=0;o<a;++o){var s=i.getItem(o);if(4===s.type)return r?s.angle*e.Zh:s.angle}return 0}},{key:"getRotation",value:function(e){for(var t=n.getList(e),r=t.numberOfItems,i=0;i<r;++i){var a=t.getItem(i);if(4===a.type)return a}var o=wt.root.createSVGTransform(),s=et.getBoxCenter(e);return o.setRotate(0,s.x,s.y),0===t.numberOfItems?n.getList(e).appendItem(o):n.getList(e).insertItemBefore(o,0),o}},{key:"getValid",value:function(e){if(e){var t,r=n.getList(e);if(!r)return null;if(r&&r.numberOfItems>0){for(var i=r.numberOfItems;i--;){var a=r.getItem(i);0===a.type&&r.removeItem(i),1===(t=a.matrix).a&&0===t.b&&0===t.c&&1===t.d&&0===t.e&&0===t.f?r.removeItem(i):4===a.type&&(0===a.angle&&r.removeItem(i),360===a.angle&&r.removeItem(i))}if(1===r.numberOfItems&&n.getRotationAngle(e))return null}return 0===r.numberOfItems?(e.getAttribute("transform")&&e.removeAttribute("transform"),null):r}}},{key:"getCombinedMatrices",value:function(e){var t=n.getList(e);if(!t)return wt.root.createSVGMatrix();for(var r=t.numberOfItems,i=wt.root.createSVGMatrix(),a=0;a<r;a++){var o=t.getItem(a);4!==o.type&&(i=i.multiply(o.matrix))}return i}},{key:"hasScaleMatrix",value:function(e){var t=n.getList(e);if(!t)return!1;for(var r=0;r<t.numberOfItems;++r)if(3===t.getItem(r).type)return!0;return!1}},{key:"getScaleMatrix",value:function(e){var t=n.getList(e),r=n.getIndex(e,3);return null!==r?t.getItem(r).matrix:wt.root.createSVGMatrix()}},{key:"updateAll",value:function(e){var t=n.getList(e);t&&0===t.numberOfItems&&e.removeAttribute("transform")}},{key:"applyMatrix",value:function(e,t){var r=wt.root.createSVGTransform();r.setMatrix(t),n.getList(e).appendItem(r)}},{key:"applyToCmds",value:function(e,t){var r=e.getAttribute("d"),i=Oe.getCommandList(r),a=[];if(i){for(var o=0;o<i.length;o++){var s=i[o];s=n.getModifiedCmd(s,t),a.push(s)}var u=Oe.arrayToString(a);e.setAttribute("d",u)}}},{key:"getModifiedCmd",value:function(e,t){var r=n.newPoint(0,0);if(e.length<2)return e;if(e.length<3)return"h"===e[0].toLowerCase()?(r.x=e[1],e[1]=r.matrixTransform(t).x):(r.y=e[1],e[1]=r.matrixTransform(t).y),e;for(var i=1;i<e.length;i+=2)r.x=e[i],r.y=e[i+1],r=r.matrixTransform(t),e[i]=r.x,e[i+1]=r.y;return e}},{key:"rotateFromPoint",value:function(t,r){var i,a,o,s,u,h,l=r.tagName,c=n.getRotation(r);switch(l){case"g":for(var d=0;d<r.childElementCount;d++)n.rotateFromPoint(t,r.childNodes[d]);r.getAttribute("transform")&&r.removeAttribute("transform");break;case"clipPath":break;case"image":case"rect":i=et.getBoxCenter(r),a=n.point(i.x,i.y,t.matrix),o=w.diff(a,i),(s=wt.root.createSVGMatrix()).e=o.x,s.f=o.y;var f=wt.root.createSVGPoint();f.x=Number(r.getAttribute("x")),f.y=Number(r.getAttribute("y")),f=f.matrixTransform(s);var p=w.diff({x:f.x,y:f.y},{x:r.getAttribute("x"),y:r.getAttribute("y")});if(r.setAttribute("x",f.x),r.setAttribute("y",f.y),"image"===l&&w.len(p)>0){var g=(0,e.gn)("pathmask_".concat(r.id));if(g){g.getAttribute("transform")&&g.removeAttribute("transform");var m=wt.root.createSVGMatrix();m.e=p.x,m.f=p.y,n.applyToCmds(g,m)}}break;case"circle":case"ellipse":u=Number(r.getAttribute("cx")),h=Number(r.getAttribute("cy"));var v={cx:(a=n.point(u,h,t.matrix)).x,cy:a.y};for(var y in v)r.setAttributeNS(null,y,Math.round(100*v[y])/100);break;case"line":i=et.getBoxCenter(r),a=n.point(i.x,i.y,t.matrix),o=w.diff(a,i),(s=wt.root.createSVGMatrix()).e=o.x,s.f=o.y,n.line(r,s);break;case"path":i=et.getBoxCenter(r),a=n.point(i.x,i.y,t.matrix),o=w.diff(a,i),(s=wt.root.createSVGMatrix()).e=o.x,s.f=o.y,n.applyToCmds(r,s);break;case"polygon":case"polyline":i=et.getBoxCenter(r),a=n.point(i.x,i.y,t.matrix),o=w.diff(a,i),(s=wt.root.createSVGMatrix()).e=o.x,s.f=o.y;for(var b=r.points,_=0;_<b.numberOfItems;_++)a=n.point(b.getItem(_).x,b.getItem(_).y,s),b.getItem(_).x=a.x,b.getItem(_).y=a.y}if("g"!==l&&"clipPath"!==l){c=n.getRotation(r);var E=et.getBox(r);u=E.x+E.width/2,h=E.y+E.height/2,c.setRotate(t.angle+c.angle,u,h),n.updateRotationCenter(r),"path"===l&&(n.applyToCmds(r,n.combineAll(r)),n.eliminateAll(r))}}}]),n}(),$e={path:["d"],image:["x","y","width","height"],ellipse:["cx","cy","rx","ry"],rect:["x","y","width","height"],circle:["cx","cy","r"],line:["x1","y1","x2","y2"],text:["x","y","font-size","font-family","font-style","font-weight","text-anchor","xml:space"],polyline:["points"],polygon:["points"]},et=function(){function n(){t(this,n)}return r(n,null,[{key:"attributeTable",get:function(){return $e}},{key:"attributePenTable",get:function(){return De}},{key:"init",value:function(){De=n.getPenAttributes()}},{key:"getPenAttributes",value:function(){return{path:n.onlyKeys(n.getPenAttr()),ellipse:n.onlyKeys(n.getPenAttr()),rect:n.onlyKeys(n.getPenAttr()),line:n.onlyKeys(n.getPenAttr()),image:[],polyline:n.onlyKeys(n.getPenAttr()),polygon:n.onlyKeys(n.getPenAttr())}}},{key:"create",value:function(e,t,n){var r=document.createElementNS(wt.xmlns,"svg");return r.setAttributeNS(null,"version",1.1),t&&r.setAttributeNS(null,"width",t),n&&r.setAttributeNS(null,"height",n),e.appendChild(r),r}},{key:"createGroup",value:function(e,t){var n=document.createElementNS(wt.xmlns,"g");return t&&n.setAttribute("id",t),e&&e.appendChild(n),n}},{key:"addChild",value:function(e,t,n){var r=document.createElementNS(wt.xmlns,t);for(var i in n)r.setAttribute(i,n[i]);return e&&e.appendChild(r),r}},{key:"addPath",value:function(t,r,i){var a=document.createElementNS(wt.xmlns,"path"),o={d:"M".concat(r,",").concat(i),id:(0,e.N7)("path"),opacity:1},s=n.getPolyAttr();for(var u in o)a.setAttribute(u,o[u]);for(var h in s)a.setAttribute(h,s[h]);return t.appendChild(a),a}},{key:"addPolyline",value:function(t,r,i){var a=document.createElementNS(wt.xmlns,"polyline"),o={points:" ".concat(r,",").concat(i," "),id:(0,e.N7)("polyline"),opacity:1},s=n.getPolyAttr();for(var u in o)a.setAttribute(u,o[u]);for(var h in s)a.setAttribute(h,s[h]);return t.appendChild(a),a}},{key:"addEllipse",value:function(t,r,i){var a=document.createElementNS(wt.xmlns,"ellipse"),o={cx:r,cy:i,rx:0,ry:0,id:(0,e.N7)("ellipse"),opacity:1};for(var s in o)a.setAttribute(s,o[s]);var u=n.getPenAttr(a);for(var h in u)a.setAttribute(h,u[h]);return t.appendChild(a),a}},{key:"addTriangle",value:function(t,r,i){var a=document.createElementNS(wt.xmlns,"path"),o={id:(0,e.N7)("path"),opacity:1},s=[["M",r,i+1],["L",r+.5,i],["L",r+1,i+1],["L",r,i+1]];o.d=Oe.arrayToString(s);var u=n.getPenAttr();for(var h in o)a.setAttribute(h,o[h]);for(var l in u)a.setAttribute(l,u[l]);return t.appendChild(a),a}},{key:"addRect",value:function(t,r,i){var a=document.createElementNS(wt.xmlns,"rect"),o={x:r,y:i,width:0,height:0,id:(0,e.N7)("rect"),opacity:1};for(var s in o)a.setAttribute(s,o[s]);var u=n.getPenAttr(a);for(var h in u)a.setAttribute(h,u[h]);return t.appendChild(a),a}},{key:"getPolyAttr",value:function(){return{fill:"none",stroke:wt.fillcolor,"stroke-width":wt.strokewidth,"stroke-linecap":"round",opacity:1,style:"pointer-events:visiblePainted;"}}},{key:"getPenAttr",value:function(){return{fill:"none",stroke:wt.fillcolor,"stroke-width":wt.strokewidth,opacity:1,style:"pointer-events:visiblePainted;"}}},{key:"getCopy",value:function(e){return n.toObject(n.svg2string(e))}},{key:"svg2string",value:function(e){var t=(new XMLSerializer).serializeToString(e),n='<svg xmlns="'.concat(wt.xmlns,'" xmlns:xlink="').concat(wt.xmlnslink,'">');return t=t.replace(/ href="data:image/g,' xlink:href="data:image'),"".concat(n+t,"</svg>")}},{key:"toObject",value:function(e){e.replace(/>\s*</g,"><");var t=(new DOMParser).parseFromString(e,"text/xml");return document.importNode(t.documentElement.firstChild,!0)}},{key:"rename",value:function(t){if(t)switch(t.tagName){case"g":if(t.id){var r=unescape(t.id).replace(/[0-9]/g,"").replace(/\s*/g,"");t.id=(0,e.N7)(r)}for(var i=0;i<t.childElementCount;i++)n.rename(t.childNodes[i]);break;case"image":var a=Ze.point(t.getAttribute("x"),t.getAttribute("y"),window.xform.matrix);if(t.setAttributeNS(null,"x",a.x),t.setAttributeNS(null,"y",a.y),t.id=(0,e.N7)("image"),t.getAttribute("pathUrl")){var o=(0,e.N7)("clippath");(0,e.gn)(t.getAttribute("pathUrl")).id=o,t.setAttribute("pathUrl",o)}break;default:if(t.id){var s=unescape(t.id).replace(/[0-9]/g,"").replace(/\s*/g,"");t.id=(0,e.N7)(s)}}}},{key:"saveBackground",value:function(e,t,n){var r=new XMLSerializer,i=r.serializeToString(e);i=i.replace(/ href/g," xlink:href");var a='<svg xmlns="'.concat(wt.xmlns,'" xmlns:xlink="').concat(wt.xmlnslink,'"\n            viewBox= "0 0 ').concat(t," ").concat(n,'" width="').concat(t,'px" height="').concat(n,'px">'),o=document.createComment("Created with Scratch Jr");return a+=r.serializeToString(o),a+=i,(a+="</svg>").replace(/></g,">\n<")}},{key:"cleanup",value:function(e){if(0!==e.childElementCount)for(var t=0;t<e.childElementCount;t++){var r=e.childNodes[t];"g"===r.tagName&&n.cleanup(r)}else"layer1"!==e.id&&e.parentNode.removeChild(e)}},{key:"saveShape",value:function(e,t,r){n.cleanup(e);var i=n.getCopy(e),a=new XMLSerializer,o=n.calculateViewBox(i);t=o.width,r=o.height;var s=a.serializeToString(i);s=s.replace(/ href/g," xlink:href");var u='<svg xmlns="'.concat(wt.xmlns,'" xmlns:xlink="').concat(wt.xmlnslink,'" viewBox= "0 0 ').concat(t," ").concat(r,'" width="').concat(t,'px" height="').concat(r,'px">'),h=document.createComment("Created with Scratch Jr");return u+=a.serializeToString(h),u+=s,(u+="</svg>").replace(/></g,">\n<")}},{key:"calculateViewBox",value:function(e){var t=n.getBox(e,!0).rounded();return n.outsideBounds(t)?{width:wt.workspaceWidth,height:wt.workspaceHeight}:(t=t.expandBy(20),window.xform.setTranslate(-t.x,-t.y),Ze.translateTo(e,window.xform),t)}},{key:"outsideBounds",value:function(e){return e.x<0||e.y<0||e.width>wt.workspaceWidth||e.height>wt.workspaceHeight}},{key:"notValidBox",value:function(e){return e.x+e.width<0||e.y+e.height<0||e.x>wt.workspaceWidth||e.y>wt.workspaceHeight}},{key:"getBoxCenter",value:function(e){var t=n.getBox(e);return{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTransformedBox",value:function(e){var t=Ze.getCombinedMatrices(e),r=n.getBox(e),i=Ze.point(r.x,r.y,t);if(r.width=Math.abs(r.width*t.a),r.height=Math.abs(r.height*t.d),r.x=i.x,r.y=i.y,t.a<0&&(r.x-=r.width),t.d<0&&(r.y-=r.height),0!==Ze.getRotationAngle(e)){var a=Ze.getRotation(e),o=[];o.push(Ze.point(r.x,r.y,a.matrix)),o.push(Ze.point(r.x+r.width,r.y,a.matrix)),o.push(Ze.point(r.x+r.width,r.y+r.height,a.matrix)),o.push(Ze.point(r.x,r.y+r.height,a.matrix)),r=n.getMinMax(o)}return r}},{key:"getBox",value:function(e,t){var r=new M(0,0,0,0);if(!e)return r;switch(e.tagName){case"circle":r.x=e.getAttribute("cx")-e.getAttribute("r"),r.y=e.getAttribute("cy")-e.getAttribute("r"),r.width=2*Number(e.getAttribute("r")),r.height=2*Number(e.getAttribute("r")),r=r.expandBy(n.getPenWidthForm(e));break;case"g":case"svg":if(0===e.childElementCount)return r;r=n.getTransformedBox(e.childNodes[0]);for(var i=0;i<e.childElementCount;i++)if(!t||"image"!==e.childNodes[i].tagName){var a=n.getTransformedBox(e.childNodes[i]);a.isEmpty()||(r=r.union(a))}break;case"ellipse":r.x=e.getAttribute("cx")-e.getAttribute("rx"),r.y=e.getAttribute("cy")-e.getAttribute("ry"),r.width=2*Number(e.getAttribute("rx")),r.height=2*Number(e.getAttribute("ry")),r=r.expandBy(n.getPenWidthForm(e));break;case"clipPath":r=n.getTransformedBox(e.childNodes[0]);break;case"image":r.x=Number(e.getAttribute("x")),r.y=Number(e.getAttribute("y")),r.width=Number(e.getAttribute("width")),r.height=Number(e.getAttribute("height"));break;case"path":r=n.getPathBox(e).expandBy(n.getPenWidthForm(e));break;case"line":var o=Number(e.getAttribute("x1")),s=Number(e.getAttribute("x2")),u=Number(e.getAttribute("y1")),h=Number(e.getAttribute("y2")),l=Math.min(o,s),c=Math.max(o,s),d=Math.min(u,h),f=Math.max(u,h);r=new M(l,d,c-l,f-d).expandBy(n.getPenWidthForm(e));break;case"polygon":for(var p=e.points,g=[],m=0;m<p.numberOfItems;m++)g.push(p.getItem(m));r=n.getMinMax(g).expandBy(n.getPenWidthForm(e))}return r}},{key:"getArea",value:function(e){var t,r=0,i=Number(e.getAttribute("stroke-width"))/2;switch(e.tagName){case"g":var a=n.getBox(e);r=a.width*a.height;break;case"circle":r=Math.PI*Number(e.getAttribute("r"))*Number(e.getAttribute("r"));break;case"ellipse":r=Math.PI*Number(e.getAttribute("rx"))*Number(e.getAttribute("ry"));break;case"path":var o;o=Oe.isCompoundPath(e)?e.getAttribute("d").match(/[M][^M]*/g)[0]:e.getAttribute("d"),o=Se.isClockWise(o)?Se.reverse(o):o,2===(t=Se.getAllPoints(o)).length&&(t=n.getPolygon(t[0],t[1],i)),r=n.polygonArea(t);break;case"line":var s=Number(e.getAttribute("x1")),u=Number(e.getAttribute("x2")),h=Number(e.getAttribute("y1")),l=Number(e.getAttribute("y2")),c=n.getPolygon({x:s,y:h},{x:u,y:l},i);r=n.polygonArea(c);break;case"polygon":var d=e.points;t=[];for(var f=0;f<d.numberOfItems;f++)t.push(d.getItem(f));r=n.polygonArea(t)}return r}},{key:"getPolygon",value:function(e,t,n){var r=w.diff(t,e),i=w.scale(r,.5),a=w.perp(i),o=w.norm(a),s=w.sum(e,w.scale(o,n)),u=w.sum(e,w.scale(o,-n));return[s,w.sum(t,w.scale(o,n)),w.sum(t,w.scale(o,-n)),u]}},{key:"polygonArea",value:function(e){for(var t=[],n=[],r=0;r<e.length;r++)t.push(e[r].x),n.push(e[r].y);for(var i=e.length,a=0,o=i-1,s=0;s<i;s++)a+=(t[o]+t[s])*(n[o]-n[s]),o=s;return a/2}},{key:"getPenWidthForm",value:function(e){var t=e.getAttribute("stroke-width");return"NaN"===Number(t).toString()?0:Number(t)}},{key:"getMinMax",value:function(e){var t=new M(0,0,0,0);if(e.length<1)return t;for(var n=9999999,r=9999999,i=-9999999,a=-9999999,o=0;o<e.length;o++)e[o].x<n&&(n=e[o].x),e[o].x>i&&(i=e[o].x),e[o].y<r&&(r=e[o].y),e[o].y>a&&(a=e[o].y);return t.x=n,t.y=r,t.width=i-n,t.height=a-r,t}},{key:"getPathBox",value:function(e){var t,r=e.getAttribute("d").match(/[M][^M]*/g);r||(r=[e.getAttribute("d")]);for(var i=0;i<r.length;i++){var a=n.getOnePathBox(r[i]);a.isEmpty()||(t=t?a.union(t):a)}return t}},{key:"getOnePathBox",value:function(e){for(var t=Oe.getCommandList(e),r=[],i=0;i<t.length;i++){var a=Oe.getAbsoluteCommand(t[i]);Oe.acurve&&(r.push({x:a[1],y:a[2]}),a.length>4&&r.push({x:a[3],y:a[4]})),r.push(Oe.endp)}return n.getMinMax(r)}},{key:"onlyKeys",value:function(e){var t=[];for(var n in e)t.push(n);return t}},{key:"getDataurl",value:function(e,t,n){var r=new XMLSerializer,i='<svg  xmlns="'.concat(wt.xmlns,'" viewBox= "0 0 ').concat(t," ").concat(n,'" width="').concat(t,'px" height="').concat(n,'px">'),a="".concat(i,"\n").concat(r.serializeToString(e),"</svg>");return"data:image/svg+xml;base64,".concat(btoa(a))}},{key:"getLayersAbove",value:function(e,t,n,r){var i=new XMLSerializer,a='<svg  xmlns="'.concat(wt.xmlns,'" viewBox= "0 0 ').concat(n," ").concat(r,'" width="').concat(n,'px" height="').concat(r,'px">');a+="\n";for(var o=Math.min(t+1,e.childElementCount);o<e.childElementCount;o++)a+="".concat(i.serializeToString(e.childNodes[o]),"\n");return a+="</svg>","data:image/svg+xml;base64,".concat(btoa(a))}},{key:"getCount",value:function(e){var t=0;if("g"===e.tagName){t+=e.childElementCount;for(var r=0;r<e.childElementCount;r++){var i=e.childNodes[r];"g"===i.tagName&&(t+=n.getCount(i))}}return t}},{key:"cloneSVGelement",value:function(t){var r=_e.findGroup(t),i=(0,e.gn)("layer1");if(i){window.xform.setTranslate(5,5);var a=[],o=[];if(!(n.getCount(i)>175)){for(var s=0;s<r.length;s++){if(n.getCount(i)>175)return;var u=n.getClonedElement((0,e.gn)("layer1"),r[s]);if(u&&"g"!==u.tagName){if(a.push(r[s].id),o.push(u.id),r[s].getAttribute("id").indexOf("Boder")>-1){var h=r[s].getAttribute("id").split("Border")[0],l=a.indexOf(h);l>-1&&u.setAttribute("id","".concat(o[l],"Border"))}if(r[s].getAttribute("relatedto")){var c=a.indexOf(r[s].getAttribute("relatedto"));c>-1&&u.setAttribute("relatedto",o[c])}}}var d=n.getFlatten((0,e.gn)("layer1"));n.removeDuplicates(d)}}}},{key:"removeDuplicates",value:function(t){for(var n=0;n<t.length;n++){var r=(0,e.gn)(t[n]);if(r&&r.parentNode&&"path"===r.tagName)for(var i=n+1;i<t.length;i++){var a=(0,e.gn)(t[i]);if(a&&a.parentNode&&"path"===a.tagName&&a.getAttribute("d")===r.getAttribute("d")){if(r.id.indexOf("pathborder_image")>-1&&a.id.indexOf("pathborder_image")>-1){var o=a.id.substring(String("pathborder_").length,a.id.length),s=(0,e.gn)("group_".concat(o));s&&s.parentNode.removeChild(s)}a.parentNode.removeChild(a)}}}}},{key:"getFlatten",value:function(e){for(var t=[],r=0;r<e.childElementCount;r++){var i=e.childNodes[r];i.id.indexOf("group_image_")>-1||("g"===i.tagName?t=t.concat(n.getFlatten(i)):t.push(i.id))}return t}},{key:"getClonedElement",value:function(t,r){if(r.id.indexOf("pathborder_image_")>-1)return null;if("image"===r.tagName)return null;if("clipPath"===r.tagName)return null;if("g"===r.tagName){var i=we.getImage(r);if(i)return we.cloneImage(t,i);for(var a=[],o=[],s=n.createGroup(t,(0,e.N7)("group")),u=0;u<r.childElementCount;u++){var h=n.getClonedElement(s,r.childNodes[u]);if(h&&(a.push(r.childNodes[u].id),o.push(h.id),r.childNodes[u].getAttribute("id").indexOf("Border")>-1)){var l=r.childNodes[u].getAttribute("id").split("Border")[0],c=a.indexOf(l);c>-1&&h.setAttribute("id","".concat(o[c],"Border"))}}return s}return n.getClone(t,r)}},{key:"getClone",value:function(t,n){var r=$e[n.tagName],i=De[n.tagName],a=document.createElementNS(wt.xmlns,n.tagName);t.appendChild(a),r=r.concat(i);for(var o=0;o<r.length;o++)n.getAttribute(r[o])&&a.setAttribute(r[o],n.getAttribute(r[o]));n.getAttribute("stroke-linecap")&&a.setAttribute("stroke-linecap",n.getAttribute("stroke-linecap")),a.setAttribute("id",(0,e.N7)(n.tagName));var s=Ze.getRotationAngle(n),u=void 0;return Ze.hasScaleMatrix(n)&&(u=Ze.getScaleMatrix(n)),0!==s&&Ze.applyRotation(a,s),u&&Ze.applyMatrix(a,u),Ze.translateTo(a,window.xform),a}},{key:"getWatermark",value:function(e,t){var r=n.getCopy(e);return n.removeExtras(r),n.changeShape(r,t),r}},{key:"changeShape",value:function(e,t){for(var r=0;r<e.childElementCount;r++){var i=e.childNodes[r];"g"===i.tagName?n.changeShape(i,t):n.setObjectWaterMark(i,t)}}},{key:"removeExtras",value:function(e){for(var t=0,r=t<e.childElementCount;r;){var i=e.childNodes[t];"image"===i.nodeName||"clipPath"===i.nodeName?e.removeChild(i):("g"===i.tagName&&n.removeExtras(i),t++),r=t<e.childElementCount}}},{key:"setObjectWaterMark",value:function(t,n){var r=t.getAttribute("fill"),i={fill:"white",stroke:t.getAttribute("stroke")||t.id.indexOf("Draw")>-1?n:"none","stroke-width":t.getAttribute("stroke-width")?Number(t.getAttribute("stroke-width")):Number(Oe.strokevalues["stroke-width"]),"stroke-miterlimit":t.getAttribute("stroke-miterlimit")?t.getAttribute("stroke-miterlimit"):4,"stroke-linecap":"round","stroke-linejoin":"round"};for(var a in i.fill="none"===r?"none":"white",function(){if(!r)return!0;if("none"===r)return!1;if(t.id.indexOf("Border")>-1)return!0;if(t.id.indexOf("Body")>-1)return!1;if(t.id.indexOf("Skip")>-1)return!1;if(t.id.indexOf("Draw")>-1)return!1;if("#080808"===r||"#000000"===r||"rgba(0, 0, 0, 0)"===r)return!0;var n=(0,e.xP)(r);return n[2]<.25||w.len(w.diff({x:.5,y:.5},{x:n[1],y:n[2]}))<.25}()&&(i.fill=n),i)t.setAttribute(a,i[a])}},{key:"isCompoundPath",value:function(e){return"path"===e.tagName&&Oe.isCompoundPath(e)}}]),n}(),tt={},nt=0,rt=function(){function e(){t(this,e)}return r(e,null,[{key:"path",get:function(){return Le}},{key:"samples",get:function(){return Be}},{key:"sprites",get:function(){return Ge}},{key:"backgrounds",get:function(){return Fe}},{key:"sounds",get:function(){return He}},{key:"keys",get:function(){return tt}},{key:"version",get:function(){return nt}},{key:"loadMediaLib",value:function(t,n){sy.requestFromServer("".concat(t,"media.json"),(function(t){var r=JSON.parse(t);Le=r.path,Be=r.samples,Ge=r.sprites,Ue=r.legacySprites||[],Fe=r.backgrounds,He=r.sounds,r.assetLibraryVersion&&(nt=r.assetLibraryVersion),e.localizeMediaNames(),e.generateKeys(),n()}))}},{key:"localizeMediaNames",value:function(){for(var e=0;e<Ge.length;e++)Ge[e].name=fy.localize("CHARACTER_".concat(Ge[e].md5));for(var t=0;t<Fe.length;t++)Fe[t].name=fy.localize("BACKGROUND_".concat(Fe[t].md5));for(var n=0;n<Ue.length;n++)Ue[n].name=fy.localize("CHARACTER_".concat(Ue[n].md5))}},{key:"generateKeys",value:function(){for(var e=0;e<Fe.length;e++){var t=Fe[e];tt[t.md5]={width:t.width,height:t.height,name:t.name}}for(var n=0;n<Ge.length;n++){var r=Ge[n];tt[r.md5]={width:r.width,height:r.height,name:r.name}}for(var i=0;i<Ue.length;i++){var a=Ue[i];tt[a.md5]={width:a.width,height:a.height,name:a.name}}}}]),e}(),it=0,at=0,ot=0,st=0,ut=function(){function e(){t(this,e)}return r(e,null,[{key:"render",value:function(t,n){for(var r in ot=0,st=0,n)e.drawSection(n[r],t)}},{key:"drawSection",value:function(t,n){var r,i,a,o;switch(String(t[0]).toLowerCase()){case"m":e.absoluteMove(t[1],t[2]),n.moveTo(ot,st),it=t[1],at=t[2];break;case"l":e.relativeMove(t[1],t[2]),n.lineTo(ot,st);break;case"h":ot+=t[1],n.lineTo(ot,st);break;case"v":st+=t[1],n.lineTo(ot,st);break;case"q":r=ot+t[1],i=st+t[2],a=ot+t[3],o=st+t[4],n.quadraticCurveTo(r,i,a,o),e.relativeMove(t[3],t[4]);break;case"c":r=ot+t[1],i=st+t[2];var s=ot+t[3],u=st+t[4];a=ot+t[5],o=st+t[6],n.bezierCurveTo(r,i,s,u,a,o),e.relativeMove(t[5],t[6]);break;case"z":e.absoluteMove(it,at),n.lineTo(ot,st)}}},{key:"absoluteMove",value:function(e,t){ot=e,st=t}},{key:"relativeMove",value:function(e,t){ot+=e,st+=t}}]),e}(),ht=void 0,lt=function(){function n(){t(this,n)}return r(n,null,[{key:"balloon",get:function(){return ht}},{key:"close",value:function(){ht&&(ht.parentNode.removeChild(ht),ht=void 0)}},{key:"open",value:function(t,r,i,a){ht&&n.close();var o=e._X,s=80,u=(0,e.$1)(r,r.offsetLeft)+r.offsetWidth/2-(s+14+4)*o/2,h=(0,e.Q7)(r,r.offsetTop)-24*o;h<5*o&&(h=5*o),(ht=(0,e.oM)(t,u,h,s,24,{position:"absolute",zIndex:2})).icon=r;var l=ht.getContext("2d");(s=16+(0,e.xE)(l,"bold 14px Verdana",i).width)<36&&(s=36),(u=(0,e.$1)(r,r.offsetLeft)+r.offsetWidth/2-(s+14+4)*o/2)<5*o&&(u=5*o),u=Math.floor(u),(0,e.ge)(ht,s,36),(0,e.cl)(ht.style,{position:"absolute",left:"".concat(u,"px"),zIndex:1e3,webkitTransform:"translate(".concat(-s/2,"px, ").concat(-12,"px) ")+"scale(".concat(o,", ").concat(o,") ")+"translate(".concat(s/2,"px, ").concat(12,"px) ")}),n.draw(ht.getContext("2d"),6,s,24,a),(0,e.nx)(l,"bold 14px Verdana","white",i,20,8)}},{key:"draw",value:function(e,t,n,r,i){t=10;var a=new Array(["M",0,t],["q",0,-10,t,-10],["h",n-20],["q",t,0,t,t],["v",r-20],["q",0,t,-10,t],["h",-n/2+7+t],["l",-7,7],["l",-7,-7],["h",-n/2+7+t],["q",-10,0,-10,-10],["Z"]);e.clearRect(0,0,Math.max(e.canvas.width,n),Math.max(e.canvas.height,r)),e.fillStyle=i,e.beginPath(),ut.render(e,a),e.fill()}}]),n}(),ct="#080808",dt=432,ft=384,pt="select",gt=[1,2,4,8,16],mt=2,vt=!1,yt=void 0,bt=1,_t=!1,Et=void 0,Tt=5,xt=1,kt={x:0,y:0},St={x:0,y:0},wt=function(){function n(){t(this,n)}return r(n,null,[{key:"xmlns",get:function(){return"http://www.w3.org/2000/svg"}},{key:"xmlnslink",get:function(){return"http://www.w3.org/1999/xlink"}},{key:"fillcolor",get:function(){return ct}},{key:"workspaceWidth",get:function(){return dt}},{key:"workspaceHeight",get:function(){return ft}},{key:"mode",get:function(){return pt},set:function(e){pt=e}},{key:"strokewidth",get:function(){return mt}},{key:"currentZoom",get:function(){return bt},set:function(e){bt=e}},{key:"root",get:function(){return Ve}},{key:"saving",get:function(){return _t}},{key:"frame",get:function(){return We}},{key:"splash",get:function(){return Je}},{key:"splashshade",get:function(){return qe}},{key:"initialPoint",get:function(){return kt},set:function(e){kt=e}},{key:"deltaPoint",get:function(){return St},set:function(e){St=e}},{key:"getCurrentName",value:function(){return Ke}},{key:"init",value:function(e,t){(We=document.getElementById("paintframe")).style.width="".concat(e,"px"),We.style.height="".concat(t,"px"),S.loadCount++,sy.requestFromServer("assets/paint/splash.svg",n.setSplash),S.loadCount++,sy.requestFromServer("assets/paint/splashshade.svg",n.setSplashShade)}},{key:"setSplash",value:function(e){S.loadCount--,Je=e}},{key:"setSplashShade",value:function(e){S.loadCount--,qe="data:image/svg+xml;base64,".concat(btoa(e))}},{key:"open",value:function(t,r,i,a,o,s,u){var h="",l="";ny.analyticsEvent("paint_editor","paint_editor_open"),t?(h="edit_background",l=r in rt.keys?r:"user_background"):(h=i?"edit_character":"new_character",l=r in rt.keys?r:"user_character"),ny.analyticsEvent("paint_editor",h,l),ve.buffer=[],ve.index=0,Tt=5,xt=1,dt=432,ft=384,n.clearWorkspace(),e.Wi.style.display="none",We.className="paintframe appear",yt=r,vt=t,je=i,Ke=a,Xe=o,et.init(),ze=!0,vt?n.initBkg(480,360):n.initSprite(s,u),window.ontouchstart=n.detectGesture,window.onmousedown=n.detectGesture,window.ondevicemotion=void 0,Sv.onBackButtonCallback.push((function(){var e=document.createEvent("TouchEvent");e.initTouchEvent(),n.backToProject(e)}))}},{key:"blockGestures",value:function(e){e.touches&&4===e.touches.length&&n.ignore(e)}},{key:"detectGesture",value:function(e){if(!le.active){n.clearEvents(e),kt=ne.getScreenPt(e),St=ne.getScreenPt(e);var t=1;e.touches&&(t=Math.min(3,e.touches.length)),[n.ignore,n.mouseDown,n.pinchStart,n.Scroll][t](e)}}},{key:"clearEvents",value:function(e){window.ontouchmove=void 0,window.ontouchend=void 0,window.onmousemove=void 0,window.onmouseup=void 0,ne.currentshape&&ne.stopAction(e),z.clearEvents(),ne.clearEvents()}},{key:"ignore",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"Scroll",value:function(e){e.preventDefault(),e.stopPropagation(),n.canvasFits()||(oe.clearLayer(),kt=ne.getScreenPt(e),window.ontouchmove=function(e){n.dragBackground(e)},window.ontouchend=function(){n.bounceBack(),n.setCanvasTransform(bt),ne.clearEvents()},window.onmousemove=function(e){n.dragBackground(e)},window.onmouseup=function(){n.bounceBack(),n.setCanvasTransform(bt),ne.clearEvents()})}},{key:"pinchStart",value:function(e){e.preventDefault(),e.stopPropagation(),ne.currentshape||(window.ontouchmove=function(){n.gestureStart(e)},window.onmousemove=function(){n.gestureStart(e)})}},{key:"gestureStart",value:function(e){window.ontouchmove=void 0,window.onmousemove=void 0,["path","ellipse","rect"].indexOf(pt)>-1&&ne.currentshape&&ne.currentshape.parentNode&&ne.currentshape.parentNode.removeChild(ne.currentshape),oe.clearLayer(),z.scaleStartsAt=bt,z.updatePinchCenter(e),kt=ne.zoomPt(z.pinchcenter),z.clearEvents(),z.clearDragAndDrop(),window.ontouchmove=n.gestureChange,window.ontouchend=n.gestureEnd,window.onmousemove=n.gestureChange,window.onmouseup=n.gestureEnd}},{key:"gestureChange",value:function(t){t.preventDefault();var r=Math.min(Tt,z.scaleStartsAt*z.zoomScale(t));r=Math.max(xt,r);var i=(0,e.gn)("maincanvas"),a=i.offsetWidth*r,o=i.offsetHeight*r;if(!(Math.min(a,o)<240)){n.updateZoomScale(r);var s=ne.zoomPt(z.pinchcenter),u=w.diff(s,kt);n.adjustPos(u)}}},{key:"gestureEnd",value:function(e){e.preventDefault(),window.ontouchmove=void 0,window.ontouchend=void 0,window.onmousemove=void 0,window.onmouseup=void 0;var t=Math.min(Tt,z.scaleStartsAt*z.zoomScale(e));t=Math.max(xt,t),n.updateZoomScale(t);var r=ne.zoomPt(z.pinchcenter),i=w.diff(r,kt);n.adjustPos(i),z.scaleStartsAt=bt,Se.selector&&Se.showDots(Se.selector),n.setZoomTo(t)}},{key:"canvasFits",value:function(){return(0,e.gn)("maincanvas").offsetWidth*bt<=(0,e.gn)("workspacebkg").offsetWidth&&(0,e.gn)("maincanvas").offsetHeight*bt<=(0,e.gn)("workspacebkg").offsetHeight}},{key:"mouseDown",value:function(t){if(!(e.Em&&t.target.ontouchstart||t.target.ontouchstart)){var r=z.getTargetPoint(t);if((0,e._)((0,e.gn)("donecheck"),r))n.backToProject(t);else{if(t.target.parentNode&&t.target.parentNode.getAttribute("key"))return;ne.mouseDown(t)}}}},{key:"close",value:function(){ny.analyticsEvent("paint_editor","paint_editor_close"),_t=!0,We.className="paintframe disappear",e.Wi.style.display="block",Sv.editorEvents(),window.ontouchmove=void 0,window.ontouchend=void 0,window.onmousemove=void 0,window.onmouseup=void 0,lt.close(),n.clearWorkspace(),ve.buffer=[],ve.index=0,oe.maskData={},setTimeout((function(){_t=!1}),500)}},{key:"backToProject",value:function(e){e.preventDefault(),e.stopPropagation(),_t||ne.dragGroup.length>0||e.touches&&e.touches.length>1||(Se.quitEditMode(),le.close(),ne.clearDragGroup(),Sv.unfocus(),m.sndFX("tap.wav"),je||Ke?n.saveSprite(n.changePageSprite):n.savePageImage(n.changePage),Sv.onBackButtonCallback.pop())}},{key:"saveEditState",value:function(){le.close(),Sv.unfocus(),m.sndFX("tap.wav"),je||Ke?n.saveSprite():n.savePageImage()}},{key:"setMode",value:function(e){var t;!(e.touches&&e.touches.length>1)&&(e.preventDefault(),t=window.event?window.event.srcElement:e.target)&&(Se.quitEditMode(),le.active?le.doAction(t.getAttribute("key")):(["select","rotate","stamper","scissors","camera","paintbucket"].indexOf(t.getAttribute("key"))>-1&&m.sndFX("tap.wav"),n.selectButton(t.getAttribute("key"))))}},{key:"selectButton",value:function(t){n.selectButtonFromDiv((0,e.gn)("painttools"),t),n.selectButtonFromDiv((0,e.gn)("selectortools"),t),n.selectButtonFromDiv((0,e.gn)("edittools"),t),n.selectButtonFromDiv((0,e.gn)("filltools"),t),(0,e.gn)("stamps")&&n.selectButtonFromDiv((0,e.gn)("stamps"),t),pt=t,n.selectPenSize(gt.indexOf(mt))}},{key:"selectButtonFromDiv",value:function(e,t){for(var r=0;r<e.childElementCount;r++){var i=e.childNodes[r];i.childNodes[0].getAttribute("key")===t?(i.setAttribute("class",n.getClass(i,"on")),i.childNodes[0].getAttribute("class")&&i.childNodes[0].setAttribute("class",n.getClass(i.childNodes[0],"on"))):(i.setAttribute("class",n.getClass(i,"off")),i.childNodes[0].getAttribute("class")&&i.childNodes[0].setAttribute("class",n.getClass(i.childNodes[0],"off")))}}},{key:"getClass",value:function(e,t){var n=e.getAttribute("class").split(" ");return n.pop(),n.push(t),n.join(" ")}},{key:"setZoomTo",value:function(e){bt=e,n.bounceBack(),n.setCanvasTransform(e),oe.drawOffscreen()}},{key:"updateZoomScale",value:function(e){bt=e,n.setCanvasTransform(e)}},{key:"setCanvasTransform",value:function(t){e.Dt?(0,e.gn)("maincanvas").style.webkitTransform="translate3d(".concat((0,e.gn)("maincanvas").dx,"px,").concat((0,e.gn)("maincanvas").dy,"px, 0px) scale(").concat(t,",").concat(t,")"):(0,e.gn)("maincanvas").style.webkitTransform="translate(".concat((0,e.gn)("maincanvas").dx,"px,").concat((0,e.gn)("maincanvas").dy,"px) scale(").concat(t,",").concat(t,")")}},{key:"adjustPos",value:function(t){(0,e.gn)("maincanvas").dx+=t.x,(0,e.gn)("maincanvas").dy+=t.y,n.setCanvasTransform(bt)}},{key:"bounceBack",value:function(){var t=Math.floor(((0,e.gn)("workspacebkg").offsetWidth-dt)/2),r=Math.floor(((0,e.gn)("workspacebkg").offsetHeight-ft)/2);(0,e.gn)("maincanvas").dx=n.canvasFits()?t:n.getCoorx(20,t),(0,e.gn)("maincanvas").dy=n.canvasFits()?r:n.getCoory(20,r)}},{key:"getCoorx",value:function(t,n){if((0,e.gn)("maincanvas").offsetWidth*bt<=(0,e.gn)("workspacebkg").offsetWidth)return n;var r=(0,e.gn)("maincanvas").dx+(0,e.gn)("maincanvas").cx-(0,e.gn)("maincanvas").cx*bt;if(r>t)return(0,e.gn)("maincanvas").dx+(t-r);n=(r/bt+(0,e.gn)("maincanvas").offsetWidth)*bt;var i=(0,e.gn)("workspacebkg").offsetWidth-t;return n<i?(0,e.gn)("maincanvas").dx+(i-n):(0,e.gn)("maincanvas").dx}},{key:"getCoory",value:function(t,n){if((0,e.gn)("maincanvas").offsetHeight*bt<=(0,e.gn)("workspacebkg").offsetHeight)return n;var r=(0,e.gn)("maincanvas").dy+(0,e.gn)("maincanvas").cy-(0,e.gn)("maincanvas").cy*bt;if(r>t)return(0,e.gn)("maincanvas").dy+(t-r);n=(r/bt+(0,e.gn)("maincanvas").offsetHeight)*bt;var i=(0,e.gn)("workspacebkg").offsetHeight-t;return n<i?(0,e.gn)("maincanvas").dy+(i-n):(0,e.gn)("maincanvas").dy}},{key:"scaleToFit",value:function(){var e=Ve.parentNode.parentNode.offsetHeight/(ft+10),t=Ve.parentNode.parentNode.offsetWidth/(dt+10);n.setZoomTo(Math.min(t,e))}},{key:"dragBackground",value:function(e){if(!n.canvasFits()){var t=ne.getScreenPt(e),r=w.diff(t,kt);n.adjustPos(r)}}},{key:"layout",value:function(){n.topbar();var t=(0,e.HS)("div","innerpaint",We);n.leftPalette(t);var r=(0,e.HS)("div","workspacebkg-container",t),i=(0,e.HS)("div","workspacebkg",r);i.setAttribute("id","workspacebkg"),n.rightPalette(t),n.colorPalette(We),n.selectButton("path"),n.createSVGeditor(i)}},{key:"topbar",value:function(){var t=(0,e.HS)("div","paintop",We);ve.setup(t),n.nameOfcostume(t),n.checkMark(t)}},{key:"checkMark",value:function(t){var r=(0,e.HS)("div","paintdone",t);r.id="donecheck",r.ontouchstart=n.backToProject,r.onmousedown=n.backToProject}},{key:"nameOfcostume",value:function(t){var r=(0,e.HS)("form","spriteform",t);r.name="spriteform";var i=(0,e.HS)("input",void 0,r);i.autocomplete=!1,i.autocorrect=!1,i.name="name",i.maxLength=25,i.firstTime=!0,i.ontouchstart=function(){},i.onmousedown=function(){},i.onfocus=n.nameFocus,i.onblur=n.nameBlur,i.onkeypress=n.handleNamePress,i.onkeyup=n.handleKeyRelease,r.onsubmit=n.submitNameChange}},{key:"submitNameChange",value:function(e){e.preventDefault(),e.target.blur()}},{key:"nameFocus",value:function(t){t.preventDefault(),t.stopPropagation();var n=t.target;n.firstTime=!0,Sv.activeFocus=n,e.Dt&&AndroidInterface.scratchjr_setsoftkeyboardscrolllocation(n.getBoundingClientRect().top*window.devicePixelRatio,n.getBoundingClientRect().bottom*window.devicePixelRatio),setTimeout((function(){n.setSelectionRange(n.value.length,n.value.length)}),1)}},{key:"nameBlur",value:function(e){Sv.activeFocus=void 0;var t=e.target,n=Sv.validate(t.value,"");t.value=n.substring(0,t.maxLength),Sv.storyStart("Paint.nameBlur")}},{key:"handleNamePress",value:function(e){if(13===(e.keyCode||e.which))n.submitNameChange(e);else{var t=e.target;t.firstTime&&(t.firstTime=!1,t.value=""),25===t.value.length&&m.sndFX("boing.wav")}}},{key:"handleKeyRelease",value:function(e){var t=e.keyCode||e.which,n=e.target;8===t&&n.firstTime&&(n.firstTime=!1,n.value="")}},{key:"leftPalette",value:function(t){var r=(0,e.HS)("div","side up",t),i=(0,e.HS)("div","paintpalette",r);i.setAttribute("id","paintpalette"),n.setupEditPalette(i),n.createSizeSelector(i)}},{key:"setupEditPalette",value:function(t){var r=(0,e.HS)("div","section",t);r.setAttribute("id","painttools");var i=["path","ellipse","rect","tri"],a=0;for(a=0;a<i.length;a++){var o=(0,e.HS)("div","element off",r),s=(0,e.HS)("div","tool ".concat(i[a]," off"),o);s.setAttribute("key",i[a]),s.ontouchstart=n.setMode,s.onmousedown=n.setMode}}},{key:"createSizeSelector",value:function(t){var r=(0,e.HS)("div","section space",t);r.setAttribute("id","sizeSelector");for(var i=function(e,t){e.preventDefault(),e.stopPropagation();var r=Number(t.key);mt=gt[Number(t.key)],n.selectPenSize(r)},a=function(t){var a=(0,e.HS)("div","pensizeholder",r);a.key=t,a.ontouchstart=function(e){i(e,a)},a.onmousedown=function(e){i(e,a)};var o=(0,e.HS)("div","line t".concat(t),a);n.drawPenSizeInColor(o)},o=0;o<gt.length;o++)a(o);mt=gt[1],n.selectPenSize(1)}},{key:"drawPenSizeInColor",value:function(e){e.style.background=ct}},{key:"updateStrokes",value:function(){var t=(0,e.gn)("sizeSelector");if(t)for(var r=0;r<t.childElementCount;r++){var i=t.childNodes[r];n.drawPenSizeInColor(i.childNodes[0])}}},{key:"selectPenSize",value:function(t){for(var n=(0,e.gn)("sizeSelector"),r=0;r<n.childElementCount;r++){var i=n.childNodes[r];i.key===t?i.setAttribute("class","pensizeholder on"):i.setAttribute("class","pensizeholder off")}}},{key:"rightPalette",value:function(t){var r=(0,e.HS)("div","side",t);n.addSidePalette(r,"selectortools",["select","rotate"]),n.addSidePalette(r,"edittools",["stamper","scissors"]),n.addSidePalette(r,"filltools","1"===ny.camera&&le.available?["camera","paintbucket"]:["paintbucket"])}},{key:"addSidePalette",value:function(t,r,i){var a=(0,e.HS)("div","paintpalette short",t);a.setAttribute("id",r);for(var o=0;o<i.length;o++){var s=(0,e.HS)("div","element off",a),u=(0,e.HS)("div","tool ".concat(i[o]," off"),s);u.setAttribute("key",i[o]),u.ontouchstart=n.setMode,u.onmousedown=n.setMode}}},{key:"cameraToolsOn",value:function(){(0,e.gn)("backdrop").setAttribute("class","modal-backdrop fade dark"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"block"});var t=(0,e.HS)("div","phototopbar",(0,e.gn)("backdrop"));t.setAttribute("id","photocontrols");var r=(0,e.HS)("div","flipcamera",t);r.setAttribute("id","cameraflip"),r.setAttribute("key","cameraflip"),e.Dt&&!AndroidInterface.scratchjr_has_multiple_cameras()&&(r.style.display="none"),r.ontouchstart=n.setMode,r.onmousedown=n.setMode;var i=(0,e.HS)("div","snapshot-container",(0,e.gn)("backdrop"));i.setAttribute("id","capture-container");var a=(0,e.HS)("div","snapshot",i);a.setAttribute("id","capture"),a.setAttribute("key","camerasnap"),a.ontouchstart=n.setMode,a.onmousedown=n.setMode;var o=(0,e.HS)("div","cameraclose",t);o.setAttribute("id","cameraclose"),o.ontouchstart=n.closeCameraMode,o.onmousedown=n.closeCameraMode}},{key:"closeCameraMode",value:function(e){e.preventDefault(),e.stopPropagation(),m.sndFX("exittap.wav"),le.close(),n.selectButton("select")}},{key:"cameraToolsOff",value:function(){if((0,e.gn)("backdrop").setAttribute("class","modal-backdrop fade"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"none"}),(0,e.gn)("photocontrols")&&(0,e.gn)("photocontrols").parentNode.removeChild((0,e.gn)("photocontrols")),(0,e.gn)("capture")){var t=(0,e.gn)("capture").parentNode,n=t.parentNode;t.removeChild((0,e.gn)("capture")),n.removeChild((0,e.gn)("capture-container"))}}},{key:"setUpCanvasArea",value:function(){var t=(0,e.gn)("workspacebkg"),r=Math.floor((t.offsetWidth-dt)/2),i=Math.floor((t.offsetHeight-ft)/2),a=dt,o=ft,s=(0,e.gn)("maincanvas");s.style.background="#F5F2F7",s.style.top="0px",s.style.left="0px",s.style.width="".concat(a,"px"),s.style.height="".concat(o,"px"),s.cx=s.offsetWidth/2,s.cy=s.offsetHeight/2,s.dx=r,s.dy=i,Ve.setAttributeNS(null,"width",a),Ve.setAttributeNS(null,"height",o),n.drawGrid(a,o),ne.clearEvents()}},{key:"colorPalette",value:function(t){var r=n.initSwatchList(),i=(0,e.HS)("div","swatchpalette-container",t),a=(0,e.HS)("div","swatchpalette",i);a.setAttribute("id","swatches");for(var o=0;o<r.length;o++){var s=(0,e.HS)("div","swatchbucket",a),u=(0,e.HS)("div","swatchframe",s);(0,e.HS)("div","swatchcolor",u).style.background=r[o],u=(0,e.HS)("div","splasharea off",s),n.setSplashColor(u,Je,r[o]),n.addImageUrl(u,qe),s.ontouchstart=n.selectSwatch,s.onmousedown=n.selectSwatch}n.setSwatchColor((0,e.gn)("swatches").childNodes[r.indexOf("#1C1C1C")])}},{key:"setSplashColor",value:function(e,t,r){var i="data:image/svg+xml;base64,".concat(btoa(t.replace(/#662D91/g,r)));n.addImageUrl(e,i)}},{key:"addImageUrl",value:function(e,t){var n=document.createElement("img");n.src=t,n.style.position="absolute",e.appendChild(n)}},{key:"selectSwatch",value:function(e){if(!(e.touches&&e.touches.length>1||(e.preventDefault(),e.stopPropagation(),le.active))){for(var t,r="swatchbucket"!==(t=window.event?window.event.srcElement:e.target).className;r;)r=(t=t.parentNode)&&"swatchbucket"!==t.className;t&&(m.sndFX("splash.wav"),n.setSwatchColor(t))}}},{key:"setSwatchColor",value:function(t){t&&["select","wand","stamper","scissors","rotate"].indexOf(pt)>-1&&n.selectButton("paintbucket");for(var r=t.childNodes[0].childNodes[0].style.backgroundColor,i=0;i<(0,e.gn)("swatches").childElementCount;i++)r===(0,e.gn)("swatches").childNodes[i].childNodes[0].childNodes[0].style.backgroundColor?(0,e.gn)("swatches").childNodes[i].childNodes[1].setAttribute("class","splasharea on"):(0,e.gn)("swatches").childNodes[i].childNodes[1].setAttribute("class","splasharea off");ct=r,Se.quitEditMode(),n.updateStrokes()}},{key:"initSwatchList",value:function(){return["#FFD2F2","#FF99D6","#FF4583","#C30001","#FF0023","#FF8300","#FFB200","#FFF42E","#FFF9C2","#E2FFBD","#CFF500","#50D823","#29C130","#2BBF8A","#027607","#114D24","#FFFFFF","#CCDDE7","#61787C","#1C1C1C","#FF64E9","#D999FF"," #A159D3","#722696","#141463","#003399","#1D40ED","#0079D3","#009EFF","#76C8FF","#ACE0FD","#11B7BC","#21F9F3","#C3FCFC","#FDDBB4","#E4B681","#BF8C5C","#955D31","#6B3D1F","#482D18"]}},{key:"createSVGeditor",value:function(t){var n=(0,e.HS)("div","maincanvas",t);n.setAttribute("id","maincanvas"),n.style.background="#F5F2F7",n.style.top="0px",n.style.left="0px",window.onmousemove=void 0,window.onmouseup=void 0,(Ve=et.create(n)).setAttribute("class","active3d"),window.xform=Ze.getTranslateTransform(),window.selxform=Ze.getTranslateTransform(),et.createGroup(Ve,"layer1").setAttribute("style","pointer-events:visiblePainted"),et.createGroup(Ve,"draglayer"),et.createGroup(Ve,"paintgrid"),(0,e.gn)("paintgrid").setAttribute("opacity",.5)}},{key:"clearWorkspace",value:function(){var t=function(e){for(;e.childElementCount>0;)e.removeChild(e.childNodes[0])};t((0,e.gn)("layer1")),t((0,e.gn)("paintgrid")),t((0,e.gn)("draglayer")),Se.quitEditMode()}},{key:"drawGrid",value:function(t,r){var i;vt||(i={d:n.getGridPath(t,r,12),id:(0,e.N7)("gridpath"),opacity:1,stroke:"#dcddde",fill:"none","stroke-width":.5},et.addChild((0,e.gn)("paintgrid"),"path",i).setAttribute("style","pointer-events:none;")),i={d:n.getGridPath(t,r,vt?24:48),id:(0,e.N7)("gridpath"),opacity:1,stroke:"#c1c2c3",fill:"none","stroke-width":.5},et.addChild((0,e.gn)("paintgrid"),"path",i).setAttribute("style","pointer-events:none;")}},{key:"getGridPath",value:function(e,t,n){for(var r="",i=n,a=0;a<e/n;a++)r+="M".concat(i,",",0,"L").concat(i,",").concat(t),i+=n;for(var o=n,s=0;s<t/n;s++)r+="M".concat(0,",",o,"L").concat(e,",").concat(o),o+=n;return r}},{key:"initBkg",value:function(t,r){ze=!0,dt=t,ft=r,n.setUpCanvasArea();var i=Ve.parentNode.parentNode.offsetHeight/(ft+10),a=Ve.parentNode.parentNode.offsetWidth/(dt+10);if(n.setZoomTo(Math.min(a,i)),document.forms.spriteform.style.visibility="visible",yt)n.loadBackground(yt);else{var o={id:"staticbkg",opacity:1,fixed:"yes",fill:Sv.stagecolor};o.d=Oe.arrayToString([["M",0,0],["L",480,0],["L",480,360],["L",0,360],["L",0,0]]),et.addChild((0,e.gn)("layer1"),"path",o),oe.drawOffscreen(),ve.record(!0)}}},{key:"loadBackground",value:function(e){e.indexOf("samples/")>=0?n.loadChar(e):rt.keys[e]?n.getBkg(rt.path+e):ny.getmedia(e,(function(e){var t=atob(e);sy.getImagesInSVG(t,(function(){n.loadBkg(t)}))}))}},{key:"getBkg",value:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&n.createBkgFromXML(t.responseText)},t.open("GET",e,!0),t.send(null)}},{key:"loadBkg",value:function(e){n.createBkgFromXML(e)}},{key:"createBkgFromXML",value:function(t){ze=t.indexOf("Scratch Jr")>-1,t=t.replace(/>\s*</g,"><");for(var r=(new DOMParser).parseFromString(t,"text/xml"),i=document.importNode(r.documentElement,!0),a=n.skipUnwantedElements(i,[]),o=0;o<a.length;o++)(0,e.gn)("layer1").appendChild(a[o]),"fixed"===a[o].getAttribute("id")&&a[o].setAttribute("fixed","yes"),a[o].setAttribute("file","yes");n.doAbsolute((0,e.gn)("layer1")),ze||n.reassingIds((0,e.gn)("layer1"));var s=Ve.parentNode.parentNode.offsetHeight/(ft+10),u=Ve.parentNode.parentNode.offsetWidth/(dt+10);n.setZoomTo(Math.min(u,s)),ve.record(!0),ze||n.selectButton("paintbucket")}},{key:"initSprite",value:function(t,r){if(ze=!0,document.forms.spriteform.style.visibility="visible",document.forms.spriteform.name.value=(0,e.gn)(Ke)?(0,e.gn)(Ke).owner.name:Ke,t&&(dt=t),r&&(ft=r),yt)n.loadCharacter(yt);else{n.setUpCanvasArea(),(0,e.ge)(oe.maskCanvas,Math.round(Number(Ve.getAttribute("width"))*bt),Math.round(Number(Ve.getAttribute("height"))*bt));var i=Ve.parentNode.parentNode.offsetHeight/(ft+10),a=Ve.parentNode.parentNode.offsetWidth/(dt+10);n.setZoomTo(Math.min(a,i)),ve.record(!0)}}},{key:"loadCharacter",value:function(e){e.indexOf("samples/")>=0?n.loadChar(e):rt.keys[e]?n.loadChar(rt.path+e):ny.getmedia(e,(function(e){var t=atob(e);sy.getImagesInSVG(t,(function(){n.loadSprite(t)}))}))}},{key:"loadSprite",value:function(e){n.createCharFromXML(e,Ke)}},{key:"loadChar",value:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&n.createCharFromXML(t.responseText,Ke)},t.open("GET",e,!0),t.send(null)}},{key:"adjustShapePosition",value:function(t,n){window.xform.setTranslate(t,n),Ze.translateTo((0,e.gn)("layer1"),window.xform)}},{key:"savePageImage",value:function(t){(0,e.gn)("layer1").childElementCount>0?(_t=!0,t&&(lt.open(We,(0,e.gn)("donecheck"),fy.localize("ALERT_SAVING"),"#28A5DA"),lt.balloon.style.zIndex=12e3),Ye=et.saveBackground((0,e.gn)("layer1"),dt,ft),sy.setMedia(Ye,"svg",(function(e){n.changeBackground(e,t)}))):n.close()}},{key:"changeBackground",value:function(e,t){Et=e;var r={cond:"md5 = ? AND version = ?",items:["*"]};r.values=[Et,Sv.version],sy.query("userbkgs",r,(function(e){n.checkDuplicateBkg(e,t)}))}},{key:"checkDuplicateBkg",value:function(e,t){JSON.parse(e).length>0?t&&t("duplicate"):n.addToBkgLib(t)}},{key:"addToBkgLib",value:function(e){var t=sy.getThumbnail(Ye,480,360,120,90).split(",")[1];ny.setmedia(t,"png",(function(t){var n={};n.values=[Et,t,Sv.version,"480","360","svg"],n.stmt="insert into userbkgs (".concat(["md5","altmd5","version","width","height","ext"].toString(),") values (").concat("?,?,?,?,?,?",")"),ny.stmt(n,e)}))}},{key:"changePage",value:function(){Sv.stage.currentPage.setBackground(Et,Sv.stage.currentPage.updateBkg),n.close()}},{key:"saveSprite",value:function(t){var r=document.forms.spriteform.name.value;if((0,e.gn)("layer1").childElementCount>0&&ve.index>0)_t=!0,t&&(lt.open(We,(0,e.gn)("donecheck"),"Saving...","#28A5DA"),lt.balloon.style.zIndex=12e3),Ye=et.saveShape((0,e.gn)("layer1"),dt,ft),sy.setMedia(Ye,"svg",(function(e){n.addOrModifySprite(e,t)}));else{var i=n.getLoadType(je);r!==Ke&&"modify"===i&&je?Sv.stage.currentPage.modifySpriteName(r,je):yt&&"add"===i&&Sv.stage.currentPage.addSprite(Xe,yt,r),n.close()}}},{key:"addOrModifySprite",value:function(e,t){Et=e;var r={cond:"md5 = ? AND version = ?",items:["*"]};r.values=[Et,Sv.version],sy.query("usershapes",r,(function(e){n.checkDuplicate(e,t)}))}},{key:"checkDuplicate",value:function(e,t){JSON.parse(e).length>0?t&&t("duplicate"):n.addToLib(t)}},{key:"addToLib",value:function(t){var n=Xe?Xe.toString():"0.5",r=document.forms.spriteform.name.value;r=unescape(r).replace(/[0-9]/g,"").replace(/\s*/g,"");var i=et.getBox((0,e.gn)("layer1")).rounded(),a=(i=i.expandBy(20)).width.toString(),o=i.height.toString(),s=sy.getThumbnail(Ye,a,o,120,90).split(",")[1];ny.setmedia(s,"png",(function(e){var i={};i.values=[n,Et,e,Sv.version,a,o,"svg",r],i.stmt="insert into usershapes (".concat(["scale","md5","altmd5","version","width","height","ext","name"].toString(),") values (").concat("?,?,?,?,?,?,?,?",")"),ny.stmt(i,t)}))}},{key:"changePageSprite",value:function(){n.close();var e=document.forms.spriteform.name.value;switch(n.getLoadType(je)){case"modify":Sv.stage.currentPage.modifySprite(Et,e,je);break;case"add":Sv.stage.currentPage.addSprite(Xe,Et,e);break;default:Sv.stage.currentPage.update()}}},{key:"getLoadType",value:function(e){return e?"modify":"add"}},{key:"skipUnwantedElements",value:function(e,t){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];"metadata"!==i.nodeName&&"defs"!==i.nodeName&&"sodipodi:namedview"!==i.nodeName&&"#comment"!==i.nodeName&&("g"===i.nodeName&&"layer1"===i.id?(n.skipUnwantedElements(i,t),i.removeAttribute("id")&&i.removeAttribute("id")):t.push(i))}return t}},{key:"reassingIds",value:function(t){for(var r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];"yes"===i.parentNode.getAttribute("fixed")&&i.setAttribute("fixed","yes"),i.getAttribute("id")||i.setAttribute("id",(0,e.N7)(i.nodeName)),"g"===i.nodeName&&n.reassingIds(i)}}},{key:"createCharFromXML",value:function(t){ze=t.indexOf("Scratch Jr")>-1;var r=dt<432?Math.floor((432-dt)/2):0,i=ft<384?Math.floor((384-ft)/2):0;dt<432&&(dt=432),ft<384&&(ft=384),n.setUpCanvasArea(),t=t.replace(/>\s*</g,"><");for(var a=(new DOMParser).parseFromString(t,"text/xml"),o=document.importNode(a.documentElement,!0),s=n.skipUnwantedElements(o,[]),u=0;u<s.length;u++)(0,e.gn)("layer1").appendChild(s[u]);n.doAbsolute((0,e.gn)("layer1")),n.adjustShapePosition(r,i),ze||n.reassingIds((0,e.gn)("layer1")),n.scaleToFit(),xt=bt<1?bt/2:1;var h=5241810/(dt*ft),l=Math.floor(Math.sqrt(h));l<Tt&&(Tt=l),ve.record(!0),ze||n.selectButton("paintbucket")}},{key:"doAbsolute",value:function(e){for(var t=0;t<e.childElementCount;t++){var r=e.childNodes[t];"path"===r.tagName&&Oe.setAbsolutePath(r),"g"===r.tagName&&n.doAbsolute(e.childNodes[t])}}},{key:"getComponents",value:function(e,t){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];"metadata"!==i.nodeName&&"defs"!==i.nodeName&&"sodipodi:namedview"!==i.nodeName&&"#comment"!==i.nodeName&&("g"===i.nodeName?(n.getComponents(i,t),i.getAttribute("id")&&i.removeAttribute("id")):t.push(i))}return t}}]),n}(),Mt=24,At=!0,Rt=function(){function n(){t(this,n)}return r(n,null,[{key:"size",get:function(){return Mt}},{key:"hidden",get:function(){return At}},{key:"init",value:function(t){var r=t.offsetWidth,i=t.offsetHeight,a=(0,e.um)(t,0,0,482,362,{position:"absolute",zIndex:Sv.layerTop});n.setScaleAndPosition(a,e._X,47,75,482,362),a.setAttribute("id","livegrid"),n.drawLines(a,482,362),n.createNumbering(r,i),n.createCursor(),n.createYcursor(),n.createXcursor(),n.bridgeEvents(a)}},{key:"setScaleAndPosition",value:function(t,n,r,i,a,o){(0,e.cl)(t.style,{webkitTransform:"translate(".concat(-a/2,"px, ").concat(-o/2,"px) ")+"scale(".concat(n,") ")+"translate(".concat(a/2+r,"px, ").concat(o/2+i,"px)")})}},{key:"drawLines",value:function(t,n,r){var i=(0,e.oM)(t,0,0,n,r,{position:"absolute"});i.style.opacity=.5;var a=i.getContext("2d");a.strokeStyle="#B3B3B3",a.lineWidth=1;for(var o=Mt,s=0;s<20;s++)a.moveTo(o,0),a.lineTo(o,360),a.stroke(),o+=Mt;for(var u=Mt,h=0;h<15;h++)a.moveTo(0,u),a.lineTo(480,u),a.stroke(),u+=Mt}},{key:"createNumbering",value:function(t,r){var i=(0,e.um)((0,e.gn)("stageframe"),0,0,t-46-30,24,{position:"absolute",zIndex:Sv.layerTop});i.setAttribute("id","rownum"),n.setScaleAndPosition(i,e._X,22,437,t-46-30,24);for(var a=24,o=0;o<20;o++){var s=(0,e.um)(i,a,0,Mt,Mt,{position:"absolute",zIndex:10});(0,e.V1)(s,fy.localize("GRID_NUMBER",{N:o+1}),{}).setAttribute("class","stylelabel"),a+=24}var u=(0,e.um)((0,e.gn)("stageframe"),0,0,24,r+24,{position:"absolute",zIndex:Sv.layerTop});u.setAttribute("id","colnum"),n.setScaleAndPosition(u,e._X,22,75,24,r+24);for(var h=336,l=0;l<15;l++){var c=(0,e.um)(u,0,h,Mt,Mt,{position:"absolute",zIndex:10});(0,e.V1)(c,fy.localize("GRID_NUMBER",{N:l+1}),{}).setAttribute("class","stylelabel"),h-=24}}},{key:"createYcursor",value:function(){var t=(0,e.um)((0,e.gn)("colnum"),0,0,Mt,Mt,{position:"absolute",zIndex:20});t.setAttribute("class","circle"),t.style.background="#6a99c1",t.setAttribute("id","ycursor"),(0,e.V1)(t,15,{}).setAttribute("class","circlenum")}},{key:"createXcursor",value:function(){var t=(0,e.um)((0,e.gn)("rownum"),Mt,0,Mt,Mt,{position:"absolute",zIndex:20});t.setAttribute("class","circle"),t.style.background="#6a99c1",t.setAttribute("id","xcursor"),(0,e.V1)(t,1,{}).setAttribute("class","circlenum")}},{key:"createCursor",value:function(){var t=(0,e.gn)("livegrid"),n=(0,e.um)(t,0,0,26,26,{position:"absolute",zIndex:Sv.layerAboveBottom});n.setAttribute("id","circlenum");var r=(0,e.oM)(n,0,0,26,26,{position:"absolute"}).getContext("2d");r.globalAlpha=.5,r.fillStyle="#28A5DA",r.strokeStyle="#656e73",r.lineWidth=3,r.strokeRect(3,3,18,18),r.fillRect(3,3,18,18)}},{key:"bridgeEvents",value:function(e){var t=document.querySelector("#stage canvas");n.redirectEvent("mousedown",e,t),n.redirectEvent("mousemove",e,t),n.redirectEvent("mouseup",e,t),n.redirectEvent("touchstart",e,t),n.redirectEvent("touchmove",e,t),n.redirectEvent("touchend",e,t)}},{key:"redirectEvent",value:function(e,t,n){t.addEventListener(e,(function(e){n.dispatchEvent(new e.constructor(e.type,e)),e.preventDefault(),e.stopPropagation()}))}},{key:"updateCursor",value:function(){if(!At&&!Sv.inFullscreen&&Sv.stage.currentPage){if(!Sv.getSprite())return(0,e.gn)("circlenum").style.visibility="hidden",(0,e.gn)("xcursor").style.visibility="hidden",void((0,e.gn)("ycursor").style.visibility="hidden");var t=Sv.getSprite();if(t&&(0,e.gn)("circlenum")){var r=t.xcoor+12,i=t.ycoor-12;(0,e.gn)("xcursor").style.visibility="visible",(0,e.gn)("ycursor").style.visibility="visible",(0,e.gn)("circlenum").style.visibility="visible",n.setCursorsValues(r,i)}}}},{key:"setCursorsValues",value:function(t,n){var r=(0,e.gn)("circlenum"),i=Math.round(t/Mt),a=Math.round(n/Mt);if(r.offsetLeft!==24*i){var o=(0,e.gn)("xcursor"),s=i<1||i>20?"hidden":"visible";(0,e.cl)(o.style,{position:"absolute",left:"".concat(24*i,"px"),visibility:s}),o.childNodes[0].textContent=fy.localize("GRID_NUMBER",{N:i})}if(r.offsetTop!==24*a){var u=(0,e.gn)("ycursor"),h=a<0||a>14?"hidden":"visible";(0,e.cl)(u.style,{position:"absolute",top:"".concat(24*a,"px"),visibility:h}),u.childNodes[0].textContent=fy.localize("GRID_NUMBER",{N:15-a})}(0,e.cl)(r.style,{position:"absolute",top:"".concat(24*a,"px"),left:"".concat(24*(i-1),"px")})}},{key:"hide",value:function(t){var n=(At=t)?"hidden":"visible";(0,e.gn)("livegrid").style.visibility=n,(0,e.gn)("rownum").style.visibility=n,(0,e.gn)("colnum").style.visibility=n,Sv.stage.currentPage&&(n=Sv.getSprite()?n:"hidden"),(0,e.gn)("circlenum").style.visibility=n,(0,e.gn)("xcursor").style.visibility=n,(0,e.gn)("ycursor").style.visibility=n}}]),n}(),Ct=[-48,-30,-22,-14,-6,0,6,14,22,30,48],Pt=function(){function n(){t(this,n)}return r(n,null,[{key:"hopList",get:function(){return Ct}},{key:"init",value:function(){n.table={},n.table.done=n.Done,n.table.missing=n.Ignore,n.table.onflag=n.Ignore,n.table.onmessage=n.Ignore,n.table.onclick=n.Ignore,n.table.ontouch=n.OnTouch,n.table.onchat=n.Ignore,n.table.repeat=n.Repeat,n.table.forward=n.Forward,n.table.back=n.Back,n.table.up=n.Up,n.table.down=n.Down,n.table.left=n.Left,n.table.right=n.Right,n.table.home=n.Home,n.table.setspeed=n.SetSpeed,n.table.message=n.Message,n.table.setcolor=n.SetColor,n.table.bigger=n.Bigger,n.table.smaller=n.Smaller,n.table.wait=n.Wait,n.table.caretcmd=n.Ignore,n.table.caretstart=n.Ignore,n.table.caretend=n.Ignore,n.table.caretrepeat=n.Ignore,n.table.gotopage=n.GotoPage,n.table.endstack=n.DoNextBlock,n.table.stopall=n.StopAll,n.table.stopmine=n.StopMine,n.table.forever=n.Forever,n.table.hop=n.Hop,n.table.show=n.Show,n.table.hide=n.Hide,n.table.playsnd=n.playSound,n.table.playusersnd=n.playSound,n.table.grow=n.Grow,n.table.shrink=n.Shrink,n.table.same=n.Same,n.table.say=n.Say}},{key:"Done",value:function(e){null!==e.oldblock&&e.oldblock.unhighlight(),e.oldblock=null,e.isRunning=!1}},{key:"setTime",value:function(e){e.time=new Date-0}},{key:"showTime",value:function(){}},{key:"DoNextBlock",value:function(e){e.waitTimer=10,e.thisblock=e.thisblock.next}},{key:"StopAll",value:function(){Sv.stopStrips()}},{key:"StopMine",value:function(e){for(var t=e.spr,n=0;n<Sv.runtime.threadsRunning.length;n++)Sv.runtime.threadsRunning[n].spr===t&&Sv.runtime.threadsRunning[n].thisblock!==e.thisblock&&Sv.runtime.threadsRunning[n].stop(!0);e.thisblock=e.thisblock.next,Sv.runtime.yield=!0}},{key:"playSound",value:function(e){var t=e.thisblock.getSoundName(e.spr.sounds);if(!e.audio){var n=m.projectSounds[t];if(!n)return void(e.thisblock=e.thisblock.next);e.audio=n,n.play()}e.audio&&e.audio.done()&&(e.audio.clear(),e.thisblock=e.thisblock.next,e.audio=void 0),e.waitTimer=4}},{key:"Say",value:function(e){var t=e.thisblock,r=e.spr,i=t.getArgValue();if(e.count<0)e.count=Math.max(30,30*Math.round(i.length/8)),r.openBalloon(i),n.setTime(e);else{var a=e.count;--a<0?(e.count=-1,r.closeBalloon(),n.showTime(e),e.thisblock=e.thisblock.next):(e.waitTimer=1,e.count=a)}}},{key:"GotoPage",value:function(e){var t=e.thisblock,r=Number(t.getArgValue());if(e.count<0)e.count=2,n.setTime(e);else{var i=e.count;--i<0?(e.count=-1,n.showTime(e),Sv.stage.gotoPage(r)):(e.waitTimer=1,e.count=i)}}},{key:"Forever",value:function(e){e.thisblock=e.firstBlock.aStart?e.firstBlock.next:e.firstBlock,Sv.runtime.yield=!0}},{key:"Repeat",value:function(e){var t=e.thisblock,n=Number(t.getArgValue());n<1&&(n=1),t.repeatCounter<0&&(t.repeatCounter=n),0===t.repeatCounter?(t.repeatCounter=-1,e.thisblock=e.thisblock.next,e.waitTimer=1):(e.stack.push(e.thisblock),t.repeatCounter--,e.thisblock=e.thisblock.inside,Sv.runtime.yield=!0)}},{key:"Ignore",value:function(e){e.thisblock=e.thisblock.next}},{key:"Wait",value:function(e){var t=e.thisblock.getArgValue();e.waitTimer=Math.round(3.125*t),n.setTime(e),e.thisblock=e.thisblock.next}},{key:"Home",value:function(e){e.spr.goHome(),e.waitTimer=1,e.thisblock=e.thisblock.next}},{key:"SetSpeed",value:function(e){var t=e.spr,n=Number(e.thisblock.getArgValue());t.speed=Math.pow(2,n),e.waitTimer=1,e.thisblock=e.thisblock.next}},{key:"Hop",value:function(e){e.count<0&&(e.count=Ct.length,n.setTime(e)),n.hopTo(e)}},{key:"hopTo",value:function(e){var t=e.spr,r=e.thisblock,i=Number(r.getArgValue()),a=e.count;if(--a<0)e.count=-1,e.vector={x:0,y:0},n.showTime(e),e.thisblock=e.thisblock.next;else{e.vector={x:0,y:Ct[a]};var o=t.ycoor-e.vector.y/5*i;o<0&&(o=0),o>=360-Rt.size&&(o=360-Rt.size),t.setPos(t.xcoor+e.vector.x,o),e.waitTimer=1+Math.floor(Math.pow(2,2-Math.floor(t.speed/2))/2),e.count=a}}},{key:"Down",value:function(e){var t=24*Number(e.thisblock.getArgValue()),r=Math.abs(t);if(0===t)return e.thisblock=e.thisblock.next,e.waitTimer=1,e.distance=-1,void(e.vector={x:0,y:0});0===t?e.distance=0:e.distance<0&&(e.distance=r,e.vector={x:0,y:2},n.setTime(e)),n.moveAtSpeed(e)}},{key:"Up",value:function(e){var t=24*Number(e.thisblock.getArgValue()),r=Math.abs(t);if(0===t)return e.thisblock=e.thisblock.next,e.waitTimer=1,e.distance=-1,void(e.vector={x:0,y:0});e.distance<0&&(e.distance=r,e.vector={x:0,y:-2},n.setTime(e)),n.moveAtSpeed(e)}},{key:"Forward",value:function(e){var t=e.spr,r=24*Number(e.thisblock.getArgValue()),i=Math.abs(r);if(t.flip&&(t.flip=!1,t.render()),0===r)return e.thisblock=e.thisblock.next,e.waitTimer=1*Math.pow(2,2-Math.floor(t.speed/2)),e.vector={x:0,y:0},void(e.distance=-1);e.distance<0&&(e.distance=i,e.vector={x:2,y:0},n.setTime(e)),n.moveAtSpeed(e)}},{key:"Back",value:function(e){var t=e.spr,r=24*Number(e.thisblock.getArgValue()),i=Math.abs(r);if(t.flip||(t.flip=!0,t.render()),0===r)return e.thisblock=e.thisblock.next,e.vector={x:0,y:0},void(e.waitTimer=1*Math.pow(2,2-Math.floor(t.speed/2)));0===r?e.distance=0:e.distance<0&&(e.distance=i,e.vector={x:-2,y:0},n.setTime(e)),n.moveAtSpeed(e)}},{key:"moveAtSpeed",value:function(e){var t=e.spr,r=e.distance,i=12*Number(e.thisblock.getArgValue()),a=w.scale(e.vector,t.speed*Math.abs(i)/i);(r-=Math.abs(w.len(a)))<0?(a=w.scale(e.vector,e.distance),t.setPos(t.xcoor+a.x,t.ycoor+a.y),e.distance=-1,e.vector={x:0,y:0},n.showTime(e),e.thisblock=e.thisblock.next):(t.setPos(t.xcoor+a.x,t.ycoor+a.y),e.waitTimer=1,e.distance=r)}},{key:"Right",value:function(e){var t=e.spr,r=30*Number(e.thisblock.getArgValue());e.count<0&&(e.count=Math.floor(Math.abs(r)/t.speed*.25),e.angleStep=4*t.speed*Math.abs(r)/r,e.finalAngle=t.angle+r,e.finalAngle=e.finalAngle%360,e.finalAngle<0&&(e.finalAngle+=360),e.finalAngle>360&&(e.finalAngle-=360),n.setTime(e)),n.turning(e)}},{key:"Left",value:function(e){var t=e.spr,r=30*Number(e.thisblock.getArgValue());e.count<0&&(e.count=Math.floor(Math.abs(r)/t.speed*.25),e.angleStep=4*-t.speed*Math.abs(r)/r,e.finalAngle=t.angle-r,e.finalAngle=e.finalAngle%360,e.finalAngle<0&&(e.finalAngle+=360),e.finalAngle>360&&(e.finalAngle-=360),n.setTime(e)),n.turning(e)}},{key:"turning",value:function(e){var t=e.spr,r=e.count;--r<0?(e.count=-1,t.setHeading(e.finalAngle),n.showTime(e),e.thisblock=e.thisblock.next):(t.setHeading(t.angle+e.angleStep),e.waitTimer=1,e.count=r)}},{key:"Same",value:function(e){var t=e.spr,r=(t.defaultScale-t.scale)/t.defaultScale*10;if(0===r)return e.waitTimer=1,e.thisblock=e.thisblock.next,e.count=-1,e.distance=-1,void(e.firstBlock.aStart||(t.homescale=t.defaultScale));e.count<0&&(e.distance=t.defaultScale*Math.abs(r)/r*t.speed,e.count=Math.floor(5*Math.floor(Math.abs(r))/t.speed),n.setTime(e),e.firstBlock.aStart||(t.homescale=t.defaultScale)),0===e.count?(e.count=-1,t.noScaleFor(),e.distance=-1,n.showTime(e),e.thisblock=e.thisblock.next):(t.changeSizeBy(2*e.distance),e.waitTimer=1,e.count=e.count-1)}},{key:"Grow",value:function(e){var t=e.spr,r=Number(e.thisblock.getArgValue());e.count<0&&(e.distance=Number(t.scale)+10*r*t.defaultScale/100,e.distance=Math.round(1e3*e.distance)/1e3,e.count=Math.floor(5*Math.abs(r)/t.speed),n.setTime(e)),0===e.count?(e.count=-1,e.firstBlock.aStart||(t.homescale=t.scale),e.distance=-1,n.showTime(e),e.thisblock=e.thisblock.next):(t.changeSizeBy(2*t.defaultScale*t.speed*Math.abs(r)/r),e.waitTimer=1,e.count=e.count-1)}},{key:"Shrink",value:function(e){var t=e.spr,r=Number(e.thisblock.getArgValue());e.count<0&&(e.distance=t.scale-10*r*t.defaultScale/100,e.distance=Math.round(1e3*e.distance)/1e3,e.count=Math.floor(5*Math.abs(r)/t.speed),n.setTime(e)),0===e.count?(e.count=-1,e.firstBlock.aStart||(t.homescale=t.scale),e.distance=-1,n.showTime(e),e.thisblock=e.thisblock.next):(t.changeSizeBy(2*-t.defaultScale*t.speed*Math.abs(r)/r),e.waitTimer=1,e.count=e.count-1)}},{key:"Show",value:function(e){var t=e.spr;t.view.visible=!0,t.shown=!0,e.count<0&&(e.count=4===t.speed?0:Math.floor(15/t.speed),n.setTime(e)),0===e.count?(e.count=-1,t.alpha=1,n.showTime(e),e.thisblock=e.thisblock.next,e.firstBlock.aStart||(t.homeshown=!0)):(t.alpha=Math.min(1,Number(t.alpha)+t.speed/15),e.waitTimer=2,e.count=e.count-1)}},{key:"Hide",value:function(e){var t=e.spr;e.count<0&&(e.count=4===t.speed?0:Math.floor(15/t.speed),n.setTime(e)),0===e.count?(e.count=-1,t.alpha=0,t.shown=!1,t.view.visible=!1,n.showTime(e),e.thisblock=e.thisblock.next,e.firstBlock.aStart||(t.homeshown=!1)):(t.alpha=Math.max(0,Number(t.alpha)-t.speed/15),t.view.visible=!0,e.waitTimer=2,e.count=e.count-1)}},{key:"OnTouch",value:function(e){e.spr.touchingAny()&&(e.stack.push(e.firstBlock),e.thisblock=e.thisblock.next),e.waitTimer=1}},{key:"Message",value:function(e){var t,r=e.thisblock;if(e.firstTime){var i=[],a=r.getArgValue();n.applyToAllStrips(["onmessage"],(function(e,t){"onmessage"===e.blocktype&&e.getArgValue()===a&&i.push([t,e])}));var o=[];for(var s in i)t=i[s],o.push(Sv.runtime.restartThread(t[0],t[1],!0));e.firstTime=!1,e.called=o}for(var u=!0,h=0;h<e.called.length;h++)e.called[h].isRunning&&(u=!1);u?(e.called=null,e.firstTime=!0,e.thisblock=e.thisblock.next,e.waitTimer=2):Sv.runtime.yield=!0}},{key:"applyToAllStrips",value:function(t,n){if(Sv.stage){var r=Sv.stage.currentPage;r&&r.spriteList.forEach((function(r){var i=(0,e.gn)("".concat(r.id,"_scripts"));if(i)for(var a=i.owner.getBlocksType(t),o=0;o<a.length;o++)n(a[o],r)}))}}}]),n}(),It=void 0,Nt=function(){function n(){t(this,n)}return r(n,null,[{key:"openMenu",get:function(){return It},set:function(e){It=e}},{key:"openDropDown",value:function(t,r){var i="setspeed"===t.owner.blocktype?"orange":"yellow",a=JSON.parse(t.owner.arg.list),o=t.owner.arg.numperrow,s=t.parentNode,u=50*Math.round(a.length/o),h=a.length/o,l=50*a.length/h,c=l*e._X,d=t.left+(t.offsetWidth-c)/2;d+c>s.width&&(d-=d+c-s.width),d<5&&(d=5),d+=(0,e.$1)(s,0);var f=t.top+t.offsetHeight-28*e._X+(0,e.Q7)(s,0);f+(10+u)*e._X>(0,e.Ti)()&&(f=(0,e.Ti)()-(15+u)*e._X);var p=(0,e.um)(e.Wi,d,f,l,u,{position:"absolute",zIndex:1e5,webkitTransform:"translate(".concat(-l/2,"px,").concat(-u/2,"px) ")+"scale(".concat(e._X,", ").concat(e._X,") ")+"translate(".concat(l/2,"px, ").concat(u/2,"px)")});p.setAttribute("class","menustyle ".concat(i)),p.active=t;for(var g=0;g<a.length;g++)n.addImageToDropDown(p,a[g],t,r);It=p}},{key:"addImageToDropDown",value:function(t,n,r,i){var a=S.getImageFrom("assets/blockicons/".concat(n),"svg"),o=(0,e.HS)("div","ddchoice",t),s=(0,e.HS)("canvas",void 0,o),u=42*window.devicePixelRatio;(0,e.ge)(s,u,u),(0,e.cl)(s.style,{webkitTransform:"translate(".concat(-u/2,"px, ").concat(-u/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,", ").concat(1/window.devicePixelRatio,") ")+"translate(".concat(u/2,"px, ").concat(u/2,"px)")}),a.complete?(0,e.hu)(a,s):a.onload=function(){(0,e.hu)(a,s)},o.ontouchstart=function(a){var o;o=a,e.Em&&o.touches&&o.touches.length>1||(o.preventDefault(),o.stopPropagation(),i(o,t,r,n))},o.onmousedown=function(e){i(e,t,r,n)}}},{key:"closeMyOpenMenu",value:function(){It&&(It.parentNode.removeChild(It),It=void 0)}}]),n}(),Ot=function(){function n(r){switch(t(this,n),this.daddy=r,this.type="blockarg",this.argType=r.spec[3],this.argType){case"n":this.argValue=r.spec[4],this.div=this.addNumArg();break;case"t":this.argValue=r.spec[4],fy.isSampleLocalizedKey(this.argValue)&&Sv.isSampleOrStarter()&&(this.argValue=fy.localize("SAMPLE_TEXT_".concat(this.argValue))),this.div=this.addTextArg();break;case"m":this.argValue=r.spec[4],this.list=JSON.stringify(r.spec[1]),this.numperrow=3,this.icon=this.getIconFrom(r.spec[4],r.spec[1]),this.div=this.addImageMenu(this.closePictureMenu);break;case"d":this.argValue=r.spec[4],this.list=JSON.stringify(r.spec[1]),this.numperrow=3,this.icon=S.speeds[this.argValue],this.div=this.addImageMenu(this.menuCloseSpeeds);break;case"p":this.argValue=r.spec[4],this.div=this.pageIcon(this.argValue),r.blockshape.getContext("2d").drawImage(this.div,0,0,this.div.width,this.div.height,0,0,this.div.width*r.scale,this.div.height*r.scale);break;case"s":this.argValue=r.spec[4],this.div=(0,e.um)(r.div,2,46,60,20,{position:"absolute",zoom:"".concat(100*r.scale,"%")}),(0,e.V1)(this.div,this.argValue.split(".")[0],{width:"60px"}).setAttribute("class","soundname");break;case"r":this.argValue=r.spec[4],this.div=(0,e.HS)("div","recordedCircle",r.div),(0,e.cl)(this.div.style,{zoom:"".concat(100*r.scale,"%")}),(0,e.HS)("p","recordedNumber",this.div).textContent=this.daddy.inpalette?this.argValue:"?"}}return r(n,[{key:"update",value:function(){"r"===this.argType&&(this.div.childNodes[0].textContent=this.argValue),this.arg&&"p"===this.argType&&this.arg.updateIcon()}},{key:"getScreenPt",value:function(){return{x:(0,e.$1)(this.daddy.div),y:(0,e.Q7)(this.daddy.div)}}},{key:"addNumArg",value:function(){var e=this.argValue.toString();return this.daddy.inpalette?this.addLabel(e,!1):this.addNumArgument(e)}},{key:"addTextArg",value:function(){var e=this.argValue.toString();return this.daddy.inpalette?this.addLabel(e,!0):this.addTextArgument(e,!0)}},{key:"addLabel",value:function(t,n){var r=this.daddy.scale,i=n?8:16,a=57;"repeat"===this.daddy.blocktype&&(i=Math.round(this.daddy.blockshape.width/window.devicePixelRatio/r)-60,a=Math.round(this.daddy.blockshape.height/window.devicePixelRatio/r)-10);var o=n?S.textfieldimg:S.numfieldimg,s=n?53:36,u=17,h=(0,e.oM)(this.daddy.div,0,0,s*window.devicePixelRatio,u*window.devicePixelRatio,{position:"absolute",webkitTransform:"translate(".concat(-s*window.devicePixelRatio/2,"px, ").concat(-u*window.devicePixelRatio/2,"px) ")+"scale(".concat(r/window.devicePixelRatio,") ")+"translate(".concat(i*window.devicePixelRatio+s*window.devicePixelRatio/2,"px, ").concat(a*window.devicePixelRatio+u*window.devicePixelRatio/2,"px)"),pointerEvents:"all"}).getContext("2d");o.complete?h.drawImage(o,0,0,s,u,0,0,s*window.devicePixelRatio,u*window.devicePixelRatio):o.onload=function(){h.drawImage(o,0,0,s,u,0,0,s*window.devicePixelRatio,u*window.devicePixelRatio)};var l=(0,e.um)(this.daddy.div,i,a,s,u,{position:"absolute",zoom:"".concat(100*r,"%"),margin:"0px",padding:"0px"}),c=(0,e.oM)(l,0,0,s*window.devicePixelRatio,u*window.devicePixelRatio,{position:"absolute",webkitTransform:"translate(".concat(-s*window.devicePixelRatio/2,"px, ").concat(-u*window.devicePixelRatio/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(s*window.devicePixelRatio/2,"px, ").concat(u*window.devicePixelRatio/2,"px)")});h=c.getContext("2d");var d="".concat(12*window.devicePixelRatio,"px ").concat(window.Settings.blockArgFont),f=(0,e.xE)(h,d,t).width;return(0,e.nx)(h,d,"#77787b",t,u*window.devicePixelRatio-3,Math.round((s*window.devicePixelRatio-f)/2)),l}},{key:"addNumArgument",value:function(t){var n=(0,e.HS)("div","numfield",this.daddy.div);"repeat"===this.daddy.blocktype&&(0,e.cl)(n.style,{left:"".concat(this.daddy.blockshape.width/window.devicePixelRatio-62*this.daddy.scale,"px"),top:"".concat(this.daddy.blockshape.height/window.devicePixelRatio-11*this.daddy.scale,"px")});var r=(0,e.HS)("h3",void 0,n);return this.input=r,r.owner=this,r.textContent=t,this.arg=n,n.parentNode.height+=10*window.devicePixelRatio,(0,e.ge)(n.parentNode,n.parentNode.width,n.parentNode.height),n}},{key:"addTextArgument",value:function(t){var n=(0,e.HS)("div","textfield",this.daddy.div),r=(0,e.HS)("h3",void 0,n);return this.input=r,r.owner=this,r.textContent=t,this.arg=n,n.parentNode.height+=10*window.devicePixelRatio,(0,e.ge)(n.parentNode,n.parentNode.width,n.parentNode.height),n}},{key:"setValue",value:function(e){this.input&&(this.argValue=e,"n"===this.argType&&isNaN(Number(e))&&(this.argValue=0),this.input.textContent=e)}},{key:"isText",value:function(){return"n"!==this.argType}},{key:"getIconFrom",value:function(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return t[0]}},{key:"addImageMenu",value:function(t){if(this.drawChoice(this.daddy.blockicon),this.button=this.addPressButton(),!this.daddy.inpalette){var n=this;n.button.ontouchstart=function(e){n.pressDropDown(e,t)},n.button.onmousedown=function(e){n.pressDropDown(e,t)},this.button.parentNode.height+=this.button.height/2,(0,e.ge)(this.button.parentNode,this.button.parentNode.width,this.button.parentNode.height)}return this.daddy.blockicon}},{key:"drawChoice",value:function(e){var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var n=S.getImageFrom("assets/blockicons/".concat(this.icon),"svg"),r=this.daddy.scale;return n.complete?t.drawImage(n,0,0,n.width,n.height,0,0,n.width*r*window.devicePixelRatio,n.height*r*window.devicePixelRatio):n.onload=function(){t.drawImage(n,0,0,n.width,n.height,0,0,n.width*r*window.devicePixelRatio,n.height*r*window.devicePixelRatio)},e}},{key:"addPressButton",value:function(){var t,n=this.daddy.scale;t=this.daddy.inpalette?this.daddy.aStart?26:16:this.daddy.aStart?20:10;var r=this.daddy.inpalette?36:48,i=this.daddy.inpalette?20:27,a=this.daddy.inpalette?S.pressbuttonSmall:S.pressbutton,o=(0,e.oM)(this.daddy.div,t,56,r,i,{position:"absolute",zoom:"".concat(100*n,"%"),pointerEvents:"all",webkitTransform:"translateZ(0)"}),s=o.getContext("2d");return a.complete?s.drawImage(a,0,0):a.onload=function(){s.drawImage(a,0,0)},o}},{key:"pressDropDown",value:function(t,n){e.Em&&t.touches&&t.touches.length>1||Sv.onHold||(t.preventDefault(),t.stopPropagation(),Sv.unfocus(t),this.daddy&&Nt.openDropDown(this.daddy.div,n))}},{key:"closePictureMenu",value:function(t,n,r,i){t.preventDefault();var a=r.owner.arg.argValue;r.owner.arg.argValue=i.substring(i.indexOf("_")+1,i.length);var o=r.owner.blockicon.getContext("2d");if(r.icon=S.getImageFrom("assets/blockicons/".concat(i),"svg"),o.clearRect(0,0,85*e._X*window.devicePixelRatio,66*e._X*window.devicePixelRatio),r.icon.complete){var s=r.icon.width,u=r.icon.height;o.drawImage(r.icon,0,0,s,u,0,0,s*e._X*window.devicePixelRatio,u*e._X*window.devicePixelRatio)}else r.icon.onload=function(){var t=r.icon.width,n=r.icon.height;o.drawImage(r.icon,0,0,t,n,0,0,t*e._X*window.devicePixelRatio,n*e._X*window.devicePixelRatio)};if(Nt.openMenu&&Nt.openMenu.parentNode.removeChild(Nt.openMenu),r.owner.arg.argValue!==a){var h=r.parentNode.owner.spr,l={action:"scripts",where:h.page.id,who:h.id};Hm.record(l),Sv.storyStart("BlockArg.prototype.closePictureMenu")}Nt.openMenu=void 0}},{key:"menuCloseSpeeds",value:function(t,n,r,i){t.preventDefault();var a=r.owner.arg.argValue;r.owner.arg.argValue=S.speeds.indexOf(i);var o=r.owner.blockicon.getContext("2d");if(r.icon=S.getImageFrom("assets/blockicons/".concat(i),"svg"),o.clearRect(0,0,64*e._X*window.devicePixelRatio,64*e._X*window.devicePixelRatio),r.icon.complete){var s=r.icon.width,u=r.icon.height;o.drawImage(r.icon,0,0,s,u,0,0,s*e._X*window.devicePixelRatio,u*e._X*window.devicePixelRatio)}else r.icon.onload=function(){var t=r.icon.width,n=r.icon.height;o.drawImage(r.icon,0,0,t,n,0,0,t*e._X*window.devicePixelRatio,n*e._X*window.devicePixelRatio)};if(Nt.openMenu&&Nt.openMenu.parentNode.removeChild(Nt.openMenu),r.owner.arg.argValue!==a){var h=r.parentNode.owner.spr,l={action:"scripts",where:h.page.id,who:h.id};Hm.record(l),Sv.storyStart("BlockArg.prototype.menuCloseSpeeds")}Nt.openMenu=void 0}},{key:"pageIcon",value:function(t){var n=window.devicePixelRatio,r=Sv.stage.pages[t-1],i=document.createElement("canvas");if((0,e.ge)(i,86*n,66*n),!r)return i;var a=document.createElement("canvas");(0,e.ge)(a,52*n,42*n);var o=a.getContext("2d");o.fillStyle="#AE1F24",o.fillRect(0,0,a.width,a.height),o.fillStyle="#28A5DA",o.fillRect(1*n,1*n,50*n,40*n);var s=document.createElement("canvas"),u=46*n,h=36*n;(0,e.ge)(s,u,h);var l=s.getContext("2d");l.fillStyle="white",l.fillRect(0,0,s.width,s.height);var c=r.export();l.drawImage(c,0,0,c.width,c.height,0,0,u,h),o.drawImage(s,3*n,3*n);var d=i.getContext("2d");return d.fillStyle="#AE1F24",d.beginPath(),d.arc(63*n,19*n,10*n,0*n,2*Math.PI,!0),d.closePath(),d.fill(),d.drawImage(a,14*n,16*n),d.beginPath(),d.fillStyle="#28A5DA",d.strokeStyle="#355E7C",d.arc(63*n,19*n,8*n,0*n,2*Math.PI,!0),d.closePath(),d.stroke(),d.fill(),(0,e.nx)(d,"bold ".concat(12*n,"px ").concat(window.Settings.blockArgFont),"white",r.num,26*n,58*n),i}},{key:"updateIcon",value:function(){var e=this.argValue;Sv.stage.pages[e-1].num=e,this.div=this.pageIcon(e);var t=this.daddy;t.blockshape.getContext("2d").drawImage(this.div,0,0,this.div.width,this.div.height,0,0,this.div.width*t.scale,this.div.height*t.scale)}}]),n}(),Dt=function(){function n(r,i,a){t(this,n),this.div=document.createElement("div"),(0,e.cl)(this.div.style,{pointerEvents:"none"}),this.setBlockshapeFromSpecs(r,i,a),this.blockshape=document.createElement("canvas"),(0,e.ge)(this.div,this.getWidth()*this.scale,this.getHeight()*this.scale),(0,e.ge)(this.blockshape,this.getWidth()*this.scale*window.devicePixelRatio,this.getHeight()*this.scale*window.devicePixelRatio),this.addShadow(),this.div.appendChild(this.blockshape),(0,e.cl)(this.blockshape.style,{position:"absolute",left:"0px",top:"0px",webkitTransform:"translate(".concat(-this.blockshape.width/2,"px, ").concat(-this.blockshape.height/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(this.blockshape.width/2,"px, ").concat(this.blockshape.height/2,"px)"),pointerEvents:"all"}),this.addHighlight(),this.drawBlock(),(0,e.ge)(this.div,this.blockshape.width/window.devicePixelRatio,this.blockshape.height/window.devicePixelRatio),this.isCaret||(this.createArgument(),this.div.owner=this)}return r(n,[{key:"getWidth",value:function(){return"repeat"===this.blocktype?176:"gotopage"===this.blocktype?86:this.aStart||this.anEnd?84:76}},{key:"getHeight",value:function(){return"repeat"===this.blocktype?82:66}},{key:"setBlockshapeFromSpecs",value:function(e,t,n){this.spec=e,this.isReporter="reporter"===e[1],this.blocktype=e[0],this.icon=e[1],this.image=e[2],this.aStart="caretstart"===this.blocktype||this.image===S.yellowStart,this.anEnd="caretend"===this.blocktype||this.image===S.redEnd||this.image===S.redEndLong,this.cShape="repeat"===this.blocktype||"caretrepeat"===this.blocktype,this.prev=null,this.next=null,this.inside=null,this.isCaret=this.blocktype.indexOf("caret")>-1,this.type="block",this.arg=null,this.daddy=null,this.scale=n||1,this.repeatCounter=-1,this.originalCount=-1,this.threads=[],this.inpalette=t,this.min=e[6],this.max=e[7],this.shadowimg=this.spec.length<9?null:e[8],this.hrubberband=0,this.vrubberband=0,this.done=!1}},{key:"addShadow",value:function(){if(this.shadow=document.createElement("canvas"),this.div.appendChild(this.shadow),(0,e.cl)(this.shadow.style,{position:"absolute",left:"1px",top:"4px",opacity:this.inpalette?window.Settings.paletteBlockShadowOpacity:1,visibility:"hidden",webkitTransform:"translate(".concat(-this.blockshape.width/2,"px, ").concat(-this.blockshape.height/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(this.blockshape.width/2,"px, ").concat(this.blockshape.height/2,"px)"),pointerEvents:"all"}),(0,e.ge)(this.shadow,this.blockshape.width,this.blockshape.height),this.shadowimg){var t=this.shadow.getContext("2d"),n=this.shadowimg;n.complete?t.drawImage(n,0,0,n.width,n.height,0,0,n.width*this.scale*window.devicePixelRatio,n.height*this.scale*window.devicePixelRatio):n.onload=function(){t.drawImage(n,0,0,n.width,n.height,0,0,n.width*this.scale*window.devicePixelRatio,n.height*this.scale*window.devicePixelRatio)}}}},{key:"lift",value:function(){this.shadow.style.visibility="visible"}},{key:"drop",value:function(){this.shadow.style.visibility="hidden"}},{key:"addHighlight",value:function(){var t=this.spec[5];if(t){this.shine=document.createElement("canvas"),this.div.appendChild(this.shine),(0,e.ge)(this.shine,this.blockshape.width,this.blockshape.height),(0,e.cl)(this.shine.style,{position:"absolute",left:"0px",top:"0px",visibility:"hidden",webkitTransform:"translate(".concat(-this.blockshape.width/2,"px, ").concat(-this.blockshape.height/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(this.blockshape.width/2,"px, ").concat(this.blockshape.height/2,"px)"),pointerEvents:"all"});var n=this.shine.getContext("2d");t.complete?n.drawImage(t,0,0,t.width,t.height,0,0,t.width*this.scale*window.devicePixelRatio,t.height*this.scale*window.devicePixelRatio):t.onload=function(){n.drawImage(t,0,0,t.width,t.height,0,0,t.width*this.scale*window.devicePixelRatio,t.height*this.scale*window.devicePixelRatio)}}}},{key:"drawBlock",value:function(){var e=this.blockshape;this.blockshape.getContext("2d").clearRect(0,0,e.width,e.height);var t=this;this.image.complete?this.drawBlockType():this.image.onload=function(){t.drawBlockType()}}},{key:"drawBlockType",value:function(){this.blockshape.getContext("2d").drawImage(this.image,0,0,this.image.width,this.image.height,0,0,this.image.width*this.scale*window.devicePixelRatio,this.image.height*this.scale*window.devicePixelRatio);var t=document.createElement("canvas");this.blockicon=t,this.div.appendChild(t),(0,e.ge)(t,this.blockshape.width,this.blockshape.height),(0,e.cl)(t.style,{position:"absolute",left:"0px",top:"0px",webkitTransform:"translate(".concat(-this.blockshape.width/2,"px, ").concat(-this.blockshape.height/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(this.blockshape.width/2,"px, ").concat(this.blockshape.height/2,"px)"),pointerEvents:"all"}),this.icon&&this.icon.tagName&&this.drawIcon(),this.done=!0}},{key:"updateBlock",value:function(){this.arg&&"p"===this.arg.argType&&this.arg.updateIcon()}},{key:"highlight",value:function(){this.blocktype.indexOf("caret")>-1||this.div.parentNode&&("palette"!==this.div.parentNode.id&&this.div.parentNode!==Sv.getActiveScript()||(this.shine.style.visibility="visible"))}},{key:"unhighlight",value:function(){this.blocktype.indexOf("caret")>-1||(this.shine.style.visibility="hidden")}},{key:"drawIcon",value:function(){var t=0,n=0,r=this.blockicon.getContext("2d");if("repeat"===this.blocktype){var i=Math.round(74*this.scale*window.devicePixelRatio),a=Math.round(65*this.scale*window.devicePixelRatio);(0,e.ge)(this.blockicon,i,a),t=0,this.blockicon.style.left="".concat(this.shine.width/window.devicePixelRatio-Math.round(77*this.scale),"px"),n=Math.round(14*this.scale*window.devicePixelRatio),(0,e.cl)(this.blockicon.style,{position:"absolute",webkitTransform:"translate(".concat(-i/2,"px, ").concat(-a/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(i/2,"px, ").concat(a/2,"px)")})}this.drawMyIcon(r,t,n)}},{key:"drawMyIcon",value:function(e,t,n){var r=this,i=this.icon;i.complete?e.drawImage(i,0,0,i.width,i.height,t,n,i.width*r.scale*window.devicePixelRatio,i.height*r.scale*window.devicePixelRatio):i.onload=function(){e.drawImage(i,0,0,i.width,i.height,t,n,i.width*r.scale*window.devicePixelRatio,i.height*r.scale*window.devicePixelRatio)}}},{key:"createArgument",value:function(){this.spec[4]&&(this.arg=new Ot(this))}},{key:"getArgValue",value:function(){return this.arg?this.arg.argValue:null}},{key:"getSoundName",value:function(e){var t=this.arg.argValue;return"NaN"===Number(t).toString()?t:e.length<=t?e[0]:e[t]}},{key:"update",value:function(e){this.arg&&this.arg.update(e)}},{key:"setSound",value:function(e){var t=this.arg.div;t.parentNode.removeChild(t);var n=this.blockicon;n.parentNode.removeChild(n);var r=e,i=S.defs[r];this.setBlockshapeFromSpecs(i),this.drawBlock(),this.createArgument()}},{key:"duplicateBlock",value:function(t,r,i){var a=this.blocktype,o=S.defs[a];o[4]=this.getArgValue();var s=new n(o,!1,e._X);return(0,e.cl)(s.div.style,{position:"absolute",left:"0px",top:"0px"}),s.moveBlock(t,r),s.update(i),s}},{key:"resolveDocks",value:function(){var e=this.getWidth(),t=this.getHeight();return this.aStart?[["start",!0,0,t/2],["flow",!1,e-this.notchSize(),t/2]]:this.anEnd?[["flow",!0,0,t/2],["changestate",!1,e-3,t/2]]:this.isReporter?[["input",!0,0,0],["input",!1,e-this.notchSize(),t/2]]:this.cShape?[["flow",!0,0,this.blockshape.height/this.scale/window.devicePixelRatio-33],["flow",!1,35,this.blockshape.height/this.scale/window.devicePixelRatio-33],["flow",!1,this.blockshape.width/this.scale/window.devicePixelRatio-this.notchSize()-1,this.blockshape.height/this.scale/window.devicePixelRatio-33]]:[["flow",!0,0,t/2],["flow",!1,e-this.notchSize(),t/2]]}},{key:"notchSize",value:function(){return 11}},{key:"connectBlock",value:function(e,t,n){if(!this.isConnectedAfterFirst(e,t,n)&&(this.connectLast(e,t,n),this.setMyDock(e,t),t.setMyDock(n,this),this.cShape&&1===e&&this.inside.findLast().anEnd)){var r=this.inside.findLast();r.prev.next=null;var i=this.findLast();i.next=r,r.prev=i}}},{key:"getMyDock",value:function(e){return this[(this.cShape?["prev","inside","next"]:["prev","next"])[e]]}},{key:"setMyDock",value:function(e,t){this[(this.cShape?["prev","inside","next"]:["prev","next"])[e]]=t}},{key:"getMyDockNum",value:function(e){return(this.cShape?[this.prev,this.inside,this.next]:[this.prev,this.next]).indexOf(e)}},{key:"isConnectedAfterFirst",value:function(e,t){if(0===e)return!1;var n=t.prev;if(!n)return!1;if(this===n)return!1;var r=n.getMyDockNum(t);return this.findFirst().connectBlock(0,n,r),!0}},{key:"findLast",value:function(){return this.next?this.next.findLast():this}},{key:"findFirst",value:function(){return this.prev?this.prev.findFirst():this}},{key:"connectLast",value:function(e,t,n){if(0===e){var r=t.getMyDock(n),i=this.findLast();if(r!==i)if(!this.cShape||this.inside||null===r||r.anEnd){if(i.next=r,!r)return;r.prev=i}else{var a=r.findLast();if(this.inside=r,r.prev=this,a.anEnd){i.next=a;var o=a.prev;o&&(o.next=null),a.prev=i}}}}},{key:"detachBlock",value:function(){var e=this.prev;e&&(this.prev=null,e.cShape&&e.inside===this?e.inside=null:e.next=null)}},{key:"moveBlock",value:function(e,t){this.div.top=t,this.div.left=e,this.div.style.webkitTransform="translate3d(".concat(this.div.left,"px,").concat(this.div.top,"px, 0)")}},{key:"redrawRepeat",value:function(){if(this.redrawShape(this.blockshape,this.image),this.blocktype.indexOf("caret")<0&&this.redrawShape(this.shadow,this.shadowimg),!(this.blocktype.indexOf("caret")>-1)){var e=this.blockshape.width/window.devicePixelRatio-78*this.scale,t=this.blockshape.height/window.devicePixelRatio-82*this.scale;this.blockicon.style.left="".concat(e,"px"),this.arg.div.style.left="".concat(this.blockshape.width/window.devicePixelRatio-66*this.scale,"px"),this.blockicon.style.top="".concat(t,"px"),this.arg.div.style.top="".concat(this.blockshape.height/window.devicePixelRatio-11*this.scale,"px")}}},{key:"redrawShape",value:function(t,n){(0,e.ge)(this.div,(92+this.hrubberband+84)*this.scale,(100+this.vrubberband)*this.scale);var r=this.scale*window.devicePixelRatio;(0,e.ge)(t,(92+this.hrubberband+84)*r,(82+this.vrubberband)*r),(0,e.cl)(t.style,{webkitTransform:"translate(".concat(-t.width/2,"px, ").concat(-t.height/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") ")+"translate(".concat(t.width/2,"px, ").concat(t.height/2,"px)")});var i=t.getContext("2d");i.drawImage(n,0,0,92,29,0,0,92*r,29*r),i.drawImage(n,92,0,1,29,92*r,0,this.hrubberband*r,29*r),i.drawImage(n,93,0,n.width-93,29,92*r+this.hrubberband*r,0,83*r,29*r),i.drawImage(n,0,29,92,1,0,29*r,92*r,this.vrubberband*r),i.drawImage(n,93,29,n.width-93,1,92*r+this.hrubberband*r,29*r,83*r,this.vrubberband*r),i.drawImage(n,0,29,45,53,0,29*r+this.vrubberband*r,45*r,53*r),i.drawImage(n,93,29,n.width-93,53,92*r+this.hrubberband*r,29*r+this.vrubberband*r,83*r,53*r)}}]),n}(),Lt=function(){function n(r,i,a,o,s,u){t(this,n),this.hasHorizontal=!0,this.hasVertical=!0,this.arrowDistance=6,this.aleft=void 0,this.aright=void 0,this.aup=void 0,this.adown=void 0,this.contents=(0,e.um)(r,0,0,a,o,{}),this.contents.setAttribute("id",i),this.contents.owner=this,this.addArrows(r,a,o),this.getContent=s,this.getObjects=u,r.scroll=this}return r(n,[{key:"update",value:function(){this.adjustCanvas(),this.refresh(),this.bounceBack()}},{key:"addArrows",value:function(t,n,r){this.aleft=(0,e.HS)("div","leftarrow",t),this.aleft.style.height="".concat(r,"px");var i=(0,e.HS)("span",void 0,this.aleft);i.style.top="".concat(Math.floor((r-i.offsetHeight)/2),"px"),this.aright=(0,e.HS)("div","rightarrow",t),this.aright.style.height="".concat(r,"px");var a=(0,e.HS)("span",void 0,this.aright);a.style.top="".concat(Math.floor((r-a.offsetHeight)/2),"px"),this.aup=(0,e.HS)("div","toparrow",t),this.adown=(0,e.HS)("div","bottomarrow",t),(0,e.HS)("div","halign up",this.aup),(0,e.HS)("div","halign down",this.adown);var o=this;e.Em?this.aup.ontouchstart=function(e){o.scrolldown(e)}:this.aup.onmousedown=function(e){o.scrolldown(e)},e.Em?this.adown.ontouchstart=function(e){o.scrollup(e)}:this.adown.onmousedown=function(e){o.scrollup(e)},e.Em?this.aleft.ontouchstart=function(e){o.scrollright(e)}:this.aleft.onmousedown=function(e){o.scrollright(e)},e.Em?this.aright.ontouchstart=function(e){o.scrollleft(e)}:this.aright.onmousedown=function(e){o.scrollleft(e)}}},{key:"repositionArrows",value:function(e){this.aleft.style.height="".concat(e,"px"),this.aleft.childNodes[0].style.top="".concat(Math.floor((e-this.aleft.childNodes[0].offsetHeight)/2),"px"),this.aright.style.height="".concat(e,"px"),this.aright.childNodes[0].style.top="".concat(Math.floor((e-this.aright.childNodes[0].offsetHeight)/2),"px")}},{key:"getAdjustment",value:function(e){var t=this.contents.parentNode,n=t.offsetWidth,r=t.offsetHeight;return e.x>0&&e.y>0?"topleft":e.x+e.width<n&&e.y+e.height<r?"bottomright":e.x>0&&e.y+e.height<r?"bottomleft":e.x+e.width<n&&e.y>0?"topright":e.x+e.width<n?"right":e.y+e.height<r?"down":e.y>0?"up":e.x>0?"left":"none"}},{key:"bounceBack",value:function(){var t=this,n=this.contents,r=this.getContent(),i=r.left,a=r.top,o=n.offsetHeight,s=n.offsetWidth,u={x:i,y:a,width:r.offsetWidth,height:r.offsetHeight},h={duration:.5,transition:"ease-out",style:{},onComplete:function(){t.refresh()}};switch(this.getAdjustment(u)){case"topright":h.style.left="".concat(this.hasHorizontal?s-u.width:0,"px"),h.style.top="0px",(0,e.zg)(r,h);break;case"bottomright":h.style.left="".concat(this.hasHorizontal?s-u.width:0,"px"),h.style.top="".concat(this.hasVertical?o-u.height:0,"px"),(0,e.zg)(r,h);break;case"topleft":h.style.top="0px",h.style.left="0px",(0,e.zg)(r,h);break;case"bottomleft":h.style.top="".concat(this.hasVertical?o-u.height:0,"px"),h.style.left="0px",(0,e.zg)(r,h);break;case"right":h.style.top="".concat(a,"px"),h.style.left="".concat(this.hasHorizontal?s-u.width:0,"px"),(0,e.zg)(r,h);break;case"left":this.hasHorizontal&&(h.style.top="".concat(a,"px"),h.style.left="0px",(0,e.zg)(r,h));break;case"down":h.style.top="".concat(o-u.height,"px"),h.style.left="".concat(i,"px"),(0,e.zg)(r,h);break;case"up":this.hasVertical&&(h.style.top="0px",h.style.left="".concat(i,"px"),(0,e.zg)(r,h))}}},{key:"refresh",value:function(){for(var e,t=this.contents,n=this.getContent(),r=t.offsetWidth,i=t.offsetHeight,a="hidden",o="hidden",s="hidden",u="hidden",h=this.getObjects(),l=0;l<h.length;l++)(e=h[l].div)&&e.owner&&"hidden"!==e.style.visibility&&(e.left+n.left<0&&(a="visible"),e.left+e.offsetWidth+n.left>r&&(o="visible"),e.top+n.top+10<0&&(s="visible"),e.top+e.offsetHeight+n.top>i&&(u="visible"));this.aleft.style.visibility=a,this.aright.style.visibility=o,this.aup.style.visibility=s,this.adown.style.visibility=u}},{key:"adjustCanvas",value:function(){for(var t,n=this.getContent(),r=this.contents,i=r.offsetWidth,a=r.offsetHeight,o=n.offsetWidth,s=n.offsetHeight,u=99999,h=0,l=99999,c=0,d=this.getObjects(),f=0;f<d.length;f++)(t=d[f].div)&&t.owner&&"hidden"!==t.style.visibility&&(t.left<u&&(u=t.left),t.left+t.offsetWidth+0>h&&(h=t.left+t.offsetWidth+0),t.top<l&&(l=t.top),t.top+t.offsetHeight+20>c&&(c=t.top+t.offsetHeight+20));u<0?(u-=0,i-=u+=n.left):u=0,l<0?(l-=20,a-=l+=n.top):l=0,h-u>i&&(i=Math.round(h-u)),c-l>a&&(a=Math.round(c-l)),o===i&&s===a||(0,e.ge)(n,i,a),(u<0||l<0)&&(this.moveBlocks(-u,-l),z.move3D(n,u,l))}},{key:"moveBlocks",value:function(e,t){for(var n=this.getObjects(),r=0;r<n.length;r++){var i=n[r];i.moveBlock(i.div.left+e,i.div.top+t)}}},{key:"scrolldown",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){t.preventDefault(),t.stopPropagation();var n=this,r=this.contents,i=this.getContent(),a=r.offsetHeight,o=i.top+a;o>0&&(o=0),o=Math.round(o);var s={duration:.5,transition:"ease-out",style:{top:"".concat(o,"px")},onComplete:function(){n.refresh()}};(0,e.zg)(i,s)}}},{key:"scrollup",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){t.preventDefault(),t.stopPropagation();var n=this,r=this.contents,i=this.getContent(),a=r.offsetHeight,o=i.top-a;o+i.offsetHeight<a&&(o=a-i.offsetHeight),o=Math.round(o);var s={duration:.5,transition:"ease-out",style:{top:"".concat(o,"px")},onComplete:function(){n.refresh()}};(0,e.zg)(i,s)}}},{key:"scrollright",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){t.preventDefault(),t.stopPropagation();var n=this,r=this.contents,i=this.getContent(),a=r.offsetWidth,o=i.left+a;o>0&&(o=0),o=Math.round(o);var s={duration:.5,transition:"ease-out",style:{left:"".concat(o,"px")},onComplete:function(){n.refresh()}};(0,e.zg)(i,s)}}},{key:"scrollleft",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){t.preventDefault(),t.stopPropagation();var n=this,r=this.contents,i=this.getContent(),a=r.offsetWidth,o=i.left-a;o+i.offsetWidth<a&&(o=a-i.offsetWidth),o=Math.round(o);var s={duration:.5,transition:"ease-out",style:{left:"".concat(o,"px")},onComplete:function(){n.refresh()}};(0,e.zg)(i,s)}}},{key:"fitToScreen",value:function(){var e=this.contents,t=this.getContent(),n=t.left,r=t.top,i=e.offsetHeight,a=e.offsetWidth,o={x:n,y:r,width:t.offsetWidth,height:t.offsetHeight};switch(this.getAdjustment(o)){case"topright":n=a-o.width,r=0;break;case"bottomright":n=a-o.width,r=i-o.height;break;case"topleft":n=0,r=0;break;case"bottomleft":r=i-o.height,n=0;break;case"right":n=a-o.width;break;case"left":n=0;break;case"down":r=i-o.height;break;case"up":r=0}z.move3D(t,n,r)}}]),n}(),Bt=void 0,Ft=function(){function n(){t(this,n)}return r(n,null,[{key:"scroll",get:function(){return Bt}},{key:"watermark",get:function(){return Qe}},{key:"createScripts",value:function(t){var n=(0,e.HS)("div","scripts",t);n.setAttribute("id","scripts"),Qe=(0,e.HS)("div","watermark",n);var r=Math.max((0,e.Ti)(),e.Wi.offsetHeight);(0,e.ge)(n,n.offsetWidth,r-n.offsetTop),Bt=new Lt(n,"scriptscontainer",n.offsetWidth,r-n.offsetTop,Sv.getActiveScript,Sv.getBlocks)}},{key:"setActiveScript",value:function(t){var n=(0,e.gn)("".concat(t,"_scripts"));if(n){var r=Sv.stage.currentPage.findSprite(t);Sv.stage.currentPage.setCurrentSprite(r),n.owner.activate(),n.parentNode.ontouchstart=function(e){n.owner.scriptsMouseDown(e)},n.parentNode.onmousedown=function(e){n.owner.scriptsMouseDown(e)},Bt.update()}}},{key:"runBlock",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=t.owner.findFirst();n&&(Sv.runtime.addRunScript(Sv.getSprite(),n),Sv.startCurrentPageStrips(["ontouch"]),Sv.userStart=!0)}},{key:"prepareToDrag",value:function(e){e.preventDefault();var t=z.getTargetPoint(e);n.pickBlock(t.x,t.y,e)}},{key:"pickBlock",value:function(t,r,i){Sv.runtime.inactive()||Sv.stopStrips(),n.cleanCarets(),Sv.unfocus(i);var a=Sv.getActiveScript().owner;a.dragList=a.findGroup(z.dragthumbnail.owner),a.flowCaret=null;var o=z.dragthumbnail.parentNode.scrollTop,s=z.dragthumbnail.parentNode.scrollLeft;z.dragmousex=t,z.dragmousey=r;var u=(0,e.XU)(z.dragthumbnail.parentNode,t),h=(0,e.Bf)(z.dragthumbnail.parentNode,r),l=z.dragmousex-(0,e.$1)(z.dragDiv)-u+z.dragthumbnail.left,c=z.dragmousey-(0,e.Q7)(z.dragDiv)-h+z.dragthumbnail.top,d=new WebKitCSSMatrix(window.getComputedStyle(z.dragthumbnail).webkitTransform);c-=o,l-=s,z.dragcanvas=z.dragthumbnail,z.dragcanvas.origin="scripts",z.dragcanvas.startx=d.m41,z.dragcanvas.starty=d.m42,!z.dragcanvas.isReporter&&z.dragcanvas.parentNode&&z.dragcanvas.parentNode.removeChild(z.dragcanvas),z.move3D(z.dragcanvas,l,c),z.dragcanvas.style.zIndex=Sv.dragginLayer,z.dragDiv.appendChild(z.dragcanvas);var f=z.dragcanvas.owner;if(f.detachBlock(),!z.dragcanvas.isReporter){Sv.getActiveScript().owner.prepareCaret(f);for(var p=1;p<a.dragList.length;p++){f=a.dragList[p];var g=new WebKitCSSMatrix(window.getComputedStyle(f.div).webkitTransform),m=g.m41-d.m41,v=g.m42-d.m42;f.moveBlock(m,v),z.dragcanvas.appendChild(f.div)}}}},{key:"draggingBlock",value:function(e){e.preventDefault();var t=z.getTargetPoint(e),r=t.x-z.dragmousex,i=t.y-z.dragmousey;z.move3D(z.dragcanvas,r,i),n.blockFeedback(z.dragcanvas.left,z.dragcanvas.top,e)}},{key:"blockFeedback",value:function(t,r,i){var a,o=Sv.getActiveScript().owner,s=(0,e.gn)("palette").parentNode.offsetTop+(0,e.gn)("palette").parentNode.offsetHeight;if(r+z.dragcanvas.offsetHeight<s?o.removeCaret():(o.removeCaret(),o.insertCaret(t,r)),"library"===rn.getLandingPlace(o.dragList[0].div,i)){(a=rn.getHittedThumb(o.dragList[0].div,(0,e.gn)("spritecc")))&&Sv.stage.findSprite(a.owner).type===Sv.getSprite().type?Fm.quickHighlight(a):a=void 0;for(var u=0;u<(0,e.gn)("spritecc").childElementCount;u++){var h=(0,e.gn)("spritecc").childNodes[u];"FORM"!==h.nodeName&&a&&a.id!==h.id&&Fm.quickRestore(h)}}else n.removeLibCaret()}},{key:"dropBlock",value:function(t,r){t.preventDefault();var i=Sv.getActiveScript(),a=i.owner.spr.id,o=Sv.stage.currentPage;switch(rn.getLandingPlace(r,t)){case"scripts":var s=(0,e.XU)(i,r.left),u=(0,e.Bf)(i,r.top);n.blockDropped(i,s,u),Sv.storyStart("ScriptsPane.changed");break;case"library":var h=rn.getHittedThumb(r,(0,e.gn)("spritecc"));if(n.blockDropped(Sv.getActiveScript(),r.startx,r.starty),h&&o.findSprite(h.owner).type===o.findSprite(o.currentSpriteName).type){Sv.storyStart("ScriptsPane.dropBlock:library"),m.sndFX("copy.wav"),Fm.quickHighlight(h),setTimeout((function(){Fm.quickRestore(h)}),300),i=(0,e.gn)("".concat(h.owner,"_scripts")).owner;var l=Uv.encodeStrip(r.owner),c=l[0],d=3*i.gettopblocks().length;c[2]=c[2]+d,c[3]=c[3]+d,i.recreateStrip(l),a=h.owner}break;default:Sv.getActiveScript().owner.deleteBlocks(),Bt.adjustCanvas(),Bt.refresh(),Bt.fitToScreen()}Hm.record({action:"scripts",where:o.id,who:a}),Sv.getActiveScript().owner.dragList=[]}},{key:"blockDropped",value:function(e,t,r){z.dragcanvas.style.zIndex="";var i=Sv.getActiveScript().owner;n.cleanCarets(),i.addBlockToScripts(z.dragcanvas,t,r),i.layout(z.dragcanvas.owner),e.id===Sv.getActiveScript().id&&(Bt.adjustCanvas(),Bt.refresh(),Bt.bounceBack())}},{key:"cleanCarets",value:function(){Sv.getActiveScript().owner.removeCaret(),n.removeLibCaret()}},{key:"removeLibCaret",value:function(){for(var t=0;t<(0,e.gn)("spritecc").childElementCount;t++){var n=(0,e.gn)("spritecc").childNodes[t];"FORM"!==n.nodeName&&Fm.quickRestore(n)}}},{key:"dragBackground",value:function(t){if(!(Nt.openMenu||e.Em&&t.touches&&t.touches.length>1)){t.preventDefault(),t.stopPropagation();var r=Sv.getActiveScript();r.top=r.offsetTop,r.left=r.offsetLeft;var i=z.getTargetPoint(t);z.dragmousex=i.x,z.dragmousey=i.y,z.dragged=!1,n.setDragBackgroundEvents(n.dragMove,n.dragEnd)}}},{key:"setDragBackgroundEvents",value:function(t,n){e.Em?(window.ontouchmove=function(e){t(e)},window.ontouchend=function(e){n(e)}):(window.onmousemove=function(e){t(e)},window.onmouseup=function(e){n(e)})}},{key:"dragMove",value:function(e){var t=z.getTargetPoint(e);if(z.dragged||!(z.distance(z.dragmousex-t.x,z.dragmousey-t.y)<5)){z.dragged=!0;var n=t.x-z.dragmousex,r=t.y-z.dragmousey;z.dragmousex=t.x,z.dragmousey=t.y,z.move3D(Sv.getActiveScript(),n,r),Bt.refresh(),e.preventDefault()}}},{key:"dragEnd",value:function(e){z.dragged=!1,e.preventDefault(),z.clearEvents(),Bt.bounceBack()}},{key:"updateScriptsPageBlocks",value:function(t){for(var n=0;n<t.length;n++)if((0,e.gn)("".concat(t[n],"_scripts"))){var r=(0,e.gn)("".concat(t[n],"_scripts")).owner;if(r)for(var i=r.getBlocks(),a=0;a<i.length;a++)i[a].updateBlock()}}}]),n}(),Gt=null,Ut=null,Ht=!1,jt=!1,Kt=!0,Xt=!1,zt=!1,Vt=null,Wt=null,Yt=0,Jt=[],qt=function(){function n(){t(this,n)}return r(n,null,[{key:"available",get:function(){return Kt},set:function(e){Kt=e}},{key:"dialogOpen",get:function(){return zt}},{key:"init",value:function(){var t=(0,e.HS)("div","record fade",e.Wi);t.setAttribute("id","recorddialog");var r=(0,e.HS)("div","toolbar",t),i=(0,e.HS)("div","actions",r);(0,e.HS)("div","microphone",i);var a=(0,e.HS)("div","recordbuttons",i);(0,e.HS)("div","recorddone",a).onclick=n.saveSoundAndClose;var o=(0,e.HS)("div","soundbox",t);o.setAttribute("id","soundbox");var s=(0,e.HS)("div","soundvolume",o);s.setAttribute("id","soundvolume");for(var u=0;u<13;u++){var h=(0,e.HS)("div","indicator",s);(0,e.HS)("div","soundlevel",h)}var l=(0,e.HS)("div","soundcontrols",o);l.setAttribute("id","soundcontrols");for(var c=[["record",n.record],["stop",n.stopSnd],["play",n.playSnd]],d=0;d<c.length;d++)n.newToggleClicky(l,"id_",c[d][0],c[d][1])}},{key:"appear",value:function(){ny.analyticsEvent("editor","record_dialog_open"),(0,e.gn)("backdrop").setAttribute("class","modal-backdrop fade in"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"block"}),(0,e.gn)("recorddialog").setAttribute("class","record fade in"),Sv.stopStrips(),zt=!0,Sv.onBackButtonCallback.push(n.saveSoundandClose)}},{key:"disappear",value:function(){ny.analyticsEvent("editor","record_dialog_close"),setTimeout((function(){(0,e.gn)("backdrop").setAttribute("class","modal-backdrop fade"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"none"}),(0,e.gn)("recorddialog").setAttribute("class","record fade")}),333),zt=!1,Sv.onBackButtonCallback.pop()}},{key:"newToggleClicky",value:function(t,n,r,i){var a=(0,e.HS)("div","controlwrap",t);return(0,e.HS)("div","".concat(r,"snd off"),a),a.setAttribute("type","toggleclicky"),a.setAttribute("id",n+r),i&&(a.onclick=function(e){i(e)}),a}},{key:"toggleButtonUI",value:function(t,n){var r="id_".concat(t),i=n?"on":"off",a="".concat(t,"snd");(0,e.gn)(r).childNodes[0].setAttribute("class","".concat(a," ").concat(i))}},{key:"updateVolume",value:function(t){var n=Math.round(13*t),r=(0,e.gn)("soundvolume");Ht||jt||(n=0);for(var i=0;i<13;i++)r.childNodes[i].childNodes[0].setAttribute("class",i>n?"soundlevel off":"soundlevel on")}},{key:"recordUIoff",value:function(){n.toggleButtonUI("record",!1);for(var t=(0,e.gn)("soundvolume"),r=0;r<(0,e.gn)("soundvolume").childElementCount;r++)t.childNodes[r].childNodes[0].setAttribute("class","soundlevel off")}},{key:"record",value:function(e){if(Xt)n.killRecorder(e);else{var t=function(){Ht?n.stopRecording():ny.sndrecord(n.startRecording)};jt?n.stopPlayingSound(t):t()}}},{key:"startRecording",value:function(e){ny.analyticsEvent("editor","start_recording"),Jt=[],parseInt(e,10)<0?(Ut=void 0,Ht=!1,n.killRecorder(),rn.selectCategory(3)):(Ut=e,Ht=!0,Xt=!1,n.soundname=e,n.toggleButtonUI("record",!0),Gt=setInterval((function(){ny.volume((function(e){Jt.push(e),n.updateVolume(e)}))}),33),Vt=setTimeout((function(){Ht&&n.stopRecording()}),3e4))}},{key:"playSnd",value:function(e){Xt?n.killRecorder(e):Ut&&(jt?n.stopPlayingSound():Ht?n.stopRecording(n.startPlaying):n.startPlaying())}},{key:"startPlaying",value:function(){ny.startplay(n.timeOutPlay),n.toggleButtonUI("play",!0),jt=!0,Yt=0,Gt=setInterval((function(){var e=0;Yt<Jt.length&&(e=Jt[Yt],Yt++),n.updateVolume(e)}),33)}},{key:"timeOutPlay",value:function(e){parseInt(e,10)<0&&(e=.1),Wt=setTimeout((function(){n.toggleButtonUI("play",!1),jt=!1,Gt&&(clearTimeout(Gt),Gt=null)}),1e3*e)}},{key:"stopSnd",value:function(e){Xt?n.killRecorder(e):Ut&&(n.flashStopButton(),Ht?n.stopRecording():jt&&n.stopPlayingSound())}},{key:"flashStopButton",value:function(){n.toggleButtonUI("stop",!0),setTimeout((function(){n.toggleButtonUI("stop",!1)}),200)}},{key:"stopPlayingSound",value:function(e){ny.stopplay(e),n.toggleButtonUI("play",!1),jt=!1,window.clearTimeout(Wt),Wt=null}},{key:"stopRecording",value:function(e){ny.analyticsEvent("editor","stop_recording"),null!==Vt&&(clearTimeout(Vt),Vt=null),null===Gt?n.volumeCheckStopped(e):(window.clearInterval(Gt),Gt=null,setTimeout((function(){n.volumeCheckStopped(e)}),33))}},{key:"volumeCheckStopped",value:function(e){Ht=!1,n.recordUIoff(),ny.recordstop(e)}},{key:"saveSoundAndClose",value:function(){Xt||!Ut?n.killRecorder():jt?n.stopPlayingSound(n.closeContinueSave):Ht?n.stopRecording(n.closeContinueSave):n.closeContinueSave()}},{key:"closeContinueSave",value:function(){ny.recorddisappear("YES",n.registerProjectSound)}},{key:"closeContinueRemove",value:function(){ny.recorddisappear("NO",n.tearDownRecorder)}},{key:"registerProjectSound",value:function(){var t=function(e){if("error"!==e){var t=Sv.getSprite(),r=t.page;t.sounds.push(Ut),Hm.record({action:"recordsound",who:t.id,where:r.id,sound:Ut}),Sv.storyStart("Record.registerProjectSound")}n.tearDownRecorder(),rn.selectCategory(3)};e.Dt?m.loadFromLocal("",Ut,t):m.loadFromLocal("Documents",Ut,t)}},{key:"killRecorder",value:function(){jt?n.stopPlayingSound(n.closeContinueRemove):Ht?n.stopRecording(n.closeContinueRemove):n.closeContinueRemove()}},{key:"tearDownRecorder",value:function(){Xt&&(Xt=!1),Ht=!1,Ut=null,n.disappear()}},{key:"recordError",value:function(){Xt=!0,n.killRecorder()}}]),n}(),Qt=.75,Zt=0,$t=void 0,en=5,tn=void 0,nn=void 0,rn=function(){function n(){t(this,n)}return r(n,null,[{key:"numcat",get:function(){return Zt}},{key:"helpballoon",get:function(){return nn},set:function(e){nn=e}},{key:"setup",value:function(t){Qt*=e._X,en*=e._X,n.blockdx*=e._X,$t=90*Qt,n.createCategorySelectors(t);var r=(0,e.HS)("div","palette",t);r.setAttribute("id","palette"),r.ontouchstart=function(e){n.paletteMouseDown(e)},r.onmousedown=function(e){n.paletteMouseDown(e)};var i=(0,e.HS)("div","papercut",t);(0,e.HS)("div","withstyle",i)}},{key:"createCategorySelectors",value:function(t){var r=(0,e.HS)("div","categoryselector",t);r.setAttribute("id","selectors");var i=(0,e.HS)("div","catbkg",r);(0,e.HS)("div","catimage",i);for(var a=15*e._X,o=54*e._X,s=0;s<S.categories.length;s++)n.createSelector(r,s,a+s*o,0,S.categories[s])}},{key:"paletteMouseDown",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1||Sv.onHold)){t.preventDefault(),Sv.blur();for(var r=(0,e.gn)("palette"),i=z.getTargetPoint(t),a={x:(0,e.XU)(r,i.x),y:(0,e.Bf)(r,i.y)},o=0;o<r.childElementCount;o++){var s=r.childNodes[o];(0,e._)(s,a)&&(Sv.shaking&&Sv.shaking===s?n.removeSound(s):z.startDrag(t,s,n.prepareForDrag,n.dropBlockFromPalette,Ft.draggingBlock,n.showHelp,n.startShaking))}Sv.clearSelection()}}},{key:"isRecorded",value:function(e){var t=e.owner.getArgValue();return Sv.getActiveScript().owner.spr.sounds.indexOf(t)>0}},{key:"removeSound",value:function(t){m.sndFX("cut.wav");var r=t.owner.getArgValue(),i=Sv.getSprite();if(i){var a=i.page,o=i.sounds.concat();if(!(r>=o.length)){o.splice(r,1),i.sounds=o;for(var s=i.getData(),u=(0,e.gn)("".concat(i.id,"_scripts"));u.childElementCount>0;)u.removeChild(u.childNodes[0]);for(var h=u.owner,l=s.scripts,c=0;c<l.length;c++)h.recreateStrip(l[c]);Hm.record({action:"deletesound",who:i.id,where:a.id,sound:name}),Sv.storyStart("Palette.removeSound"),n.selectCategory(3)}}}},{key:"showHelp",value:function(e,t){var r=t.owner,i=S.blockDesc(r,Sv.getSprite())[r.blocktype];i&&(n.openPaletteBalloon(t,i),tn=setTimeout(n.closeHelpBalloon,2e3))}},{key:"startShaking",value:function(t){t.owner&&("playusersnd"===t.owner.blocktype?(Sv.shaking=t,Sv.stopShaking=n.stopShaking,t.setAttribute("class","shakeme"),(0,e.HS)("div","deletesound",t)):n.showHelp(null,t))}},{key:"clickBlock",value:function(e,t){Sv.shaking&&t===Sv.shaking?n.removeSound(t):(Sv.clearSelection(),n.showHelp(e,t))}},{key:"stopShaking",value:function(e){if(e.owner){Sv.shaking=void 0,Sv.stopShaking=void 0,e.setAttribute("class","");var t=e.childNodes[e.childElementCount-1];"deletesound"===t.getAttribute("class")&&e.removeChild(t)}}},{key:"openPaletteBalloon",value:function(t,r){nn&&n.closeHelpBalloon();var i=Math.floor(14*window.devicePixelRatio*e._X),a=80*window.devicePixelRatio*e._X,o=36*window.devicePixelRatio*e._X,s=(0,e.Q7)(t)-36*e._X;(nn=(0,e.oM)(e.Wi,0,s,a,o,{position:"absolute",zIndex:1e3})).icon=t;var u=nn.getContext("2d");(a=16*window.devicePixelRatio*e._X+(0,e.xE)(u,"bold ".concat(i,"px ").concat(window.Settings.paletteBalloonFont),r).width)<36*e._X&&(a=36*e._X);var h=((0,e.$1)(t)+t.offsetWidth/2)*window.devicePixelRatio-a/2;(0,e.ge)(nn,a,o),(0,e.cl)(nn.style,{position:"absolute",webkitTransform:"translate(".concat(-a/2,"px, ").concat(-o/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") translate(").concat(h+a/2,"px, ").concat(o/2,"px)")}),n.drawBalloon(nn.getContext("2d"),a,o),(0,e.nx)(u,"bold ".concat(i,"px ").concat(window.Settings.paletteBalloonFont),"white",r,21*window.devicePixelRatio*e._X,8*window.devicePixelRatio*e._X)}},{key:"hide",value:function(){(0,e.gn)("blockspalette").childNodes[0].style.display="none",(0,e.gn)("blockspalette").childNodes[1].style.display="none"}},{key:"show",value:function(){(0,e.gn)("blockspalette").childNodes[0].style.display="inline-block",(0,e.gn)("blockspalette").childNodes[1].style.display="inline-block"}},{key:"closeHelpBalloon",value:function(){tn&&clearTimeout(tn),nn&&nn.parentNode.removeChild(nn),nn=void 0,tn=void 0}},{key:"drawBalloon",value:function(e,t,n){var r=new Array(["M",0,4],["q",0,-4,4,-4],["h",t-8],["q",4,0,4,4],["v",n-11-8],["q",0,4,-4,4],["h",-t/2+4+11],["l",-11,11],["l",-11,-11],["h",-t/2+4+11],["q",-4,0,-4,-4],["z"]);e.clearRect(0,0,Math.max(e.canvas.width,t),Math.max(e.canvas.height,n)),e.fillStyle="#4682B5",e.lineWidth=2,e.beginPath(),ut.render(e,r),e.fill()}},{key:"prepareForDrag",value:function(t){t.preventDefault(),m.sndFX("grab.wav"),Sv.runtime.inactive()||Sv.stopStrips();var r=Sv.getActiveScript().owner;r.flowCaret=null;var i=z.getTargetPoint(t);if(z.dragmousex=i.x,z.dragmousey=i.y,z.dragthumbnail.parentNode||(z.dragthumbnail=n.getBlockNamed(z.dragthumbnail.owner.blocktype),z.dragthumbnail)){var a=z.dragmousex-e.Wi.offsetLeft-(0,e.XU)(z.dragthumbnail,z.dragmousex),o=z.dragmousey-e.Wi.offsetTop-(0,e.Bf)(z.dragthumbnail,z.dragmousey);z.dragcanvas=z.dragthumbnail.owner.duplicateBlock(a,o,r.spr).div,z.dragcanvas.style.zIndex=Sv.dragginLayer,z.dragDiv.appendChild(z.dragcanvas),r.dragList=[z.dragcanvas.owner],r.prepareCaret(z.dragcanvas.owner)}else z.cancelAll()}},{key:"getBlockNamed",value:function(t){for(var n=(0,e.gn)("palette"),r=0;r<n.childElementCount;r++)if(n.childNodes[r].owner.blocktype===t)return n.childNodes[r];return null}},{key:"createSelector",value:function(t,r,i,a,o){var s=51*e._X,u=57*e._X,h=(0,e.um)(t,i,a,s,u,{position:"absolute"});h.index=r;var l=o[1].cloneNode(!0);l.width=s,l.height=u,h.appendChild(l),(0,e.cl)(l.style,{position:"absolute",zIndex:6,visibility:"visible"});var c=o[0].cloneNode(!0);c.width=s,c.height=u,h.appendChild(c),h.bkg=o[2],(0,e.cl)(c.style,{position:"absolute",zIndex:8,visibility:"hidden"}),h.ontouchstart=function(e){n.clickOnCategory(e)},h.onmousedown=function(e){n.clickOnCategory(e)}}},{key:"getPaletteSize",value:function(){var t=(0,e.gn)("palette").childNodes[0],n=(0,e.gn)("palette").childNodes[(0,e.gn)("palette").childElementCount-1];return n.offsetLeft+n.offsetWidth-t.offsetLeft}},{key:"clickOnCategory",value:function(e){if(e){e.preventDefault(),Sv.unfocus(e);var t=e.target;m.sndFX("keydown.wav");var r=t.parentNode?t.parentNode.index:2;n.selectCategory(r)}}},{key:"selectCategory",value:function(t){var r=(0,e.gn)("selectors");Zt=t;for(var i=r.childNodes[t+1],a=1;a<r.childElementCount;a++){var o=r.childNodes[a];o.childNodes[0].style.visibility=o.index===t?"hidden":"visible",o.childNodes[1].style.visibility=o.index===t?"visible":"hidden"}var s=(0,e.gn)("palette");for((0,e.gn)("blockspalette").style.background=i.bkg;s.childElementCount>0;)s.removeChild(s.childNodes[0]);if(Sv.getSprite()){for(var u=S.palettes[t].concat(),h=10,l=0;l<u.length;l++)"space"===u[l]?h+=30*Qt:(n.newScaledBlock(s,u[l],"repeat"===u[l]?.65*e._X:Qt,h,en).lift(),h+=$t);h+=30,t===S.categories.length-1&&Sv.stage.pages.length>1&&n.addPagesBlocks(h),3===t&&Sv.getSprite().sounds.length>0&&n.addSoundsBlocks(10)}}},{key:"reset",value:function(){Zt===S.categories.length-1&&n.selectCategory(S.categories.length-1),3===Zt&&n.selectCategory(3)}},{key:"showSelectors",value:function(t){for(var n=Zt,r=(0,e.gn)("selectors"),i=0;i<r.childElementCount;i++){var a=r.childNodes[i];a.childNodes[0].style.visibility=a.index!==n&&t?"visible":"hidden",a.childNodes[1].style.visibility=a.index===n&&t?"visible":"hidden",a.childNodes[2].style.visibility=a.index!==n&&t?"visible":"hidden",a.childNodes[3].style.visibility=a.index===n&&t?"visible":"hidden"}}},{key:"addPagesBlocks",value:function(t){for(var r=(0,e.gn)("palette"),i=S.defs.gotopage,a=0;a<Sv.stage.pages.length;a++)Sv.stage.pages[a].id!==Sv.stage.currentPage.id&&(i[4]=a+1,n.newScaledBlock(r,"gotopage",Qt,t,en).lift(),t+=$t+5)}},{key:"addSoundsBlocks",value:function(t){for(var r,i=(0,e.gn)("palette"),a=Sv.getSprite(),o=a?a.sounds:[],s=0;s<o.length;s++){var u=rt.sounds.indexOf(o[s])<0?"playusersnd":"playsnd",h=rt.sounds.indexOf(o[s])<0?s:o[s];(r=n.addBlockSound(i,u,h,t,en)).lift(),t+=$t}o.length<6&&qt.available&&n.drawRecordSound(r.div.offsetWidth,r.div.offsetHeight,t)}},{key:"addBlockSound",value:function(e,t,r,i,a){var o=S.defs[t],s=o[4];o[4]=r;var u=n.newScaledBlock(e,t,Qt,i,a);return o[4]=s,u}},{key:"drawRecordSound",value:function(t,r,i){var a=(0,e.gn)("palette"),o=(0,e.um)(a,i,0,t,r,{top:"".concat(6*e._X,"px")}),s=(0,e.oM)(o,0,0,o.offsetWidth*window.devicePixelRatio,o.offsetHeight*window.devicePixelRatio,{webkitTransform:"translate(".concat(-o.offsetWidth*window.devicePixelRatio/2,"px, ").concat(-o.offsetHeight*window.devicePixelRatio/2,"px) ")+"scale(".concat(1/window.devicePixelRatio,") translate(").concat(o.offsetWidth*window.devicePixelRatio/2,"px, ").concat(o.offsetHeight*window.devicePixelRatio/2,"px)")});S.mic.complete?(0,e.sy)(S.mic,s):S.mic.onload=function(){(0,e.sy)(S.mic,s)},o.ontouchstart=n.recordSound,o.onmousedown=n.recordSound}},{key:"recordSound",value:function(e){e.preventDefault(),e.stopPropagation(),Sv.clearSelection(),qt.appear()}},{key:"inStatesPalette",value:function(){var t=(0,e.gn)("selectors");return"hidden"===t.childNodes[t.childElementCount-1].childNodes[0].style.visibility}},{key:"getLandingPlace",value:function(t,r,i){i=void 0===i?1:i;var a=Sv.getActiveScript().owner,o=r?z.getTargetPoint(r):null;o&&!o.x&&(o=null);var s=new M(t.left/i,t.top/i,t.offsetWidth/i,t.offsetHeight/i),u=new M((0,e.$1)((0,e.gn)("palette")),(0,e.Q7)((0,e.gn)("palette")),(0,e.gn)("palette").offsetWidth,(0,e.gn)("palette").offsetHeight);return null===a.flowCaret||null===a.flowCaret.prev&&null===a.flowCaret.next&&null===a.flowCaret.inside?u.overlapElemBy(s,.4)&&u.hitRect({x:t.left/i,y:t.top/i})||o&&u.hitRect(o)?"palette":n.overlapsWith((0,e.gn)("scripts"),s)?"scripts":n.overlapsWith((0,e.gn)("palette"),s)?"palette":n.overlapsWith((0,e.gn)("library"),s)?"library":n.overlapsWith((0,e.gn)("pages"),s)?"pages":null:"scripts"}},{key:"overlapsWith",value:function(t,n){var r=new M((0,e.$1)(t),(0,e.Q7)(t),t.offsetWidth,t.offsetHeight);return n.intersects(r)}},{key:"overlapsWith2",value:function(e,t){var n=new M(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);return t.intersects(n)}},{key:"getBlockfromChild",value:function(e){for(;null!==e;){if(e.owner)return e;e=e.parentNode}return null}},{key:"getHittedThumb",value:function(t,n,r){r=void 0===r?1:r;for(var i=new M(t.left/r,t.top/r,t.offsetWidth/r,t.offsetHeight/r),a=0,o=null,s=n.parentNode.scrollTop,u=0;u<n.childElementCount;u++){var h=n.childNodes[u];if("FORM"!==h.nodeName){var l=new M((0,e.$1)(h,h.offsetLeft),(0,e.Q7)(h,h.offsetTop)-s,h.offsetWidth,h.offsetHeight),c=i.intersection(l),d=c.width*c.height;d>a&&(a=d,o=h)}}return o}},{key:"newScaledBlock",value:function(t,n,r,i,a){var o=new Dt(S.defs[n],!0,r);return(0,e.cl)(o.div.style,{position:"absolute",left:"".concat(i,"px"),top:"".concat(a,"px")}),t.appendChild(o.div),o}},{key:"dropBlockFromPalette",value:function(t,r){if(t.preventDefault(),"scripts"===n.getLandingPlace(r,t)){ny.analyticsEvent("editor","new_block_".concat(r.owner.blocktype));var i=Sv.getActiveScript(),a=(0,e.XU)(i,r.left),o=(0,e.Bf)(i,r.top);Ft.blockDropped(i,a,o);var s=Sv.getActiveScript().owner.spr;Hm.record({action:"scripts",where:s.page.id,who:s.id}),Sv.storyStart("Palette.dropBlockFromPalette")}else Sv.getActiveScript().owner.deleteBlocks();Sv.getActiveScript().owner.dragList=[]}}]),n}();var an=setTimeout;function on(e){return Boolean(e&&void 0!==e.length)}function sn(){}function un(e){if(!(this instanceof un))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],pn(e,this)}function hn(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,un._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void cn(t.promise,e)}ln(t.promise,r)}else(1===e._state?ln:cn)(t.promise,e._value)}))):e._deferreds.push(t)}function ln(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof un)return e._state=3,e._value=t,void dn(e);if("function"==typeof n)return void pn((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,dn(e)}catch(t){cn(e,t)}var r,i}function cn(e,t){e._state=2,e._value=t,dn(e)}function dn(e){2===e._state&&0===e._deferreds.length&&un._immediateFn((function(){e._handled||un._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)hn(e,e._deferreds[t]);e._deferreds=null}function fn(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function pn(e,t){var n=!1;try{e((function(e){n||(n=!0,ln(t,e))}),(function(e){n||(n=!0,cn(t,e))}))}catch(e){if(n)return;n=!0,cn(t,e)}}un.prototype.catch=function(e){return this.then(null,e)},un.prototype.then=function(e,t){var n=new this.constructor(sn);return hn(this,new fn(e,t,n)),n},un.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},un.all=function(e){return new un((function(t,n){if(!on(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function a(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,(function(t){a(e,t)}),n)}r[e]=o,0==--i&&t(r)}catch(e){n(e)}}for(var o=0;o<r.length;o++)a(o,r[o])}))},un.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function a(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if("function"==typeof o)return void o.call(n,(function(t){a(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--i&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--i&&t(r)}for(var o=0;o<r.length;o++)a(o,r[o])}))},un.resolve=function(e){return e&&"object"==typeof e&&e.constructor===un?e:new un((function(t){t(e)}))},un.reject=function(e){return new un((function(t,n){n(e)}))},un.race=function(e){return new un((function(t,n){if(!on(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)un.resolve(e[r]).then(t,n)}))},un._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){an(e,0)},un._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const gn=un;var mn=__webpack_require__(418),vn=__webpack_require__.n(mn);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==__webpack_require__.g&&(__webpack_require__.g.globalThis=__webpack_require__.g)),globalThis.Promise||(globalThis.Promise=gn),Object.assign||(Object.assign=vn()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var yn=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-yn}}for(var bn=Date.now(),_n=["ms","moz","webkit","o"],En=0;En<_n.length&&!globalThis.requestAnimationFrame;++En){var Tn=_n[En];globalThis.requestAnimationFrame=globalThis[Tn+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Tn+"CancelAnimationFrame"]||globalThis[Tn+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),n=16+bn-t;return n<0&&(n=0),bn=t,globalThis.self.setTimeout((function(){bn=Date.now(),e(performance.now())}),n)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var xn,kn,Sn,wn,Mn,An,Rn,Cn,Pn,In,Nn,On,Dn,Ln,Bn,Fn,Gn,Un,Hn,jn=/iPhone/i,Kn=/iPod/i,Xn=/iPad/i,zn=/\biOS-universal(?:.+)Mac\b/i,Vn=/\bAndroid(?:.+)Mobile\b/i,Wn=/Android/i,Yn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Jn=/Silk/i,qn=/Windows Phone/i,Qn=/\bWindows(?:.+)ARM\b/i,Zn=/BlackBerry/i,$n=/BB10/i,er=/Opera Mini/i,tr=/\b(CriOS|Chrome)(?:.+)Mobile/i,nr=/Mobile(?:.+)Firefox\b/i,rr=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream},ir=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),a={apple:{phone:i(jn)&&!i(qn),ipod:i(Kn),tablet:!i(jn)&&(i(Xn)||rr(t))&&!i(qn),universal:i(zn),device:(i(jn)||i(Kn)||i(Xn)||i(zn)||rr(t))&&!i(qn)},amazon:{phone:i(Yn),tablet:!i(Yn)&&i(Jn),device:i(Yn)||i(Jn)},android:{phone:!i(qn)&&i(Yn)||!i(qn)&&i(Vn),tablet:!i(qn)&&!i(Yn)&&!i(Vn)&&(i(Jn)||i(Wn)),device:!i(qn)&&(i(Yn)||i(Jn)||i(Vn)||i(Wn))||i(/\bokhttp\b/i)},windows:{phone:i(qn),tablet:i(Qn),device:i(qn)||i(Qn)},other:{blackberry:i(Zn),blackberry10:i($n),opera:i(er),firefox:i(nr),chrome:i(tr),device:i(Zn)||i($n)||i(er)||i(nr)||i(tr)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(globalThis.navigator);!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(xn||(xn={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(kn||(kn={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Sn||(Sn={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(wn||(wn={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Mn||(Mn={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(An||(An={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Rn||(Rn={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Cn||(Cn={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(Pn||(Pn={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(In||(In={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Nn||(Nn={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(On||(On={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Dn||(Dn={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Ln||(Ln={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Bn||(Bn={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Fn||(Fn={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Gn||(Gn={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Un||(Un={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Hn||(Hn={}));var ar,or,sr,ur,hr,lr,cr,dr,fr,pr,gr,mr,vr,yr,br,_r,Er,Tr,xr,kr={MIPMAP_TEXTURES:On.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Un.NONE,SPRITE_MAX_TEXTURES:function(e){var t,n=!0;(ir.tablet||ir.phone)&&(ir.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(n=!1),ir.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(n=!1));return n?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Bn.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Nn.CLAMP,SCALE_MODE:In.LINEAR,PRECISION_VERTEX:Fn.HIGH,PRECISION_FRAGMENT:ir.apple.device?Fn.HIGH:Fn.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!ir.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Sr=__webpack_require__(729),wr=__webpack_require__.n(Sr),Mr=__webpack_require__(187),Ar=__webpack_require__.n(Mr),Rr=__webpack_require__(575);!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(ar||(ar={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(or||(or={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(sr||(sr={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(ur||(ur={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(hr||(hr={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(lr||(lr={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(cr||(cr={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(dr||(dr={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(fr||(fr={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(pr||(pr={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(gr||(gr={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(mr||(mr={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(vr||(vr={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(yr||(yr={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(br||(br={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(_r||(_r={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Er||(Er={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Tr||(Tr={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(xr||(xr={}));var Cr={parse:Rr.Qc,format:Rr.WU,resolve:Rr.DB};kr.RETINA_PREFIX=/@([0-9\.]+)x/,kr.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Pr,Ir=!1;function Nr(e){var t;if(!Ir){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+e+" - http://www.pixijs.com/");Ir=!0}}var Or={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Dr(e,t){return void 0===t&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function Lr(e){var t=e.toString(16);return"#"+("000000".substring(0,6-t.length)+t)}function Br(e){return"string"==typeof e&&"#"===(e=Or[e.toLowerCase()]||e)[0]&&(e=e.slice(1)),parseInt(e,16)}function Fr(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}var Gr=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[ur.NORMAL_NPM]=ur.NORMAL,e[ur.ADD_NPM]=ur.ADD,e[ur.SCREEN_NPM]=ur.SCREEN,t[ur.NORMAL]=ur.NORMAL_NPM,t[ur.ADD]=ur.ADD_NPM,t[ur.SCREEN]=ur.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function Ur(e,t){return Gr[t?1:0][e]}function Hr(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255,i=255&e;return(255*t<<24)+((n=n*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(i*t+.5|0)}function jr(e,t,n,r){return(n=n||new Float32Array(4))[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,(r||void 0===r)&&(n[0]*=t,n[1]*=t,n[2]*=t),n[3]=t,n}function Kr(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function Xr(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function zr(e){return!(e&e-1||!e)}function Vr(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function Wr(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var a=i-(n=t+n>i?i-t:n);for(r=t;r<a;++r)e[r]=e[r+n];e.length=a}}function Yr(e){return 0===e?0:e<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var Jr=0;function qr(){return++Jr}var Qr={};function Zr(e,t,n){if(void 0===n&&(n=3),!Qr[t]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e),console.warn(r))),Qr[t]=!0}}var $r,ei={},ti=Object.create(null),ni=Object.create(null),ri=function(){function e(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||kr.RESOLUTION,this.resize(e,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),e}();function ii(e,t){var n=kr.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1}var ai,oi=2*Math.PI,si=180/Math.PI,ui=Math.PI/180;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(ai||(ai={}));var hi=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),li=[new hi,new hi,new hi,new hi],ci=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=ai.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.intersects=function(e,t){if(!t){var n=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=n)return!1;var r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}var i=this.left,a=this.right,o=this.top,s=this.bottom;if(a<=i||s<=o)return!1;var u=li[0].set(e.left,e.top),h=li[1].set(e.left,e.bottom),l=li[2].set(e.right,e.top),c=li[3].set(e.right,e.bottom);if(l.x<=u.x||h.y<=u.y)return!1;var d=Math.sign(t.a*t.d-t.b*t.c);if(0===d)return!1;if(t.apply(u,u),t.apply(h,h),t.apply(l,l),t.apply(c,c),Math.max(u.x,h.x,l.x,c.x)<=i||Math.min(u.x,h.x,l.x,c.x)>=a||Math.max(u.y,h.y,l.y,c.y)<=o||Math.min(u.y,h.y,l.y,c.y)>=s)return!1;var f=d*(h.y-u.y),p=d*(u.x-h.x),g=f*i+p*o,m=f*a+p*o,v=f*i+p*s,y=f*a+p*s;if(Math.max(g,m,v,y)<=f*u.x+p*u.y||Math.min(g,m,v,y)>=f*c.x+p*c.y)return!1;var b=d*(u.y-l.y),_=d*(l.x-u.x),E=b*i+_*o,T=b*a+_*o,x=b*i+_*s,k=b*a+_*s;return!(Math.max(E,T,x,k)<=b*u.x+_*u.y||Math.min(E,T,x,k)>=b*c.x+_*c.y)},e.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this},e.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),di=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=ai.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n},e.prototype.getBounds=function(){return new ci(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),fi=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.width=n,this.height=r,this.type=ai.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},e.prototype.getBounds=function(){return new ci(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),pi=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=Array.isArray(t[0])?t[0]:t;if("number"!=typeof r[0]){for(var i=[],a=0,o=r.length;a<o;a++)i.push(r[a].x,r[a].y);r=i}this.points=r,this.type=ai.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,a=r-1;i<r;a=i++){var o=this.points[2*i],s=this.points[2*i+1],u=this.points[2*a],h=this.points[2*a+1];s>t!=h>t&&e<(t-s)/(h-s)*(u-o)+o&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(e,t){return e+", "+t}),"")+"]"},e}(),gi=function(){function e(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=20),this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i,this.type=ai.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var r=e-(this.x+n),i=t-(this.y+n),a=n*n;if(r*r+i*i<=a)return!0;if((r=e-(this.x+this.width-n))*r+i*i<=a)return!0;if(r*r+(i=t-(this.y+this.height-n))*i<=a)return!0;if((r=e-(this.x+n))*r+i*i<=a)return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},e}(),mi=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=e,this.scope=t}return e.prototype.clone=function(t,n){return void 0===t&&(t=this.cb),void 0===n&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),vi=function(){function e(e,t,n,r,i,a){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,a){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new hi;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new hi;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,a=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,a,o,s,u){return this.a=Math.cos(o+u)*i,this.b=Math.sin(o+u)*i,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,a=e.pivot,o=-Math.atan2(-r,i),s=Math.atan2(n,t),u=Math.abs(o+s);return u<1e-5||Math.abs(oi-u)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(a.x*t+a.y*r),e.position.y=this.ty+(a.x*n+a.y*i),e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,a=e*r-t*n;return this.a=r/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*i)/a,this.ty=-(e*this.ty-t*i)/a,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),yi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],bi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],_i=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ei=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ti=[],xi=[],ki=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];Ti.push(t);for(var n=0;n<16;n++)for(var r=ki(yi[e]*yi[n]+_i[e]*bi[n]),i=ki(bi[e]*yi[n]+Ei[e]*bi[n]),a=ki(yi[e]*_i[n]+_i[e]*Ei[n]),o=ki(bi[e]*_i[n]+Ei[e]*Ei[n]),s=0;s<16;s++)if(yi[s]===r&&bi[s]===i&&_i[s]===a&&Ei[s]===o){t.push(s);break}}for(e=0;e<16;e++){var u=new vi;u.set(yi[e],bi[e],_i[e],Ei[e],0,0),xi.push(u)}}();var Si={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return yi[e]},uY:function(e){return bi[e]},vX:function(e){return _i[e]},vY:function(e){return Ei[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return Ti[e][t]},sub:function(e,t){return Ti[e][Si.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?Si.S:Si.N:2*Math.abs(t)<=Math.abs(e)?e>0?Si.E:Si.W:t>0?e>0?Si.SE:Si.SW:e>0?Si.NE:Si.NW},matrixAppendRotationInv:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=xi[Si.inv(t)];i.tx=n,i.ty=r,e.append(i)}},wi=function(){function e(){this.worldTransform=new vi,this.localTransform=new vi,this.position=new mi(this.onChange,this,0,0),this.scale=new mi(this.onChange,this,1,1),this.pivot=new mi(this.onChange,this,0,0),this.skew=new mi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();kr.SORTABLE_CHILDREN=!1;var Mi=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ci.EMPTY:((e=e||new ci(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addPointMatrix=function(e,t){var n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,u=n*t.x+i*t.y+o,h=r*t.x+a*t.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,a=e[0],o=e[1];t=a<t?a:t,n=o<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[2])<t?a:t,n=(o=e[3])<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[4])<t?a:t,n=(o=e[5])<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[6])<t?a:t,n=(o=e[7])<n?o:n,r=a>r?a:r,i=o>i?o:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)},e.prototype.addFrameMatrix=function(e,t,n,r,i){var a=e.a,o=e.b,s=e.c,u=e.d,h=e.tx,l=e.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,g=a*t+s*n+h,m=o*t+u*n+l;c=g<c?g:c,d=m<d?m:d,f=g>f?g:f,p=m>p?m:p,c=(g=a*r+s*n+h)<c?g:c,d=(m=o*r+u*n+l)<d?m:d,f=g>f?g:f,p=m>p?m:p,c=(g=a*t+s*i+h)<c?g:c,d=(m=o*t+u*i+l)<d?m:d,f=g>f?g:f,p=m>p?m:p,c=(g=a*r+s*i+h)<c?g:c,d=(m=o*r+u*i+l)<d?m:d,f=g>f?g:f,p=m>p?m:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addVertexData=function(e,t,n){for(var r=this.minX,i=this.minY,a=this.maxX,o=this.maxY,s=t;s<n;s+=2){var u=e[s],h=e[s+1];r=u<r?u:r,i=h<i?h:i,a=u>a?u:a,o=h>o?h:o}this.minX=r,this.minY=i,this.maxX=a,this.maxY=o},e.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},e.prototype.addVerticesMatrix=function(e,t,n,r,i,a){void 0===i&&(i=0),void 0===a&&(a=i);for(var o=e.a,s=e.b,u=e.c,h=e.d,l=e.tx,c=e.ty,d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=n;m<r;m+=2){var v=t[m],y=t[m+1],b=o*v+u*y+l,_=h*y+s*v+c;d=Math.min(d,b-i),p=Math.max(p,b+i),f=Math.min(f,_-a),g=Math.max(g,_+a)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=g},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=a){var o=this.minX,s=this.minY,u=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=a>h?a:h}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=a){var o=this.minX,s=this.minY,u=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=a>h?a:h}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,r,i,a){e-=i,t-=a,n+=i,r+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},e}(),Ai=function(e,t){return Ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ai(e,t)};function Ri(e,t){function n(){this.constructor=e}Ai(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ci,Pi,Ii,Ni,Oi,Di,Li,Bi,Fi,Gi,Ui,Hi,ji,Ki,Xi,zi,Vi,Wi,Yi,Ji=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new wi,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Mi,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return Ri(t,e),t.mixin=function(e){for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ci),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ci),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Mi);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,a},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,r,i,a,o,s,u){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=u,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new qi),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*si},set:function(e){this.transform.rotation=e*ui},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask!==e&&(this._mask&&((t=this._mask.maskObject||this._mask)._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1)),this._mask=e,this._mask&&(0===(t=this._mask.maskObject||this._mask)._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++))},enumerable:!1,configurable:!0}),t}(wr()),qi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return Ri(t,e),t}(Ji);function Qi(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}Ji.prototype.displayObjectUpdateTransform=Ji.prototype.updateTransform,function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(Ci||(Ci={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Pi||(Pi={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Ii||(Ii={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Ni||(Ni={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Oi||(Oi={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Di||(Di={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Li||(Li={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Bi||(Bi={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(Fi||(Fi={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Gi||(Gi={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ui||(Ui={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Hi||(Hi={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(ji||(ji={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Ki||(Ki={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Xi||(Xi={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(zi||(zi={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Vi||(Vi={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Wi||(Wi={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Yi||(Yi={}));var Zi=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=kr.SORTABLE_CHILDREN,t.sortDirty=!1,t}return Ri(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.addChild(t[r]);else{var i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Wr(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.removeChild(t[r]);else{var i=t[0],a=this.children.indexOf(i);if(-1===a)return null;i.parent=null,i.transform._parentID=-1,Wr(this.children,a,1),this._boundsID++,this.onChildrenChange(a),i.emit("removed",this),this.emit("childRemoved",i,this,a)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Wr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,r=e,i=t-r;if(i>0&&i<=t){n=this.children.splice(r,i);for(var a=0;a<n.length;++a)n[a].parent=null,n[a].transform&&(n[a].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(e),a=0;a<n.length;++a)n[a].emit("removed",this),this.emit("childRemoved",n[a],this,a);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(Qi),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var r=e.prototype.getLocalBounds.call(this,t);if(!n)for(var i=0,a=this.children.length;i<a;++i){var o=this.children[i];o.visible&&o.updateTransform()}return r},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var n=e.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==t.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a],u=s.cullable;s.cullable=u||!this.cullArea,s.render(e),s.cullable=u}}},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r])}var i=t&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Vi.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e),r=0;for(var a=this.children.length;r<a;++r)this.children[r].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(Ji);Zi.prototype.containerUpdateTransform=Zi.prototype.updateTransform,Ji.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var $i,ea=function(){function e(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ir.tablet||ir.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},e.prototype.deactivate=function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){var e=performance.now();if(!(ir.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.left,r=t.top,i=t.width,a=t.height,o=this.renderer,s=o.width,u=o.height,h=o.resolution,l=i/s*h,c=a/u*h,d=this.div;d.style.left=n+"px",d.style.top=r+"px",d.style.width=s+"px",d.style.height=u+"px";for(var f=0;f<this.children.length;f++){var p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,Wr(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{d=p._accessibleDiv;var g=p.hitArea,m=p.worldTransform;p.hitArea?(d.style.left=(m.tx+g.x*m.a)*l+"px",d.style.top=(m.ty+g.y*m.d)*c+"px",d.style.width=g.width*m.a*l+"px",d.style.height=g.height*m.d*c+"px"):(g=p.getBounds(),this.capHitArea(g),d.style.left=g.x*l+"px",d.style.top=g.y*c+"px",d.style.width=g.width*l+"px",d.style.height=g.height*c+"px",d.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&d.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===d.title&&p.tabIndex===d.tabIndex||(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},e.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,n=t.width,r=t.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,"click",r),t.dispatchEvent(n,"pointertap",r),t.dispatchEvent(n,"tap",r)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,"mouseover",r)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,n=e.target.displayObject,r=t.eventData;t.dispatchEvent(n,"mouseout",r)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();kr.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}($i||($i={}));var ta=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=r}return e.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}(),na=function(){function e(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ta(null,null,1/0),this.deltaMS=1/kr.TARGET_FPMS,this.elapsedMS=1/kr.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t,n){return void 0===n&&(n=$i.NORMAL),this._addListener(new ta(e,t,n))},e.prototype.addOnce=function(e,t,n){return void 0===n&&(n=$i.NORMAL),this._addListener(new ta(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*kr.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,kr.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),ra=function(){function e(){}return e.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,$i.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?na.shared:new na,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},e}(),ia=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new hi,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),aa=function(e,t){return aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},aa(e,t)},oa=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),sa=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 0!=(this._flags&e.FLAGS.OVER)},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return 0!=(this._flags&e.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return 0!=(this._flags&e.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),ua=function(){function e(){this._tempPoint=new hi}return e.prototype.recursiveFindHit=function(e,t,n,r,i){if(!t||!t.visible)return!1;var a=e.data.global,o=!1,s=i=t.interactive||i,u=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,u=!1)),s=!1):t._mask&&r&&(t._mask.containsPoint&&t._mask.containsPoint(a)||(r=!1)),u&&t.interactiveChildren&&t.children)for(var h=t.children,l=h.length-1;l>=0;l--){var c=h[l],d=this.recursiveFindHit(e,c,n,r,s);if(d){if(!c.parent)continue;s=!1,d&&(e.target&&(r=!1),o=!0)}}return i&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(o=!0),t.interactive&&(o&&!e.target&&(e.target=t),n&&n(e,t,!!o))),o},e.prototype.findHit=function(e,t,n,r){this.recursiveFindHit(e,t,n,r,!1)},e}(),ha={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ji.mixin(ha);var la={target:null,data:{global:null}},ca=function(e){function t(t,n){var r=e.call(this)||this;return n=n||{},r.renderer=t,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new ia,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new oa,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new ua,r._tempDisplayObject=new qi,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(e,t){function n(){this.constructor=e}aa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,t){return la.target=null,la.data.global=e,t||(t=this.lastObjectRendered),this.processInteractive(la,t,null,!0),la.target},t.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(na.system.add(this.tickerUpdate,this,$i.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(na.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){e=e||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(t=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.interactionDOMElement.style,n)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){n.stopPropagationHint&&e!==n.stopsPropagatingAt||(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.delayDispatchEvent=function(e,t,n){this.delayedEvents.push({displayObject:e,eventString:t,eventData:n})},t.prototype.mapPositionToPoint=function(e,t,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*i,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},t.prototype.processInteractive=function(e,t,n,r){var i=this.search.findHit(e,t,n,r),a=this.delayedEvents;if(!a.length)return i;e.stopPropagationHint=!1;var o=a.length;this.delayedEvents=[];for(var s=0;s<o;s++){var u=a[s],h=u.displayObject,l=u.eventString,c=u.eventData;c.stopsPropagatingAt===h&&(c.stopPropagationHint=!0),this.dispatchEvent(h,l,c)}return i},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=t.length,r=0;r<n;r++){var i=t[r],a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);if(o.data.originalEvent=e,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===i.pointerType)this.emit("touchstart",o);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var r=e.data,i=e.data.identifier;if(n)if(t.trackedPointers[i]||(t.trackedPointers[i]=new sa(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;a?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,a?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var r=this.normalizeToPointerData(e),i=r.length,a=e.target!==this.interactionDOMElement?"outside":"",o=0;o<i;o++){var s=r[o],u=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(h.data.originalEvent=e,this.processInteractive(h,this.lastObjectRendered,n,t||!a),this.emit(t?"pointercancel":"pointerup"+a,h),"mouse"===s.pointerType||"pen"===s.pointerType){var l=2===s.button;this.emit(l?"rightup"+a:"mouseup"+a,h)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+a,h),this.releaseInteractionDataForPointerId(s.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var r=e.data,i=e.data.identifier,a=t.trackedPointers[i],o="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(s){var h=2===r.button,l=sa.FLAGS,c=h?l.RIGHT_DOWN:l.LEFT_DOWN,d=void 0!==a&&a.flags&c;n?(this.dispatchEvent(t,h?"rightup":"mouseup",e),d&&(this.dispatchEvent(t,h?"rightclick":"click",e),u=!0)):d&&this.dispatchEvent(t,h?"rightupoutside":"mouseupoutside",e),a&&(h?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),o&&this.dispatchEvent(t,"touchend",e),a&&(s&&!u||this.dispatchEvent(t,"pointertap",e),o&&(this.dispatchEvent(t,"tap",e),a.over=!1))):a&&(this.dispatchEvent(t,"pointerupoutside",e),o&&this.dispatchEvent(t,"touchendoutside",e)),a&&a.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=t.length,r=0;r<n;r++){var i=t[r],a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=e,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===i.pointerType&&this.emit("touchmove",o),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",o)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var r=e.data,i="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType;a&&this.processPointerOverOut(e,t,n),this.moveWhenInside&&!n||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),a&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var r=e.data,i=e.data.identifier,a="mouse"===r.pointerType||"pen"===r.pointerType,o=t.trackedPointers[i];n&&!o&&(o=t.trackedPointers[i]=new sa(i)),void 0!==o&&(n&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(t,"pointerover",e),a&&this.delayDispatchEvent(t,"mouseover",e)),a&&null===this.cursor&&(this.cursor=t.cursor)):o.over&&(o.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),a&&this.dispatchEvent(t,"mouseout",e),o.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t,n=e.pointerId;return 1===n||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[n]?t=this.activeInteractionData[n]:((t=this.interactionDataPool.pop()||new ia).identifier=n,this.activeInteractionData[n]=t),t.copyEvent(e),t},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];void 0===i.button&&(i.button=e.touches.length?1:0),void 0===i.buttons&&(i.buttons=e.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){var a=e;void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId=1),void 0===a.pressure&&(a.pressure=.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),a.isNormalized=!0,t.push(a)}else t.push(e);return t},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(wr()),da=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,t,n,r,i,a,o,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,l=u.items;this._aliasCount++;for(var c=0,d=l.length;c<d;c++)l[c][h](e,t,n,r,i,a,o,s);return l===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(e){return-1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(da.prototype,{dispatch:{value:da.prototype.emit},run:{value:da.prototype.emit}}),kr.PREFER_ENV=ir.any?ar.WEBGL:ar.WEBGL2,kr.STRICT_TEXTURE_CACHE=!1;var fa=[];function pa(e,t){if(!e)return null;var n="";if("string"==typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=fa.length-1;i>=0;--i){var a=fa[i];if(a.test&&a.test(e,n))return new a(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var ga=function(e,t){return ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ga(e,t)};function ma(e,t){function n(){this.constructor=e}ga(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var va=function(){return va=Object.assign||function(e){for(var t,n=arguments,r=1,i=arguments.length;r<i;r++)for(var a in t=n[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},va.apply(this,arguments)},ya=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new da("setRealSize"),this.onUpdate=new da("update"),this.onError=new da("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),ba=function(e){function t(t,n){var r=this,i=n||{},a=i.width,o=i.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return(r=e.call(this,a,o)||this).data=t,r}return ma(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vr.UNPACK);var i=t.realWidth,a=t.realHeight;return n.width===i&&n.height===a?r.texSubImage2D(t.target,0,0,0,i,a,t.format,n.type,this.data):(n.width=i,n.height=a,r.texImage2D(t.target,0,n.internalFormat,i,a,0,t.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(ya),_a={scaleMode:pr.NEAREST,format:lr.RGBA,alphaMode:vr.NPM},Ea=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this,i=(n=n||{}).alphaMode,a=n.mipmap,o=n.anisotropicLevel,s=n.scaleMode,u=n.width,h=n.height,l=n.wrapMode,c=n.format,d=n.type,f=n.target,p=n.resolution,g=n.resourceOptions;return!t||t instanceof ya||((t=pa(t,g)).internal=!0),r.resolution=p||kr.RESOLUTION,r.width=Math.round((u||0)*r.resolution)/r.resolution,r.height=Math.round((h||0)*r.resolution)/r.resolution,r._mipmap=void 0!==a?a:kr.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==o?o:kr.ANISOTROPIC_LEVEL,r._wrapMode=l||kr.WRAP_MODE,r._scaleMode=void 0!==s?s:kr.SCALE_MODE,r.format=c||lr.RGBA,r.type=d||dr.UNSIGNED_BYTE,r.target=f||cr.TEXTURE_2D,r.alphaMode=void 0!==i?i:vr.UNPACK,r.uid=qr(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=u>0&&h>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}return ma(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)},t.prototype.setRealSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=zr(this.realWidth)&&zr(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ni[this.cacheId],delete ti[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,r){void 0===r&&(r=kr.STRICT_TEXTURE_CACHE);var i="string"==typeof e,a=null;if(i)a=e;else{if(!e._pixiId){var o=n&&n.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+qr()}a=e._pixiId}var s=ni[a];if(i&&r&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||((s=new t(e,n)).cacheId=a,t.addToCache(s,a)),s},t.fromBuffer=function(e,n,r,i){e=e||new Float32Array(n*r*4);var a=new ba(e,{width:n,height:r}),o=e instanceof Float32Array?dr.FLOAT:dr.UNSIGNED_BYTE;return new t(a,Object.assign(_a,i||{width:n,height:r,type:o}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),ni[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),ni[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=ni[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete ni[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete ni[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(wr()),Ta=function(e){function t(t,n){var r=this,i=n||{},a=i.width,o=i.height;(r=e.call(this,a,o)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<t;s++){var u=new Ea;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}return ma(t,e),t.prototype.initFromArray=function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof ya?this.addResourceAt(e[n],n):this.addResourceAt(pa(e[n],t),n))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)})),this._load},t}(ya),xa=function(e){function t(t,n){var r,i,a=this,o=n||{},s=o.width,u=o.height;return Array.isArray(t)?(r=t,i=t.length):i=t,a=e.call(this,i,{width:s,height:u})||this,r&&a.initFromArray(r,n),a}return ma(t,e),t.prototype.addBaseTextureAt=function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this},t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=cr.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,t,n){var r=this,i=r.length,a=r.itemDirtyIds,o=r.items,s=e.gl;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(var u=0;u<i;u++){var h=o[u];a[u]<h.dirtyId&&(a[u]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,t.format,n.type,h.resource.source))}return!0},t}(Ta),ka=function(e){function t(t){var n=this,r=t,i=r.naturalWidth||r.videoWidth||r.width,a=r.naturalHeight||r.videoHeight||r.height;return(n=e.call(this,i,a)||this).source=t,n.noSubImage=!1,n}return ma(t,e),t.crossOrigin=function(e,t,n){void 0===n&&0!==t.indexOf("data:")?e.crossOrigin=function(e,t){if(void 0===t&&(t=globalThis.location),0===e.indexOf("data:"))return"";t=t||globalThis.location,$r||($r=document.createElement("a")),$r.href=e;var n=Cr.parse($r.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}(t):!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous")},t.prototype.upload=function(e,t,n,r){var i=e.gl,a=t.realWidth,o=t.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vr.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==a||n.height!==o?(n.width=a,n.height=o,i.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,n.type,r),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(n,r),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(ya),Sa=function(e){function t(t){return e.call(this,t)||this}return ma(t,e),t.test=function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(ka),wa=function(e){function t(n,r){var i=this,a=r||{},o=a.width,s=a.height,u=a.autoLoad,h=a.linkBaseTexture;if(n&&n.length!==t.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=e.call(this,6,{width:o,height:s})||this;for(var l=0;l<t.SIDES;l++)i.items[l].target=cr.TEXTURE_CUBE_MAP_POSITIVE_X+l;return i.linkBaseTexture=!1!==h,n&&i.initFromArray(n,r),!1!==u&&i.load(),i}return ma(t,e),t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=cr.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,t,n){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=cr.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},t.prototype.upload=function(e,n,r){for(var i=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];i[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[a]=o.dirtyId):i[a]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Ta),Ma=function(e){function t(t,n){var r=this;if(n=n||{},!(t instanceof HTMLImageElement)){var i=new Image;ka.crossOrigin(i,t,n.crossorigin),i.src=t,t=i}return r=e.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:kr.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return ma(t,e),t.prototype.load=function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})}))),this._load},t.prototype.process=function(){var e=this,t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((function(e){return e.blob()})).then((function(r){return n(r,0,0,t.width,t.height,{premultiplyAlpha:e.alphaMode===vr.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process},t.prototype.upload=function(t,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,n,r,this.bitmap),!this.preserveBitmap){var i=!0,a=n._glTextures;for(var o in a){var s=a[o];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},t}(ka),Aa=function(e){function t(t,n){var r=this;return n=n||{},(r=e.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return ma(t,e),t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise((function(n){if(e._resolve=function(){e.resize(e.source.width,e.source.height),n(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}))),this._load},t.prototype._loadSvg=function(){var e=this,t=new Image;ka.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,a=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,a=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),a=Math.round(a);var o=e.source;o.width=i,o.height=a,o._pixiId="canvas_"+qr(),o.getContext("2d").drawImage(t,0,0,n,r,0,0,i,a),e._resolve(),e._resolve=null}}},t.getSize=function(e){var n=t.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,n){return"svg"===n||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(ka),Ra=function(e){function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var o=n[0].src||n[0];ka.crossOrigin(a,o,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),h=n[s],l=h.src,c=h.mime,d=(l=l||n[s]).split("?").shift().toLowerCase(),f=d.slice(d.lastIndexOf(".")+1);c=c||t.MIME_TYPES[f]||"video/"+f,u.src=l,u.type=c,a.appendChild(u)}n=a}return(i=e.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return ma(t,e),t.prototype.update=function(t){if(!this.destroyed){var n=na.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){e.valid?n(e):(e._resolve=n,t.load())})),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(na.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(na.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(na.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(na.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(na.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(ka),Ca=function(e){function t(t){return e.call(this,t)||this}return ma(t,e),t.test=function(e){return!!globalThis.createImageBitmap&&e instanceof ImageBitmap},t}(ka);fa.push(Ma,Ca,Sa,Ra,Aa,ba,wa,xa);var Pa={__proto__:null,Resource:ya,BaseImageResource:ka,INSTALLED:fa,autoDetectResource:pa,AbstractMultiResource:Ta,ArrayResource:xa,BufferResource:ba,CanvasResource:Sa,CubeResource:wa,ImageResource:Ma,SVGResource:Aa,VideoResource:Ra,ImageBitmapResource:Ca},Ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ma(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vr.UNPACK);var i=t.realWidth,a=t.realHeight;return n.width===i&&n.height===a?r.texSubImage2D(t.target,0,0,0,i,a,t.format,n.type,this.data):(n.width=i,n.height=a,r.texImage2D(t.target,0,n.internalFormat,i,a,0,t.format,n.type,this.data)),!0},t}(ba),Na=function(){function e(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new da("disposeFramebuffer"),this.multisample=Tr.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new Ea(null,{scaleMode:pr.NEAREST,resolution:1,mipmap:mr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Ea(new Ia(null,{width:this.width,height:this.height}),{scaleMode:pr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:mr.OFF,format:lr.DEPTH_COMPONENT,type:dr.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(e/i,t/i))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),Oa=function(e){function t(t){void 0===t&&(t={});var n=this;if("number"==typeof t){var r=arguments[0],i=arguments[1],a=arguments[2],o=arguments[3];t={width:r,height:i,scaleMode:a,resolution:o}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:Tr.NONE,(n=e.call(this,null,t)||this).mipmap=mr.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Na(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=t.multisample,n.maskStack=[],n.filterStack=[{}],n}return ma(t,e),t.prototype.resize=function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Ea),Da=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,n){var r=t.width,i=t.height;if(n){var a=e.width/2/r,o=e.height/2/i,s=e.x/r+a,u=e.y/i+o;n=Si.add(n,Si.NW),this.x0=s+a*Si.uX(n),this.y0=u+o*Si.uY(n),n=Si.add(n,2),this.x1=s+a*Si.uX(n),this.y1=u+o*Si.uY(n),n=Si.add(n,2),this.x2=s+a*Si.uX(n),this.y2=u+o*Si.uY(n),n=Si.add(n,2),this.x3=s+a*Si.uX(n),this.y3=u+o*Si.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},e}(),La=new Da;function Ba(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Fa=function(e){function t(n,r,i,a,o,s){var u=e.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new ci(0,0,1,1)),n instanceof t&&(n=n.baseTexture),u.baseTexture=n,u._frame=r,u.trim=a,u.valid=!1,u._uvs=La,u.uvMatrix=null,u.orig=i||r,u._rotate=Number(o||0),!0===o)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new hi(s.x,s.y):new hi(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=r:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return ma(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture.resource;n&&n.url&&ti[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new t(this.baseTexture,!this.noFrame&&e,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=e),r},t.prototype.updateUvs=function(){this._uvs===La&&(this._uvs=new Da),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=kr.STRICT_TEXTURE_CACHE);var i="string"==typeof e,a=null;if(i)a=e;else if(e instanceof Ea){if(!e.cacheId){var o=n&&n.pixiIdPrefix||"pixiid";e.cacheId=o+"-"+qr(),Ea.addToCache(e,e.cacheId)}a=e.cacheId}else e._pixiId||(o=n&&n.pixiIdPrefix||"pixiid",e._pixiId=o+"_"+qr()),a=e._pixiId;var s=ti[a];if(i&&r&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||e instanceof Ea?!s&&e instanceof Ea&&(s=new t(e),t.addToCache(s,a)):(n.resolution||(n.resolution=ii(e)),(s=new t(new Ea(e,n))).baseTexture.cacheId=a,Ea.addToCache(s.baseTexture,a),t.addToCache(s,a)),s},t.fromURL=function(e,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=t.from(e,Object.assign({resourceOptions:r},n),!1),a=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):a.load().then((function(){return Promise.resolve(i)}))},t.fromBuffer=function(e,n,r,i){return new t(Ea.fromBuffer(e,n,r,i))},t.fromLoader=function(e,n,r,i){var a=new Ea(e,Object.assign({scaleMode:kr.SCALE_MODE,resolution:ii(n)},i)),o=a.resource;o instanceof Ma&&(o.url=n);var s=new t(a);return r||(r=n),Ea.addToCache(s.baseTexture,r),t.addToCache(s,r),r!==n&&(Ea.addToCache(s.baseTexture,n),t.addToCache(s,n)),s.baseTexture.valid?Promise.resolve(s):new Promise((function(e){s.baseTexture.once("loaded",(function(){return e(s)}))}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),ti[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),ti[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=ti[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete ti[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)ti[e.textureCacheIds[r]]===e&&delete ti[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,a=t+r>this.baseTexture.width,o=n+i>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or",u="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,h="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+h)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new Ea),Ba(t._EMPTY),Ba(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(new Ea(new Sa(e))),Ba(t._WHITE),Ba(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(wr()),Ga=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return ma(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(e*r)/r,a=Math.round(t*r)/r;this.valid=i>0&&a>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(i,a),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof e&&(Zr("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:r[0],scaleMode:r[1],resolution:r[2]}),new t(new Oa(e))},t}(Fa),Ua=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t,n){void 0===n&&(n=Tr.NONE);var r=new Oa(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Ga(r)},e.prototype.getOptimalTexture=function(e,t,n,r){var i;void 0===n&&(n=1),void 0===r&&(r=Tr.NONE),e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=r>1?-r:-1:(i=((65535&(e=Xr(e)))<<16|65535&(t=Xr(t)))>>>0,r>1&&(i+=4294967296*r)),this.texturePool[i]||(this.texturePool[i]=[]);var a=this.texturePool[i].pop();return a||(a=this.createTexture(e,t,r)),a.filterPoolKey=i,a.setResolution(n),a},e.prototype.getFilterTexture=function(e,t,n){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||Tr.NONE);return r.filterFrame=e.filterFrame,r},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},e.SCREEN_KEY=-1,e}(),Ha=function(){function e(e,t,n,r,i,a,o){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=dr.FLOAT),this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=i,this.start=a,this.instance=o}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,r,i,a){return new e(t,n,r,i,a)},e}(),ja=0,Ka=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=ja++,this.disposeRunner=new da("disposeBuffer")}return e.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===xr.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?xr.ELEMENT_ARRAY_BUFFER:xr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),Xa={Float32Array,Uint32Array,Int32Array,Uint8Array},za={5126:4,5123:2,5121:1},Va=0,Wa={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Ya=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Va++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new da("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,n,r,i,a,o,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Ka||(t instanceof Array&&(t=new Float32Array(t)),t=new Ka(t));var u=e.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],t,n,r,i);return this}var l=this.buffers.indexOf(t);return-1===l&&(this.buffers.push(t),l=this.buffers.length-1),this.attributes[e]=new Ha(l,n,r,i,a,o,s),this.instanced=this.instanced||s,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof Ka||(e instanceof Array&&(e=new Uint16Array(e)),e=new Ka(e)),e.type=xr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new Ka;for(e in this.attributes){var i=this.attributes[e],a=this.buffers[i.buffer];t.push(a.data),n.push(i.size*za[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},a=0;a<e.length;a++)r+=t[a],n+=e[a].length;var o=new ArrayBuffer(4*n),s=null,u=0;for(a=0;a<e.length;a++){var h=t[a],l=e[a],c=Kr(l);i[c]||(i[c]=new Xa[c](o)),s=i[c];for(var d=0;d<l.length;d++)s[(d/h|0)*r+u+d%h]=l[d];u+=h}return new Float32Array(o)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new Ka(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];t.attributes[n]=new Ha(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=xr.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var n,r=new e,i=[],a=[],o=[],s=0;s<t.length;s++){n=t[s];for(var u=0;u<n.buffers.length;u++)a[u]=a[u]||0,a[u]+=n.buffers[u].data.length,o[u]=0}for(s=0;s<n.buffers.length;s++)i[s]=new(Wa[Kr(n.buffers[s].data)])(a[s]),r.buffers[s]=new Ka(i[s]);for(s=0;s<t.length;s++)for(n=t[s],u=0;u<n.buffers.length;u++)i[u].set(n.buffers[u].data,o[u]),o[u]+=n.buffers[u].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=xr.ELEMENT_ARRAY_BUFFER;var h=0,l=0,c=0,d=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){d=s;break}for(var s in n.attributes){var f=n.attributes[s];(0|f.buffer)===d&&(l+=f.size*za[f.type]/4)}for(s=0;s<t.length;s++){var p=t[s].indexBuffer.data;for(u=0;u<p.length;u++)r.indexBuffer.data[u+c]+=h;h+=t[s].buffers[d].data.length/l,c+=p.length}}return r},e}(),Ja=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return ma(t,e),t}(Ya),qa=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Ka(t.vertices),t.uvBuffer=new Ka(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return ma(t,e),t.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Ya),Qa=0,Za=function(){function e(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Qa++,this.static=!!t,this.ubo=!!n,e instanceof Ka?(this.buffer=e,this.buffer.type=xr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Ka(new Float32Array(1)),this.buffer.type=xr.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(n,r)},e.from=function(t,n,r){return new e(t,n,r)},e.uboFrom=function(t,n){return new e(t,null==n||n,!0)},e}(),$a=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Tr.NONE,this.sourceFrame=new ci,this.destinationFrame=new ci,this.bindingSourceFrame=new ci,this.bindingDestinationFrame=new ci,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),eo=[new hi,new hi,new hi,new hi],to=new vi,no=function(){function e(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Ua,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Ja,this.quadUv=new qa,this.tempRect=new ci,this.activeState={},this.globalUniforms=new Za({outputFrame:new ci,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(e,t){for(var n,r,i=this.renderer,a=this.defaultFilterStack,o=this.statePool.pop()||new $a,s=this.renderer.renderTexture,u=t[0].resolution,h=t[0].multisample,l=t[0].padding,c=t[0].autoFit,d=null===(n=t[0].legacy)||void 0===n||n,f=1;f<t.length;f++){var p=t[f];u=Math.min(u,p.resolution),h=Math.min(h,p.multisample),l=this.useMaxPadding?Math.max(l,p.padding):l+p.padding,c=c&&p.autoFit,d=d||null===(r=p.legacy)||void 0===r||r}1===a.length&&(this.defaultFilterStack[0].renderTexture=s.current),a.push(o),o.resolution=u,o.multisample=h,o.legacy=d,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(l);var g=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(to.copyFrom(i.projection.transform).invert(),g),c?(o.sourceFrame.fit(g),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(g)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,u,h),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=o.sourceFrame.width,m.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(s.sourceFrame),o.bindingDestinationFrame.copyFrom(s.destinationFrame),o.transform=i.projection.transform,i.projection.transform=null,s.bind(o.renderTexture,o.sourceFrame,m),i.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,a=r.inputPixel,o=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],a[0]=Math.round(i[0]*t.resolution),a[1]=Math.round(i[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=t.sourceFrame.width*i[2]-.5*a[2],o[3]=t.sourceFrame.height*i[3]-.5*a[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,u.renderTexture,yr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var h=t.renderTexture,l=this.getOptimalFilterTexture(h.width,h.height,t.resolution);l.filterFrame=h.filterFrame;var c=0;for(c=0;c<n.length-1;++c){1===c&&t.multisample>1&&((l=this.getOptimalFilterTexture(h.width,h.height,t.resolution)).filterFrame=h.filterFrame),n[c].apply(this,h,l,yr.CLEAR,t);var d=h;h=l,l=d}n[c].apply(this,h,u.renderTexture,yr.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(l)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(e,t){void 0===t&&(t=yr.CLEAR);var n=this.renderer,r=n.renderTexture,i=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,r.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=1&i.stateId||this.forceClear;(t===yr.CLEAR||t===yr.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(e,t,n,r){var i=this.renderer;i.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(hr.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(hr.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,a=t._texture.orig,o=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(vi.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/a.width,1/a.height),o.translate(t.anchor.x,t.anchor.y),o},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=Tr.NONE),this.texturePool.getOptimalTexture(e,t,n,r)},e.prototype.getFilterTexture=function(e,t,n){if("number"==typeof e){var r=e;e=t,t=r}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||Tr.NONE);return i.filterFrame=e.filterFrame,i},e.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(e,t){var n=eo[0],r=eo[1],i=eo[2],a=eo[3];n.set(t.left,t.top),r.set(t.left,t.bottom),i.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(i,i),e.apply(a,a);var o=Math.min(n.x,r.x,i.x,a.x),s=Math.min(n.y,r.y,i.y,a.y),u=Math.max(n.x,r.x,i.x,a.x),h=Math.max(n.y,r.y,i.y,a.y);t.x=o,t.y=s,t.width=u-o,t.height=h-s},e.prototype.roundFrame=function(e,t,n,r,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){var a=i.a,o=i.b,s=i.c,u=i.d;if((Math.abs(o)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}(i=i?to.copyFrom(i):to.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}},e}(),ro=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),io=function(){function e(e){this.renderer=e,this.emptyRenderer=new ro(e),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)},e.prototype.boundArray=function(e,t,n,r){for(var i=e.elements,a=e.ids,o=e.count,s=0,u=0;u<o;u++){var h=i[u],l=h._batchLocation;if(l>=0&&l<r&&t[l]===h)a[u]=l;else for(;s<r;){var c=t[s];if(!c||c._batchEnabled!==n||c._batchLocation!==s){a[u]=s,h._batchLocation=s,t[s]=h;break}s++}}},e.prototype.destroy=function(){this.renderer=null},e}(),ao=0,oo=function(){function e(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=ao++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=ao++,this.renderer.runners.contextChange.emit(e)},e.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},e.prototype.createContext=function(e,t){var n;if(kr.PREFER_ENV>=ar.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(e){e.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),so=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Tr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},uo=new ci,ho=function(){function e(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Na(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ci,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;kr.PREFER_ENV===ar.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},e.prototype.bind=function(e,t,n){void 0===n&&(n=0);var r=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var s=t.width>>n,u=t.height>>n,h=s/t.width;this.setViewport(t.x*h,t.y*h,s,u)}else s=e.width>>n,u=e.height>>n,this.setViewport(0,0,s,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(e,t,n,r){var i=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===e&&i.y===t||(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(e,t,n,r,i){void 0===i&&(i=sr.COLOR|sr.DEPTH);var a=this.gl;a.clearColor(e,t,n,r),a.clear(i)},e.prototype.initFramebuffer=function(e){var t=this.gl,n=new so(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height)),n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var r=e.colorTextures,i=r.length;t.drawBuffers||(i=Math.min(i,1));for(var a=0;a<i;a++){var o=r[a],s=o.parentTextureArray||o;this.renderer.texture.bind(s,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},e.prototype.updateFramebuffer=function(e,t){var n=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures,a=i.length;n.drawBuffers||(a=Math.min(a,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var o=[],s=0;s<a;s++){var u=i[s],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,h._glTextures[this.CONTEXT_UID].texture,t),o.push(n.COLOR_ATTACHMENT0+s))}if(o.length>1&&n.drawBuffers(o),e.depthTexture&&this.writeDepthTexture){var l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},e.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},e.prototype.detectSamples=function(e){var t=this.msaaSamples,n=Tr.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=Tr.NONE),n},e.prototype.blit=function(e,t,n){var r=this,i=r.current,a=r.renderer,o=r.gl,s=r.CONTEXT_UID;if(2===a.context.webGLVersion&&i){var u=i.glFramebuffers[s];if(u){if(!e){if(!u.msaaBuffer)return;var h=i.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new Na(i.width,i.height),u.blitFramebuffer.addColorTexture(0,h)),(e=u.blitFramebuffer).colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),e.width===i.width&&e.height===i.height||(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||((t=uo).width=i.width,t.height=i.height),n||(n=t);var l=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},e.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var n=e.width,r=e.height,i=this.gl,a=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,a),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=a,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ci},e.prototype.destroy=function(){this.renderer=null},e}(),lo={5126:4,5123:2,5121:1},co=function(){function e(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;kr.PREFER_ENV===ar.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,a){return r.drawElementsInstancedANGLE(e,t,n,i,a)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var a=r[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var r=e.buffers[n];t.update(r)}},e.prototype.checkCompatibility=function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},e.prototype.getSignature=function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var a in n)r[a]&&i.push(a,r[a].location);return i.join("-")},e.prototype.initGeometryVao=function(e,t,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,o=t.program;o.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,o);var s=this.getSignature(e,o),u=e.glVertexArrayObjects[this.CONTEXT_UID],h=u[s];if(h)return u[o.id]=h,h;var l=e.buffers,c=e.attributes,d={},f={};for(var p in l)d[p]=0,f[p]=0;for(var p in c)!c[p].size&&o.attributeData[p]?c[p].size=o.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[p].buffer]+=c[p].size*lo[c[p].type];for(var p in c){var g=c[p],m=g.size;void 0===g.stride&&(d[g.buffer]===m*lo[g.type]?g.stride=0:g.stride=d[g.buffer]),void 0===g.start&&(g.start=f[g.buffer],f[g.buffer]+=m*lo[g.type])}h=r.createVertexArray(),r.bindVertexArray(h);for(var v=0;v<l.length;v++){var y=l[v];a.bind(y),n&&y._glBuffers[i].refCount++}return this.activateVao(e,o),this._activeVao=h,u[o.id]=h,u[s]=h,h},e.prototype.disposeGeometry=function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,a=e.buffers,o=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(o)for(var s=0;s<a.length;s++){var u=a[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||t||o.dispose(a[s],t))}if(!t)for(var h in r)if("g"===h[0]){var l=r[h];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)},e.prototype.activateVao=function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);var s=null;for(var u in o){var h=o[u],l=a[h.buffer],c=l._glBuffers[r];if(t.attributeData[u]){s!==c&&(i.bind(l),s=c);var d=t.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},e.prototype.draw=function(e,t,n,r){var i=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,s=2===o?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?a.instanced?i.drawElementsInstanced(e,t||a.indexBuffer.data.length,s,(n||0)*o,r||1):i.drawElements(e,t||a.indexBuffer.data.length,s,(n||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?i.drawArraysInstanced(e,n,t||a.getSize(),r||1):i.drawArrays(e,n,t||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),fo=function(){function e(e){void 0===e&&(e=null),this.type=Er.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=kr.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Er.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function po(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function go(e,t){var n=e.getShaderSource(t).split("\n").map((function(e,t){return t+": "+e})),r=e.getShaderInfoLog(t),i=r.split("\n"),a={},o=i.map((function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(e){return!(!e||a[e]||(a[e]=!0,0))})),s=[""];o.forEach((function(e){n[e-1]="%c"+n[e-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function mo(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function vo(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return mo(2*t);case"bvec3":return mo(3*t);case"bvec4":return mo(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var yo,bo={},_o=bo;function Eo(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===_r.HIGH&&n!==_r.HIGH&&(r=_r.MEDIUM),"precision "+r+" float;\n"+e}return n!==_r.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var To={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function xo(e){return To[e]}var ko=null,So={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function wo(e,t){if(!ko){var n=Object.keys(So);ko={};for(var r=0;r<n.length;++r){var i=n[r];ko[e[i]]=So[i]}}return ko[t]}var Mo,Ao=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '},codeUbo:function(e){return"\n                var "+e+"_matrix = uv."+e+".toArray(true);\n\n                data[offset] = "+e+"_matrix[0];\n                data[offset+1] = "+e+"_matrix[1];\n                data[offset+2] = "+e+"_matrix[2];\n        \n                data[offset + 4] = "+e+"_matrix[3];\n                data[offset + 5] = "+e+"_matrix[4];\n                data[offset + 6] = "+e+"_matrix[5];\n        \n                data[offset + 8] = "+e+"_matrix[6];\n                data[offset + 9] = "+e+"_matrix[7];\n                data[offset + 10] = "+e+"_matrix[8];\n            "}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'},codeUbo:function(e){return"\n                v = uv."+e+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(e){return"\n                    v = uv."+e+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Ro={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Co={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Po=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Io(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}var No=0,Oo={},Do=function(){function e(t,n,r){void 0===r&&(r="pixi-shader"),this.id=No++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Oo[r]?(Oo[r]++,r+="-"+Oo[r]):Oo[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Eo(this.vertexSrc,kr.PRECISION_VERTEX,_r.HIGH),this.fragmentSrc=Eo(this.fragmentSrc,kr.PRECISION_FRAGMENT,function(){if(!yo){yo=_r.MEDIUM;var e=function(){if(_o===bo||_o&&_o.isContextLost()){var e=document.createElement("canvas"),t=void 0;kr.PREFER_ENV>=ar.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),_o=t}return _o}();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);yo=t.precision?_r.HIGH:_r.MEDIUM}}return yo}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=t+n,a=ei[i];return a||(ei[i]=a=new e(t,n,r)),a},e}(),Lo=function(){function e(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Za?t:new Za(t):new Za({})}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,r){return new e(Do.from(t,n),r)},e}(),Bo=function(){function e(){this.data=0,this.blendMode=ur.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ur.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),Fo=function(e){function t(n,r,i){var a=this,o=Do.from(n||t.defaultVertexSrc,r||t.defaultFragmentSrc);return(a=e.call(this,o,i)||this).padding=0,a.resolution=kr.FILTER_RESOLUTION,a.multisample=kr.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Bo,a}return ma(t,e),t.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}(Lo),Go=new vi,Uo=function(){function e(e,t){this._texture=e,this.mapCoord=new vi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],a=e[r+1];t[r]=i*n.a+a*n.c+n.tx,t[r+1]=i*n.b+a*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(Go.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Go));var a=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(t._frame.x+s+u)/a.width,o[1]=(t._frame.y+s+u)/a.height,o[2]=(t._frame.x+t._frame.width-s+u)/a.width,o[3]=(t._frame.y+t._frame.height-s+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0},e}(),Ho=function(e){function t(t,n,r){var i=this,a=null;return"string"!=typeof t&&void 0===n&&void 0===r&&(a=t,t=void 0,n=void 0,r=void 0),(i=e.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=a,i.maskMatrix=new vi,i}return ma(t,e),Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,t,n,r){var i=this._maskSprite,a=i._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Uo(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))},t}(Fo),jo=function(){function e(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},e.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new fo;r.pooled=!0,r.maskObject=t,n=r}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n.autoDetect&&this.detect(n),n._target=e,n.type!==Er.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Er.SCISSOR:this.renderer.scissor.push(n);break;case Er.STENCIL:this.renderer.stencil.push(n);break;case Er.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===Er.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case Er.SCISSOR:this.renderer.scissor.pop();break;case Er.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Er.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===Er.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(e){e.maskObject.isSprite?e.type=Er.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Er.SCISSOR:e.type=Er.STENCIL},e.prototype.pushSpriteMask=function(e){var t,n,r=e.maskObject,i=e._target,a=e._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex])||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Ho]);var o,s,u=this.renderer,h=u.renderTexture;if(h.current){var l=h.current;o=e.resolution||l.resolution,s=null!==(t=e.multisample)&&void 0!==t?t:l.multisample}else o=e.resolution||u.resolution,s=null!==(n=e.multisample)&&void 0!==n?n:u.multisample;a[0].resolution=o,a[0].multisample=s,a[0].maskSprite=r;var c=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,a),i.filterArea=c,e._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),Ko=function(){function e(e){this.renderer=e,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),Xo=new vi,zo=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return ma(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){if(!e._scissorRectLocal){var t=e._scissorRect,n=e.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var a=n.getBounds();this.roundFrameToPixels(a,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,t&&a.fit(t),e._scissorRectLocal=a}},t.isMatrixRotated=function(e){if(!e)return!1;var t=e.a,n=e.b,r=e.c,i=e.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)},t.prototype.testScissor=function(e){var n=e.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(t.isMatrixRotated(n.worldTransform))return!1;if(t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var r=e._scissorRectLocal;return r.width>0&&r.height>0},t.prototype.roundFrameToPixels=function(e,n,r,i,a){t.isMatrixRotated(a)||((a=a?Xo.copyFrom(a):Xo.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(a,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e,t=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)},t}(Ko),Vo=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return ma(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(Ko),Wo=function(){function e(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new vi,this.transform=null}return e.prototype.update=function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(e,t,n,r){var i=this.projectionMatrix,a=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=a*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-a-t.y*i.d},e.prototype.setTransform=function(e){},e.prototype.destroy=function(){this.renderer=null},e}(),Yo=new ci,Jo=new ci,qo=function(){function e(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ci,this.destinationFrame=new ci,this.viewportFrame=new ci}return e.prototype.bind=function(e,t,n){void 0===e&&(e=null);var r,i,a,o=this.renderer;this.current=e,e?(a=(r=e.baseTexture).resolution,t||(Yo.width=e.frame.width,Yo.height=e.frame.height,t=Yo),n||(Jo.x=e.frame.x,Jo.y=e.frame.y,Jo.width=t.width,Jo.height=t.height,n=Jo),i=r.framebuffer):(a=o.resolution,t||(Yo.width=o.screen.width,Yo.height=o.screen.height,t=Yo),n||((n=Yo).width=t.width,n.height=t.height));var s=this.viewportFrame;s.x=n.x*a,s.y=n.y*a,s.width=n.width*a,s.height=n.height*a,e||(s.y=o.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,t,a,!i),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var a=this.viewportFrame,o=a.x,s=a.y,u=a.width,h=a.height;o=Math.round(o),s=Math.round(s),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,s,u,h)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),i&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function Qo(e,t,n,r,i){n.buffer.update(i)}var Zo={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},$o={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var es=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();var ts=0,ns={textureCount:0,uboCount:0},rs=function(){function e(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=ts++}return e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Mo)return Mo;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Mo=!0===e({a:"b"},"a","b")}catch(e){Mo=!1}return Mo}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(e){this.gl=e,this.reset()},e.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(ns.textureCount=0,ns.uboCount=0,this.syncUniformGroup(e.uniformGroup,ns)),r},e.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},e.prototype.syncUniformGroup=function(e,t){var n=this.getGlProgram();e.static&&e.dirtyId===n.uniformDirtyGroups[e.id]||(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},e.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in e.uniforms){var a=t[i];if(a){for(var o=e.uniforms[i],s=!1,u=0;u<Ao.length;u++)if(Ao[u].test(a,o)){r.push(Ao[u].code(i,o)),s=!0;break}if(!s){var h=(1===a.size?Ro:Co)[a.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+h+";")}}else(null===(n=e.uniforms[i])||void 0===n?void 0:n.group)&&(e.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(e,t){var n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;var r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,ns,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(e,t,n){var r=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var i=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=function(e,t){if(!e.autoManage)return{size:0,syncFunc:Qo};for(var n=function(e,t){var n=[];for(var r in e)t[r]&&n.push(t[r]);return n.sort((function(e,t){return e.index-t.index})),n}(e.uniforms,t),r=function(e){for(var t=e.map((function(e){return{data:e,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,a=0;a<t.length;a++){var o=t[a];if(n=$o[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return{uboElements:t,size:i=16*Math.ceil(i/16)}}(n),i=r.uboElements,a=r.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<i.length;s++){for(var u=i[s],h=e.uniforms[u.data.name],l=u.data.name,c=!1,d=0;d<Ao.length;d++){var f=Ao[d];if(f.codeUbo&&f.test(u.data,h)){o.push("offset = "+u.offset/4+";",Ao[d].codeUbo(u.data.name,h)),c=!0;break}}if(!c)if(u.data.size>1){var p=xo(u.data.type),g=Math.max($o[u.data.type]/16,1),m=p/g,v=(4-m%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+u.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+u.data.size*g+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+v+";\n                }\n\n                ")}else{var y=Zo[u.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+u.offset/4+";\n                "+y+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var s=new Float32Array(o.size/4);e.buffer.update(s)}return t.uniformGroups[e.id]=o.syncFunc,t.uniformGroups[e.id]},e.prototype.getSignature=function(e,t,n){var r=e.uniforms,i=[n+"-"];for(var a in r)i.push(a),t[a]&&i.push(t[a].type);return i.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(e){var t=this.gl,n=e.program,r=function(e,t){var n=po(e,e.VERTEX_SHADER,t.vertexSrc),r=po(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||go(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||go(e,r),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,i,n,r),t.attributeData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=t.getActiveAttrib(e,i);if(0!==a.name.indexOf("gl_")){var o=wo(t,a.type),s={type:o,name:a.name,size:xo(o),location:t.getAttribLocation(e,a.name)};n[a.name]=s}}return n}(i,e),t.uniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=t.getActiveUniform(e,i),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),u=wo(t,a.type);n[o]={name:o,index:i,type:u,size:a.size,isArray:s,value:vo(u,a.size)}}return n}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var a=Object.keys(t.attributeData);a.sort((function(e,t){return e>t?1:-1}));for(var o=0;o<a.length;o++)t.attributeData[a[o]].location=o,e.bindAttribLocation(i,o,a[o]);e.linkProgram(i)}e.deleteShader(n),e.deleteShader(r);var s={};for(var o in t.uniformData){var u=t.uniformData[o];s[o]={location:e.getUniformLocation(i,o),value:vo(u.type,u.size)}}return new es(i,s)}(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}(),is=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ur.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Bo,this.defaultState.blend=!0}return e.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[ur.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.ADD]=[e.ONE,e.ONE],t[ur.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.NONE]=[0,0],t[ur.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ur.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ur.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ur.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ur.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ur.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ur.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ur.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ur.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ur.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},e.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},e.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(e){this.gl.depthMask(e)},e.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},e.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):t||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),as=function(){function e(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=kr.GC_MAX_IDLE,this.checkCountMax=kr.GC_MAX_CHECK_COUNT,this.mode=kr.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==br.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){var a=0;for(r=0;r<t.length;r++)null!==t[r]&&(t[a++]=t[r]);t.length=a}},e.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},e.prototype.destroy=function(){this.renderer=null},e}(),os=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=dr.UNSIGNED_BYTE,this.internalFormat=lr.RGBA,this.samplerType=0},ss=function(){function e(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ea,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var t,n,r,i,a,o,s,u,h,l,c,d,f,p,g,m,v,y,b,_,E,T,x;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?((t={})[dr.UNSIGNED_BYTE]=((n={})[lr.RGBA]=e.RGBA8,n[lr.RGB]=e.RGB8,n[lr.RG]=e.RG8,n[lr.RED]=e.R8,n[lr.RGBA_INTEGER]=e.RGBA8UI,n[lr.RGB_INTEGER]=e.RGB8UI,n[lr.RG_INTEGER]=e.RG8UI,n[lr.RED_INTEGER]=e.R8UI,n[lr.ALPHA]=e.ALPHA,n[lr.LUMINANCE]=e.LUMINANCE,n[lr.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,n),t[dr.BYTE]=((r={})[lr.RGBA]=e.RGBA8_SNORM,r[lr.RGB]=e.RGB8_SNORM,r[lr.RG]=e.RG8_SNORM,r[lr.RED]=e.R8_SNORM,r[lr.RGBA_INTEGER]=e.RGBA8I,r[lr.RGB_INTEGER]=e.RGB8I,r[lr.RG_INTEGER]=e.RG8I,r[lr.RED_INTEGER]=e.R8I,r),t[dr.UNSIGNED_SHORT]=((i={})[lr.RGBA_INTEGER]=e.RGBA16UI,i[lr.RGB_INTEGER]=e.RGB16UI,i[lr.RG_INTEGER]=e.RG16UI,i[lr.RED_INTEGER]=e.R16UI,i[lr.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[dr.SHORT]=((a={})[lr.RGBA_INTEGER]=e.RGBA16I,a[lr.RGB_INTEGER]=e.RGB16I,a[lr.RG_INTEGER]=e.RG16I,a[lr.RED_INTEGER]=e.R16I,a),t[dr.UNSIGNED_INT]=((o={})[lr.RGBA_INTEGER]=e.RGBA32UI,o[lr.RGB_INTEGER]=e.RGB32UI,o[lr.RG_INTEGER]=e.RG32UI,o[lr.RED_INTEGER]=e.R32UI,o[lr.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,o),t[dr.INT]=((s={})[lr.RGBA_INTEGER]=e.RGBA32I,s[lr.RGB_INTEGER]=e.RGB32I,s[lr.RG_INTEGER]=e.RG32I,s[lr.RED_INTEGER]=e.R32I,s),t[dr.FLOAT]=((u={})[lr.RGBA]=e.RGBA32F,u[lr.RGB]=e.RGB32F,u[lr.RG]=e.RG32F,u[lr.RED]=e.R32F,u[lr.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,u),t[dr.HALF_FLOAT]=((h={})[lr.RGBA]=e.RGBA16F,h[lr.RGB]=e.RGB16F,h[lr.RG]=e.RG16F,h[lr.RED]=e.R16F,h),t[dr.UNSIGNED_SHORT_5_6_5]=((l={})[lr.RGB]=e.RGB565,l),t[dr.UNSIGNED_SHORT_4_4_4_4]=((c={})[lr.RGBA]=e.RGBA4,c),t[dr.UNSIGNED_SHORT_5_5_5_1]=((d={})[lr.RGBA]=e.RGB5_A1,d),t[dr.UNSIGNED_INT_2_10_10_10_REV]=((f={})[lr.RGBA]=e.RGB10_A2,f[lr.RGBA_INTEGER]=e.RGB10_A2UI,f),t[dr.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[lr.RGB]=e.R11F_G11F_B10F,p),t[dr.UNSIGNED_INT_5_9_9_9_REV]=((g={})[lr.RGB]=e.RGB9_E5,g),t[dr.UNSIGNED_INT_24_8]=((m={})[lr.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,m),t[dr.FLOAT_32_UNSIGNED_INT_24_8_REV]=((v={})[lr.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,v),x=t):((y={})[dr.UNSIGNED_BYTE]=((b={})[lr.RGBA]=e.RGBA,b[lr.RGB]=e.RGB,b[lr.ALPHA]=e.ALPHA,b[lr.LUMINANCE]=e.LUMINANCE,b[lr.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,b),y[dr.UNSIGNED_SHORT_5_6_5]=((_={})[lr.RGB]=e.RGB,_),y[dr.UNSIGNED_SHORT_4_4_4_4]=((E={})[lr.RGBA]=e.RGBA,E),y[dr.UNSIGNED_SHORT_5_5_5_1]=((T={})[lr.RGBA]=e.RGBA,T),x=y),x}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new os(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new os(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(e,t){void 0===t&&(t=0);var n=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},e.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)},e.prototype.ensureSamplerType=function(e){var t=this,n=t.boundTextures,r=t.hasIntegerTextures,i=t.CONTEXT_UID;if(r)for(var a=e-1;a>=0;--a){var o=n[a];o&&o._glTextures[i].samplerType!==fr.FLOAT&&this.renderer.texture.unbind(o)}},e.prototype.initTexture=function(e){var t=new os(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(e,t){var n,r;t.internalFormat=null!==(r=null===(n=this.internalFormats[e.type])||void 0===n?void 0:n[e.format])&&void 0!==r?r:e.format,2===this.webGLVersion&&e.type===dr.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},e.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(n,e,t))t.samplerType!==fr.FLOAT&&(this.hasIntegerTextures=!0);else{var r=e.realWidth,i=e.realHeight,a=n.gl;(t.width!==r||t.height!==i||t.dirtyId<0)&&(t.width=r,t.height=i,a.texImage2D(e.target,0,t.internalFormat,r,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},e.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&Wr(this.managedTextures,r,1)}},e.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==mr.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=gr.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},e.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==mr.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===pr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===pr.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===pr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===pr.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),us={__proto__:null,FilterSystem:no,BatchSystem:io,ContextSystem:oo,FramebufferSystem:ho,GeometrySystem:co,MaskSystem:jo,ScissorSystem:zo,StencilSystem:Vo,ProjectionSystem:Wo,RenderTextureSystem:qo,ShaderSystem:rs,StateSystem:is,TextureGCSystem:as,TextureSystem:ss},hs=new vi,ls=function(e){function t(t,n){void 0===t&&(t=or.UNKNOWN);var r=e.call(this)||this;return n=Object.assign({},kr.RENDER_OPTIONS,n),r.options=n,r.type=t,r.screen=new ci(0,0,n.width,n.height),r.view=n.view||document.createElement("canvas"),r.resolution=n.resolution||kr.RESOLUTION,r.useContextAlpha=n.useContextAlpha,r.autoDensity=!!n.autoDensity,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Zr("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=n.transparent,r.backgroundAlpha=n.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}return ma(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(t*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},t.prototype.generateTexture=function(e,t,n,r){void 0===t&&(t={}),"number"==typeof t&&(Zr("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),t={scaleMode:t,resolution:n,region:r});var i=t.region,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["region"]);0===(r=i||e.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var o=Ga.create(va({width:r.width,height:r.height},a));return hs.tx=-r.x,hs.ty=-r.y,this.render(e,{renderTexture:o,clear:!1,transform:hs,skipUpdateTransform:!!e.parent}),o},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=or.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=Lr(e),Dr(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(wr()),cs=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ds=function(){function e(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)},e.prototype.bindBufferBase=function(e,t){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var i=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,i.buffer)}},e.prototype.bindBufferRange=function(e,t,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var a=e._glBuffers[i]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,a.buffer,256*n,256)},e.prototype.update=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n];if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var i=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,i)}},e.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)},e.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,n=this.gl;return e._glBuffers[t]=new cs(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]},e}(),fs=function(e){function t(n){var r=e.call(this,or.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new da("destroy"),contextChange:new da("contextChange"),reset:new da("reset"),update:new da("update"),postrender:new da("postrender"),prerender:new da("prerender"),resize:new da("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Za({projectionMatrix:new vi},!0),r.addSystem(jo,"mask").addSystem(oo,"context").addSystem(is,"state").addSystem(rs,"shader").addSystem(ss,"texture").addSystem(ds,"buffer").addSystem(co,"geometry").addSystem(ho,"framebuffer").addSystem(zo,"scissor").addSystem(Vo,"stencil").addSystem(Wo,"projection").addSystem(as,"textureGC").addSystem(no,"filter").addSystem(qo,"renderTexture").addSystem(io,"batch"),r.initPlugins(t.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Nr(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return ma(t,e),t.create=function(e){if(void 0===Pr&&(Pr=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:kr.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(e){return!1}}()),Pr)return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e,t=this.gl;if(1===this.context.webGLVersion){var n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n);e>=Tr.HIGH?this.multisample=Tr.HIGH:e>=Tr.MEDIUM?this.multisample=Tr.MEDIUM:e>=Tr.LOW?this.multisample=Tr.LOW:this.multisample=Tr.NONE},t.prototype.addSystem=function(e,t){var n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var r in this[t]=n,this.runners)this.runners[r].add(n);return this},t.prototype.render=function(e,t){var n,r,i,a;if(t&&(t instanceof Ga?(Zr("6.0.0","Renderer#render arguments changed, use options instead."),n=t,r=arguments[2],i=arguments[3],a=arguments[4]):(n=t.renderTexture,r=t.clear,i=t.transform,a=t.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=e),!a){var o=e.enableTempParent();e.updateTransform(),e.disableTempParent(o)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(t,n,r,i){void 0===n&&(n={});var a=e.prototype.generateTexture.call(this,t,n,r,i);return this.framebuffer.blit(),a},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return Zr("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n},t}(ls),ps="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",gs=function(){this.texArray=null,this.blend=0,this.type=hr.TRIANGLES,this.start=0,this.size=0,this.data=null},ms=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),vs=function(){function e(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),ys=function(e){function t(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Bo.for2d(),n.size=4*kr.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return ma(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;kr.PREFER_ENV===ar.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),kr.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=Po.replace(/%forloop%/gi,Io(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;e.length<r;)e.push(new gs);for(;n.length<i;)n.push(new ms);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,n=this.MAX_TEXTURES,r=t._textureArrayPool,i=this.renderer.batch,a=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++Ea._globalBatch,u=0,h=r[0],l=0;i.copyBoundTextures(a,n);for(var c=0;c<this._bufferSize;++c){var d=e[c];e[c]=null,d._batchEnabled!==s&&(h.count>=n&&(i.boundArray(h,a,s,n),this.buildDrawCalls(h,l,c),l=c,h=r[++u],++s),d._batchEnabled=s,d.touched=o,h.elements[h.count++]=d)}for(h.count>0&&(i.boundArray(h,a,s,n),this.buildDrawCalls(h,l,this._bufferSize),++u,++s),c=0;c<a.length;c++)a[c]=null;Ea._globalBatch=s},t.prototype.buildDrawCalls=function(e,n,r){var i=this,a=i._bufferedElements,o=i._attributeBuffer,s=i._indexBuffer,u=i.vertexSize,h=t._drawCallPool,l=this._dcIndex,c=this._aIndex,d=this._iIndex,f=h[l];f.start=this._iIndex,f.texArray=e;for(var p=n;p<r;++p){var g=a[p],m=g._texture.baseTexture,v=Gr[m.alphaMode?1:0][g.blendMode];a[p]=null,n<p&&f.blend!==v&&(f.size=d-f.start,n=p,(f=h[++l]).texArray=e,f.start=d),this.packInterleavedGeometry(g,o,s,c,d),c+=g.vertexData.length/2*u,d+=g.indices.length,f.blend=v}n<r&&(f.size=d-f.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,n=e._attributeBuffer,r=e._indexBuffer;kr.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,a=t._drawCallPool,o=null,s=0;s<e;s++){var u=a[s],h=u.texArray,l=u.type,c=u.size,d=u.start,f=u.blend;o!==h&&(o=h,this.bindAndClearTexArray(h)),this.state.blendMode=f,i.set(this.state),r.drawElements(l,c,r.UNSIGNED_SHORT,2*d)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),kr.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=Xr(Math.ceil(e/8)),n=Vr(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new vs(r*this.vertexSize*4)),i},t.prototype.getIndexBuffer=function(e){var t=Xr(Math.ceil(e/12)),n=Vr(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},t.prototype.packInterleavedGeometry=function(e,t,n,r,i){for(var a=t.uint32View,o=t.float32View,s=r/this.vertexSize,u=e.uvs,h=e.indices,l=e.vertexData,c=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=d<1&&e._texture.baseTexture.alphaMode?Hr(e._tintRGB,d):e._tintRGB+(255*d<<24),p=0;p<l.length;p+=2)o[r++]=l[p],o[r++]=l[p+1],o[r++]=u[p],o[r++]=u[p+1],a[r++]=f,o[r++]=c;for(p=0;p<h.length;p++)n[i++]=s+h[p]},t._drawCallPool=[],t._textureArrayPool=[],t}(ro),bs=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=Za.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Do(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new vi,default:this.defaultGroupCache[e]};return new Lo(this.programCache[e],i)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},e}(),_s=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._buffer=new Ka(null,t,!1),n._indexBuffer=new Ka(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,dr.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,dr.FLOAT).addAttribute("aColor",n._buffer,4,!0,dr.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,dr.FLOAT).addIndex(n._indexBuffer),n}return ma(t,e),t}(Ya),Es="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ts="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",xs=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:Es,fragment:Ts,geometryClass:_s,vertexSize:6},e),n=t.vertex,r=t.fragment,i=t.vertexSize,a=t.geometryClass;return function(e){function t(t){var o=e.call(this,t)||this;return o.shaderGenerator=new bs(n,r),o.geometryClass=a,o.vertexSize=i,o}return ma(t,e),t}(ys)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Es},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return Ts},enumerable:!1,configurable:!0}),e}(),ks=xs.create(),Ss={},ws=function(e){Object.defineProperty(Ss,e,{get:function(){return Zr("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),Pa[e]}})};for(var Ms in Pa)ws(Ms);var As={},Rs=function(e){Object.defineProperty(As,e,{get:function(){return Zr("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),us[e]}})};for(var Ms in us)Rs(Ms);var Cs=function(){function e(t){var n=this;this.stage=new Zi,t=Object.assign({forceCanvas:!1},t),this.renderer=function(e){return fs.create(e)}(t),e._plugins.forEach((function(e){e.init.call(n,t)}))}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach((function(e){e.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),Ps=function(){function e(){}return e.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame((function(){return t.resize()})))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,n;if(t.cancelResize(),t._resizeTo===globalThis.window)e=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=t._resizeTo;e=r.clientWidth,n=r.clientHeight}t.renderer.resize(e,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Cs.registerPlugin(Ps);var Is,Ns,Os,Ds,Ls,Bs,Fs,Gs,Us,Hs,js,Ks,Xs,zs,Vs,Ws,Ys,Js,qs,Qs=/iPhone/i,Zs=/iPod/i,$s=/iPad/i,eu=/\biOS-universal(?:.+)Mac\b/i,tu=/\bAndroid(?:.+)Mobile\b/i,nu=/Android/i,ru=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,iu=/Silk/i,au=/Windows Phone/i,ou=/\bWindows(?:.+)ARM\b/i,su=/BlackBerry/i,uu=/BB10/i,hu=/Opera Mini/i,lu=/\b(CriOS|Chrome)(?:.+)Mobile/i,cu=/Mobile(?:.+)Firefox\b/i,du=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream},fu=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),a={apple:{phone:i(Qs)&&!i(au),ipod:i(Zs),tablet:!i(Qs)&&(i($s)||du(t))&&!i(au),universal:i(eu),device:(i(Qs)||i(Zs)||i($s)||i(eu)||du(t))&&!i(au)},amazon:{phone:i(ru),tablet:!i(ru)&&i(iu),device:i(ru)||i(iu)},android:{phone:!i(au)&&i(ru)||!i(au)&&i(tu),tablet:!i(au)&&!i(ru)&&!i(tu)&&(i(iu)||i(nu)),device:!i(au)&&(i(ru)||i(iu)||i(tu)||i(nu))||i(/\bokhttp\b/i)},windows:{phone:i(au),tablet:i(ou),device:i(au)||i(ou)},other:{blackberry:i(su),blackberry10:i(uu),opera:i(hu),firefox:i(cu),chrome:i(lu),device:i(su)||i(uu)||i(hu)||i(cu)||i(lu)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(globalThis.navigator);!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(Is||(Is={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Ns||(Ns={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Os||(Os={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Ds||(Ds={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ls||(Ls={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Bs||(Bs={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Fs||(Fs={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Gs||(Gs={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(Us||(Us={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Hs||(Hs={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(js||(js={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Ks||(Ks={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Xs||(Xs={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(zs||(zs={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Vs||(Vs={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Ws||(Ws={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Ys||(Ys={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Js||(Js={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(qs||(qs={}));Ks.POW2,Js.NONE,function(e){var t,n=!0;(fu.tablet||fu.phone)&&(fu.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(n=!1),fu.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(n=!1))}(),Vs.AUTO,js.CLAMP,Hs.LINEAR,Ws.HIGH,fu.apple.device?Ws.HIGH:Ws.MEDIUM,fu.apple.device;var pu=!1,gu=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ci.EMPTY:((e=e||new ci(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addPointMatrix=function(e,t){var n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,u=n*t.x+i*t.y+o,h=r*t.x+a*t.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,a=e[0],o=e[1];t=a<t?a:t,n=o<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[2])<t?a:t,n=(o=e[3])<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[4])<t?a:t,n=(o=e[5])<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[6])<t?a:t,n=(o=e[7])<n?o:n,r=a>r?a:r,i=o>i?o:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)},e.prototype.addFrameMatrix=function(e,t,n,r,i){var a=e.a,o=e.b,s=e.c,u=e.d,h=e.tx,l=e.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,g=a*t+s*n+h,m=o*t+u*n+l;c=g<c?g:c,d=m<d?m:d,f=g>f?g:f,p=m>p?m:p,c=(g=a*r+s*n+h)<c?g:c,d=(m=o*r+u*n+l)<d?m:d,f=g>f?g:f,p=m>p?m:p,c=(g=a*t+s*i+h)<c?g:c,d=(m=o*t+u*i+l)<d?m:d,f=g>f?g:f,p=m>p?m:p,c=(g=a*r+s*i+h)<c?g:c,d=(m=o*r+u*i+l)<d?m:d,f=g>f?g:f,p=m>p?m:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addVertexData=function(e,t,n){for(var r=this.minX,i=this.minY,a=this.maxX,o=this.maxY,s=t;s<n;s+=2){var u=e[s],h=e[s+1];r=u<r?u:r,i=h<i?h:i,a=u>a?u:a,o=h>o?h:o}this.minX=r,this.minY=i,this.maxX=a,this.maxY=o},e.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},e.prototype.addVerticesMatrix=function(e,t,n,r,i,a){void 0===i&&(i=0),void 0===a&&(a=i);for(var o=e.a,s=e.b,u=e.c,h=e.d,l=e.tx,c=e.ty,d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=n;m<r;m+=2){var v=t[m],y=t[m+1],b=o*v+u*y+l,_=h*y+s*v+c;d=Math.min(d,b-i),p=Math.max(p,b+i),f=Math.min(f,_-a),g=Math.max(g,_+a)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=g},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=a){var o=this.minX,s=this.minY,u=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=a>h?a:h}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=a){var o=this.minX,s=this.minY,u=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=a>h?a:h}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,r,i,a){e-=i,t-=a,n+=i,r+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},e}(),mu=function(e,t){return mu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},mu(e,t)};function vu(e,t){function n(){this.constructor=e}mu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var yu,bu,_u,Eu,Tu,xu,ku,Su,wu,Mu,Au,Ru,Cu,Pu,Iu,Nu,Ou,Du,Lu,Bu=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new wi,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new gu,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return vu(t,e),t.mixin=function(e){for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ci),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ci),e=this._localBoundsRect),this._localBounds||(this._localBounds=new gu);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,a},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,r,i,a,o,s,u){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=u,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Fu),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*si},set:function(e){this.transform.rotation=e*ui},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask!==e&&(this._mask&&((t=this._mask.maskObject||this._mask)._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1)),this._mask=e,this._mask&&(0===(t=this._mask.maskObject||this._mask)._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++))},enumerable:!1,configurable:!0}),t}(wr()),Fu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return vu(t,e),t}(Bu);function Gu(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}Bu.prototype.displayObjectUpdateTransform=Bu.prototype.updateTransform,function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(yu||(yu={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(bu||(bu={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(_u||(_u={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Eu||(Eu={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Tu||(Tu={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(xu||(xu={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ku||(ku={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Su||(Su={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(wu||(wu={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Mu||(Mu={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Au||(Au={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Ru||(Ru={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Cu||(Cu={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Pu||(Pu={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Iu||(Iu={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Nu||(Nu={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Ou||(Ou={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Du||(Du={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Lu||(Lu={}));var Uu=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=pu,t.sortDirty=!1,t}return vu(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.addChild(t[r]);else{var i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Wr(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.removeChild(t[r]);else{var i=t[0],a=this.children.indexOf(i);if(-1===a)return null;i.parent=null,i.transform._parentID=-1,Wr(this.children,a,1),this._boundsID++,this.onChildrenChange(a),i.emit("removed",this),this.emit("childRemoved",i,this,a)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Wr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,r=e,i=t-r;if(i>0&&i<=t){n=this.children.splice(r,i);for(var a=0;a<n.length;++a)n[a].parent=null,n[a].transform&&(n[a].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(e),a=0;a<n.length;++a)n[a].emit("removed",this),this.emit("childRemoved",n[a],this,a);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(Gu),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var r=e.prototype.getLocalBounds.call(this,t);if(!n)for(var i=0,a=this.children.length;i<a;++i){var o=this.children[i];o.visible&&o.updateTransform()}return r},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(e){var n=e.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==t.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a],u=s.cullable;s.cullable=u||!this.cullArea,s.render(e),s.cullable=u}}},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r])}var i=t&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Ou.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e),r=0;for(var a=this.children.length;r<a;++r)this.children[r].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(Bu);Uu.prototype.containerUpdateTransform=Uu.prototype.updateTransform;var Hu=new ci,ju=function(){function e(e){this.renderer=e}return e.prototype.image=function(e,t,n){var r=new Image;return r.src=this.base64(e,t,n),r},e.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},e.prototype.canvas=function(t){var n,r,i,a=this.renderer,o=!1,s=!1;t&&(t instanceof Ga?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,o=!1,a.renderTexture.bind(i)):(n=this.renderer.resolution,o=!0,(r=Hu).width=this.renderer.width,r.height=this.renderer.height,a.renderTexture.bind(null));var u=Math.floor(r.width*n+1e-4),h=Math.floor(r.height*n+1e-4),l=new ri(u,h,1),c=new Uint8Array(4*u*h),d=a.gl;d.readPixels(r.x*n,r.y*n,u,h,d.RGBA,d.UNSIGNED_BYTE,c);var f=l.context.getImageData(0,0,u,h);if(e.arrayPostDivide(c,f.data),l.context.putImageData(f,0,0),o){var p=new ri(l.width,l.height,1);p.context.scale(1,-1),p.context.drawImage(l.canvas,0,-h),l.destroy(),l=p}return s&&i.destroy(!0),l.canvas},e.prototype.pixels=function(t,n){var r,i,a,o=this.renderer,s=!1;t&&(t instanceof Ga?a=t:t instanceof Bu&&(a=this.renderer.generateTexture(t),s=!0)),a?n?(r=n.resolution,i=a.frame,o.renderTexture.bind(a)):(r=a.baseTexture.resolution,i=a.frame,o.renderTexture.bind(a)):n?(r=n.resolution,(i=Hu).width=n.width,i.height=n.height,o.renderTexture.bind(null)):(r=o.resolution,(i=Hu).width=o.width,i.height=o.height,o.renderTexture.bind(null));var u=i.width*r,h=i.height*r,l=new Uint8Array(4*u*h),c=o.gl;return c.readPixels(i.x*r,i.y*r,u,h,c.RGBA,c.UNSIGNED_BYTE,l),s&&a.destroy(!0),e.arrayPostDivide(l,l),l},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(e,t){for(var n=0;n<e.length;n+=4){var r=t[n+3]=e[n+3];0!==r?(t[n]=Math.round(Math.min(255*e[n]/r,255)),t[n+1]=Math.round(Math.min(255*e[n+1]/r,255)),t[n+2]=Math.round(Math.min(255*e[n+2]/r,255))):(t[n]=e[n],t[n+1]=e[n+1],t[n+2]=e[n+2])}},e}(),Ku=function(){function e(e,t,n){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},e}();function Xu(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var zu,Vu=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(e){void 0===e&&(e=!1);var t=this._head;if(e)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n},e.prototype.has=function(e){if(!(e instanceof Ku))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},e.prototype.dispatch=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,t),r=r._next;return!0},e.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return Xu(this,new Ku(e,!1,t))},e.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return Xu(this,new Ku(e,!0,t))},e.prototype.detach=function(e){if(!(e instanceof Ku))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},e.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},e}();function Wu(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={},a=14;a--;)i[n.key[a]]=r[a]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(e,t,r){t&&(i[n.q.name][t]=r)})),i}var Yu=null;function Ju(){}function qu(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}function Qu(e){return e.toString().replace("object ","")}var Zu=function(){function e(t,n,r){if(this._dequeue=Ju,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof t||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=t,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Ju,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Vu,this.onProgress=new Vu,this.onComplete=new Vu,this.onAfterMiddleware=new Vu}return e.setExtensionLoadType=function(t,n){qu(e._loadTypeMap,t,n)},e.setExtensionXhrType=function(t,n){qu(e._xhrTypeMap,t,n)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var n=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout((function(){return t(n)}),1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:void 0===zu&&(zu=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),zu&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._hasFlag=function(e){return 0!=(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout((function(){return e.send()}),1)},e.prototype._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=n,r},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Qu(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(Qu(e)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(Qu(e)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,n="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(n=t.responseText),0===r&&(n.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var a=document.createElement("div");a.innerHTML=n,this.data=a}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||n;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,Yu||(Yu=document.createElement("a")),Yu.href=e;var n=Wu(Yu.href,{strictMode:!0}),r=!n.port&&""===t.port||n.port===t.port,i=n.protocol?n.protocol+":":"";return n.host===t.hostname&&r&&i===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?"),i=e.indexOf("#"),a=Math.min(r>-1?r:e.length,i>-1?i:e.length);t=(e=e.substring(0,a)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();function $u(){}function eh(e){return function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];if(null===e)throw new Error("Callback was already called.");var i=e;e=null,i.apply(this,n)}}!function(e){var t,n,r,i;(t=e.STATUS_FLAGS||(e.STATUS_FLAGS={}))[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING",(n=e.TYPE||(e.TYPE={}))[n.UNKNOWN=0]="UNKNOWN",n[n.JSON=1]="JSON",n[n.XML=2]="XML",n[n.IMAGE=3]="IMAGE",n[n.AUDIO=4]="AUDIO",n[n.VIDEO=5]="VIDEO",n[n.TEXT=6]="TEXT",(r=e.LOAD_TYPE||(e.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(i=e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})).DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text",e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(Zu||(Zu={}));var th=function(e,t){this.data=e,this.callback=t},nh=function(){function e(e,t){var n=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=$u,this.unsaturated=$u,this.empty=$u,this.drain=$u,this.error=$u,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(e,t,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==e&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i=new th(e,"function"==typeof r?r:$u);t?n._tasks.unshift(i):n._tasks.push(i),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(e.data,eh(n._next(e)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return e.prototype._next=function(e){var t=this;return function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];t.workers-=1,e.callback.apply(e,r),null!=r[0]&&t.error(r[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},e.prototype.push=function(e,t){this._insert(e,!1,t)},e.prototype.kill=function(){this.workers=0,this.drain=$u,this.started=!1,this._tasks=[]},e.prototype.unshift=function(e,t){this._insert(e,!0,t)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},e.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},e.eachSeries=function(e,t,n,r){var i=0,a=e.length;!function o(s){s||i===a?n&&n(s):r?setTimeout((function(){t(e[i++],o)}),1):t(e[i++],o)}()},e.queue=function(t,n){return new e(t,n)},e}(),rh=/(#[\w-]+)?$/,ih=function(){function e(t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=nh.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new Vu,this.onError=new Vu,this.onLoad=new Vu,this.onStart=new Vu,this.onComplete=new Vu;for(var i=0;i<e._plugins.length;++i){var a=e._plugins[i],o=a.pre,s=a.use;o&&this.pre(o),s&&this.use(s)}this._protected=!1}return e.prototype._add=function(e,t,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new Zu(e,t,n),"function"==typeof r&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,a=[],o=0;o<i.children.length;++o)i.children[o].isComplete||a.push(i.children[o]);var s=i.progressChunk*(a.length+1)/(a.length+2);for(i.children.push(this.resources[e]),i.progressChunk=s,o=0;o<a.length;++o)a[o].progressChunk=s;this.resources[e].progressChunk=s}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(e){var t,n=Wu(e,{strictMode:!0});if(t=n.protocol||!n.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=rh.exec(t)[0];-1!==(t=t.slice(0,t.length-r.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=r}return t},e.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,nh.eachSeries(this._beforeMiddleware,(function(t,r){t.call(n,e,(function(){r(e.isComplete?{}:null)}))}),(function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())}),!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),nh.eachSeries(this._afterMiddleware,(function(n,r){n.call(t,e,r)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();ih.prototype.add=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"==typeof e&&(n=e,r=t||n.callback||n.onComplete,t=n.url,e=n.name||n.key||n.url),"string"!=typeof t&&(r=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof n&&(r=n,n=null),this._add(e,t,n,r)};var ah,oh,sh=function(){function e(){}return e.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?ih.shared:new ih},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),uh=function(){function e(){}return e.add=function(){Zu.setExtensionLoadType("svg",Zu.LOAD_TYPE.XHR),Zu.setExtensionXhrType("svg",Zu.XHR_RESPONSE_TYPE.TEXT)},e.use=function(e,t){if(!e.data||e.type!==Zu.TYPE.IMAGE&&"svg"!==e.extension)t();else{var n=e.data,r=e.url,i=e.name,a=e.metadata;Fa.fromLoader(n,r,i,a).then((function(n){e.texture=n,t()})).catch(t)}},e}();ih.registerPlugin({use:function(e,t){if(e.data){if(e.xhr&&e.xhrType===Zu.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=globalThis.URL||globalThis.webkitURL,r=n.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=Zu.TYPE.IMAGE,void(e.data.onload=function(){n.revokeObjectURL(r),e.data.onload=null,t()})}}else{var i=e.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return e.data=new Image,e.data.src="data:"+i+";base64,"+function(e){for(var t="",n=0;n<e.length;){for(var r=[0,0,0],i=[0,0,0,0],a=0;a<r.length;++a)n<e.length?r[a]=255&e.charCodeAt(n++):r[a]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(e.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(a=0;a<i.length;++a)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[a])}return t}(e.xhr.responseText),e.type=Zu.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}}),ih.registerPlugin(uh),function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(oh||(oh={}));var hh=((ah={})[oh.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ah[oh.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ah[oh.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ah[oh.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ah[oh.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ah[oh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ah[oh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ah[oh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ah[oh.COMPRESSED_R11_EAC]=.5,ah[oh.COMPRESSED_SIGNED_R11_EAC]=.5,ah[oh.COMPRESSED_RG11_EAC]=1,ah[oh.COMPRESSED_SIGNED_RG11_EAC]=1,ah[oh.COMPRESSED_RGB8_ETC2]=.5,ah[oh.COMPRESSED_RGBA8_ETC2_EAC]=1,ah[oh.COMPRESSED_SRGB8_ETC2]=.5,ah[oh.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ah[oh.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ah[oh.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ah[oh.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ah[oh.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ah[oh.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ah[oh.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ah[oh.COMPRESSED_RGB_ETC1_WEBGL]=.5,ah[oh.COMPRESSED_RGB_ATC_WEBGL]=.5,ah[oh.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ah[oh.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ah),lh=function(e,t){return lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},lh(e,t)};function ch(e,t){function n(){this.constructor=e}lh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var dh,fh,ph=function(e){function t(t,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var r,i,a=this;return"string"==typeof t?(r=t,i=new Uint8Array):(r=null,i=t),(a=e.call(this,i,n)||this).origin=r,a.buffer=i?new vs(i):null,a.origin&&!1!==n.autoLoad&&a.load(),i&&i.length&&(a.loaded=!0,a.onBlobLoaded(a.buffer.rawBinaryData)),a}return ch(t,e),t.prototype.onBlobLoaded=function(e){},t.prototype.load=function(){return e=this,void 0,n=function(){var e;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(t){switch(t.label){case 0:return[4,fetch(this.origin)];case 1:return[4,t.sent().blob()];case 2:return[4,t.sent().arrayBuffer()];case 3:return e=t.sent(),this.data=new Uint32Array(e),this.buffer=new vs(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),[2,this]}}))},new((t=Promise)||(t=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new t((function(t){t(e.value)})).then(a,o)}s((n=n.apply(e,[])).next())}));var e,t,n},t}(ba),gh=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=t._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||t._createLevelBuffers(n instanceof Uint8Array?n:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return ch(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;if(!e.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,a=this.levels;i<a;i++){var o=this._levelBuffers[i],s=o.levelID,u=o.levelWidth,h=o.levelHeight,l=o.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,u,h,0,l)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(e,t,n,r,i,a,o){for(var s=new Array(n),u=e.byteOffset,h=a,l=o,c=h+r-1&~(r-1),d=l+i-1&~(i-1),f=c*d*hh[t],p=0;p<n;p++)s[p]={levelID:p,levelWidth:n>1?h:c,levelHeight:n>1?l:d,levelBuffer:new Uint8Array(e.buffer,u,f)},u+=f,f=(c=(h=h>>1||1)+r-1&~(r-1))*(d=(l=l>>1||1)+i-1&~(i-1))*hh[t];return s},t}(ph),mh=function(){function e(){}return e.use=function(t,n){var r=t.data;if(t.type===Zu.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var i=r.textures,a=void 0,o=void 0,s=0,u=i.length;s<u;s++){var h=i[s],l=h.src,c=h.format;if(c||(o=l),e.textureFormats[c]){a=l;break}}if(!(a=a||o))return void n(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));if(a===t.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},f=Cr.resolve(t.url.replace(this.baseUrl,""),a),p=r.cacheID;this.add(p,f,d,(function(e){if(e.error)n(e.error);else{var r=e.texture,i=void 0===r?null:r,a=e.textures,o=void 0===a?{}:a;Object.assign(t,{texture:i,textures:o}),n()}}))}else n()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=document.createElement("canvas").getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;for(var n in e._textureFormats={},t){var r=t[n];r&&Object.assign(e._textureFormats,Object.getPrototypeOf(r))}}return e._textureFormats},enumerable:!1,configurable:!0}),e}();function vh(e,t,n){var r={textures:{},texture:null};return t?(t.map((function(e){return new Fa(new Ea(e,Object.assign({mipmap:mr.OFF,alphaMode:vr.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(t,n){var i=t.baseTexture,a=e+"-"+(n+1);Ea.addToCache(i,a),Fa.addToCache(t,a),0===n&&(Ea.addToCache(i,e),Fa.addToCache(t,e),r.texture=t),r.textures[a]=t})),r):r}Zu.setExtensionXhrType("dds",Zu.XHR_RESPONSE_TYPE.BUFFER);var yh,bh;!function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(yh||(yh={})),function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(bh||(bh={}));var _h,Eh,Th,xh=((dh={})[827611204]=oh.COMPRESSED_RGBA_S3TC_DXT1_EXT,dh[861165636]=oh.COMPRESSED_RGBA_S3TC_DXT3_EXT,dh[894720068]=oh.COMPRESSED_RGBA_S3TC_DXT5_EXT,dh),kh=((fh={})[yh.DXGI_FORMAT_BC1_TYPELESS]=oh.COMPRESSED_RGBA_S3TC_DXT1_EXT,fh[yh.DXGI_FORMAT_BC1_UNORM]=oh.COMPRESSED_RGBA_S3TC_DXT1_EXT,fh[yh.DXGI_FORMAT_BC2_TYPELESS]=oh.COMPRESSED_RGBA_S3TC_DXT3_EXT,fh[yh.DXGI_FORMAT_BC2_UNORM]=oh.COMPRESSED_RGBA_S3TC_DXT3_EXT,fh[yh.DXGI_FORMAT_BC3_TYPELESS]=oh.COMPRESSED_RGBA_S3TC_DXT5_EXT,fh[yh.DXGI_FORMAT_BC3_UNORM]=oh.COMPRESSED_RGBA_S3TC_DXT5_EXT,fh[yh.DXGI_FORMAT_BC1_UNORM_SRGB]=oh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,fh[yh.DXGI_FORMAT_BC2_UNORM_SRGB]=oh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,fh[yh.DXGI_FORMAT_BC3_UNORM_SRGB]=oh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,fh),Sh=function(){function e(){}return e.use=function(t,n){if("dds"===t.extension&&t.data)try{Object.assign(t,vh(t.name||t.url,e.parse(t.data),t.metadata))}catch(e){return void n(e)}n()},e.parse=function(e){var t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),r=n[3],i=n[4],a=n[7],o=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=o[1];if(4&s){var u=o[2];if(808540228!==u){var h=xh[u],l=new Uint8Array(e,128);return[new gh(l,{format:h,width:i,height:r,levels:a})]}var c=new Uint32Array(t.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=c[0],f=c[1],p=c[2],g=c[3],m=kh[d];if(void 0===m)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===p)throw new Error("DDSLoader does not support cubemap textures");if(f===bh.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var v=new Array;if(1===g)v.push(new Uint8Array(e,148));else{for(var y=hh[m],b=0,_=i,E=r,T=0;T<a;T++)b+=Math.max(1,_+3&-4)*Math.max(1,E+3&-4)*y,_>>>=1,E>>>=1;var x=148;for(T=0;T<g;T++)v.push(new Uint8Array(e,x,b)),x+=b}return v.map((function(e){return new gh(e,{format:m,width:i,height:r,levels:a})}))}if(64&s)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&s)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&s)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&s)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}();Zu.setExtensionXhrType("ktx",Zu.XHR_RESPONSE_TYPE.BUFFER);var wh=[171,75,84,88,32,49,49,187,13,10,26,10],Mh=((_h={})[dr.UNSIGNED_BYTE]=1,_h[dr.UNSIGNED_SHORT]=2,_h[dr.INT]=4,_h[dr.UNSIGNED_INT]=4,_h[dr.FLOAT]=4,_h[dr.HALF_FLOAT]=8,_h),Ah=((Eh={})[lr.RGBA]=4,Eh[lr.RGB]=3,Eh[lr.RG]=2,Eh[lr.RED]=1,Eh[lr.LUMINANCE]=1,Eh[lr.LUMINANCE_ALPHA]=2,Eh[lr.ALPHA]=1,Eh),Rh=((Th={})[dr.UNSIGNED_SHORT_4_4_4_4]=2,Th[dr.UNSIGNED_SHORT_5_5_5_1]=2,Th[dr.UNSIGNED_SHORT_5_6_5]=2,Th),Ch=function(){function e(){}return e.use=function(t,n){if("ktx"===t.extension&&t.data)try{var r=t.name||t.url,i=e.parse(r,t.data),a=i.compressed,o=i.uncompressed,s=i.kvData;if(a){var u=vh(r,a,t.metadata);if(s&&u.textures)for(var h in u.textures)u.textures[h].baseTexture.ktxKeyValueData=s;Object.assign(t,u)}else if(o){var l={};o.forEach((function(e,t){var n=new Fa(new Ea(e.resource,{mipmap:mr.OFF,alphaMode:vr.NO_PREMULTIPLIED_ALPHA,type:e.type,format:e.format})),i=r+"-"+(t+1);s&&(n.baseTexture.ktxKeyValueData=s),Ea.addToCache(n.baseTexture,i),Fa.addToCache(n,i),0===t&&(l[r]=n,Ea.addToCache(n.baseTexture,r),Fa.addToCache(n,r)),l[i]=n})),Object.assign(t,{textures:l})}}catch(e){return void n(e)}n()},e.parse=function(t,n){var r=new DataView(n);if(!e.validate(t,r))return null;var i=67305985===r.getUint32(12,!0),a=r.getUint32(16,i),o=r.getUint32(24,i),s=r.getUint32(28,i),u=r.getUint32(36,i),h=r.getUint32(40,i)||1,l=r.getUint32(44,i)||1,c=r.getUint32(48,i)||1,d=r.getUint32(52,i),f=r.getUint32(56,i),p=r.getUint32(60,i);if(0===h||1!==l)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var g,m=u+3&-4,v=h+3&-4,y=new Array(c),b=u*h;if(0===a&&(b=m*v),void 0===(g=0!==a?Mh[a]?Mh[a]*Ah[o]:Rh[a]:hh[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var _=e.loadKeyValueData?e.parseKvData(r,p,i):null,E=b*g,T=u,x=h,k=m,S=v,w=64+p,M=0;M<f;M++){for(var A=r.getUint32(w,i),R=w+4,C=0;C<c;C++){var P=y[C];P||(P=y[C]=new Array(f)),P[M]={levelID:M,levelWidth:f>1||0!==a?T:k,levelHeight:f>1||0!==a?x:S,levelBuffer:new Uint8Array(n,R,E)},R+=E}w=(w+=A+4)%4!=0?w+4-w%4:w,E=(k=(T=T>>1||1)+4-1&-4)*(S=(x=x>>1||1)+4-1&-4)*g}return 0!==a?{uncompressed:y.map((function(t){var n=t[0].levelBuffer,r=!1;return a===dr.FLOAT?n=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):a===dr.UNSIGNED_INT?(r=!0,n=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):a===dr.INT&&(r=!0,n=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new ba(n,{width:t[0].levelWidth,height:t[0].levelHeight}),type:a,format:r?e.convertFormatToInteger(o):o}})),kvData:_}:{compressed:y.map((function(e){return new gh(null,{format:s,width:u,height:h,levels:f,levelBuffers:e})})),kvData:_}},e.validate=function(e,t){for(var n=0;n<wh.length;n++)if(t.getUint8(n)!==wh[n])return console.error(e+" is not a valid *.ktx file!"),!1;return!0},e.convertFormatToInteger=function(e){switch(e){case lr.RGBA:return lr.RGBA_INTEGER;case lr.RGB:return lr.RGB_INTEGER;case lr.RG:return lr.RG_INTEGER;case lr.RED:return lr.RED_INTEGER;default:return e}},e.parseKvData=function(e,t,n){for(var r=new Map,i=0;i<t;){var a=e.getUint32(64+i,n),o=64+i+4,s=3-(a+3)%4;if(0===a||a>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<a&&0!==e.getUint8(o+u);u++);if(-1===u){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var h=(new TextDecoder).decode(new Uint8Array(e.buffer,o,u)),l=new DataView(e.buffer,o+u+1,a-u-1);r.set(h,l),i+=4+a+s}return r},e.loadKeyValueData=!1,e}(),Ph=function(e,t){return Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ph(e,t)};function Ih(e,t){function n(){this.constructor=e}Ph(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Nh,Oh,Dh=function(e){function t(t,n,r,i){void 0===t&&(t=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var a=e.call(this)||this;return r>16384&&(r=16384),a._properties=[!1,!0,!1,!1,!1],a._maxSize=t,a._batchSize=r,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=ur.NORMAL,a.autoResize=i,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return Ih(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Dr(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Zi),Lh=function(){function e(e,t,n){this.geometry=new Ya,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var i=e[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||dr.FLOAT,offset:i.offset},t[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new Ka(function(e,t){void 0===t&&(t=null);var n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n)(o=this.dynamicProperties[n]).offset=t,t+=o.size,this.dynamicStride+=o.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Ka(this.dynamicData,!1,!1);var i=0;for(this.staticStride=0,n=0;n<this.staticProperties.length;++n)(o=this.staticProperties[n]).offset=i,i+=o.size,this.staticStride+=o.size;var a=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Ka(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n){var o=this.dynamicProperties[n];e.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===dr.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(n=0;n<this.staticProperties.length;++n)o=this.staticProperties[n],e.addAttribute(o.attributeName,this.staticBuffer,0,o.type===dr.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)},e.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===dr.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===dr.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Bh=function(e){function t(t){var n=e.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new vi,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:dr.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Lo.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=Bo.for2d(),n}return Ih(t,e),t.prototype.render=function(e){var t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer,a=t.length;if(0!==a){a>n&&!e.autoResize&&(a=n);var o=e._buffers;o||(o=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture;this.state.blendMode=Ur(e.blendMode,s.alphaMode),i.state.set(this.state);var u,h,l,c,d=i.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=(u=e.tintRgb,h=e.worldAlpha,l=this.shader.uniforms.uColor,c=s.alphaMode,l=l||new Float32Array(4),c||void 0===c?(l[0]=u[0]*h,l[1]=u[1]*h,l[2]=u[2]*h):(l[0]=u[0],l[1]=u[1],l[2]=u[2]),l[3]=h,l),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var p=!1,g=0,m=0;g<a;g+=r,m+=1){var v=a-g;v>r&&(v=r),m>=o.length&&o.push(this._generateOneMoreBuffer(e));var y=o[m];y.uploadDynamic(t,g,v);var b=e._bufferUpdateIDs[m]||0;(p=p||y._updateID<b)&&(y._updateID=e._updateID,y.uploadStatic(t,g,v)),i.geometry.bind(y.geometry),d.drawElements(d.TRIANGLES,6*v,d.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var t=[],n=e._maxSize,r=e._batchSize,i=e._properties,a=0;a<n;a+=r)t.push(new Lh(this.properties,i,r));return t},t.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize,n=e._properties;return new Lh(this.properties,n,t)},t.prototype.uploadVertices=function(e,t,n,r,i,a){for(var o=0,s=0,u=0,h=0,l=0;l<n;++l){var c=e[t+l],d=c._texture,f=c.scale.x,p=c.scale.y,g=d.trim,m=d.orig;g?(o=(s=g.x-c.anchor.x*m.width)+g.width,u=(h=g.y-c.anchor.y*m.height)+g.height):(o=m.width*(1-c.anchor.x),s=m.width*-c.anchor.x,u=m.height*(1-c.anchor.y),h=m.height*-c.anchor.y),r[a]=s*f,r[a+1]=h*p,r[a+i]=o*f,r[a+i+1]=h*p,r[a+2*i]=o*f,r[a+2*i+1]=u*p,r[a+3*i]=s*f,r[a+3*i+1]=u*p,a+=4*i}},t.prototype.uploadPosition=function(e,t,n,r,i,a){for(var o=0;o<n;o++){var s=e[t+o].position;r[a]=s.x,r[a+1]=s.y,r[a+i]=s.x,r[a+i+1]=s.y,r[a+2*i]=s.x,r[a+2*i+1]=s.y,r[a+3*i]=s.x,r[a+3*i+1]=s.y,a+=4*i}},t.prototype.uploadRotation=function(e,t,n,r,i,a){for(var o=0;o<n;o++){var s=e[t+o].rotation;r[a]=s,r[a+i]=s,r[a+2*i]=s,r[a+3*i]=s,a+=4*i}},t.prototype.uploadUvs=function(e,t,n,r,i,a){for(var o=0;o<n;++o){var s=e[t+o]._texture._uvs;s?(r[a]=s.x0,r[a+1]=s.y0,r[a+i]=s.x1,r[a+i+1]=s.y1,r[a+2*i]=s.x2,r[a+2*i+1]=s.y2,r[a+3*i]=s.x3,r[a+3*i+1]=s.y3,a+=4*i):(r[a]=0,r[a+1]=0,r[a+i]=0,r[a+i+1]=0,r[a+2*i]=0,r[a+2*i+1]=0,r[a+3*i]=0,r[a+3*i+1]=0,a+=4*i)}},t.prototype.uploadTint=function(e,t,n,r,i,a){for(var o=0;o<n;++o){var s=e[t+o],u=s._texture.baseTexture.alphaMode>0,h=s.alpha,l=h<1&&u?Hr(s._tintRGB,h):s._tintRGB+(255*h<<24);r[a]=l,r[a+i]=l,r[a+2*i]=l,r[a+3*i]=l,a+=4*i}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(ro);!function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"}(Nh||(Nh={})),function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"}(Oh||(Oh={}));var Fh={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},Gh=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Fa.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Fa.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),Uh=function(e,t){return Uh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Uh(e,t)};function Hh(e,t){function n(){this.constructor=e}Uh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function jh(e,t){var n,r;void 0===t&&(t=!1);var i=e.length;if(!(i<6)){for(var a=0,o=0,s=e[i-2],u=e[i-1];o<i;o+=2){var h=e[o],l=e[o+1];a+=(h-s)*(l+u),s=h,u=l}if(!t&&a>0||t&&a<=0){var c=i/2;for(o=c+c%2;o<i;o+=2){var d=i-o-2,f=i-o-1,p=o,g=o+1;n=[e[p],e[d]],e[d]=n[0],e[p]=n[1],r=[e[g],e[f]],e[f]=r[0],e[g]=r[1]}}}}var Kh={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,a=t.indices;if(n.length>=6){jh(n,!1);for(var o=[],s=0;s<r.length;s++){var u=r[s];jh(u.points,!0),o.push(n.length/2),n=n.concat(u.points)}var h=Ar()(n,o,2);if(!h)return;var l=i.length/2;for(s=0;s<h.length;s+=3)a.push(h[s]+l),a.push(h[s+1]+l),a.push(h[s+2]+l);for(s=0;s<n.length;s++)i.push(n[s])}}},Xh={build:function(e){var t,n,r,i,a,o,s=e.points;if(e.type===ai.CIRC){var u=e.shape;t=u.x,n=u.y,a=o=u.radius,r=i=0}else if(e.type===ai.ELIP){var h=e.shape;t=h.x,n=h.y,a=h.width,o=h.height,r=i=0}else{var l=e.shape,c=l.width/2,d=l.height/2;t=l.x+c,n=l.y+d,r=c-(a=o=Math.max(0,Math.min(l.radius,Math.min(c,d)))),i=d-o}if(a>=0&&o>=0&&r>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(a+o)),p=8*f+(r?4:0)+(i?4:0);if(s.length=p,0!==p){if(0===f)return s.length=8,s[0]=s[6]=t+r,s[1]=s[3]=n+i,s[2]=s[4]=t-r,void(s[5]=s[7]=n-i);var g,m,v=0,y=4*f+(r?2:0)+2,b=y,_=p,E=t+(g=r+a),T=t-g,x=n+(m=i);if(s[v++]=E,s[v++]=x,s[--y]=x,s[--y]=T,i){var k=n-m;s[b++]=T,s[b++]=k,s[--_]=k,s[--_]=E}for(var S=1;S<f;S++){var w=Math.PI/2*(S/f);E=t+(g=r+Math.cos(w)*a),T=t-g,x=n+(m=i+Math.sin(w)*o),k=n-m,s[v++]=E,s[v++]=x,s[--y]=x,s[--y]=T,s[b++]=T,s[b++]=k,s[--_]=k,s[--_]=E}E=t+(g=r),T=t-g,x=n+(m=i+o),k=n-m,s[v++]=E,s[v++]=x,s[--_]=k,s[--_]=E,r&&(s[v++]=T,s[v++]=x,s[--_]=k,s[--_]=T)}}else s.length=0},triangulate:function(e,t){var n,r,i=e.points,a=t.points,o=t.indices,s=a.length/2,u=s;if(e.type!==ai.RREC){var h=e.shape;n=h.x,r=h.y}else{var l=e.shape;n=l.x+l.width/2,r=l.y+l.height/2}var c=e.matrix;a.push(e.matrix?c.a*n+c.c*r+c.tx:n,e.matrix?c.b*n+c.d*r+c.ty:r),s++,a.push(i[0],i[1]);for(var d=2;d<i.length;d+=2)a.push(i[d],i[d+1]),o.push(s++,u,s);o.push(u+1,u,s)}};function zh(e,t,n){return e+(t-e)*n}function Vh(e,t,n,r,i,a,o){void 0===o&&(o=[]);for(var s=o,u=0,h=0,l=0,c=0,d=0,f=0,p=0,g=0;p<=20;++p)u=zh(e,n,g=p/20),h=zh(t,r,g),l=zh(n,i,g),c=zh(r,a,g),d=zh(u,l,g),f=zh(h,c,g),0===p&&s[s.length-2]===d&&s[s.length-1]===f||s.push(d,f);return s}var Wh={build:function(e){if(fl.nextRoundedRectBehavior)Xh.build(e);else{var t=e.shape,n=e.points,r=t.x,i=t.y,a=t.width,o=t.height,s=Math.max(0,Math.min(t.radius,Math.min(a,o)/2));n.length=0,s?(Vh(r,i+s,r,i,r+s,i,n),Vh(r+a-s,i,r+a,i,r+a,i+s,n),Vh(r+a,i+o-s,r+a,i+o,r+a-s,i+o,n),Vh(r+s,i+o,r,i+o,r,i+o-s,n)):n.push(r,i,r+a,i,r+a,i+o,r,i+o)}},triangulate:function(e,t){if(fl.nextRoundedRectBehavior)Xh.triangulate(e,t);else{for(var n=e.points,r=t.points,i=t.indices,a=r.length/2,o=Ar()(n,null,2),s=0,u=o.length;s<u;s+=3)i.push(o[s]+a),i.push(o[s+1]+a),i.push(o[s+2]+a);for(s=0,u=n.length;s<u;s++)r.push(n[s],n[++s])}}};function Yh(e,t,n,r,i,a,o,s){var u,h;o?(u=r,h=-n):(u=-r,h=n);var l=e-n*i+u,c=t-r*i+h,d=e+n*a+u,f=t+r*a+h;return s.push(l,c),s.push(d,f),2}function Jh(e,t,n,r,i,a,o,s){var u=n-e,h=r-t,l=Math.atan2(u,h),c=Math.atan2(i-e,a-t);s&&l<c?l+=2*Math.PI:!s&&l>c&&(c+=2*Math.PI);var d=l,f=c-l,p=Math.abs(f),g=Math.sqrt(u*u+h*h),m=1+(15*p*Math.sqrt(g)/Math.PI>>0),v=f/m;if(d+=v,s){o.push(e,t),o.push(n,r);for(var y=1,b=d;y<m;y++,b+=v)o.push(e,t),o.push(e+Math.sin(b)*g,t+Math.cos(b)*g);o.push(e,t),o.push(i,a)}else{for(o.push(n,r),o.push(e,t),y=1,b=d;y<m;y++,b+=v)o.push(e+Math.sin(b)*g,t+Math.cos(b)*g),o.push(e,t);o.push(i,a),o.push(e,t)}return 2*m}function qh(e,t){e.lineStyle.native?function(e,t){var n=0,r=e.shape,i=e.points||r.points,a=r.type!==ai.POLY||r.closeStroke;if(0!==i.length){var o=t.points,s=t.indices,u=i.length/2,h=o.length/2,l=h;for(o.push(i[0],i[1]),n=1;n<u;n++)o.push(i[2*n],i[2*n+1]),s.push(l,l+1),l++;a&&s.push(l,h)}}(e,t):function(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(0!==r.length){var a=e.lineStyle,o=new hi(r[0],r[1]),s=new hi(r[r.length-2],r[r.length-1]),u=n.type!==ai.POLY||n.closeStroke,h=Math.abs(o.x-s.x)<i&&Math.abs(o.y-s.y)<i;if(u){r=r.slice(),h&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var l=.5*(o.x+s.x),c=.5*(s.y+o.y);r.unshift(l,c),r.push(l,c)}var d=t.points,f=r.length/2,p=r.length,g=d.length/2,m=a.width/2,v=m*m,y=a.miterLimit*a.miterLimit,b=r[0],_=r[1],E=r[2],T=r[3],x=0,k=0,S=-(_-T),w=b-E,M=0,A=0,R=Math.sqrt(S*S+w*w);S/=R,w/=R,S*=m,w*=m;var C=a.alignment,P=2*(1-C),I=2*C;u||(a.cap===Oh.ROUND?p+=Jh(b-S*(P-I)*.5,_-w*(P-I)*.5,b-S*P,_-w*P,b+S*I,_+w*I,d,!0)+2:a.cap===Oh.SQUARE&&(p+=Yh(b,_,S,w,P,I,!0,d))),d.push(b-S*P,_-w*P),d.push(b+S*I,_+w*I);for(var N=1;N<f-1;++N){b=r[2*(N-1)],_=r[2*(N-1)+1],E=r[2*N],T=r[2*N+1],x=r[2*(N+1)],k=r[2*(N+1)+1],S=-(_-T),w=b-E,S/=R=Math.sqrt(S*S+w*w),w/=R,S*=m,w*=m,M=-(T-k),A=E-x,M/=R=Math.sqrt(M*M+A*A),A/=R,M*=m,A*=m;var O=E-b,D=_-T,L=E-x,B=k-T,F=D*L-B*O,G=F<0;if(Math.abs(F)<.1)d.push(E-S*P,T-w*P),d.push(E+S*I,T+w*I);else{var U=(-S+b)*(-w+T)-(-S+E)*(-w+_),H=(-M+x)*(-A+T)-(-M+E)*(-A+k),j=(O*H-L*U)/F,K=(B*U-D*H)/F,X=(j-E)*(j-E)+(K-T)*(K-T),z=E+(j-E)*P,V=T+(K-T)*P,W=E-(j-E)*I,Y=T-(K-T)*I,J=G?P:I;X<=Math.min(O*O+D*D,L*L+B*B)+J*J*v?a.join===Nh.BEVEL||X/v>y?(G?(d.push(z,V),d.push(E+S*I,T+w*I),d.push(z,V),d.push(E+M*I,T+A*I)):(d.push(E-S*P,T-w*P),d.push(W,Y),d.push(E-M*P,T-A*P),d.push(W,Y)),p+=2):a.join===Nh.ROUND?G?(d.push(z,V),d.push(E+S*I,T+w*I),p+=Jh(E,T,E+S*I,T+w*I,E+M*I,T+A*I,d,!0)+4,d.push(z,V),d.push(E+M*I,T+A*I)):(d.push(E-S*P,T-w*P),d.push(W,Y),p+=Jh(E,T,E-S*P,T-w*P,E-M*P,T-A*P,d,!1)+4,d.push(E-M*P,T-A*P),d.push(W,Y)):(d.push(z,V),d.push(W,Y)):(d.push(E-S*P,T-w*P),d.push(E+S*I,T+w*I),a.join===Nh.ROUND?p+=G?Jh(E,T,E+S*I,T+w*I,E+M*I,T+A*I,d,!0)+2:Jh(E,T,E-S*P,T-w*P,E-M*P,T-A*P,d,!1)+2:a.join===Nh.MITER&&X/v<=y&&(G?(d.push(W,Y),d.push(W,Y)):(d.push(z,V),d.push(z,V)),p+=2),d.push(E-M*P,T-A*P),d.push(E+M*I,T+A*I),p+=2)}}b=r[2*(f-2)],_=r[2*(f-2)+1],E=r[2*(f-1)],S=-(_-(T=r[2*(f-1)+1])),w=b-E,S/=R=Math.sqrt(S*S+w*w),w/=R,S*=m,w*=m,d.push(E-S*P,T-w*P),d.push(E+S*I,T+w*I),u||(a.cap===Oh.ROUND?p+=Jh(E-S*(P-I)*.5,T-w*(P-I)*.5,E-S*P,T-w*P,E+S*I,T+w*I,d,!1)+2:a.cap===Oh.SQUARE&&(p+=Yh(E,T,S,w,P,I,!1,d)));var q=t.indices,Q=Fh.epsilon*Fh.epsilon;for(N=g;N<p+g-2;++N)b=d[2*N],_=d[2*N+1],E=d[2*(N+1)],T=d[2*(N+1)+1],x=d[2*(N+2)],k=d[2*(N+2)+1],Math.abs(b*(T-k)+E*(k-_)+x*(_-T))<Q||q.push(N,N+1,N+2)}}(e,t)}var Qh,Zh,$h=function(){function e(){}return e.curveTo=function(e,t,n,r,i,a){var o=a[a.length-2],s=a[a.length-1]-t,u=o-e,h=r-t,l=n-e,c=Math.abs(s*l-u*h);if(c<1e-8||0===i)return a[a.length-2]===e&&a[a.length-1]===t||a.push(e,t),null;var d=s*s+u*u,f=h*h+l*l,p=s*h+u*l,g=i*Math.sqrt(d)/c,m=i*Math.sqrt(f)/c,v=g*p/d,y=m*p/f,b=g*l+m*u,_=g*h+m*s,E=u*(m+v),T=s*(m+v),x=l*(g+y),k=h*(g+y);return{cx:b+e,cy:_+t,radius:i,startAngle:Math.atan2(T-_,E-b),endAngle:Math.atan2(k-_,x-b),anticlockwise:u*h>l*s}},e.arc=function(e,t,n,r,i,a,o,s,u){for(var h=o-a,l=Fh._segmentsCount(Math.abs(h)*i,40*Math.ceil(Math.abs(h)/oi)),c=h/(2*l),d=2*c,f=Math.cos(c),p=Math.sin(c),g=l-1,m=g%1/g,v=0;v<=g;++v){var y=c+a+d*(v+m*v),b=Math.cos(y),_=-Math.sin(y);u.push((f*b+p*_)*i+n,(f*-_+p*b)*i+r)}},e}(),el=function(){function e(){}return e.curveLength=function(e,t,n,r,i,a,o,s){for(var u=0,h=0,l=0,c=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0,b=e,_=t,E=1;E<=10;++E)v=b-(g=(p=(f=(d=1-(h=E/10))*d)*d)*e+3*f*h*n+3*d*(l=h*h)*i+(c=l*h)*o),y=_-(m=p*t+3*f*h*r+3*d*l*a+c*s),b=g,_=m,u+=Math.sqrt(v*v+y*y);return u},e.curveTo=function(t,n,r,i,a,o,s){var u=s[s.length-2],h=s[s.length-1];s.length-=2;var l=Fh._segmentsCount(e.curveLength(u,h,t,n,r,i,a,o)),c=0,d=0,f=0,p=0,g=0;s.push(u,h);for(var m=1,v=0;m<=l;++m)f=(d=(c=1-(v=m/l))*c)*c,g=(p=v*v)*v,s.push(f*u+3*d*v*t+3*c*p*r+g*a,f*h+3*d*v*n+3*c*p*i+g*o)},e}(),tl=function(){function e(){}return e.curveLength=function(e,t,n,r,i,a){var o=e-2*n+i,s=t-2*r+a,u=2*n-2*e,h=2*r-2*t,l=4*(o*o+s*s),c=4*(o*u+s*h),d=u*u+h*h,f=2*Math.sqrt(l+c+d),p=Math.sqrt(l),g=2*l*p,m=2*Math.sqrt(d),v=c/p;return(g*f+p*c*(f-m)+(4*d*l-c*c)*Math.log((2*p+v+f)/(v+m)))/(4*g)},e.curveTo=function(t,n,r,i,a){for(var o=a[a.length-2],s=a[a.length-1],u=Fh._segmentsCount(e.curveLength(o,s,t,n,r,i)),h=0,l=0,c=1;c<=u;++c){var d=c/u;h=o+(t-o)*d,l=s+(n-s)*d,a.push(h+(t+(r-t)*d-h)*d,l+(n+(i-n)*d-l)*d)}},e}(),nl=function(){function e(){this.reset()}return e.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},e.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),rl=((Qh={})[ai.POLY]=Kh,Qh[ai.CIRC]=Xh,Qh[ai.ELIP]=Xh,Qh[ai.RECT]={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,a=t.height,o=e.points;o.length=0,o.push(n,r,n+i,r,n+i,r+a,n,r+a)},triangulate:function(e,t){var n=e.points,r=t.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Qh[ai.RREC]=Wh,Qh),il=[],al=[],ol=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),sl=new hi,ul=new Mi,hl=function(e){function t(){var t=e.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Mi,t.boundsDirty=-1,t}return Hh(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),al.push(this.drawCalls[e]);for(this.drawCalls.length=0,e=0;e<this.batches.length;e++){var t=this.batches[e];t.reset(),il.push(t)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new ol(e,t,n,r);return this.graphicsData.push(i),this.dirty++,this},t.prototype.drawHole=function(e,t){if(void 0===t&&(t=null),!this.graphicsData.length)return null;var n=new ol(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,sl):sl.copyFrom(e),r.shape.contains(sl.x,sl.y))){var i=!1;if(r.holes)for(var a=0;a<r.holes.length;a++)if(r.holes[a].shape.contains(sl.x,sl.y)){i=!0;break}if(!i)return!0}}return!1},t.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var o=n[a],s=o.fillStyle,u=o.lineStyle;rl[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(s.visible||u.visible)&&this.processHoles(o.holes);for(var h=0;h<2;h++){var l=0===h?s:u;if(l.visible){var c=l.texture.baseTexture,d=this.indices.length,f=this.points.length/2;c.wrapMode=gr.REPEAT,0===h?this.processFill(o):this.processLine(o);var p=this.points.length/2-f;0!==p&&(r&&!this._compareStyles(i,l)&&(r.end(d,f),r=null),r||((r=il.pop()||new nl).begin(l,d,f),this.batches.push(r),i=l),this.addUvs(this.points,t,l.texture,f,p,l.matrix))}}}var g=this.indices.length,m=this.points.length/2;if(r&&r.end(g,m),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var v=m>65535&&e;this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},t.prototype._compareStyles=function(e,t){return!(!e||!t)&&e.texture.baseTexture===t.texture.baseTexture&&e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var r=e[t],i=0;i<r.size;i++){var a=r.start+i;this.indicesUint16[a]=this.indicesUint16[a]-r.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<2*t.BATCHABLE_SIZE},t.prototype.buildDrawCalls=function(){for(var e=++Ea._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),al.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=al.pop();i||((i=new gs).texArray=new ms),i.texArray.count=0,i.start=0,i.size=0,i.type=hr.TRIANGLES;var a=0,o=null,s=0,u=!1,h=hr.TRIANGLES,l=0;for(this.drawCalls.push(i),t=0;t<this.batches.length;t++){var c=this.batches[t],d=c.style,f=d.texture.baseTexture;u!==!!d.native&&(h=(u=!!d.native)?hr.LINES:hr.TRIANGLES,o=null,a=8,e++),o!==f&&(o=f,f._batchEnabled!==e&&(8===a&&(e++,a=0,i.size>0&&((i=al.pop())||((i=new gs).texArray=new ms),this.drawCalls.push(i)),i.start=l,i.size=0,i.texArray.count=0,i.type=h),f.touched=1,f._batchEnabled=e,f._batchLocation=a,f.wrapMode=gr.REPEAT,i.texArray.elements[i.texArray.count++]=f,a++)),i.size+=c.size,l+=c.size,s=f._batchLocation,this.addColors(n,d.color,d.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,s,c.attribSize,c.attribStart)}Ea._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),a=new Float32Array(i),o=new Uint32Array(i),s=0,u=0;u<e.length/2;u++)a[s++]=e[2*u],a[s++]=e[2*u+1],a[s++]=t[2*u],a[s++]=t[2*u+1],o[s++]=n[u],a[s++]=r[u];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){e.holes.length?Kh.triangulate(e,this):rl[e.type].triangulate(e,this)},t.prototype.processLine=function(e){qh(e,this);for(var t=0;t<e.holes.length;t++)qh(e.holes[t],this)},t.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var n=e[t];rl[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,t=ul,n=vi.IDENTITY;this._bounds.clear(),t.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],a=i.shape,o=i.type,s=i.lineStyle,u=i.matrix||vi.IDENTITY,h=0;if(s&&s.visible&&(h=s.width,o!==ai.POLY||i.fillStyle.visible?h*=Math.max(0,s.alignment):h*=Math.max(s.alignment,1-s.alignment)),n!==u&&(t.isEmpty()||(e.addBoundsMatrix(t,n),t.clear()),n=u),o===ai.RECT||o===ai.RREC){var l=a;t.addFramePad(l.x,l.y,l.x+l.width,l.y+l.height,h,h)}else if(o===ai.CIRC){var c=a;t.addFramePad(c.x,c.y,c.x,c.y,c.radius+h,c.radius+h)}else if(o===ai.ELIP){var d=a;t.addFramePad(d.x,d.y,d.x,d.y,d.width+h,d.height+h)}else{var f=a;e.addVerticesMatrix(n,f.points,0,f.points.length,h,h)}}t.isEmpty()||e.addBoundsMatrix(t,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,t){for(var n=0;n<e.length/2;n++){var r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}},t.prototype.addColors=function(e,t,n,r,i){void 0===i&&(i=0);var a=Hr((t>>16)+(65280&t)+((255&t)<<16),n);e.length=Math.max(e.length,i+r);for(var o=0;o<r;o++)e[i+o]=a},t.prototype.addTextureIds=function(e,t,n,r){void 0===r&&(r=0),e.length=Math.max(e.length,r+n);for(var i=0;i<n;i++)e[r+i]=t},t.prototype.addUvs=function(e,t,n,r,i,a){void 0===a&&(a=null);for(var o=0,s=t.length,u=n.frame;o<i;){var h=e[2*(r+o)],l=e[2*(r+o)+1];if(a){var c=a.a*h+a.c*l+a.tx;l=a.b*h+a.d*l+a.ty,h=c}o++,t.push(h/u.width,l/u.height)}var d=n.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(t,n,s,i)},t.prototype.adjustUvs=function(e,t,n,r){for(var i=t.baseTexture,a=1e-6,o=n+2*r,s=t.frame,u=s.width/i.width,h=s.height/i.height,l=s.x/s.width,c=s.y/s.height,d=Math.floor(e[n]+a),f=Math.floor(e[n+1]+a),p=n+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+a)),f=Math.min(f,Math.floor(e[p+1]+a));for(l-=d,c-=f,p=n;p<o;p+=2)e[p]=(e[p]+l)*u,e[p+1]=(e[p+1]+c)*h},t.BATCHABLE_SIZE=100,t}(_s),ll=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Oh.BUTT,t.join=Nh.MITER,t.miterLimit=10,t}return Hh(t,e),t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(Gh),cl=new Float32Array(3),dl={},fl=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new Gh,n._lineStyle=new ll,n._matrix=null,n._holeMode=!1,n.state=Bo.for2d(),n._geometry=t||new hl,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=ur.NORMAL,n}return Hh(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,t,n,r,i){return void 0===e&&(e=null),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=!1),"number"==typeof e&&(e={width:e,color:t,alpha:n,alignment:r,native:i}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:Fa.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Oh.BUTT,join:Nh.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var t=e.width>0&&e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:t},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new pi,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new pi,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},t.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===e&&i===t||n.push(e,t),this},t.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},t.prototype.quadraticCurveTo=function(e,t,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),tl.curveTo(e,t,n,r,i),this},t.prototype.bezierCurveTo=function(e,t,n,r,i,a){return this._initCurve(),el.curveTo(e,t,n,r,i,a,this.currentPath.points),this},t.prototype.arcTo=function(e,t,n,r,i){this._initCurve(e,t);var a=this.currentPath.points,o=$h.curveTo(e,t,n,r,i,a);if(o){var s=o.cx,u=o.cy,h=o.radius,l=o.startAngle,c=o.endAngle,d=o.anticlockwise;this.arc(s,u,h,l,c,d)}return this},t.prototype.arc=function(e,t,n,r,i,a){if(void 0===a&&(a=!1),r===i)return this;if(!a&&i<=r?i+=oi:a&&r<=i&&(r+=oi),0==i-r)return this;var o=e+Math.cos(r)*n,s=t+Math.sin(r)*n,u=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var l=Math.abs(h[h.length-2]-o),c=Math.abs(h[h.length-1]-s);l<u&&c<u||h.push(o,s)}else this.moveTo(o,s),h=this.currentPath.points;return $h.arc(o,s,e,t,n,r,i,a,h),this},t.prototype.beginFill=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),this.beginTextureFill({texture:Fa.WHITE,color:e,alpha:t})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:Fa.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var t=e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:t},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,t,n,r){return this.drawShape(new ci(e,t,n,r))},t.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new gi(e,t,n,r,i))},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new di(e,t,n))},t.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new fi(e,t,n,r))},t.prototype.drawPolygon=function(){for(var e,t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];var i=!0,a=n[0];a.points?(i=a.closeStroke,e=a.points):e=Array.isArray(n[0])?n[0]:n;var o=new pi(e);return o.closeStroke=i,this.drawShape(o),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==ai.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var t=this._geometry,n=e.context.supports.uint32Indices;t.updateBatches(n),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var r=0;r<n;r++){var i=e.batches[r],a=i.style.color,o=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),u={vertexData:o,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Dr(a),_tintRGB:a,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=u}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}},t.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),n=this._geometry,r=this.tint,i=this.worldAlpha,a=t.uniforms,o=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(r>>16&255)/255*i,a.tint[1]=(r>>8&255)/255*i,a.tint[2]=(255&r)/255*i,a.tint[3]=i,e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var s=0,u=o.length;s<u;s++)this._renderDrawCallDirect(e,n.drawCalls[s])},t.prototype._renderDrawCallDirect=function(e,t){for(var n=t.texArray,r=t.type,i=t.size,a=t.start,o=n.count,s=0;s<o;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(r,i,a)},t.prototype._resolveDirectShader=function(e){var t=this.shader,n=this.pluginName;if(!t){if(!dl[n]){for(var r=e.plugins[n].MAX_TEXTURES,i=new Int32Array(r),a=0;a<r;a++)i[a]=a;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new vi,default:Za.from({uSamplers:i},!0)},s=e.plugins[n]._shader.program;dl[n]=new Lo(s,o)}t=dl[n]}return t},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,r=t.minY,i=t.maxX,a=t.maxY;this._bounds.addFrame(this.transform,n,r,i,a)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Dr(this.tint,cl),t=0;t<this.batches.length;t++){var n=this.batches[t],r=n._batchRGB,i=(e[0]*r[0]*255<<16)+(e[1]*r[1]*255<<8)+(0|e[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,a=t.d,o=t.tx,s=t.ty,u=this._geometry.points,h=this.vertexData,l=0,c=0;c<u.length;c+=2){var d=u[c],f=u[c+1];h[l++]=n*d+i*f+o,h[l++]=a*f+r*d+s}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new hi,t}(Zi),pl=function(e,t){return pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},pl(e,t)},gl=new hi,ml=new Uint16Array([0,1,2,0,2,3]),vl=function(e){function t(t){var n=e.call(this)||this;return n._anchor=new mi(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ur.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||Fa.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=ml,n.pluginName="batch",n.isSprite=!0,n._roundPixels=kr.ROUND_PIXELS,n}return function(e,t){function n(){this.constructor=e}pl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Yr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Yr(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,a=t.d,o=t.tx,s=t.ty,u=this.vertexData,h=e.trim,l=e.orig,c=this._anchor,d=0,f=0,p=0,g=0;if(h?(d=(f=h.x-c._x*l.width)+h.width,p=(g=h.y-c._y*l.height)+h.height):(d=(f=-c._x*l.width)+l.width,p=(g=-c._y*l.height)+l.height),u[0]=n*f+i*g+o,u[1]=a*g+r*f+s,u[2]=n*d+i*g+o,u[3]=a*g+r*d+s,u[4]=n*d+i*p+o,u[5]=a*p+r*d+s,u[6]=n*f+i*p+o,u[7]=a*p+r*f+s,this._roundPixels)for(var m=kr.RESOLUTION,v=0;v<u.length;++v)u[v]=Math.round((u[v]*m|0)/m)}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,a=i.a,o=i.b,s=i.c,u=i.d,h=i.tx,l=i.ty,c=-r._x*n.width,d=c+n.width,f=-r._y*n.height,p=f+n.height;t[0]=a*c+s*f+h,t[1]=u*f+o*c+l,t[2]=a*d+s*f+h,t[3]=u*f+o*d+l,t[4]=a*d+s*p+h,t[5]=u*p+o*d+l,t[6]=a*c+s*p+h,t[7]=u*p+o*c+l},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new Mi),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ci),t=this._localBoundsRect),this._localBounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,gl);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return gl.x>=r&&gl.x<r+t&&(i=-n*this.anchor.y,gl.y>=i&&gl.y<i+n)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,n){return new t(e instanceof Fa?e:Fa.from(e,n))},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=Yr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=Yr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Fa.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Zi),yl=function(e,t){return yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},yl(e,t)};!function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Zh||(Zh={}));var bl={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Zh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},_l=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],El=function(){function e(e){this.styleID=0,this.reset(),kl(this,e,e)}return e.prototype.clone=function(){var t={};return kl(t,this,bl),new e(t)},e.prototype.reset=function(){kl(this,bl,bl)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=xl(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=xl(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=xl(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&_l.indexOf(r)<0&&(r='"'+r+'"'),t[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},e}();function Tl(e){return"number"==typeof e?Lr(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function xl(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=Tl(e[t]);return e}return Tl(e)}function kl(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}var Sl=function(){function e(e,t,n,r,i,a,o,s,u){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=s,this.fontProperties=u}return e.measureText=function(t,n,r,i){void 0===i&&(i=e._canvas),r=null==r?n.wordWrap:r;var a=n.toFontString(),o=e.measureFont(a);0===o.fontSize&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);var s=i.getContext("2d");s.font=a;for(var u=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),h=new Array(u.length),l=0,c=0;c<u.length;c++){var d=s.measureText(u[c]).width+(u[c].length-1)*n.letterSpacing;h[c]=d,l=Math.max(l,d)}var f=l+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var p=n.lineHeight||o.fontSize+n.strokeThickness,g=Math.max(p,o.fontSize+n.strokeThickness)+(u.length-1)*(p+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new e(t,n,f,g,u,h,p+n.leading,l,o)},e.wordWrap=function(t,n,r){void 0===r&&(r=e._canvas);for(var i=r.getContext("2d"),a=0,o="",s="",u=Object.create(null),h=n.letterSpacing,l=n.whiteSpace,c=e.collapseSpaces(l),d=e.collapseNewlines(l),f=!c,p=n.wordWrapWidth+h,g=e.tokenize(t),m=0;m<g.length;m++){var v=g[m];if(e.isNewline(v)){if(!d){s+=e.addLine(o),f=!c,o="",a=0;continue}v=" "}if(c){var y=e.isBreakingSpace(v),b=e.isBreakingSpace(o[o.length-1]);if(y&&b)continue}var _=e.getFromCache(v,h,u,i);if(_>p)if(""!==o&&(s+=e.addLine(o),o="",a=0),e.canBreakWords(v,n.breakWords))for(var E=e.wordWrapSplit(v),T=0;T<E.length;T++){for(var x=E[T],k=1;E[T+k];){var S=E[T+k],w=x[x.length-1];if(e.canBreakChars(w,S,v,T,n.breakWords))break;x+=S,k++}T+=x.length-1;var M=e.getFromCache(x,h,u,i);M+a>p&&(s+=e.addLine(o),f=!1,o="",a=0),o+=x,a+=M}else{o.length>0&&(s+=e.addLine(o),o="",a=0);var A=m===g.length-1;s+=e.addLine(v,!A),f=!1,o="",a=0}else _+a>p&&(f=!1,s+=e.addLine(o),o="",a=0),(o.length>0||!e.isBreakingSpace(v)||f)&&(o+=v,a+=_)}return s+e.addLine(o,!1)},e.addLine=function(t,n){return void 0===n&&(n=!0),t=e.trimRight(t),n?t+"\n":t},e.getFromCache=function(e,t,n,r){var i=n[e];if("number"!=typeof i){var a=e.length*t;i=r.measureText(e).width+a,n[e]=i}return i},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,n){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var n=[],r="";if("string"!=typeof t)return n;for(var i=0;i<t.length;i++){var a=t[i],o=t[i+1];e.isBreakingSpace(a,o)||e.isNewline(a)?(""!==r&&(n.push(r),r=""),n.push(a)):r+=a}return""!==r&&n.push(r),n},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,n,r,i){return!0},e.wordWrapSplit=function(e){return e.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var a=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),u=Math.ceil(e.HEIGHT_MULTIPLIER*s);s=s*e.BASELINE_MULTIPLIER|0,r.width=o,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var h=i.getImageData(0,0,o,u).data,l=h.length,c=4*o,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var g=0;g<c;g+=4)if(255!==h[f+g]){p=!0;break}if(p)break;f+=c}for(n.ascent=s-d,f=l-c,p=!1,d=u;d>s;--d){for(g=0;g<c;g+=4)if(255!==h[f+g]){p=!0;break}if(p)break;f-=c}return n.descent=d-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e.clearMetrics=function(t){void 0===t&&(t=""),t?delete e._fonts[t]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var t=void 0;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d");if(r&&r.measureText)return e.__canvas=n,n;t=document.createElement("canvas")}catch(e){t=document.createElement("canvas")}t.width=t.height=10,e.__canvas=t}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();Sl._fonts={},Sl.METRICS_STRING="|q",Sl.BASELINE_SYMBOL="M",Sl.BASELINE_MULTIPLIER=1.4,Sl.HEIGHT_MULTIPLIER=2,Sl._newlines=[10,13],Sl._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var wl={texture:!0,children:!1,baseTexture:!0},Ml=function(e){function t(t,n,r){var i=this,a=!1;r||(r=document.createElement("canvas"),a=!0),r.width=3,r.height=3;var o=Fa.from(r);return o.orig=new ci,o.trim=new ci,(i=e.call(this,o)||this)._ownCanvas=a,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=kr.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=n,i.localStyleID=-1,i}return function(e,t){function n(){this.constructor=e}yl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(e){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!e){this._font=this._style.toFontString();var r,i,a=this.context,o=Sl.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,u=o.height,h=o.lines,l=o.lineHeight,c=o.lineWidths,d=o.maxLineWidth,f=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*n.padding)*this._resolution),a.scale(this._resolution,this._resolution),a.clearRect(0,0,this.canvas.width,this.canvas.height),a.font=this._font,a.lineWidth=n.strokeThickness,a.textBaseline=n.textBaseline,a.lineJoin=n.lineJoin,a.miterLimit=n.miterLimit;for(var p=n.dropShadow?2:1,g=0;g<p;++g){var m=n.dropShadow&&0===g,v=m?Math.ceil(Math.max(1,u)+2*n.padding):0,y=v*this._resolution;if(m){a.fillStyle="black",a.strokeStyle="black";var b=n.dropShadowColor,_=Dr("number"==typeof b?b:Br(b)),E=n.dropShadowBlur*this._resolution,T=n.dropShadowDistance*this._resolution;a.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+n.dropShadowAlpha+")",a.shadowBlur=E,a.shadowOffsetX=Math.cos(n.dropShadowAngle)*T,a.shadowOffsetY=Math.sin(n.dropShadowAngle)*T+y}else a.fillStyle=this._generateFillStyle(n,h,o),a.strokeStyle=n.stroke,a.shadowColor="black",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;var x=(l-f.fontSize)/2;(!t.nextLineHeightBehavior||l-f.fontSize<0)&&(x=0);for(var k=0;k<h.length;k++)r=n.strokeThickness/2,i=n.strokeThickness/2+k*l+f.ascent+x,"right"===n.align?r+=d-c[k]:"center"===n.align&&(r+=(d-c[k])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(h[k],r+n.padding,i+n.padding-v,!0),n.fill&&this.drawLetterSpacing(h[k],r+n.padding,i+n.padding-v)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,n,r,i){void 0===i&&(i=!1);var a=this._style.letterSpacing,o=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===a||o)return o&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),void(i?this.context.strokeText(e,n,r):this.context.fillText(e,n,r));for(var s=n,u=Array.from?Array.from(e):e.split(""),h=this.context.measureText(e).width,l=0,c=0;c<u.length;++c){var d=u[c];i?this.context.strokeText(d,s,r):this.context.fillText(d,s,r);for(var f="",p=c+1;p<u.length;++p)f+=u[p];s+=h-(l=this.context.measureText(f).width)+a,h=l}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=function(e){var t,n,r,i=e.width,a=e.height,o=e.getContext("2d"),s=o.getImageData(0,0,i,a).data,u=s.length,h={top:null,left:null,right:null,bottom:null},l=null;for(t=0;t<u;t+=4)0!==s[t+3]&&(n=t/4%i,r=~~(t/4/i),null===h.top&&(h.top=r),(null===h.left||n<h.left)&&(h.left=n),(null===h.right||h.right<n)&&(h.right=n+1),(null===h.bottom||h.bottom<r)&&(h.bottom=r));return null!==h.top&&(i=h.right-h.left,a=h.bottom-h.top+1,l=o.getImageData(h.left,h.top,i,a)),{height:a,width:i,data:l}}(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,a=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},t.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},t.prototype.getBounds=function(t,n){return this.updateText(!0),-1===this._textureID&&(t=!1),e.prototype.getBounds.call(this,t,n)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,t,n){var r,i=e.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var a=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,s=this.canvas.width/this._resolution-a-2*o,u=this.canvas.height/this._resolution-a-2*o,h=i.slice(),l=e.fillGradientStops.slice();if(!l.length)for(var c=h.length+1,d=1;d<c;++d)l.push(d/c);if(h.unshift(i[0]),l.unshift(0),h.push(i[i.length-1]),l.push(1),e.fillGradientType===Zh.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,o,s/2,u+o);var f=n.fontProperties.fontSize+e.strokeThickness;for(d=0;d<t.length;d++){var p=n.lineHeight*(d-1)+f,g=n.lineHeight*d,m=g;d>0&&p>g&&(m=(g+p)/2);var v=g+f,y=n.lineHeight*(d+1),b=v;d+1<t.length&&y<v&&(b=(v+y)/2);for(var _=(b-m)/u,E=0;E<h.length;E++){var T;T="number"==typeof l[E]?l[E]:E/h.length;var x=Math.min(1,Math.max(0,m/u+T*_));x=Number(x.toFixed(5)),r.addColorStop(x,h[E])}}}else{r=this.context.createLinearGradient(o,u/2,s+o,u/2);var k=h.length+1,S=1;for(d=0;d<h.length;d++){var w;w="number"==typeof l[d]?l[d]:S/k,r.addColorStop(w,h[d]),S++}}return r},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},wl,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=Yr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=Yr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof El?e:new El(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(vl);kr.UPLOADS_PER_FRAME=4;var Al=function(e,t){return Al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Al(e,t)},Rl=function(){function e(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Cl(e,t){var n=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof Fa){var i=e._textures[r].baseTexture;-1===t.indexOf(i)&&(t.push(i),n=!0)}return n}function Pl(e,t){if(e.baseTexture instanceof Ea){var n=e.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Il(e,t){if(e._texture&&e._texture instanceof Fa){var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Nl(e,t){return t instanceof Ml&&(t.updateText(!0),!0)}function Ol(e,t){if(t instanceof El){var n=t.toFontString();return Sl.measureFont(n),!0}return!1}function Dl(e,t){if(e instanceof Ml){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Ll(e,t){return e instanceof El&&(-1===t.indexOf(e)&&t.push(e),!0)}var Bl=function(){function e(e){var t=this;this.limiter=new Rl(kr.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(Dl),this.registerFindHook(Ll),this.registerFindHook(Cl),this.registerFindHook(Pl),this.registerFindHook(Il),this.registerUploadHook(Nl),this.registerUploadHook(Ol)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,na.system.addOnce(this.tick,this,$i.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)na.system.addOnce(this.tick,this,$i.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);for(this.completes.length=0,n=0,r=i.length;n<r;n++)i[n]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Zi)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},e.prototype.destroy=function(){this.ticking&&na.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Fl(e,t){return t instanceof Ea&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Gl(e,t){if(!(t instanceof fl))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var a=r[i].style.texture;a&&Fl(e,a.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Ul(e,t){return e instanceof fl&&(t.push(e),!0)}var Hl=function(e){function t(t){var n=e.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Ul),n.registerUploadHook(Fl),n.registerUploadHook(Gl),n}return function(e,t){function n(){this.constructor=e}Al(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Bl),jl=(function(){function e(e){this.maxMilliseconds=e,this.frameStart=0}e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function e(e,t,n){void 0===n&&(n=null),this._texture=e instanceof Fa?e:null,this.baseTexture=e instanceof Ea?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,n=ii(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],a=this._frames[i],o=a.frame;if(o){var s,u=null,h=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,l=new ci(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);s=a.rotated?new ci(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new ci(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(u=new ci(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Fa(this.baseTexture,s,l,u,a.rotated?2:0,a.anchor),Fa.addToCache(this.textures[i],i)}n++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},e.prototype.destroy=function(e){var t;for(var n in void 0===e&&(e=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}()),Kl=function(){function e(){}return e.use=function(t,n){var r,i,a=this,o=t.name+"_image";if(t.data&&t.type===Zu.TYPE.JSON&&t.data.frames&&!a.resources[o]){var s=null===(i=null===(r=t.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(s))for(var u=function(e){if("string"!=typeof e)return"continue";var n=e.replace(".json",""),r=Cr.resolve(t.url.replace(a.baseUrl,""),e);if(a.resources[n]||Object.values(a.resources).some((function(e){return Cr.format(Cr.parse(e.url))===r})))return"continue";var i={crossOrigin:t.crossOrigin,loadType:Zu.LOAD_TYPE.XHR,xhrType:Zu.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};a.add(n,r,i)},h=0,l=s;h<l.length;h++)u(l[h]);var c={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=e.getResourcePath(t,a.baseUrl);a.add(o,d,c,(function(e){if(e.error)n(e.error);else{var r=new jl(e.texture,t.data,t.url);r.parse((function(){t.spritesheet=r,t.textures=r.textures,n()}))}}))}else n()},e.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:Cr.resolve(e.url.replace(t,""),e.data.meta.image)},e}(),Xl=function(e,t){return Xl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Xl(e,t)};function zl(e,t){function n(){this.constructor=e}Xl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Vl=new hi,Wl=function(e){function t(t,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=e.call(this,t)||this;return i.tileTransform=new wi,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new Uo(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return zl(t,e),Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ci),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Vl);var t=this._width,n=this._height,r=-t*this.anchor._x;if(Vl.x>=r&&Vl.x<r+t){var i=-n*this.anchor._y;if(Vl.y>=i&&Vl.y<i+n)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,n){return new t(e instanceof Fa?e:Fa.from(e,n),n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(vl),Yl="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Jl=new vi,ql=function(e){function t(t){var n=e.call(this,t)||this;return t.runners.contextChange.add(n),n.quad=new qa,n.state=Bo.for2d(),n}return zl(t,e),t.prototype.contextChange=function(){var e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Lo.from(Yl,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?Lo.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):Lo.from(Yl,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)},t.prototype.render=function(e){var t=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);var i=e.uvRespectAnchor?e.anchor.x:0,a=e.uvRespectAnchor?e.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-a,r[2]=r[4]=1-i,r[5]=r[7]=1-a,n.invalidate();var o=e._texture,s=o.baseTexture,u=e.tileTransform.localTransform,h=e.uvMatrix,l=s.isPowerOfTwo&&o.frame.width===s.width&&o.frame.height===s.height;l&&(s._glTextures[t.CONTEXT_UID]?l=s.wrapMode!==gr.CLAMP:s.wrapMode===gr.CLAMP&&(s.wrapMode=gr.REPEAT));var c=l?this.simpleShader:this.shader,d=o.width,f=o.height,p=e._width,g=e._height;Jl.set(u.a*d/p,u.b*d/g,u.c*f/p,u.d*f/g,u.tx/p,u.ty/g),Jl.invert(),l?Jl.prepend(h.mapCoord):(c.uniforms.uMapCoord=h.mapCoord.toArray(!0),c.uniforms.uClampFrame=h.uClampFrame,c.uniforms.uClampOffset=h.uClampOffset),c.uniforms.uTransform=Jl.toArray(!0),c.uniforms.uColor=jr(e.tint,e.worldAlpha,c.uniforms.uColor,s.alphaMode),c.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),c.uniforms.uSampler=o,t.shader.bind(c),t.geometry.bind(n),this.state.blendMode=Ur(e.blendMode,s.alphaMode),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(ro),Ql=function(e,t){return Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ql(e,t)};function Zl(e,t){function n(){this.constructor=e}Ql(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $l=function(){function e(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),ec=new hi,tc=new pi,nc=function(e){function t(t,n,r,i){void 0===i&&(i=hr.TRIANGLES);var a=e.call(this)||this;return a.geometry=t,a.shader=n,a.state=r||Bo.for2d(),a.drawMode=i,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=kr.ROUND_PIXELS,a.batchUvs=null,a}return Zl(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===hr.TRIANGLES&&n.length<2*t.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var r=this.transform.worldTransform,i=r.a,a=r.b,o=r.c,s=r.d,u=r.tx,h=r.ty,l=this.vertexData,c=0;c<l.length/2;c++){var d=t[2*c],f=t[2*c+1];l[2*c]=i*d+o*f+u,l[2*c+1]=a*d+s*f+h}if(this._roundPixels){var p=kr.RESOLUTION;for(c=0;c<l.length;++c)l[c]=Math.round((l[c]*p|0)/p)}this.vertexDirty=n}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new $l(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ec);for(var t=this.geometry.getBuffer("aVertexPosition").data,n=tc.points,r=this.geometry.getIndex().data,i=r.length,a=4===this.drawMode?3:1,o=0;o+2<i;o+=a){var s=2*r[o],u=2*r[o+1],h=2*r[o+2];if(n[0]=t[s],n[1]=t[s+1],n[2]=t[u],n[3]=t[u+1],n[4]=t[h],n[5]=t[h+1],tc.contains(ec.x,ec.y))return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Zi),rc=function(e){function t(t,n){var r=this,i={uSampler:t,alpha:1,uTextureMatrix:vi.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),(r=e.call(this,n.program||Do.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new Uo(t),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return Zl(t,e),Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;jr(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Lo),ic=function(e){function t(t,n,r){var i=e.call(this)||this,a=new Ka(t),o=new Ka(n,!0),s=new Ka(r,!0,!0);return i.addAttribute("aVertexPosition",a,2,!1,dr.FLOAT).addAttribute("aTextureCoord",o,2,!1,dr.FLOAT).addIndex(s),i._updateId=-1,i}return Zl(t,e),Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Ya),ac=function(e,t){return ac=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ac(e,t)},oc=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},sc=function(){function e(){}return e.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in t){var i=t[r].match(/^[a-z]+/gm)[0],a=t[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var s in a){var u=a[s].split("="),h=u[0],l=u[1].replace(/"/gm,""),c=parseFloat(l),d=isNaN(c)?l:c;o[h]=d}n[i].push(o)}var f=new oc;return n.info.forEach((function(e){return f.info.push({face:e.face,size:parseInt(e.size,10)})})),n.common.forEach((function(e){return f.common.push({lineHeight:parseInt(e.lineHeight,10)})})),n.page.forEach((function(e){return f.page.push({id:parseInt(e.id,10),file:e.file})})),n.char.forEach((function(e){return f.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})})),n.kerning.forEach((function(e){return f.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})})),n.distanceField.forEach((function(e){return f.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})})),f},e}(),uc=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var t=new oc,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField"),u=0;u<n.length;u++)t.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(u=0;u<r.length;u++)t.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(u=0;u<i.length;u++)t.page.push({id:parseInt(i[u].getAttribute("id"),10)||0,file:i[u].getAttribute("file")});for(u=0;u<a.length;u++){var h=a[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(u=0;u<o.length;u++)t.kerning.push({first:parseInt(o[u].getAttribute("first"),10),second:parseInt(o[u].getAttribute("second"),10),amount:parseInt(o[u].getAttribute("amount"),10)});for(u=0;u<s.length;u++)t.distanceField.push({fieldType:s[u].getAttribute("fieldType"),distanceRange:parseInt(s[u].getAttribute("distanceRange"),10)});return t},e}(),hc=function(){function e(){}return e.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return uc.test(t)}return!1},e.parse=function(e){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return uc.parse(t)},e}(),lc=[sc,uc,hc];function cc(e){for(var t=0;t<lc.length;t++)if(lc[t].test(e))return lc[t];return null}function dc(e,t,n,r,i,a,o){var s=n.text,u=n.fontProperties;t.translate(r,i),t.scale(a,a);var h=o.strokeThickness/2,l=-o.strokeThickness/2;if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=function(e,t,n,r,i,a){var o,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var u=n.dropShadow?n.dropShadowDistance:0,h=n.padding||0,l=e.width/r-u-2*h,c=e.height/r-u-2*h,d=s.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,g=1;g<p;++g)f.push(g/p);if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),n.fillGradientType===Zh.LINEAR_VERTICAL){o=t.createLinearGradient(l/2,h,l/2,c+h);var m=0,v=(a.fontProperties.fontSize+n.strokeThickness)/c;for(g=0;g<i.length;g++)for(var y=a.lineHeight*g,b=0;b<d.length;b++){var _=y/c+("number"==typeof f[b]?f[b]:b/d.length)*v,E=Math.max(m,_);E=Math.min(E,1),o.addColorStop(E,d[b]),m=E}}else{o=t.createLinearGradient(h,c/2,l+h,c/2);var T=d.length+1,x=1;for(g=0;g<d.length;g++){var k;k="number"==typeof f[g]?f[g]:x/T,o.addColorStop(k,d[g]),x++}}return o}(e,t,o,a,[s],n),t.strokeStyle=o.stroke,o.dropShadow){var c=o.dropShadowColor,d=Dr("number"==typeof c?c:Br(c)),f=o.dropShadowBlur*a,p=o.dropShadowDistance*a;t.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+o.dropShadowAlpha+")",t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(s,h,l+n.lineHeight-u.descent),o.fill&&t.fillText(s,h,l+n.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function fc(e){return Array.from?Array.from(e):e.split("")}function pc(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var gc=function(){function e(e,t,n){var r,i,a=e.info[0],o=e.common[0],s=e.page[0],u=e.distanceField[0],h=ii(s.file),l={};this._ownsTextures=n,this.font=a.face,this.size=a.size,this.lineHeight=o.lineHeight/h,this.chars={},this.pageTextures=l;for(var c=0;c<e.page.length;c++){var d=e.page[c],f=d.id,p=d.file;l[f]=t instanceof Array?t[c]:t[p],(null==u?void 0:u.fieldType)&&"none"!==u.fieldType&&(l[f].baseTexture.alphaMode=vr.NO_PREMULTIPLIED_ALPHA)}for(c=0;c<e.char.length;c++){var g=e.char[c],m=(f=g.id,g.page),v=e.char[c],y=v.x,b=v.y,_=v.width,E=v.height,T=v.xoffset,x=v.yoffset,k=v.xadvance;b/=h,_/=h,E/=h,T/=h,x/=h,k/=h;var S=new ci((y/=h)+l[m].frame.x/h,b+l[m].frame.y/h,_,E);this.chars[f]={xOffset:T,yOffset:x,xAdvance:k,kerning:{},texture:new Fa(l[m].baseTexture,S),page:m}}for(c=0;c<e.kerning.length;c++){var w=e.kerning[c],M=w.first,A=w.second,R=w.amount;M/=h,A/=h,R/=h,this.chars[A]&&(this.chars[A].kerning[M]=R)}this.distanceFieldRange=null==u?void 0:u.distanceRange,this.distanceFieldType=null!==(i=null===(r=null==u?void 0:u.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"none"}return e.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},e.install=function(t,n,r){var i;if(t instanceof oc)i=t;else{var a=cc(t);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(t)}n instanceof Fa&&(n=[n]);var o=new e(i,n,r);return e.available[o.font]=o,o},e.uninstall=function(t){var n=e.available[t];if(!n)throw new Error("No font found named '"+t+"'");n.destroy(),delete e.available[t]},e.from=function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),a=i.chars,o=i.padding,s=i.resolution,u=i.textureWidth,h=i.textureHeight,l=function(e){"string"==typeof e&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var a=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,u=o;s<=u;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,fc(i))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(a),c=n instanceof El?n:new El(n),d=u,f=new oc;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};for(var p,g,m,v=0,y=0,b=0,_=[],E=0;E<l.length;E++){p||((p=document.createElement("canvas")).width=u,p.height=h,g=p.getContext("2d"),m=new Ea(p,{resolution:s}),_.push(new Fa(m)),f.page.push({id:_.length-1,file:""}));var T=Sl.measureText(l[E],c,!1,p),x=T.width,k=Math.ceil(T.height),S=Math.ceil(("italic"===c.fontStyle?2:1)*x);if(y>=h-k*s){if(0===y)throw new Error("[BitmapFont] textureHeight "+h+"px is too small for "+c.fontSize+"px fonts");--E,p=null,g=null,m=null,y=0,v=0,b=0}else if(b=Math.max(k+T.fontProperties.descent,b),S*s+v>=d)--E,y+=b*s,y=Math.ceil(y),v=0,b=0;else{dc(p,g,T,v,y,s,c);var w=pc(T.text);f.char.push({id:w,page:_.length-1,x:v/s,y:y/s,width:S,height:k,xoffset:0,yoffset:0,xadvance:Math.ceil(x-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),v+=(S+2*o)*s,v=Math.ceil(v)}}E=0;for(var M=l.length;E<M;E++)for(var A=l[E],R=0;R<M;R++){var C=l[R],P=g.measureText(A).width,I=g.measureText(C).width,N=g.measureText(A+C).width-(P+I);N&&f.kerning.push({first:pc(A),second:pc(C),amount:N})}var O=new e(f,_,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=O,O},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),mc=[],vc=[],yc=[],bc=(function(e){function t(n,r){void 0===r&&(r={});var i=e.call(this)||this;i._tint=16777215;var a=Object.assign({},t.styleDefaults,r),o=a.align,s=a.tint,u=a.maxWidth,h=a.letterSpacing,l=a.fontName,c=a.fontSize;if(!gc.available[l])throw new Error('Missing BitmapFont "'+l+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=s,i._fontName=l,i._fontSize=c||gc.available[l].size,i.text=n,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=h,i._anchor=new mi((function(){i.dirty=!0}),i,0,0),i._roundPixels=kr.ROUND_PIXELS,i.dirty=!0,i._resolution=kr.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}(function(e,t){function n(){this.constructor=e}ac(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.updateText=function(){for(var e,t=gc.available[this._fontName],n=this._fontSize/t.size,r=new hi,i=[],a=[],o=[],s=fc(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*t.size/this._fontSize,h="none"===t.distanceFieldType?mc:vc,l=null,c=0,d=0,f=0,p=-1,g=0,m=0,v=0,y=0,b=0;b<s.length;b++){var _=pc(U=s[b]);if(/(?:\s)/.test(U)&&(p=b,g=c,y++),"\r"!==U&&"\n"!==U){var E=t.chars[_];if(E){l&&E.kerning[l]&&(r.x+=E.kerning[l]);var T=yc.pop()||{texture:Fa.EMPTY,line:0,charCode:0,prevSpaces:0,position:new hi};T.texture=E.texture,T.line=f,T.charCode=_,T.position.x=r.x+E.xOffset+this._letterSpacing/2,T.position.y=r.y+E.yOffset,T.prevSpaces=y,i.push(T),c=T.position.x+Math.max(E.xAdvance,E.texture.orig.width),r.x+=E.xAdvance+this._letterSpacing,v=Math.max(v,E.yOffset+E.texture.height),l=_,-1!==p&&u>0&&r.x>u&&(Wr(i,1+p-++m,1+b-p),b=p,p=-1,a.push(g),o.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,g),f++,r.x=0,r.y+=t.lineHeight,l=null,y=0)}}else a.push(c),o.push(-1),d=Math.max(d,c),++f,++m,r.x=0,r.y+=t.lineHeight,l=null,y=0}var x=s[s.length-1];"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(c=g),a.push(c),d=Math.max(d,c),o.push(-1));var k=[];for(b=0;b<=f;b++){var S=0;"right"===this._align?S=d-a[b]:"center"===this._align?S=(d-a[b])/2:"justify"===this._align&&(S=o[b]<0?0:(d-a[b])/o[b]),k.push(S)}var w=i.length,M={},A=[],R=this._activePagesMeshData;for(b=0;b<R.length;b++)h.push(R[b]);for(b=0;b<w;b++){var C=(j=i[b].texture).baseTexture.uid;if(!M[C]){if(!(J=h.pop())){var P=new ic,I=void 0,N=void 0;"none"===t.distanceFieldType?(I=new rc(Fa.EMPTY),N=ur.NORMAL):(I=new rc(Fa.EMPTY,{program:Do.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),N=ur.NORMAL_NPM);var O=new nc(P,I);O.blendMode=N,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:O,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;var D=this._textureCache;D[C]=D[C]||new Fa(j.baseTexture),J.mesh.texture=D[C],J.mesh.tint=this._tint,A.push(J),M[C]=J}M[C].total++}for(b=0;b<R.length;b++)-1===A.indexOf(R[b])&&this.removeChild(R[b].mesh);for(b=0;b<A.length;b++)A[b].mesh.parent!==this&&this.addChild(A[b].mesh);for(var b in this._activePagesMeshData=A,M){var L=(J=M[b]).total;if(!((null===(e=J.indices)||void 0===e?void 0:e.length)>6*L)||J.vertices.length<2*nc.BATCHABLE_SIZE)J.vertices=new Float32Array(8*L),J.uvs=new Float32Array(8*L),J.indices=new Uint16Array(6*L);else for(var B=J.total,F=J.vertices,G=4*B*2;G<F.length;G++)F[G]=0;J.mesh.size=6*L}for(b=0;b<w;b++){var U,H=(U=i[b]).position.x+k[U.line]*("justify"===this._align?U.prevSpaces:1);this._roundPixels&&(H=Math.round(H));var j,K=H*n,X=U.position.y*n,z=M[(j=U.texture).baseTexture.uid],V=j.frame,W=j._uvs,Y=z.index++;z.indices[6*Y+0]=0+4*Y,z.indices[6*Y+1]=1+4*Y,z.indices[6*Y+2]=2+4*Y,z.indices[6*Y+3]=0+4*Y,z.indices[6*Y+4]=2+4*Y,z.indices[6*Y+5]=3+4*Y,z.vertices[8*Y+0]=K,z.vertices[8*Y+1]=X,z.vertices[8*Y+2]=K+V.width*n,z.vertices[8*Y+3]=X,z.vertices[8*Y+4]=K+V.width*n,z.vertices[8*Y+5]=X+V.height*n,z.vertices[8*Y+6]=K,z.vertices[8*Y+7]=X+V.height*n,z.uvs[8*Y+0]=W.x0,z.uvs[8*Y+1]=W.y0,z.uvs[8*Y+2]=W.x1,z.uvs[8*Y+3]=W.y1,z.uvs[8*Y+4]=W.x2,z.uvs[8*Y+5]=W.y2,z.uvs[8*Y+6]=W.x3,z.uvs[8*Y+7]=W.y3}for(var b in this._textWidth=d*n,this._textHeight=(r.y+t.lineHeight)*n,M){var J=M[b];if(0!==this.anchor.x||0!==this.anchor.y)for(var q=0,Q=this._textWidth*this.anchor.x,Z=this._textHeight*this.anchor.y,$=0;$<J.total;$++)J.vertices[q++]-=Q,J.vertices[q++]-=Z,J.vertices[q++]-=Q,J.vertices[q++]-=Z,J.vertices[q++]-=Q,J.vertices[q++]-=Z,J.vertices[q++]-=Q,J.vertices[q++]-=Z;this._maxLineHeight=v*n;var ee=J.mesh.geometry.getBuffer("aVertexPosition"),te=J.mesh.geometry.getBuffer("aTextureCoord"),ne=J.mesh.geometry.getIndex();ee.data=J.vertices,te.data=J.uvs,ne.data=J.indices,ee.update(),te.update(),ne.update()}for(b=0;b<i.length;b++)yc.push(i[b])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var n=gc.available[this._fontName],r=n.distanceFieldRange,i=n.distanceFieldType,a=n.size;if("none"!==i)for(var o=this.worldTransform,s=o.a,u=o.b,h=o.c,l=o.d,c=Math.sqrt(s*s+u*u),d=Math.sqrt(h*h+l*l),f=(Math.abs(c)+Math.abs(d))/2,p=this._fontSize/a,g=0,m=this._activePagesMeshData;g<m.length;g++)m[g].mesh.shader.uniforms.uFWidth=f*r*p*this._resolution;e.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!gc.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(t){var n=this._textureCache;for(var r in n)n[r].destroy(),delete n[r];this._textureCache=null,e.prototype.destroy.call(this,t)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(Zi),function(){function e(){}return e.add=function(){Zu.setExtensionXhrType("fnt",Zu.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,n){var r=cc(t.data);if(r)for(var i=e.getBaseUrl(this,t),a=r.parse(t.data),o={},s=function(e){o[e.metadata.pageFile]=e.texture,Object.keys(o).length===a.page.length&&(t.bitmapFont=gc.install(a,o,!0),n())},u=0;u<a.page.length;++u){var h=a.page[u].file,l=i+h,c=!1;for(var d in this.resources){var f=this.resources[d];if(f.url===l){f.metadata.pageFile=h,f.texture?s(f):f.onAfterMiddleware.add(s),c=!0;break}}if(!c){var p={crossOrigin:t.crossOrigin,loadType:Zu.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:h},t.metadata.imageMetadata),parentResource:t};this.add(l,p,s)}}else n()},e.getBaseUrl=function(t,n){var r=n.isDataUrl?"":e.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),t.baseUrl&&r&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(r+="/")),(r=r.replace(t.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},e.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},e}()),_c=function(e,t){return _c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},_c(e,t)};!function(e){function t(t){void 0===t&&(t=1);var n=e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=t,n}(function(e,t){function n(){this.constructor=e}_c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0})}(Fo);var Ec=function(e,t){return Ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ec(e,t)};function Tc(e,t){function n(){this.constructor=e}Ec(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var xc,kc,Sc,wc,Mc,Ac,Rc,Cc,Pc,Ic,Nc,Oc,Dc,Lc,Bc,Fc,Gc,Uc,Hc,jc={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Kc=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(xc||(xc={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(kc||(kc={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Sc||(Sc={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(wc||(wc={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Mc||(Mc={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Ac||(Ac={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Rc||(Rc={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Cc||(Cc={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(Pc||(Pc={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Ic||(Ic={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Nc||(Nc={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(Oc||(Oc={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Dc||(Dc={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Lc||(Lc={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Bc||(Bc={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Fc||(Fc={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Gc||(Gc={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Uc||(Uc={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Hc||(Hc={}));var Xc=function(e){function t(t,n,r,i,a){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=kr.FILTER_RESOLUTION),void 0===a&&(a=5);var o=this,s=function(e,t){var n,r=Math.ceil(e/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",a="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var s=n.replace("%index%",o.toString());a+=s=s.replace("%sampleIndex%",o-(r-1)+".0"),a+="\n"}return(i=i.replace("%blur%",a)).replace("%size%",e.toString())}(a,t),u=function(e){for(var t,n=jc[e],r=n.length,i=Kc,a="",o=0;o<e;o++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());t=o,o>=r&&(t=e-o-1),a+=s=s.replace("%value%",n[t].toString()),a+="\n"}return(i=i.replace("%blur%",a)).replace("%size%",e.toString())}(a);return(o=e.call(this,s,u)||this).horizontal=t,o.resolution=i,o._quality=0,o.quality=r,o.blur=n,o}return Tc(t,e),t.prototype.apply=function(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{var i=e.getFilterTexture(),a=e.renderer,o=t,s=i;this.state.blend=!1,e.applyFilter(this,o,s,Lc.CLEAR);for(var u=1;u<this.passes-1;u++){e.bindAndClear(o,Lc.BLIT),this.uniforms.uSampler=s;var h=s;s=o,o=h,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,r),e.returnFilterTexture(i)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(Fo),zc=(function(e){function t(t,n,r,i){void 0===t&&(t=8),void 0===n&&(n=4),void 0===r&&(r=kr.FILTER_RESOLUTION),void 0===i&&(i=5);var a=e.call(this)||this;return a.blurXFilter=new Xc(!0,t,n,r,i),a.blurYFilter=new Xc(!1,t,n,r,i),a.resolution=r,a.quality=n,a.blur=t,a.repeatEdgePixels=!1,a}Tc(t,e),t.prototype.apply=function(e,t,n,r){var i=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(i&&a){var o=e.getFilterTexture();this.blurXFilter.apply(e,t,o,Lc.CLEAR),this.blurYFilter.apply(e,o,n,r),e.returnFilterTexture(o)}else a?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0})}(Fo),function(e,t){return zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},zc(e,t)}),Vc=function(e){function t(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=e.call(this,ps,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,t}return function(e,t){function n(){this.constructor=e}zc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._loadMatrix=function(e,t){void 0===t&&(t=!1);var n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.tint=function(e,t){var n=[(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,a=(0,Math.sqrt)(i),o=[n+(1-n)*i,i*(1-n)-a*r,i*(1-n)+a*r,0,0,i*(1-n)+a*r,n+i*(1-n),i*(1-n)-a*r,0,0,i*(1-n)-a*r,i*(1-n)+a*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(o,t)},t.prototype.contrast=function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(e,t){void 0===e&&(e=0);var n=2*e/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,n,r,i){var a=((n=n||16770432)>>16&255)/255,o=(n>>8&255)/255,s=(255&n)/255,u=((r=r||3375104)>>16&255)/255,h=(r>>8&255)/255,l=(255&r)/255,c=[.3,.59,.11,0,0,a,o,s,e=e||.2,0,u,h,l,t=t||.15,0,a-u,o-h,s-l,0,0];this._loadMatrix(c,i)},t.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(Fo);Vc.prototype.grayscale=Vc.prototype.greyscale;var Wc=function(e,t){return Wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Wc(e,t)};!function(e){function t(t,n){var r=this,i=new vi;return t.renderable=!1,(r=e.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,r.maskMatrix=i,null==n&&(n=20),r.scale=new hi(n,n),r}(function(e,t){function n(){this.constructor=e}Wc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.apply=function(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,a=Math.sqrt(i.a*i.a+i.b*i.b),o=Math.sqrt(i.c*i.c+i.d*i.d);0!==a&&0!==o&&(this.uniforms.rotation[0]=i.a/a,this.uniforms.rotation[1]=i.b/a,this.uniforms.rotation[2]=i.c/o,this.uniforms.rotation[3]=i.d/o),e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0})}(Fo);var Yc,Jc=function(e,t){return Jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Jc(e,t)};(function(e,t){function n(){this.constructor=e}Jc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})((function(){return Yc.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}),Yc=Fo);var qc,Qc,Zc,$c,ed,td,nd,rd,id,ad,od,sd,ud,hd,ld,cd,dd,fd,pd,gd=function(e,t){return gd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},gd(e,t)};!function(e){function t(t,n){void 0===t&&(t=.5),void 0===n&&(n=Math.random());var r=e.call(this,ps,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=t,r.seed=n,r}(function(e,t){function n(){this.constructor=e}gd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0})}(Fo),function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(qc||(qc={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Qc||(Qc={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Zc||(Zc={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}($c||($c={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(ed||(ed={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(td||(td={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(nd||(nd={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(rd||(rd={})),function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"}(id||(id={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(ad||(ad={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(od||(od={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"}(sd||(sd={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(ud||(ud={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(hd||(hd={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(ld||(ld={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(cd||(cd={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(dd||(dd={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(fd||(fd={})),function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(pd||(pd={}));var md=new vi;Ji.prototype._cacheAsBitmap=!1,Ji.prototype._cacheData=null,Ji.prototype._cacheAsBitmapResolution=null,Ji.prototype._cacheAsBitmapMultisample=fd.NONE;var vd=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Ji.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new vd),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),Ji.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Ji.prototype._initCachedDisplayObject=function(e){var t;if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,e.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;r.pad(i)}r.ceil(kr.RESOLUTION);var a=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),s=e.renderTexture.destinationFrame.clone(),u=e.projection.transform,h=Ga.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(t=this.cacheAsBitmapMultisample)&&void 0!==t?t:e.multisample}),l="cacheAsBitmap_"+qr();this._cacheData.textureCacheId=l,Ea.addToCache(h.baseTexture,l),Fa.addToCache(h,l);var c=this.transform.localTransform.copyTo(md).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=u,e.renderTexture.bind(a,o,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new vl(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-r.x/r.width,d.anchor.y=-r.y/r.height,d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},Ji.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Ji.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=e.context,i=e._projTransform;t.ceil(kr.RESOLUTION);var a=Ga.create({width:t.width,height:t.height}),o="cacheAsBitmap_"+qr();this._cacheData.textureCacheId=o,Ea.addToCache(a.baseTexture,o),Fa.addToCache(a,o);var s=md;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:s,skipUpdateTransform:!1}),e.context=r,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new vl(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-t.x/t.width,u.anchor.y=-t.y/t.height,u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},Ji.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Ji.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Ji.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ea.removeFromCache(this._cacheData.textureCacheId),Fa.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Ji.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Ji.prototype.name=null,Zi.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(n=0,r=this.children.length;n<r;n++)if(this.children[n].getChildByName){var i=this.children[n].getChildByName(e,!0);if(i)return i}return null},Ji.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new hi),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var yd=function(e,t){return yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},yd(e,t)};function bd(e,t){function n(){this.constructor=e}yd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _d=function(e){function t(t,n,r,i){void 0===t&&(t=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var a=e.call(this)||this;return a.segWidth=r,a.segHeight=i,a.width=t,a.height=n,a.build(),a}return bd(t,e),t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,t=[],n=[],r=[],i=this.segWidth-1,a=this.segHeight-1,o=this.width/i,s=this.height/a,u=0;u<e;u++){var h=u%this.segWidth,l=u/this.segWidth|0;t.push(h*o,l*s),n.push(h/i,l/a)}var c=i*a;for(u=0;u<c;u++){var d=u%i,f=u/i|0,p=f*this.segWidth+d,g=f*this.segWidth+d+1,m=(f+1)*this.segWidth+d,v=(f+1)*this.segWidth+d+1;r.push(p,g,m,g,v,m)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(ic),Ed=function(e){function t(t,n,r){void 0===t&&(t=200),void 0===r&&(r=0);var i=e.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=t,i.textureScale=r,i.build(),i}return bd(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),n.data=new Float32Array(4*e.length),r.data=new Uint16Array(6*(e.length-1)));var i=n.data,a=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var o=0,s=e[0],u=this._width*this.textureScale,h=e.length,l=0;l<h;l++){var c=4*l;if(this.textureScale>0){var d=s.x-e[l].x,f=s.y-e[l].y,p=Math.sqrt(d*d+f*f);s=e[l],o+=p/u}else o=l/(h-1);i[c]=o,i[c+1]=0,i[c+2]=o,i[c+3]=1}var g=0;for(l=0;l<h-1;l++)c=2*l,a[g++]=c,a[g++]=c+1,a[g++]=c+2,a[g++]=c+2,a[g++]=c+1,a[g++]=c+3;n.update(),r.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var t,n=e[0],r=0,i=0,a=this.buffers[0].data,o=e.length,s=0;s<o;s++){var u=e[s],h=4*s;i=-((t=s<e.length-1?e[s+1]:u).x-n.x),r=t.y-n.y;var l=Math.sqrt(r*r+i*i),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=l,i/=l,r*=c,i*=c,a[h]=u.x+r,a[h+1]=u.y+i,a[h+2]=u.x-r,a[h+3]=u.y-i,n=u}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(ic),Td=function(e){function t(t,n,r){void 0===r&&(r=0);var i=this,a=new Ed(t.height,n,r),o=new rc(t);return r>0&&(t.baseTexture.wrapMode=gr.REPEAT),(i=e.call(this,a,o)||this).autoUpdate=!0,i}return bd(t,e),t.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,t)},t}(nc),xd=function(e){function t(t,n,r){var i=this,a=new _d(t.width,t.height,n,r),o=new rc(Fa.WHITE);return(i=e.call(this,a,o)||this).texture=t,i.autoResize=!0,i}return bd(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,t=this.shader.texture,n=t.width,r=t.height;!this.autoResize||e.width===n&&e.height===r||(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},t.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},t}(nc),kd=function(e){function t(t,n,r,i,a){void 0===t&&(t=Fa.EMPTY);var o=this,s=new ic(n,r,i);s.getBuffer("aVertexPosition").static=!1;var u=new rc(t);return(o=e.call(this,s,u,null,a)||this).autoUpdate=!0,o}return bd(t,e),Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},t}(nc),Sd=function(e){function t(t,n,r,i,a){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===a&&(a=10);var o=e.call(this,Fa.WHITE,4,4)||this;return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=n,o._rightWidth=i,o._topHeight=r,o._bottomHeight=a,o.texture=t,o}return bd(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(t,r)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(xd),wd=function(e,t){return wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},wd(e,t)};!function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t[0]instanceof Fa?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}(function(e,t){function n(){this.constructor=e}wd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(na.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(na.shared.add(this.update,this,$i.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var n=[],r=0;r<e.length;++r)n.push(Fa.from(e[r]));return new t(n)},t.fromImages=function(e){for(var n=[],r=0;r<e.length;++r)n.push(Fa.from(e[r]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof Fa)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(na.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(na.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(vl),fs.registerPlugin("accessibility",ea),fs.registerPlugin("extract",ju),fs.registerPlugin("interaction",ca),fs.registerPlugin("particle",Bh),fs.registerPlugin("prepare",Hl),fs.registerPlugin("batch",ks),fs.registerPlugin("tilingSprite",ql),ih.registerPlugin(bc),ih.registerPlugin(mh),ih.registerPlugin(Sh),ih.registerPlugin(Ch),ih.registerPlugin(Kl),Cs.registerPlugin(ra),Cs.registerPlugin(sh);var Md=function(e,t){return Md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Md(e,t)},Ad=function(){function e(e){this._foundShapes=[],this.renderer=e}return e.prototype.pushMask=function(e){var t=this.renderer,n=e.maskObject||e;t.context.save();var r=this._foundShapes;if(this.recursiveFindShapes(n,r),r.length>0){var i=t.context;i.beginPath();for(var a=0;a<r.length;a++){var o=r[a],s=o.transform.worldTransform;this.renderer.setContextTransform(s),this.renderGraphicsShape(o)}r.length=0,i.clip()}},e.prototype.recursiveFindShapes=function(e,t){e.geometry&&e.geometry.graphicsData&&t.push(e);var n=e.children;if(n)for(var r=0;r<n.length;r++)this.recursiveFindShapes(n[r],t)},e.prototype.renderGraphicsShape=function(e){e.finishPoly();var t=this.renderer.context,n=e.geometry.graphicsData,r=n.length;if(0!==r)for(var i=0;i<r;i++){var a=n[i],o=a.shape;if(o.type===ai.POLY){var s=o.points,u=a.holes,h=void 0,l=void 0,c=void 0,d=void 0;t.moveTo(s[0],s[1]);for(var f=1;f<s.length/2;f++)t.lineTo(s[2*f],s[2*f+1]);if(u.length>0){for(h=0,c=s[0],d=s[1],f=2;f+2<s.length;f+=2)h+=(s[f]-c)*(s[f+3]-d)-(s[f+2]-c)*(s[f+1]-d);for(var p=0;p<u.length;p++)if(s=u[p].shape.points){for(l=0,c=s[0],d=s[1],f=2;f+2<s.length;f+=2)l+=(s[f]-c)*(s[f+3]-d)-(s[f+2]-c)*(s[f+1]-d);if(l*h<0)for(t.moveTo(s[0],s[1]),f=2;f<s.length;f+=2)t.lineTo(s[f],s[f+1]);else for(t.moveTo(s[s.length-2],s[s.length-1]),f=s.length-4;f>=0;f-=2)t.lineTo(s[f],s[f+1]);u[p].shape.closeStroke&&t.closePath()}}s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===ai.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(o.type===ai.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(o.type===ai.ELIP){var g=2*o.width,m=2*o.height,v=o.x-g/2,y=o.y-m/2,b=.5522848,_=g/2*b,E=m/2*b,T=v+g,x=y+m,k=v+g/2,S=y+m/2;t.moveTo(v,S),t.bezierCurveTo(v,S-E,k-_,y,k,y),t.bezierCurveTo(k+_,y,T,S-E,T,S),t.bezierCurveTo(T,S+E,k+_,x,k,x),t.bezierCurveTo(k-_,x,v,S+E,v,S),t.closePath()}else if(o.type===ai.RREC){var w=o.x,M=o.y,A=o.width,R=o.height,C=o.radius,P=Math.min(A,R)/2;C=C>P?P:C,t.moveTo(w,M+C),t.lineTo(w,M+R-C),t.quadraticCurveTo(w,M+R,w+C,M+R),t.lineTo(w+A-C,M+R),t.quadraticCurveTo(w+A,M+R,w+A,M+R-C),t.lineTo(w+A,M+C),t.quadraticCurveTo(w+A,M,w+A-C,M),t.lineTo(w+C,M),t.quadraticCurveTo(w,M,w,M+C),t.closePath()}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();function Rd(e){var t=document.createElement("canvas");t.width=6,t.height=1;var n=t.getContext("2d");return n.fillStyle=e,n.fillRect(0,0,6,1),t}function Cd(){if("undefined"==typeof document)return!1;var e=Rd("#ff00ff"),t=Rd("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var r=n.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(e,0,0),r.drawImage(t,2,0);var i=r.getImageData(2,0,1,1);if(!i)return!1;var a=i.data;return 255===a[0]&&0===a[1]&&0===a[2]}var Pd=new vi,Id=function(e){function t(n){var r,i=e.call(this,or.CANVAS,n)||this;if(i.refresh=!0,i.maskManager=new Ad(i),i.smoothProperty="imageSmoothingEnabled",i.blendModes=(void 0===r&&(r=[]),Cd()?(r[ur.NORMAL]="source-over",r[ur.ADD]="lighter",r[ur.MULTIPLY]="multiply",r[ur.SCREEN]="screen",r[ur.OVERLAY]="overlay",r[ur.DARKEN]="darken",r[ur.LIGHTEN]="lighten",r[ur.COLOR_DODGE]="color-dodge",r[ur.COLOR_BURN]="color-burn",r[ur.HARD_LIGHT]="hard-light",r[ur.SOFT_LIGHT]="soft-light",r[ur.DIFFERENCE]="difference",r[ur.EXCLUSION]="exclusion",r[ur.HUE]="hue",r[ur.SATURATION]="saturate",r[ur.COLOR]="color",r[ur.LUMINOSITY]="luminosity"):(r[ur.NORMAL]="source-over",r[ur.ADD]="lighter",r[ur.MULTIPLY]="source-over",r[ur.SCREEN]="source-over",r[ur.OVERLAY]="source-over",r[ur.DARKEN]="source-over",r[ur.LIGHTEN]="source-over",r[ur.COLOR_DODGE]="source-over",r[ur.COLOR_BURN]="source-over",r[ur.HARD_LIGHT]="source-over",r[ur.SOFT_LIGHT]="source-over",r[ur.DIFFERENCE]="source-over",r[ur.EXCLUSION]="source-over",r[ur.HUE]="source-over",r[ur.SATURATION]="source-over",r[ur.COLOR]="source-over",r[ur.LUMINOSITY]="source-over"),r[ur.NORMAL_NPM]=r[ur.NORMAL],r[ur.ADD_NPM]=r[ur.ADD],r[ur.SCREEN_NPM]=r[ur.SCREEN],r[ur.SRC_IN]="source-in",r[ur.SRC_OUT]="source-out",r[ur.SRC_ATOP]="source-atop",r[ur.DST_OVER]="destination-over",r[ur.DST_IN]="destination-in",r[ur.DST_OUT]="destination-out",r[ur.DST_ATOP]="destination-atop",r[ur.XOR]="xor",r[ur.SUBTRACT]="source-over",r),i.renderingToScreen=!1,i._activeBlendMode=null,i._projTransform=null,i._outerBlend=!1,i.rootContext=i.view.getContext("2d",{alpha:i.useContextAlpha}),i.context=i.rootContext,!i.rootContext.imageSmoothingEnabled){var a=i.rootContext;a.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":a.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":a.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":a.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")}return i.initPlugins(t.__plugins),Nr("Canvas"),i.resize(i.options.width,i.options.height),i}return function(e,t){function n(){this.constructor=e}Md(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.addSystem=function(){return this},t.prototype.render=function(e,t){if(this.view){var n,r,i,a;t&&(t instanceof Ga||t instanceof Oa?(Zr("6.0.0","CanvasRenderer#render arguments changed, use options instead."),n=t,r=arguments[2],i=arguments[3],a=arguments[4]):(n=t.renderTexture,r=t.clear,i=t.transform,a=t.skipUpdateTransform)),this.renderingToScreen=!n,this.emit("prerender");var o=this.resolution;n?((n=n.castToBaseTexture())._canvasRenderTarget||(n._canvasRenderTarget=new ri(n.width,n.height,n.resolution),n.resource=new Sa(n._canvasRenderTarget.canvas),n.valid=!0),this.context=n._canvasRenderTarget.context,this.resolution=n._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(this._projTransform=i||null,n||(this._lastObjectRendered=e),!a){var u=e.enableTempParent();e.updateTransform(),e.disableTempParent(u)}if(s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=ur.NORMAL,this._outerBlend=!1,s.globalCompositeOperation=this.blendModes[ur.NORMAL],void 0!==r?r:this.clearBeforeRender)if(this.renderingToScreen)s.clearRect(0,0,this.width,this.height),this.backgroundAlpha>0&&(s.globalAlpha=this.useContextAlpha?this.backgroundAlpha:1,s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height),s.globalAlpha=1);else{n._canvasRenderTarget.clear();var h=n.clearColor;h[3]>0&&(s.globalAlpha=this.useContextAlpha?h[3]:1,s.fillStyle=Lr(Fr(h)),s.fillRect(0,0,n.realWidth,n.realHeight),s.globalAlpha=1)}var l=this.context;this.context=s,e.renderCanvas(this),this.context=l,s.restore(),this.resolution=o,this._projTransform=null,this.emit("postrender")}},t.prototype.setContextTransform=function(e,t,n){var r=e,i=this._projTransform,a=this.resolution;n=n||a,i&&((r=Pd).copyFrom(e),r.prepend(i)),t?this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*a|0,r.ty*a|0):this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*a,r.ty*a)},t.prototype.clear=function(e,t){void 0===e&&(e=this._backgroundColorString),void 0===t&&(t=this.backgroundAlpha);var n=this.context;n.clearRect(0,0,this.width,this.height),e&&(n.globalAlpha=this.useContextAlpha?t:1,n.fillStyle=e,n.fillRect(0,0,this.width,this.height),n.globalAlpha=1)},t.prototype.setBlendMode=function(e,t){var n=e===ur.SRC_IN||e===ur.SRC_OUT||e===ur.DST_IN||e===ur.DST_ATOP;!t&&n&&(e=ur.NORMAL),this._activeBlendMode!==e&&(this._activeBlendMode=e,this._outerBlend=n,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=kr.SCALE_MODE===pr.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n},t}(ls),Nd={canvas:null,getTintedCanvas:function(e,t){var n=e.texture,r="#"+("00000"+(0|(t=Nd.roundColor(t))).toString(16)).slice(-6);n.tintCache=n.tintCache||{};var i,a=n.tintCache[r];if(a){if(a.tintId===n._updateID)return n.tintCache[r];i=n.tintCache[r]}else i=document.createElement("canvas");if(Nd.tintMethod(n,t,i),i.tintId=n._updateID,Nd.convertTintToImage){var o=new Image;o.src=i.toDataURL(),n.tintCache[r]=o}else n.tintCache[r]=i;return i},getTintedPattern:function(e,t){var n="#"+("00000"+(0|(t=Nd.roundColor(t))).toString(16)).slice(-6);e.patternCache=e.patternCache||{};var r=e.patternCache[n];return r&&r.tintId===e._updateID||(Nd.canvas||(Nd.canvas=document.createElement("canvas")),Nd.tintMethod(e,t,Nd.canvas),(r=Nd.canvas.getContext("2d").createPattern(Nd.canvas,"repeat")).tintId=e._updateID,e.patternCache[n]=r),r},tintWithMultiply:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),a=e.baseTexture.resolution;i.x*=a,i.y*=a,i.width*=a,i.height*=a,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|t).toString(16)).slice(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply";var o=e.baseTexture.getDrawableSource();r.drawImage(o,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(o,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),a=e.baseTexture.resolution;i.x*=a,i.y*=a,i.width*=a,i.height*=a,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).slice(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.getDrawableSource(),i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),a=e.baseTexture.resolution;i.x*=a,i.y*=a,i.width*=a,i.height*=a,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(e.baseTexture.getDrawableSource(),i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore();for(var o=Dr(t),s=o[0],u=o[1],h=o[2],l=r.getImageData(0,0,i.width,i.height),c=l.data,d=0;d<c.length;d+=4)c[d+0]*=s,c[d+1]*=u,c[d+2]*=h;r.putImageData(l,0,0)},roundColor:function(e){var t=Nd.cacheStepsPerColorChannel,n=Dr(e);return n[0]=Math.min(255,n[0]/t*t),n[1]=Math.min(255,n[1]/t*t),n[2]=Math.min(255,n[2]/t*t),Fr(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:Cd(),tintMethod:null};Nd.tintMethod=Nd.canUseMultiply?Nd.tintWithMultiply:Nd.tintWithPerPixel;var Od=fs.create;fs.create=function(e){if(!e||!e.forceCanvas)try{return Od(e)}catch(e){}return new Id(e)},Ea.prototype.getDrawableSource=function(){var e=this.resource;return e?e.bitmap||e.source:null},Oa.prototype._canvasRenderTarget=null,Fa.prototype.patternCache=null,Fa.prototype.tintCache=null;var Dd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function Ld(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var Bd=Ld((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=arguments,u=n?n+e:e;if(!this._events[u])return!1;var h,l,c=this._events[u],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,a),!0;case 6:return c.fn.call(c.context,t,r,i,a,o),!0}for(l=1,h=new Array(d-1);l<d;l++)h[l-1]=s[l];c.fn.apply(c.context,h)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!h)for(f=1,h=new Array(d-1);f<d;f++)h[f-1]=s[f];c[l].fn.apply(c[l].context,h)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,h=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&h.push(s[u]);h.length?this._events[a]=1===h.length?h[0]:h:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})),Fd=Ld((function(e,t){!function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a="object"==typeof Dd&&Dd;a.global!==a&&a.window!==a&&a.self!==a||(n=a);var o,s,u=2147483647,h=36,l=/^xn--/,c=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function m(e){throw RangeError(f[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(d,".")).split("."),t).join(".")}function b(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return v(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+g(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function T(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=h)e=p(e/35);return p(r+36*e/(e+38))}function x(e){var t,n,r,i,a,o,s,l,c,d,f,g=[],v=e.length,y=0,b=128,E=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(a=y,o=1,s=h;i>=v&&m("invalid-input"),((l=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:h)>=h||l>p((u-y)/o))&&m("overflow"),y+=l*o,!(l<(c=s<=E?1:s>=E+26?26:s-E));s+=h)o>p(u/(d=h-c))&&m("overflow"),o*=d;E=T(y-a,t=g.length+1,0==a),p(y/t)>u-b&&m("overflow"),b+=p(y/t),y%=t,g.splice(y++,0,b)}return _(g)}function k(e){var t,n,r,i,a,o,s,l,c,d,f,v,y,_,x,k=[];for(v=(e=b(e)).length,t=128,n=0,a=72,o=0;o<v;++o)(f=e[o])<128&&k.push(g(f));for(r=i=k.length,i&&k.push("-");r<v;){for(s=u,o=0;o<v;++o)(f=e[o])>=t&&f<s&&(s=f);for(s-t>p((u-n)/(y=r+1))&&m("overflow"),n+=(s-t)*y,t=s,o=0;o<v;++o)if((f=e[o])<t&&++n>u&&m("overflow"),f==t){for(l=n,c=h;!(l<(d=c<=a?1:c>=a+26?26:c-a));c+=h)x=l-d,_=h-d,k.push(g(E(d+x%_,0))),l=p(x/_);k.push(g(E(l,0))),a=T(n,y,r==i),n=0,++r}++n,++t}return k.join("")}if(o={version:"1.3.2",ucs2:{decode:b,encode:_},decode:x,encode:k,toASCII:function(e){return y(e,(function(e){return c.test(e)?"xn--"+k(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?x(e.slice(4).toLowerCase()):e}))}},r&&i)if(e.exports==r)i.exports=o;else for(s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);else n.punycode=o}(Dd)})),Gd=function(e){return"string"==typeof e},Ud=function(e){return"object"==typeof e&&null!==e},Hd=function(e){return null===e};function jd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Kd=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var h,l,c,d,f=e[u].replace(a,"%20"),p=f.indexOf(n);p>=0?(h=f.substr(0,p),l=f.substr(p+1)):(h=f,l=""),c=decodeURIComponent(h),d=decodeURIComponent(l),jd(i,c)?Array.isArray(i[c])?i[c].push(d):i[c]=[i[c],d]:i[c]=d}return i},Xd=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},zd=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var i=encodeURIComponent(Xd(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return i+encodeURIComponent(Xd(e))})).join(t):i+encodeURIComponent(Xd(e[r]))})).join(t):r?encodeURIComponent(Xd(r))+n+encodeURIComponent(Xd(e)):""},Vd=Ld((function(e,t){t.decode=t.parse=Kd,t.encode=t.stringify=zd})),Wd=uf;function Yd(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Jd=/^([a-z0-9.+-]+:)/i,qd=/:[0-9]*$/,Qd=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Zd=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),$d=["'"].concat(Zd),ef=["%","/","?",";","#"].concat($d),tf=["/","?","#"],nf=/^[+a-z0-9A-Z_-]{0,63}$/,rf=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,af={javascript:!0,"javascript:":!0},of={javascript:!0,"javascript:":!0},sf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function uf(e,t,n){if(e&&Ud(e)&&e instanceof Yd)return e;var r=new Yd;return r.parse(e,t,n),r}Yd.prototype.parse=function(e,t,n){if(!Gd(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",a=e.split(i);a[0]=a[0].replace(/\\/g,"/");var o=e=a.join(i);if(o=o.trim(),!n&&1===e.split("#").length){var s=Qd.exec(o);if(s)return this.path=o,this.href=o,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?Vd.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=Jd.exec(o);if(u){var h=(u=u[0]).toLowerCase();this.protocol=h,o=o.substr(u.length)}if(n||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===o.substr(0,2);!l||u&&of[u]||(o=o.substr(2),this.slashes=!0)}if(!of[u]&&(l||u&&!sf[u])){for(var c,d,f=-1,p=0;p<tf.length;p++)-1!==(g=o.indexOf(tf[p]))&&(-1===f||g<f)&&(f=g);for(-1!==(d=-1===f?o.lastIndexOf("@"):o.lastIndexOf("@",f))&&(c=o.slice(0,d),o=o.slice(d+1),this.auth=decodeURIComponent(c)),f=-1,p=0;p<ef.length;p++){var g;-1!==(g=o.indexOf(ef[p]))&&(-1===f||g<f)&&(f=g)}-1===f&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),y=(p=0,v.length);p<y;p++){var b=v[p];if(b&&!b.match(nf)){for(var _="",E=0,T=b.length;E<T;E++)b.charCodeAt(E)>127?_+="x":_+=b[E];if(!_.match(nf)){var x=v.slice(0,p),k=v.slice(p+1),S=b.match(rf);S&&(x.push(S[1]),k.unshift(S[2])),k.length&&(o="/"+k.join(".")+o),this.hostname=x.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=Fd.toASCII(this.hostname));var w=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+w,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!af[h])for(p=0,y=$d.length;p<y;p++){var A=$d[p];if(-1!==o.indexOf(A)){var R=encodeURIComponent(A);R===A&&(R=escape(A)),o=o.split(A).join(R)}}var C=o.indexOf("#");-1!==C&&(this.hash=o.substr(C),o=o.slice(0,C));var P=o.indexOf("?");if(-1!==P?(this.search=o.substr(P),this.query=o.substr(P+1),t&&(this.query=Vd.parse(this.query)),o=o.slice(0,P)):t&&(this.search="",this.query={}),o&&(this.pathname=o),sf[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){w=this.pathname||"";var I=this.search||"";this.path=w+I}return this.href=this.format(),this},Yd.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Ud(this.query)&&Object.keys(this.query).length&&(a=Vd.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||sf[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+r},Yd.prototype.resolve=function(e){return this.resolveObject(uf(e,!1,!0)).format()},Yd.prototype.resolveObject=function(e){if(Gd(e)){var t=new Yd;t.parse(e,!1,!0),e=t}for(var n=new Yd,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var u=o[s];"protocol"!==u&&(n[u]=e[u])}return sf[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!sf[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var c=h[l];n[c]=e[c]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||of[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var f=n.pathname||"",p=n.search||"";n.path=f+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=m||g||n.host&&e.pathname,y=v,b=n.pathname&&n.pathname.split("/")||[],_=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!sf[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),v=v&&(""===d[0]||""===b[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),n.search=e.search,n.query=e.query;else if(null!=e.search)return _&&(n.hostname=n.host=b.shift(),(S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=S.shift(),n.host=n.hostname=S.shift())),n.search=e.search,n.query=e.query,Hd(n.pathname)&&Hd(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=b.slice(-1)[0],T=(n.host||e.host||b.length>1)&&("."===E||".."===E)||""===E,x=0,k=b.length;k>=0;k--)"."===(E=b[k])?b.splice(k,1):".."===E?(b.splice(k,1),x++):x&&(b.splice(k,1),x--);if(!v&&!y)for(;x--;x)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),T&&"/"!==b.join("/").substr(-1)&&b.push("");var S,w=""===b[0]||b[0]&&"/"===b[0].charAt(0);return _&&(n.hostname=n.host=w?"":b.length?b.shift():"",(S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=S.shift(),n.host=n.hostname=S.shift())),(v=v||n.host&&b.length)&&!w&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),Hd(n.pathname)&&Hd(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Yd.prototype.parseHost=function(){var e=this.host,t=qd.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var hf={parse:Wd,format:function(e){return Gd(e)&&(e=uf(e)),e instanceof Yd?e.format():Yd.prototype.format.call(e)},resolve:function(e,t){return uf(e,!1,!0).resolve(t)}};kr.RETINA_PREFIX=/@([0-9\.]+)x/,kr.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var lf,cf=!1,df=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[ur.NORMAL_NPM]=ur.NORMAL,e[ur.ADD_NPM]=ur.ADD,e[ur.SCREEN_NPM]=ur.SCREEN,t[ur.NORMAL]=ur.NORMAL_NPM,t[ur.ADD]=ur.ADD_NPM,t[ur.SCREEN]=ur.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function ff(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function pf(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function gf(e){return!(e&e-1||!e)}function mf(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}var vf=0;function yf(){return++vf}var bf={};function _f(e,t,n){if(void 0===n&&(n=3),!bf[t]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e),console.warn(r))),bf[t]=!0}}var Ef,Tf={},xf=Object.create(null),kf=Object.create(null);function Sf(e,t){var n=kr.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1}!function(){function e(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||kr.RESOLUTION,this.resize(e,t)}e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0})}();var wf,Mf=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,t,n,r,i,a,o,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,l=u.items;this._aliasCount++;for(var c=0,d=l.length;c<d;c++)l[c][h](e,t,n,r,i,a,o,s);return l===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(e){return-1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Mf.prototype,{dispatch:{value:Mf.prototype.emit},run:{value:Mf.prototype.emit}}),kr.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}(wf||(wf={}));var Af,Rf=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=r}return e.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}(),Cf=function(){function e(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Rf(null,null,1/0),this.deltaMS=1/kr.TARGET_FPMS,this.elapsedMS=1/kr.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t,n){return void 0===n&&(n=wf.NORMAL),this._addListener(new Rf(e,t,n))},e.prototype.addOnce=function(e,t,n){return void 0===n&&(n=wf.NORMAL),this._addListener(new Rf(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*kr.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,kr.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Pf=2*Math.PI;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(Af||(Af={}));var If=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),Nf=[new If,new If,new If,new If],Of=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=Af.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.intersects=function(e,t){if(!t){var n=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=n)return!1;var r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}var i=this.left,a=this.right,o=this.top,s=this.bottom;if(a<=i||s<=o)return!1;var u=Nf[0].set(e.left,e.top),h=Nf[1].set(e.left,e.bottom),l=Nf[2].set(e.right,e.top),c=Nf[3].set(e.right,e.bottom);if(l.x<=u.x||h.y<=u.y)return!1;var d=Math.sign(t.a*t.d-t.b*t.c);if(0===d)return!1;if(t.apply(u,u),t.apply(h,h),t.apply(l,l),t.apply(c,c),Math.max(u.x,h.x,l.x,c.x)<=i||Math.min(u.x,h.x,l.x,c.x)>=a||Math.max(u.y,h.y,l.y,c.y)<=o||Math.min(u.y,h.y,l.y,c.y)>=s)return!1;var f=d*(h.y-u.y),p=d*(u.x-h.x),g=f*i+p*o,m=f*a+p*o,v=f*i+p*s,y=f*a+p*s;if(Math.max(g,m,v,y)<=f*u.x+p*u.y||Math.min(g,m,v,y)>=f*c.x+p*c.y)return!1;var b=d*(u.y-l.y),_=d*(l.x-u.x),E=b*i+_*o,T=b*a+_*o,x=b*i+_*s,k=b*a+_*s;return!(Math.max(E,T,x,k)<=b*u.x+_*u.y||Math.min(E,T,x,k)>=b*c.x+_*c.y)},e.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this},e.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Df=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=e,this.scope=t}return e.prototype.clone=function(t,n){return void 0===t&&(t=this.cb),void 0===n&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),Lf=function(){function e(e,t,n,r,i,a){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,a){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new If;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new If;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,a=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,a,o,s,u){return this.a=Math.cos(o+u)*i,this.b=Math.sin(o+u)*i,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,a=e.pivot,o=-Math.atan2(-r,i),s=Math.atan2(n,t),u=Math.abs(o+s);return u<1e-5||Math.abs(Pf-u)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(a.x*t+a.y*r),e.position.y=this.ty+(a.x*n+a.y*i),e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,a=e*r-t*n;return this.a=r/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*i)/a,this.ty=-(e*this.ty-t*i)/a,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),Bf=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ff=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Gf=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Uf=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Hf=[],jf=[],Kf=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];Hf.push(t);for(var n=0;n<16;n++)for(var r=Kf(Bf[e]*Bf[n]+Gf[e]*Ff[n]),i=Kf(Ff[e]*Bf[n]+Uf[e]*Ff[n]),a=Kf(Bf[e]*Gf[n]+Gf[e]*Uf[n]),o=Kf(Ff[e]*Gf[n]+Uf[e]*Uf[n]),s=0;s<16;s++)if(Bf[s]===r&&Ff[s]===i&&Gf[s]===a&&Uf[s]===o){t.push(s);break}}for(e=0;e<16;e++){var u=new Lf;u.set(Bf[e],Ff[e],Gf[e],Uf[e],0,0),jf.push(u)}}();var Xf={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Bf[e]},uY:function(e){return Ff[e]},vX:function(e){return Gf[e]},vY:function(e){return Uf[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return Hf[e][t]},sub:function(e,t){return Hf[e][Xf.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?Xf.S:Xf.N:2*Math.abs(t)<=Math.abs(e)?e>0?Xf.E:Xf.W:t>0?e>0?Xf.SE:Xf.SW:e>0?Xf.NE:Xf.NW},matrixAppendRotationInv:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=jf[Xf.inv(t)];i.tx=n,i.ty=r,e.append(i)}};!function(){function e(){this.worldTransform=new Lf,this.localTransform=new Lf,this.position=new Df(this.onChange,this,0,0),this.scale=new Df(this.onChange,this,1,1),this.pivot=new Df(this.onChange,this,0,0),this.skew=new Df(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e}(),kr.PREFER_ENV=ir.any?ar.WEBGL:ar.WEBGL2,kr.STRICT_TEXTURE_CACHE=!1;var zf=[];function Vf(e,t){if(!e)return null;var n="";if("string"==typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=zf.length-1;i>=0;--i){var a=zf[i];if(a.test&&a.test(e,n))return new a(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var Wf=function(e,t){return Wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Wf(e,t)};function Yf(e,t){function n(){this.constructor=e}Wf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Jf=function(){return Jf=Object.assign||function(e){for(var t,n=arguments,r=1,i=arguments.length;r<i;r++)for(var a in t=n[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Jf.apply(this,arguments)},qf=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Mf("setRealSize"),this.onUpdate=new Mf("update"),this.onError=new Mf("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),Qf=function(e){function t(t,n){var r=this,i=n||{},a=i.width,o=i.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return(r=e.call(this,a,o)||this).data=t,r}return Yf(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vr.UNPACK);var i=t.realWidth,a=t.realHeight;return n.width===i&&n.height===a?r.texSubImage2D(t.target,0,0,0,i,a,t.format,n.type,this.data):(n.width=i,n.height=a,r.texImage2D(t.target,0,n.internalFormat,i,a,0,t.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(qf),Zf={scaleMode:pr.NEAREST,format:lr.RGBA,alphaMode:vr.NPM},$f=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this,i=(n=n||{}).alphaMode,a=n.mipmap,o=n.anisotropicLevel,s=n.scaleMode,u=n.width,h=n.height,l=n.wrapMode,c=n.format,d=n.type,f=n.target,p=n.resolution,g=n.resourceOptions;return!t||t instanceof qf||((t=Vf(t,g)).internal=!0),r.resolution=p||kr.RESOLUTION,r.width=Math.round((u||0)*r.resolution)/r.resolution,r.height=Math.round((h||0)*r.resolution)/r.resolution,r._mipmap=void 0!==a?a:kr.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==o?o:kr.ANISOTROPIC_LEVEL,r._wrapMode=l||kr.WRAP_MODE,r._scaleMode=void 0!==s?s:kr.SCALE_MODE,r.format=c||lr.RGBA,r.type=d||dr.UNSIGNED_BYTE,r.target=f||cr.TEXTURE_2D,r.alphaMode=void 0!==i?i:vr.UNPACK,r.uid=yf(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=u>0&&h>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}return Yf(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)},t.prototype.setRealSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=gf(this.realWidth)&&gf(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete kf[this.cacheId],delete xf[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,r){void 0===r&&(r=kr.STRICT_TEXTURE_CACHE);var i="string"==typeof e,a=null;if(i)a=e;else{if(!e._pixiId){var o=n&&n.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+yf()}a=e._pixiId}var s=kf[a];if(i&&r&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||((s=new t(e,n)).cacheId=a,t.addToCache(s,a)),s},t.fromBuffer=function(e,n,r,i){e=e||new Float32Array(n*r*4);var a=new Qf(e,{width:n,height:r}),o=e instanceof Float32Array?dr.FLOAT:dr.UNSIGNED_BYTE;return new t(a,Object.assign(Zf,i||{width:n,height:r,type:o}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),kf[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),kf[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=kf[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete kf[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete kf[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(Bd),ep=function(e){function t(t,n){var r=this,i=n||{},a=i.width,o=i.height;(r=e.call(this,a,o)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<t;s++){var u=new $f;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}return Yf(t,e),t.prototype.initFromArray=function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof qf?this.addResourceAt(e[n],n):this.addResourceAt(Vf(e[n],t),n))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)})),this._load},t}(qf),tp=function(e){function t(t,n){var r,i,a=this,o=n||{},s=o.width,u=o.height;return Array.isArray(t)?(r=t,i=t.length):i=t,a=e.call(this,i,{width:s,height:u})||this,r&&a.initFromArray(r,n),a}return Yf(t,e),t.prototype.addBaseTextureAt=function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this},t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=cr.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,t,n){var r=this,i=r.length,a=r.itemDirtyIds,o=r.items,s=e.gl;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(var u=0;u<i;u++){var h=o[u];a[u]<h.dirtyId&&(a[u]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,t.format,n.type,h.resource.source))}return!0},t}(ep),np=function(e){function t(t){var n=this,r=t,i=r.naturalWidth||r.videoWidth||r.width,a=r.naturalHeight||r.videoHeight||r.height;return(n=e.call(this,i,a)||this).source=t,n.noSubImage=!1,n}return Yf(t,e),t.crossOrigin=function(e,t,n){void 0===n&&0!==t.indexOf("data:")?e.crossOrigin=function(e,t){if(void 0===t&&(t=globalThis.location),0===e.indexOf("data:"))return"";t=t||globalThis.location,Ef||(Ef=document.createElement("a")),Ef.href=e;var n=hf.parse(Ef.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}(t):!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous")},t.prototype.upload=function(e,t,n,r){var i=e.gl,a=t.realWidth,o=t.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vr.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==a||n.height!==o?(n.width=a,n.height=o,i.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,n.type,r),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(n,r),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(qf),rp=function(e){function t(t){return e.call(this,t)||this}return Yf(t,e),t.test=function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(np),ip=function(e){function t(n,r){var i=this,a=r||{},o=a.width,s=a.height,u=a.autoLoad,h=a.linkBaseTexture;if(n&&n.length!==t.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=e.call(this,6,{width:o,height:s})||this;for(var l=0;l<t.SIDES;l++)i.items[l].target=cr.TEXTURE_CUBE_MAP_POSITIVE_X+l;return i.linkBaseTexture=!1!==h,n&&i.initFromArray(n,r),!1!==u&&i.load(),i}return Yf(t,e),t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=cr.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,t,n){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=cr.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},t.prototype.upload=function(e,n,r){for(var i=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];i[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[a]=o.dirtyId):i[a]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(ep),ap=function(e){function t(t,n){var r=this;if(n=n||{},!(t instanceof HTMLImageElement)){var i=new Image;np.crossOrigin(i,t,n.crossorigin),i.src=t,t=i}return r=e.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:kr.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return Yf(t,e),t.prototype.load=function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})}))),this._load},t.prototype.process=function(){var e=this,t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((function(e){return e.blob()})).then((function(r){return n(r,0,0,t.width,t.height,{premultiplyAlpha:e.alphaMode===vr.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process},t.prototype.upload=function(t,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,n,r,this.bitmap),!this.preserveBitmap){var i=!0,a=n._glTextures;for(var o in a){var s=a[o];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},t}(np),op=function(e){function t(t,n){var r=this;return n=n||{},(r=e.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return Yf(t,e),t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise((function(n){if(e._resolve=function(){e.resize(e.source.width,e.source.height),n(e)},t.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}))),this._load},t.prototype._loadSvg=function(){var e=this,t=new Image;np.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,a=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,a=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),a=Math.round(a);var o=e.source;o.width=i,o.height=a,o._pixiId="canvas_"+yf(),o.getContext("2d").drawImage(t,0,0,n,r,0,0,i,a),e._resolve(),e._resolve=null}}},t.getSize=function(e){var n=t.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,n){return"svg"===n||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(np),sp=function(e){function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var o=n[0].src||n[0];np.crossOrigin(a,o,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),h=n[s],l=h.src,c=h.mime,d=(l=l||n[s]).split("?").shift().toLowerCase(),f=d.slice(d.lastIndexOf(".")+1);c=c||t.MIME_TYPES[f]||"video/"+f,u.src=l,u.type=c,a.appendChild(u)}n=a}return(i=e.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return Yf(t,e),t.prototype.update=function(t){if(!this.destroyed){var n=Cf.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){e.valid?n(e):(e._resolve=n,t.load())})),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Cf.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Cf.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Cf.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Cf.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Cf.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(np),up=function(e){function t(t){return e.call(this,t)||this}return Yf(t,e),t.test=function(e){return!!globalThis.createImageBitmap&&e instanceof ImageBitmap},t}(np);zf.push(ap,up,rp,sp,op,Qf,ip,tp);var hp={__proto__:null,Resource:qf,BaseImageResource:np,INSTALLED:zf,autoDetectResource:Vf,AbstractMultiResource:ep,ArrayResource:tp,BufferResource:Qf,CanvasResource:rp,CubeResource:ip,ImageResource:ap,SVGResource:op,VideoResource:sp,ImageBitmapResource:up},lp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yf(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===vr.UNPACK);var i=t.realWidth,a=t.realHeight;return n.width===i&&n.height===a?r.texSubImage2D(t.target,0,0,0,i,a,t.format,n.type,this.data):(n.width=i,n.height=a,r.texImage2D(t.target,0,n.internalFormat,i,a,0,t.format,n.type,this.data)),!0},t}(Qf),cp=function(){function e(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Mf("disposeFramebuffer"),this.multisample=Tr.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new $f(null,{scaleMode:pr.NEAREST,resolution:1,mipmap:mr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new $f(new lp(null,{width:this.width,height:this.height}),{scaleMode:pr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:mr.OFF,format:lr.DEPTH_COMPONENT,type:dr.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(e/i,t/i))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),dp=function(e){function t(t){void 0===t&&(t={});var n=this;if("number"==typeof t){var r=arguments[0],i=arguments[1],a=arguments[2],o=arguments[3];t={width:r,height:i,scaleMode:a,resolution:o}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:Tr.NONE,(n=e.call(this,null,t)||this).mipmap=mr.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new cp(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=t.multisample,n.maskStack=[],n.filterStack=[{}],n}return Yf(t,e),t.prototype.resize=function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}($f),fp=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,n){var r=t.width,i=t.height;if(n){var a=e.width/2/r,o=e.height/2/i,s=e.x/r+a,u=e.y/i+o;n=Xf.add(n,Xf.NW),this.x0=s+a*Xf.uX(n),this.y0=u+o*Xf.uY(n),n=Xf.add(n,2),this.x1=s+a*Xf.uX(n),this.y1=u+o*Xf.uY(n),n=Xf.add(n,2),this.x2=s+a*Xf.uX(n),this.y2=u+o*Xf.uY(n),n=Xf.add(n,2),this.x3=s+a*Xf.uX(n),this.y3=u+o*Xf.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},e}(),pp=new fp;function gp(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var mp=function(e){function t(n,r,i,a,o,s){var u=e.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new Of(0,0,1,1)),n instanceof t&&(n=n.baseTexture),u.baseTexture=n,u._frame=r,u.trim=a,u.valid=!1,u._uvs=pp,u.uvMatrix=null,u.orig=i||r,u._rotate=Number(o||0),!0===o)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new If(s.x,s.y):new If(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=r:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return Yf(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture.resource;n&&n.url&&xf[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new t(this.baseTexture,!this.noFrame&&e,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=e),r},t.prototype.updateUvs=function(){this._uvs===pp&&(this._uvs=new fp),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=kr.STRICT_TEXTURE_CACHE);var i="string"==typeof e,a=null;if(i)a=e;else if(e instanceof $f){if(!e.cacheId){var o=n&&n.pixiIdPrefix||"pixiid";e.cacheId=o+"-"+yf(),$f.addToCache(e,e.cacheId)}a=e.cacheId}else e._pixiId||(o=n&&n.pixiIdPrefix||"pixiid",e._pixiId=o+"_"+yf()),a=e._pixiId;var s=xf[a];if(i&&r&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||e instanceof $f?!s&&e instanceof $f&&(s=new t(e),t.addToCache(s,a)):(n.resolution||(n.resolution=Sf(e)),(s=new t(new $f(e,n))).baseTexture.cacheId=a,$f.addToCache(s.baseTexture,a),t.addToCache(s,a)),s},t.fromURL=function(e,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=t.from(e,Object.assign({resourceOptions:r},n),!1),a=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):a.load().then((function(){return Promise.resolve(i)}))},t.fromBuffer=function(e,n,r,i){return new t($f.fromBuffer(e,n,r,i))},t.fromLoader=function(e,n,r,i){var a=new $f(e,Object.assign({scaleMode:kr.SCALE_MODE,resolution:Sf(n)},i)),o=a.resource;o instanceof ap&&(o.url=n);var s=new t(a);return r||(r=n),$f.addToCache(s.baseTexture,r),t.addToCache(s,r),r!==n&&($f.addToCache(s.baseTexture,n),t.addToCache(s,n)),s.baseTexture.valid?Promise.resolve(s):new Promise((function(e){s.baseTexture.once("loaded",(function(){return e(s)}))}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),xf[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),xf[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=xf[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete xf[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)xf[e.textureCacheIds[r]]===e&&delete xf[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,a=t+r>this.baseTexture.width,o=n+i>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or",u="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,h="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+h)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new $f),gp(t._EMPTY),gp(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(new $f(new rp(e))),gp(t._WHITE),gp(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(Bd),vp=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return Yf(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(e*r)/r,a=Math.round(t*r)/r;this.valid=i>0&&a>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(i,a),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof e&&(_f("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:r[0],scaleMode:r[1],resolution:r[2]}),new t(new dp(e))},t}(mp),yp=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t,n){void 0===n&&(n=Tr.NONE);var r=new dp(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new vp(r)},e.prototype.getOptimalTexture=function(e,t,n,r){var i;void 0===n&&(n=1),void 0===r&&(r=Tr.NONE),e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=r>1?-r:-1:(i=((65535&(e=pf(e)))<<16|65535&(t=pf(t)))>>>0,r>1&&(i+=4294967296*r)),this.texturePool[i]||(this.texturePool[i]=[]);var a=this.texturePool[i].pop();return a||(a=this.createTexture(e,t,r)),a.filterPoolKey=i,a.setResolution(n),a},e.prototype.getFilterTexture=function(e,t,n){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||Tr.NONE);return r.filterFrame=e.filterFrame,r},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},e.SCREEN_KEY=-1,e}(),bp=function(){function e(e,t,n,r,i,a,o){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=dr.FLOAT),this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=i,this.start=a,this.instance=o}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,r,i,a){return new e(t,n,r,i,a)},e}(),_p=0,Ep=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=_p++,this.disposeRunner=new Mf("disposeBuffer")}return e.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===xr.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?xr.ELEMENT_ARRAY_BUFFER:xr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),Tp={Float32Array,Uint32Array,Int32Array,Uint8Array},xp={5126:4,5123:2,5121:1},kp=0,Sp={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},wp=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=kp++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Mf("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,n,r,i,a,o,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Ep||(t instanceof Array&&(t=new Float32Array(t)),t=new Ep(t));var u=e.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],t,n,r,i);return this}var l=this.buffers.indexOf(t);return-1===l&&(this.buffers.push(t),l=this.buffers.length-1),this.attributes[e]=new bp(l,n,r,i,a,o,s),this.instanced=this.instanced||s,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof Ep||(e instanceof Array&&(e=new Uint16Array(e)),e=new Ep(e)),e.type=xr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new Ep;for(e in this.attributes){var i=this.attributes[e],a=this.buffers[i.buffer];t.push(a.data),n.push(i.size*xp[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},a=0;a<e.length;a++)r+=t[a],n+=e[a].length;var o=new ArrayBuffer(4*n),s=null,u=0;for(a=0;a<e.length;a++){var h=t[a],l=e[a],c=ff(l);i[c]||(i[c]=new Tp[c](o)),s=i[c];for(var d=0;d<l.length;d++)s[(d/h|0)*r+u+d%h]=l[d];u+=h}return new Float32Array(o)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new Ep(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];t.attributes[n]=new bp(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=xr.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var n,r=new e,i=[],a=[],o=[],s=0;s<t.length;s++){n=t[s];for(var u=0;u<n.buffers.length;u++)a[u]=a[u]||0,a[u]+=n.buffers[u].data.length,o[u]=0}for(s=0;s<n.buffers.length;s++)i[s]=new(Sp[ff(n.buffers[s].data)])(a[s]),r.buffers[s]=new Ep(i[s]);for(s=0;s<t.length;s++)for(n=t[s],u=0;u<n.buffers.length;u++)i[u].set(n.buffers[u].data,o[u]),o[u]+=n.buffers[u].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=xr.ELEMENT_ARRAY_BUFFER;var h=0,l=0,c=0,d=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){d=s;break}for(var s in n.attributes){var f=n.attributes[s];(0|f.buffer)===d&&(l+=f.size*xp[f.type]/4)}for(s=0;s<t.length;s++){var p=t[s].indexBuffer.data;for(u=0;u<p.length;u++)r.indexBuffer.data[u+c]+=h;h+=t[s].buffers[d].data.length/l,c+=p.length}}return r},e}(),Mp=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return Yf(t,e),t}(wp),Ap=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Ep(t.vertices),t.uvBuffer=new Ep(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return Yf(t,e),t.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(wp),Rp=0,Cp=function(){function e(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Rp++,this.static=!!t,this.ubo=!!n,e instanceof Ep?(this.buffer=e,this.buffer.type=xr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Ep(new Float32Array(1)),this.buffer.type=xr.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(n,r)},e.from=function(t,n,r){return new e(t,n,r)},e.uboFrom=function(t,n){return new e(t,null==n||n,!0)},e}(),Pp=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Tr.NONE,this.sourceFrame=new Of,this.destinationFrame=new Of,this.bindingSourceFrame=new Of,this.bindingDestinationFrame=new Of,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Ip=[new If,new If,new If,new If],Np=new Lf,Op=function(){function e(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new yp,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Mp,this.quadUv=new Ap,this.tempRect=new Of,this.activeState={},this.globalUniforms=new Cp({outputFrame:new Of,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(e,t){for(var n,r,i=this.renderer,a=this.defaultFilterStack,o=this.statePool.pop()||new Pp,s=this.renderer.renderTexture,u=t[0].resolution,h=t[0].multisample,l=t[0].padding,c=t[0].autoFit,d=null===(n=t[0].legacy)||void 0===n||n,f=1;f<t.length;f++){var p=t[f];u=Math.min(u,p.resolution),h=Math.min(h,p.multisample),l=this.useMaxPadding?Math.max(l,p.padding):l+p.padding,c=c&&p.autoFit,d=d||null===(r=p.legacy)||void 0===r||r}1===a.length&&(this.defaultFilterStack[0].renderTexture=s.current),a.push(o),o.resolution=u,o.multisample=h,o.legacy=d,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(l);var g=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(Np.copyFrom(i.projection.transform).invert(),g),c?(o.sourceFrame.fit(g),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(g)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,u,h),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=o.sourceFrame.width,m.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(s.sourceFrame),o.bindingDestinationFrame.copyFrom(s.destinationFrame),o.transform=i.projection.transform,i.projection.transform=null,s.bind(o.renderTexture,o.sourceFrame,m),i.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,a=r.inputPixel,o=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],a[0]=Math.round(i[0]*t.resolution),a[1]=Math.round(i[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=t.sourceFrame.width*i[2]-.5*a[2],o[3]=t.sourceFrame.height*i[3]-.5*a[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,u.renderTexture,yr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var h=t.renderTexture,l=this.getOptimalFilterTexture(h.width,h.height,t.resolution);l.filterFrame=h.filterFrame;var c=0;for(c=0;c<n.length-1;++c){1===c&&t.multisample>1&&((l=this.getOptimalFilterTexture(h.width,h.height,t.resolution)).filterFrame=h.filterFrame),n[c].apply(this,h,l,yr.CLEAR,t);var d=h;h=l,l=d}n[c].apply(this,h,u.renderTexture,yr.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(l)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(e,t){void 0===t&&(t=yr.CLEAR);var n=this.renderer,r=n.renderTexture,i=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,r.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=1&i.stateId||this.forceClear;(t===yr.CLEAR||t===yr.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(e,t,n,r){var i=this.renderer;i.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(hr.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(hr.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,a=t._texture.orig,o=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(Lf.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/a.width,1/a.height),o.translate(t.anchor.x,t.anchor.y),o},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=Tr.NONE),this.texturePool.getOptimalTexture(e,t,n,r)},e.prototype.getFilterTexture=function(e,t,n){if("number"==typeof e){var r=e;e=t,t=r}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||Tr.NONE);return i.filterFrame=e.filterFrame,i},e.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(e,t){var n=Ip[0],r=Ip[1],i=Ip[2],a=Ip[3];n.set(t.left,t.top),r.set(t.left,t.bottom),i.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(i,i),e.apply(a,a);var o=Math.min(n.x,r.x,i.x,a.x),s=Math.min(n.y,r.y,i.y,a.y),u=Math.max(n.x,r.x,i.x,a.x),h=Math.max(n.y,r.y,i.y,a.y);t.x=o,t.y=s,t.width=u-o,t.height=h-s},e.prototype.roundFrame=function(e,t,n,r,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){var a=i.a,o=i.b,s=i.c,u=i.d;if((Math.abs(o)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}(i=i?Np.copyFrom(i):Np.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}},e}(),Dp=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),Lp=function(){function e(e){this.renderer=e,this.emptyRenderer=new Dp(e),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)},e.prototype.boundArray=function(e,t,n,r){for(var i=e.elements,a=e.ids,o=e.count,s=0,u=0;u<o;u++){var h=i[u],l=h._batchLocation;if(l>=0&&l<r&&t[l]===h)a[u]=l;else for(;s<r;){var c=t[s];if(!c||c._batchEnabled!==n||c._batchLocation!==s){a[u]=s,h._batchLocation=s,t[s]=h;break}s++}}},e.prototype.destroy=function(){this.renderer=null},e}(),Bp=0,Fp=function(){function e(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Bp++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Bp++,this.renderer.runners.contextChange.emit(e)},e.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},e.prototype.createContext=function(e,t){var n;if(kr.PREFER_ENV>=ar.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var e=this.gl,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(e){e.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),Gp=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Tr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},Up=new Of,Hp=function(){function e(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new cp(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Of,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;kr.PREFER_ENV===ar.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},e.prototype.bind=function(e,t,n){void 0===n&&(n=0);var r=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var s=t.width>>n,u=t.height>>n,h=s/t.width;this.setViewport(t.x*h,t.y*h,s,u)}else s=e.width>>n,u=e.height>>n,this.setViewport(0,0,s,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(e,t,n,r){var i=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===e&&i.y===t||(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(e,t,n,r,i){void 0===i&&(i=sr.COLOR|sr.DEPTH);var a=this.gl;a.clearColor(e,t,n,r),a.clear(i)},e.prototype.initFramebuffer=function(e){var t=this.gl,n=new Gp(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height)),n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var r=e.colorTextures,i=r.length;t.drawBuffers||(i=Math.min(i,1));for(var a=0;a<i;a++){var o=r[a],s=o.parentTextureArray||o;this.renderer.texture.bind(s,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},e.prototype.updateFramebuffer=function(e,t){var n=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures,a=i.length;n.drawBuffers||(a=Math.min(a,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var o=[],s=0;s<a;s++){var u=i[s],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,h._glTextures[this.CONTEXT_UID].texture,t),o.push(n.COLOR_ATTACHMENT0+s))}if(o.length>1&&n.drawBuffers(o),e.depthTexture&&this.writeDepthTexture){var l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},e.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},e.prototype.detectSamples=function(e){var t=this.msaaSamples,n=Tr.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=Tr.NONE),n},e.prototype.blit=function(e,t,n){var r=this,i=r.current,a=r.renderer,o=r.gl,s=r.CONTEXT_UID;if(2===a.context.webGLVersion&&i){var u=i.glFramebuffers[s];if(u){if(!e){if(!u.msaaBuffer)return;var h=i.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new cp(i.width,i.height),u.blitFramebuffer.addColorTexture(0,h)),(e=u.blitFramebuffer).colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),e.width===i.width&&e.height===i.height||(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||((t=Up).width=i.width,t.height=i.height),n||(n=t);var l=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},e.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var n=e.width,r=e.height,i=this.gl,a=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,a),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=a,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Of},e.prototype.destroy=function(){this.renderer=null},e}(),jp={5126:4,5123:2,5121:1},Kp=function(){function e(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;kr.PREFER_ENV===ar.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,a){return r.drawElementsInstancedANGLE(e,t,n,i,a)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var a=r[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var r=e.buffers[n];t.update(r)}},e.prototype.checkCompatibility=function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},e.prototype.getSignature=function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var a in n)r[a]&&i.push(a,r[a].location);return i.join("-")},e.prototype.initGeometryVao=function(e,t,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,o=t.program;o.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,o);var s=this.getSignature(e,o),u=e.glVertexArrayObjects[this.CONTEXT_UID],h=u[s];if(h)return u[o.id]=h,h;var l=e.buffers,c=e.attributes,d={},f={};for(var p in l)d[p]=0,f[p]=0;for(var p in c)!c[p].size&&o.attributeData[p]?c[p].size=o.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[p].buffer]+=c[p].size*jp[c[p].type];for(var p in c){var g=c[p],m=g.size;void 0===g.stride&&(d[g.buffer]===m*jp[g.type]?g.stride=0:g.stride=d[g.buffer]),void 0===g.start&&(g.start=f[g.buffer],f[g.buffer]+=m*jp[g.type])}h=r.createVertexArray(),r.bindVertexArray(h);for(var v=0;v<l.length;v++){var y=l[v];a.bind(y),n&&y._glBuffers[i].refCount++}return this.activateVao(e,o),this._activeVao=h,u[o.id]=h,u[s]=h,h},e.prototype.disposeGeometry=function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,a=e.buffers,o=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(o)for(var s=0;s<a.length;s++){var u=a[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||t||o.dispose(a[s],t))}if(!t)for(var h in r)if("g"===h[0]){var l=r[h];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)},e.prototype.activateVao=function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);var s=null;for(var u in o){var h=o[u],l=a[h.buffer],c=l._glBuffers[r];if(t.attributeData[u]){s!==c&&(i.bind(l),s=c);var d=t.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},e.prototype.draw=function(e,t,n,r){var i=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,s=2===o?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?a.instanced?i.drawElementsInstanced(e,t||a.indexBuffer.data.length,s,(n||0)*o,r||1):i.drawElements(e,t||a.indexBuffer.data.length,s,(n||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?i.drawArraysInstanced(e,n,t||a.getSize(),r||1):i.drawArrays(e,n,t||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),Xp=function(){function e(e){void 0===e&&(e=null),this.type=Er.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=kr.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Er.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function zp(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function Vp(e,t){var n=e.getShaderSource(t).split("\n").map((function(e,t){return t+": "+e})),r=e.getShaderInfoLog(t),i=r.split("\n"),a={},o=i.map((function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(e){return!(!e||a[e]||(a[e]=!0,0))})),s=[""];o.forEach((function(e){n[e-1]="%c"+n[e-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function Wp(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function Yp(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Wp(2*t);case"bvec3":return Wp(3*t);case"bvec4":return Wp(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Jp,qp={},Qp=qp;function Zp(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===_r.HIGH&&n!==_r.HIGH&&(r=_r.MEDIUM),"precision "+r+" float;\n"+e}return n!==_r.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var $p={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function eg(e){return $p[e]}var tg=null,ng={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function rg(e,t){if(!tg){var n=Object.keys(ng);tg={};for(var r=0;r<n.length;++r){var i=n[r];tg[e[i]]=ng[i]}}return tg[t]}var ig,ag=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '},codeUbo:function(e){return"\n                var "+e+"_matrix = uv."+e+".toArray(true);\n\n                data[offset] = "+e+"_matrix[0];\n                data[offset+1] = "+e+"_matrix[1];\n                data[offset+2] = "+e+"_matrix[2];\n        \n                data[offset + 4] = "+e+"_matrix[3];\n                data[offset + 5] = "+e+"_matrix[4];\n                data[offset + 6] = "+e+"_matrix[5];\n        \n                data[offset + 8] = "+e+"_matrix[6];\n                data[offset + 9] = "+e+"_matrix[7];\n                data[offset + 10] = "+e+"_matrix[8];\n            "}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'},codeUbo:function(e){return"\n                v = uv."+e+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(e){return"\n                    v = uv."+e+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],og={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},sg={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},ug=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function hg(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}var lg=0,cg={},dg=function(){function e(t,n,r){void 0===r&&(r="pixi-shader"),this.id=lg++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),cg[r]?(cg[r]++,r+="-"+cg[r]):cg[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Zp(this.vertexSrc,kr.PRECISION_VERTEX,_r.HIGH),this.fragmentSrc=Zp(this.fragmentSrc,kr.PRECISION_FRAGMENT,function(){if(!Jp){Jp=_r.MEDIUM;var e=function(){if(Qp===qp||Qp&&Qp.isContextLost()){var e=document.createElement("canvas"),t=void 0;kr.PREFER_ENV>=ar.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),Qp=t}return Qp}();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Jp=t.precision?_r.HIGH:_r.MEDIUM}}return Jp}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=t+n,a=Tf[i];return a||(Tf[i]=a=new e(t,n,r)),a},e}(),fg=function(){function e(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Cp?t:new Cp(t):new Cp({})}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,r){return new e(dg.from(t,n),r)},e}(),pg=function(){function e(){this.data=0,this.blendMode=ur.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ur.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),gg=function(e){function t(n,r,i){var a=this,o=dg.from(n||t.defaultVertexSrc,r||t.defaultFragmentSrc);return(a=e.call(this,o,i)||this).padding=0,a.resolution=kr.FILTER_RESOLUTION,a.multisample=kr.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new pg,a}return Yf(t,e),t.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}(fg),mg=new Lf,vg=function(){function e(e,t){this._texture=e,this.mapCoord=new Lf,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],a=e[r+1];t[r]=i*n.a+a*n.c+n.tx,t[r+1]=i*n.b+a*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(mg.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(mg));var a=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(t._frame.x+s+u)/a.width,o[1]=(t._frame.y+s+u)/a.height,o[2]=(t._frame.x+t._frame.width-s+u)/a.width,o[3]=(t._frame.y+t._frame.height-s+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0},e}(),yg=function(e){function t(t,n,r){var i=this,a=null;return"string"!=typeof t&&void 0===n&&void 0===r&&(a=t,t=void 0,n=void 0,r=void 0),(i=e.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=a,i.maskMatrix=new Lf,i}return Yf(t,e),Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(e,t,n,r){var i=this._maskSprite,a=i._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new vg(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))},t}(gg),bg=function(){function e(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},e.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new Xp;r.pooled=!0,r.maskObject=t,n=r}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n.autoDetect&&this.detect(n),n._target=e,n.type!==Er.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Er.SCISSOR:this.renderer.scissor.push(n);break;case Er.STENCIL:this.renderer.stencil.push(n);break;case Er.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===Er.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case Er.SCISSOR:this.renderer.scissor.pop();break;case Er.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Er.SPRITE:this.popSpriteMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===Er.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(e){e.maskObject.isSprite?e.type=Er.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Er.SCISSOR:e.type=Er.STENCIL},e.prototype.pushSpriteMask=function(e){var t,n,r=e.maskObject,i=e._target,a=e._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex])||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new yg]);var o,s,u=this.renderer,h=u.renderTexture;if(h.current){var l=h.current;o=e.resolution||l.resolution,s=null!==(t=e.multisample)&&void 0!==t?t:l.multisample}else o=e.resolution||u.resolution,s=null!==(n=e.multisample)&&void 0!==n?n:u.multisample;a[0].resolution=o,a[0].multisample=s,a[0].maskSprite=r;var c=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,a),i.filterArea=c,e._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),_g=function(){function e(e){this.renderer=e,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),Eg=new Lf,Tg=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return Yf(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.calcScissorRect=function(e){if(!e._scissorRectLocal){var t=e._scissorRect,n=e.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var a=n.getBounds();this.roundFrameToPixels(a,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,t&&a.fit(t),e._scissorRectLocal=a}},t.isMatrixRotated=function(e){if(!e)return!1;var t=e.a,n=e.b,r=e.c,i=e.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)},t.prototype.testScissor=function(e){var n=e.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(t.isMatrixRotated(n.worldTransform))return!1;if(t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var r=e._scissorRectLocal;return r.width>0&&r.height>0},t.prototype.roundFrameToPixels=function(e,n,r,i,a){t.isMatrixRotated(a)||((a=a?Eg.copyFrom(a):Eg.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(a,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))},t.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e,t=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)},t}(_g),xg=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return Yf(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t}(_g),kg=function(){function e(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Lf,this.transform=null}return e.prototype.update=function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(e,t,n,r){var i=this.projectionMatrix,a=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=a*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-a-t.y*i.d},e.prototype.setTransform=function(e){},e.prototype.destroy=function(){this.renderer=null},e}(),Sg=new Of,wg=new Of,Mg=function(){function e(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Of,this.destinationFrame=new Of,this.viewportFrame=new Of}return e.prototype.bind=function(e,t,n){void 0===e&&(e=null);var r,i,a,o=this.renderer;this.current=e,e?(a=(r=e.baseTexture).resolution,t||(Sg.width=e.frame.width,Sg.height=e.frame.height,t=Sg),n||(wg.x=e.frame.x,wg.y=e.frame.y,wg.width=t.width,wg.height=t.height,n=wg),i=r.framebuffer):(a=o.resolution,t||(Sg.width=o.screen.width,Sg.height=o.screen.height,t=Sg),n||((n=Sg).width=t.width,n.height=t.height));var s=this.viewportFrame;s.x=n.x*a,s.y=n.y*a,s.width=n.width*a,s.height=n.height*a,e||(s.y=o.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,t,a,!i),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var a=this.viewportFrame,o=a.x,s=a.y,u=a.width,h=a.height;o=Math.round(o),s=Math.round(s),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,s,u,h)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),i&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function Ag(e,t,n,r,i){n.buffer.update(i)}var Rg={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Cg={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var Pg=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();var Ig=0,Ng={textureCount:0,uboCount:0},Og=function(){function e(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Ig++}return e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof ig)return ig;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");ig=!0===e({a:"b"},"a","b")}catch(e){ig=!1}return ig}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(e){this.gl=e,this.reset()},e.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(Ng.textureCount=0,Ng.uboCount=0,this.syncUniformGroup(e.uniformGroup,Ng)),r},e.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},e.prototype.syncUniformGroup=function(e,t){var n=this.getGlProgram();e.static&&e.dirtyId===n.uniformDirtyGroups[e.id]||(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},e.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in e.uniforms){var a=t[i];if(a){for(var o=e.uniforms[i],s=!1,u=0;u<ag.length;u++)if(ag[u].test(a,o)){r.push(ag[u].code(i,o)),s=!0;break}if(!s){var h=(1===a.size?og:sg)[a.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+h+";")}}else(null===(n=e.uniforms[i])||void 0===n?void 0:n.group)&&(e.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(e,t){var n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;var r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,Ng,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(e,t,n){var r=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var i=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=function(e,t){if(!e.autoManage)return{size:0,syncFunc:Ag};for(var n=function(e,t){var n=[];for(var r in e)t[r]&&n.push(t[r]);return n.sort((function(e,t){return e.index-t.index})),n}(e.uniforms,t),r=function(e){for(var t=e.map((function(e){return{data:e,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,a=0;a<t.length;a++){var o=t[a];if(n=Cg[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return{uboElements:t,size:i=16*Math.ceil(i/16)}}(n),i=r.uboElements,a=r.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<i.length;s++){for(var u=i[s],h=e.uniforms[u.data.name],l=u.data.name,c=!1,d=0;d<ag.length;d++){var f=ag[d];if(f.codeUbo&&f.test(u.data,h)){o.push("offset = "+u.offset/4+";",ag[d].codeUbo(u.data.name,h)),c=!0;break}}if(!c)if(u.data.size>1){var p=eg(u.data.type),g=Math.max(Cg[u.data.type]/16,1),m=p/g,v=(4-m%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+u.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+u.data.size*g+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+v+";\n                }\n\n                ")}else{var y=Rg[u.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+u.offset/4+";\n                "+y+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var s=new Float32Array(o.size/4);e.buffer.update(s)}return t.uniformGroups[e.id]=o.syncFunc,t.uniformGroups[e.id]},e.prototype.getSignature=function(e,t,n){var r=e.uniforms,i=[n+"-"];for(var a in r)i.push(a),t[a]&&i.push(t[a].type);return i.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(e){var t=this.gl,n=e.program,r=function(e,t){var n=zp(e,e.VERTEX_SHADER,t.vertexSrc),r=zp(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||Vp(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||Vp(e,r),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,i,n,r),t.attributeData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=t.getActiveAttrib(e,i);if(0!==a.name.indexOf("gl_")){var o=rg(t,a.type),s={type:o,name:a.name,size:eg(o),location:t.getAttribLocation(e,a.name)};n[a.name]=s}}return n}(i,e),t.uniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=t.getActiveUniform(e,i),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),u=rg(t,a.type);n[o]={name:o,index:i,type:u,size:a.size,isArray:s,value:Yp(u,a.size)}}return n}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var a=Object.keys(t.attributeData);a.sort((function(e,t){return e>t?1:-1}));for(var o=0;o<a.length;o++)t.attributeData[a[o]].location=o,e.bindAttribLocation(i,o,a[o]);e.linkProgram(i)}e.deleteShader(n),e.deleteShader(r);var s={};for(var o in t.uniformData){var u=t.uniformData[o];s[o]={location:e.getUniformLocation(i,o),value:Yp(u.type,u.size)}}return new Pg(i,s)}(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}(),Dg=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ur.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new pg,this.defaultState.blend=!0}return e.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[ur.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.ADD]=[e.ONE,e.ONE],t[ur.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.NONE]=[0,0],t[ur.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ur.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ur.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ur.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ur.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ur.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ur.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ur.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ur.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ur.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ur.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},e.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},e.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(e){this.gl.depthMask(e)},e.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},e.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):t||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),Lg=function(){function e(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=kr.GC_MAX_IDLE,this.checkCountMax=kr.GC_MAX_CHECK_COUNT,this.mode=kr.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==br.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){var a=0;for(r=0;r<t.length;r++)null!==t[r]&&(t[a++]=t[r]);t.length=a}},e.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},e.prototype.destroy=function(){this.renderer=null},e}(),Bg=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=dr.UNSIGNED_BYTE,this.internalFormat=lr.RGBA,this.samplerType=0},Fg=function(){function e(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new $f,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var t,n,r,i,a,o,s,u,h,l,c,d,f,p,g,m,v,y,b,_,E,T,x;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?((t={})[dr.UNSIGNED_BYTE]=((n={})[lr.RGBA]=e.RGBA8,n[lr.RGB]=e.RGB8,n[lr.RG]=e.RG8,n[lr.RED]=e.R8,n[lr.RGBA_INTEGER]=e.RGBA8UI,n[lr.RGB_INTEGER]=e.RGB8UI,n[lr.RG_INTEGER]=e.RG8UI,n[lr.RED_INTEGER]=e.R8UI,n[lr.ALPHA]=e.ALPHA,n[lr.LUMINANCE]=e.LUMINANCE,n[lr.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,n),t[dr.BYTE]=((r={})[lr.RGBA]=e.RGBA8_SNORM,r[lr.RGB]=e.RGB8_SNORM,r[lr.RG]=e.RG8_SNORM,r[lr.RED]=e.R8_SNORM,r[lr.RGBA_INTEGER]=e.RGBA8I,r[lr.RGB_INTEGER]=e.RGB8I,r[lr.RG_INTEGER]=e.RG8I,r[lr.RED_INTEGER]=e.R8I,r),t[dr.UNSIGNED_SHORT]=((i={})[lr.RGBA_INTEGER]=e.RGBA16UI,i[lr.RGB_INTEGER]=e.RGB16UI,i[lr.RG_INTEGER]=e.RG16UI,i[lr.RED_INTEGER]=e.R16UI,i[lr.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[dr.SHORT]=((a={})[lr.RGBA_INTEGER]=e.RGBA16I,a[lr.RGB_INTEGER]=e.RGB16I,a[lr.RG_INTEGER]=e.RG16I,a[lr.RED_INTEGER]=e.R16I,a),t[dr.UNSIGNED_INT]=((o={})[lr.RGBA_INTEGER]=e.RGBA32UI,o[lr.RGB_INTEGER]=e.RGB32UI,o[lr.RG_INTEGER]=e.RG32UI,o[lr.RED_INTEGER]=e.R32UI,o[lr.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,o),t[dr.INT]=((s={})[lr.RGBA_INTEGER]=e.RGBA32I,s[lr.RGB_INTEGER]=e.RGB32I,s[lr.RG_INTEGER]=e.RG32I,s[lr.RED_INTEGER]=e.R32I,s),t[dr.FLOAT]=((u={})[lr.RGBA]=e.RGBA32F,u[lr.RGB]=e.RGB32F,u[lr.RG]=e.RG32F,u[lr.RED]=e.R32F,u[lr.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,u),t[dr.HALF_FLOAT]=((h={})[lr.RGBA]=e.RGBA16F,h[lr.RGB]=e.RGB16F,h[lr.RG]=e.RG16F,h[lr.RED]=e.R16F,h),t[dr.UNSIGNED_SHORT_5_6_5]=((l={})[lr.RGB]=e.RGB565,l),t[dr.UNSIGNED_SHORT_4_4_4_4]=((c={})[lr.RGBA]=e.RGBA4,c),t[dr.UNSIGNED_SHORT_5_5_5_1]=((d={})[lr.RGBA]=e.RGB5_A1,d),t[dr.UNSIGNED_INT_2_10_10_10_REV]=((f={})[lr.RGBA]=e.RGB10_A2,f[lr.RGBA_INTEGER]=e.RGB10_A2UI,f),t[dr.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[lr.RGB]=e.R11F_G11F_B10F,p),t[dr.UNSIGNED_INT_5_9_9_9_REV]=((g={})[lr.RGB]=e.RGB9_E5,g),t[dr.UNSIGNED_INT_24_8]=((m={})[lr.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,m),t[dr.FLOAT_32_UNSIGNED_INT_24_8_REV]=((v={})[lr.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,v),x=t):((y={})[dr.UNSIGNED_BYTE]=((b={})[lr.RGBA]=e.RGBA,b[lr.RGB]=e.RGB,b[lr.ALPHA]=e.ALPHA,b[lr.LUMINANCE]=e.LUMINANCE,b[lr.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,b),y[dr.UNSIGNED_SHORT_5_6_5]=((_={})[lr.RGB]=e.RGB,_),y[dr.UNSIGNED_SHORT_4_4_4_4]=((E={})[lr.RGBA]=e.RGBA,E),y[dr.UNSIGNED_SHORT_5_5_5_1]=((T={})[lr.RGBA]=e.RGBA,T),x=y),x}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new Bg(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Bg(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(e,t){void 0===t&&(t=0);var n=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},e.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)},e.prototype.ensureSamplerType=function(e){var t=this,n=t.boundTextures,r=t.hasIntegerTextures,i=t.CONTEXT_UID;if(r)for(var a=e-1;a>=0;--a){var o=n[a];o&&o._glTextures[i].samplerType!==fr.FLOAT&&this.renderer.texture.unbind(o)}},e.prototype.initTexture=function(e){var t=new Bg(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(e,t){var n,r;t.internalFormat=null!==(r=null===(n=this.internalFormats[e.type])||void 0===n?void 0:n[e.format])&&void 0!==r?r:e.format,2===this.webGLVersion&&e.type===dr.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},e.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(n,e,t))t.samplerType!==fr.FLOAT&&(this.hasIntegerTextures=!0);else{var r=e.realWidth,i=e.realHeight,a=n.gl;(t.width!==r||t.height!==i||t.dirtyId<0)&&(t.width=r,t.height=i,a.texImage2D(e.target,0,t.internalFormat,r,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},e.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&function(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var a=i-(n=t+n>i?i-t:n);for(r=t;r<a;++r)e[r]=e[r+n];e.length=a}}(this.managedTextures,r,1)}},e.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==mr.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=gr.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},e.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==mr.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===pr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===pr.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===pr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===pr.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),Gg={__proto__:null,FilterSystem:Op,BatchSystem:Lp,ContextSystem:Fp,FramebufferSystem:Hp,GeometrySystem:Kp,MaskSystem:bg,ScissorSystem:Tg,StencilSystem:xg,ProjectionSystem:kg,RenderTextureSystem:Mg,ShaderSystem:Og,StateSystem:Dg,TextureGCSystem:Lg,TextureSystem:Fg},Ug=new Lf,Hg=function(e){function t(t,n){void 0===t&&(t=or.UNKNOWN);var r=e.call(this)||this;return n=Object.assign({},kr.RENDER_OPTIONS,n),r.options=n,r.type=t,r.screen=new Of(0,0,n.width,n.height),r.view=n.view||document.createElement("canvas"),r.resolution=n.resolution||kr.RESOLUTION,r.useContextAlpha=n.useContextAlpha,r.autoDensity=!!n.autoDensity,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(_f("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=n.transparent,r.backgroundAlpha=n.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}return Yf(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(t*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},t.prototype.generateTexture=function(e,t,n,r){void 0===t&&(t={}),"number"==typeof t&&(_f("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),t={scaleMode:t,resolution:n,region:r});var i=t.region,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["region"]);0===(r=i||e.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var o=vp.create(Jf({width:r.width,height:r.height},a));return Ug.tx=-r.x,Ug.ty=-r.y,this.render(e,{renderTexture:o,clear:!1,transform:Ug,skipUpdateTransform:!!e.parent}),o},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=or.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){var t,n,r;this._backgroundColor=e,this._backgroundColorString=(t=e.toString(16),"#"+("000000".substring(0,6-t.length)+t)),n=e,void 0===(r=this._backgroundColorRgba)&&(r=[]),r[0]=(n>>16&255)/255,r[1]=(n>>8&255)/255,r[2]=(255&n)/255},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(Bd),jg=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Kg=function(){function e(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)},e.prototype.bindBufferBase=function(e,t){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var i=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,i.buffer)}},e.prototype.bindBufferRange=function(e,t,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var a=e._glBuffers[i]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,a.buffer,256*n,256)},e.prototype.update=function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n];if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var i=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,i)}},e.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)},e.prototype.createGLBuffer=function(e){var t=this.CONTEXT_UID,n=this.gl;return e._glBuffers[t]=new jg(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]},e}();!function(e){function t(n){var r=e.call(this,or.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Mf("destroy"),contextChange:new Mf("contextChange"),reset:new Mf("reset"),update:new Mf("update"),postrender:new Mf("postrender"),prerender:new Mf("prerender"),resize:new Mf("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Cp({projectionMatrix:new Lf},!0),r.addSystem(bg,"mask").addSystem(Fp,"context").addSystem(Dg,"state").addSystem(Og,"shader").addSystem(Fg,"texture").addSystem(Kg,"buffer").addSystem(Kp,"geometry").addSystem(Hp,"framebuffer").addSystem(Tg,"scissor").addSystem(xg,"stencil").addSystem(kg,"projection").addSystem(Lg,"textureGC").addSystem(Op,"filter").addSystem(Mg,"renderTexture").addSystem(Lp,"batch"),r.initPlugins(t.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(e){var t;if(!cf){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+e+" - http://www.pixijs.com/");cf=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}Yf(t,e),t.create=function(e){if(void 0===lf&&(lf=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:kr.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(e){return!1}}()),lf)return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e,t=this.gl;if(1===this.context.webGLVersion){var n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n);e>=Tr.HIGH?this.multisample=Tr.HIGH:e>=Tr.MEDIUM?this.multisample=Tr.MEDIUM:e>=Tr.LOW?this.multisample=Tr.LOW:this.multisample=Tr.NONE},t.prototype.addSystem=function(e,t){var n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var r in this[t]=n,this.runners)this.runners[r].add(n);return this},t.prototype.render=function(e,t){var n,r,i,a;if(t&&(t instanceof vp?(_f("6.0.0","Renderer#render arguments changed, use options instead."),n=t,r=arguments[2],i=arguments[3],a=arguments[4]):(n=t.renderTexture,r=t.clear,i=t.transform,a=t.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=e),!a){var o=e.enableTempParent();e.updateTransform(),e.disableTempParent(o)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(t,n,r,i){void 0===n&&(n={});var a=e.prototype.generateTexture.call(this,t,n,r,i);return this.framebuffer.blit(),a},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return _f("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n}}(Hg);var Xg=function(){this.texArray=null,this.blend=0,this.type=hr.TRIANGLES,this.start=0,this.size=0,this.data=null},zg=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),Vg=function(){function e(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),Wg=function(e){function t(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=pg.for2d(),n.size=4*kr.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return Yf(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;kr.PREFER_ENV===ar.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),kr.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=ug.replace(/%forloop%/gi,hg(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;e.length<r;)e.push(new Xg);for(;n.length<i;)n.push(new zg);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,n=this.MAX_TEXTURES,r=t._textureArrayPool,i=this.renderer.batch,a=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++$f._globalBatch,u=0,h=r[0],l=0;i.copyBoundTextures(a,n);for(var c=0;c<this._bufferSize;++c){var d=e[c];e[c]=null,d._batchEnabled!==s&&(h.count>=n&&(i.boundArray(h,a,s,n),this.buildDrawCalls(h,l,c),l=c,h=r[++u],++s),d._batchEnabled=s,d.touched=o,h.elements[h.count++]=d)}for(h.count>0&&(i.boundArray(h,a,s,n),this.buildDrawCalls(h,l,this._bufferSize),++u,++s),c=0;c<a.length;c++)a[c]=null;$f._globalBatch=s},t.prototype.buildDrawCalls=function(e,n,r){var i=this,a=i._bufferedElements,o=i._attributeBuffer,s=i._indexBuffer,u=i.vertexSize,h=t._drawCallPool,l=this._dcIndex,c=this._aIndex,d=this._iIndex,f=h[l];f.start=this._iIndex,f.texArray=e;for(var p=n;p<r;++p){var g=a[p],m=g._texture.baseTexture,v=df[m.alphaMode?1:0][g.blendMode];a[p]=null,n<p&&f.blend!==v&&(f.size=d-f.start,n=p,(f=h[++l]).texArray=e,f.start=d),this.packInterleavedGeometry(g,o,s,c,d),c+=g.vertexData.length/2*u,d+=g.indices.length,f.blend=v}n<r&&(f.size=d-f.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,n=e._attributeBuffer,r=e._indexBuffer;kr.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,a=t._drawCallPool,o=null,s=0;s<e;s++){var u=a[s],h=u.texArray,l=u.type,c=u.size,d=u.start,f=u.blend;o!==h&&(o=h,this.bindAndClearTexArray(h)),this.state.blendMode=f,i.set(this.state),r.drawElements(l,c,r.UNSIGNED_SHORT,2*d)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),kr.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=pf(Math.ceil(e/8)),n=mf(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new Vg(r*this.vertexSize*4)),i},t.prototype.getIndexBuffer=function(e){var t=pf(Math.ceil(e/12)),n=mf(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},t.prototype.packInterleavedGeometry=function(e,t,n,r,i){for(var a=t.uint32View,o=t.float32View,s=r/this.vertexSize,u=e.uvs,h=e.indices,l=e.vertexData,c=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=d<1&&e._texture.baseTexture.alphaMode?function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255;return(255*t<<24)+((n=n*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+((255&e)*t+.5|0)}(e._tintRGB,d):e._tintRGB+(255*d<<24),p=0;p<l.length;p+=2)o[r++]=l[p],o[r++]=l[p+1],o[r++]=u[p],o[r++]=u[p+1],a[r++]=f,o[r++]=c;for(p=0;p<h.length;p++)n[i++]=s+h[p]},t._drawCallPool=[],t._textureArrayPool=[],t}(Dp),Yg=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=Cp.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new dg(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Lf,default:this.defaultGroupCache[e]};return new fg(this.programCache[e],i)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},e}(),Jg=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._buffer=new Ep(null,t,!1),n._indexBuffer=new Ep(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,dr.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,dr.FLOAT).addAttribute("aColor",n._buffer,4,!0,dr.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,dr.FLOAT).addIndex(n._indexBuffer),n}return Yf(t,e),t}(wp),qg="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Qg="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Zg=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:qg,fragment:Qg,geometryClass:Jg,vertexSize:6},e),n=t.vertex,r=t.fragment,i=t.vertexSize,a=t.geometryClass;return function(e){function t(t){var o=e.call(this,t)||this;return o.shaderGenerator=new Yg(n,r),o.geometryClass=a,o.vertexSize=i,o}return Yf(t,e),t}(Wg)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return qg},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return Qg},enumerable:!1,configurable:!0}),e}();Zg.create();var $g={},em=function(e){Object.defineProperty($g,e,{get:function(){return _f("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),hp[e]}})};for(var tm in hp)em(tm);var nm={},rm=function(e){Object.defineProperty(nm,e,{get:function(){return _f("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),Gg[e]}})};for(var tm in Gg)rm(tm);var im=function(){function e(e){this.renderer=e}return e.prototype.render=function(e){var t=this.renderer,n=e.worldTransform;t.context.globalAlpha=e.worldAlpha,t.setBlendMode(e.blendMode),t.setContextTransform(n,e.roundPixels),e.drawMode!==hr.TRIANGLES?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.geometry.buffers[0].data.length,n=0;n<t-2;n++){var r=2*n;this._renderDrawTriangle(e,r,r+2,r+4)}},e.prototype._renderTriangles=function(e){for(var t=e.geometry.getIndex().data,n=t.length,r=0;r<n;r+=3){var i=2*t[r],a=2*t[r+1],o=2*t[r+2];this._renderDrawTriangle(e,i,a,o)}},e.prototype._renderDrawTriangle=function(e,t,n,r){var i=this.renderer.context,a=e.geometry.buffers[0].data,o=e.uvs,s=e.texture;if(s.valid){var u=16777215!==e.tint,h=s.baseTexture,l=h.width,c=h.height;u&&e._cachedTint!==e.tint&&(e._cachedTint=e.tint,e._cachedTexture=e._cachedTexture||new mp(h),e._tintedCanvas=Nd.getTintedCanvas({texture:e._cachedTexture},e.tint));var d=u?e._tintedCanvas:h.getDrawableSource(),f=o[t]*h.width,p=o[n]*h.width,g=o[r]*h.width,m=o[t+1]*h.height,v=o[n+1]*h.height,y=o[r+1]*h.height,b=a[t],_=a[n],E=a[r],T=a[t+1],x=a[n+1],k=a[r+1],S=e.canvasPadding/this.renderer.resolution;if(S>0){var w=e.worldTransform,M=w.a,A=w.b,R=w.c,C=w.d,P=(b+_+E)/3,I=(T+x+k)/3,N=b-P,O=T-I,D=M*N+R*O,L=A*N+C*O,B=Math.sqrt(D*D+L*L),F=1+S/B;b=P+N*F,T=I+O*F,D=M*(N=_-P)+R*(O=x-I),L=A*N+C*O,_=P+N*(F=1+S/(B=Math.sqrt(D*D+L*L))),x=I+O*F,D=M*(N=E-P)+R*(O=k-I),L=A*N+C*O,E=P+N*(F=1+S/(B=Math.sqrt(D*D+L*L))),k=I+O*F}i.save(),i.beginPath(),i.moveTo(b,T),i.lineTo(_,x),i.lineTo(E,k),i.closePath(),i.clip();var G=f*v+m*g+p*y-v*g-m*p-f*y,U=b*v+m*E+_*y-v*E-m*_-b*y,H=f*_+b*g+p*E-_*g-b*p-f*E,j=f*v*E+m*_*g+b*p*y-b*v*g-m*p*E-f*_*y,K=T*v+m*k+x*y-v*k-m*x-T*y,X=f*x+T*g+p*k-x*g-T*p-f*k,z=f*v*k+m*x*g+T*p*y-T*v*g-m*p*k-f*x*y;i.transform(U/G,K/G,H/G,X/G,j/G,z/G),i.drawImage(d,0,0,l*h.resolution,c*h.resolution,0,0,l,c),i.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,n=e.geometry.getBuffer("aVertexPosition").data,r=n.length/2;t.beginPath();for(var i=1;i<r-2;++i){var a=2*i,o=n[a],s=n[a+1],u=n[a+2],h=n[a+3],l=n[a+4],c=n[a+5];t.moveTo(o,s),t.lineTo(u,h),t.lineTo(l,c)}t.fillStyle="#FF0000",t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();kr.MESH_CANVAS_PADDING=0,rc.prototype._renderCanvas=function(e,t){e.plugins.mesh.render(t)},Sd.prototype._cachedTint=16777215,Sd.prototype._tintedCanvas=null,Sd.prototype._canvasUvs=null,Sd.prototype._renderCanvas=function(e){var t=e.context,n=this.worldTransform,r=16777215!==this.tint,i=this.texture;if(i.valid){r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=Nd.getTintedCanvas(this,this.tint));var a=r?this._tintedCanvas:i.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var o=this.vertices,s=this._canvasUvs,u=r?0:i.frame.x,h=r?0:i.frame.y,l=u+i.frame.width,c=h+i.frame.height;s[0]=u,s[1]=u+this._leftWidth,s[2]=l-this._rightWidth,s[3]=l,s[4]=h,s[5]=h+this._topHeight,s[6]=c-this._bottomHeight,s[7]=c;for(var d=0;d<8;d++)s[d]*=i.baseTexture.resolution;t.globalAlpha=this.worldAlpha,e.setBlendMode(this.blendMode),e.setContextTransform(n,this.roundPixels);for(var f=0;f<3;f++)for(var p=0;p<3;p++){var g=2*p+8*f,m=Math.max(1,s[p+1]-s[p]),v=Math.max(1,s[f+5]-s[f+4]),y=Math.max(1,o[g+10]-o[g]),b=Math.max(1,o[g+11]-o[g+1]);t.drawImage(a,s[p],s[f+4],m,v,o[g],o[g+1],y,b)}}};var am=!1;nc.prototype._cachedTint=16777215,nc.prototype._tintedCanvas=null,nc.prototype._cachedTexture=null,nc.prototype._renderCanvas=function(e){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(e,this):am||(am=!0,globalThis.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))},nc.prototype._canvasPadding=null,Object.defineProperty(nc.prototype,"canvasPadding",{get:function(){return null!==this._canvasPadding?this._canvasPadding:kr.MESH_CANVAS_PADDING},set:function(e){this._canvasPadding=e}}),kd.prototype._renderCanvas=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(e,this)},Td.prototype._renderCanvas=function(e){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(e,this)};var om,sm=function(){function e(){}return e.offsetPolygon=function(t,n){var r=[],i=t.length;n=e.isPolygonClockwise(t)?n:-1*n;for(var a=0;a<i;a+=2){var o=a-2;o<0&&(o+=i);var s=(a+2)%i,u=t[a]-t[o],h=t[a+1]-t[o+1],l=Math.sqrt(u*u+h*h);u/=l,h/=l;var c=-(h*=n),d=u*=n,f=[t[o]+c,t[o+1]+d],p=[t[a]+c,t[a+1]+d],g=t[s]-t[a],m=t[s+1]-t[a+1];g/=l=Math.sqrt(g*g+m*m),m/=l;var v=-(m*=n),y=g*=n,b=[t[a]+v,t[a+1]+y],_=[t[s]+v,t[s+1]+y],E=e.findIntersection(f[0],f[1],p[0],p[1],b[0],b[1],_[0],_[1]);E&&r.push.apply(r,E)}return r},e.findIntersection=function(e,t,n,r,i,a,o,s){var u=(s-a)*(n-e)-(o-i)*(r-t),h=(o-i)*(t-a)-(s-a)*(e-i);if(0===u)return 0===h&&0==(n-e)*(t-a)-(r-t)*(e-i)?[(e+n)/2,(t+r)/2]:null;var l=h/u;return[e+l*(n-e),t+l*(r-t)]},e.isPolygonClockwise=function(e){for(var t=0,n=0,r=e.length-2;n<e.length;r=n,n+=2)t+=(e[n]-e[r])*(e[n+1]+e[r+1]);return t>0},e}(),um=function(){function e(e){this._svgMatrix=null,this._tempMatrix=new vi,this.renderer=e}return e.prototype._calcCanvasStyle=function(e,t){var n;return e.texture&&e.texture.baseTexture!==Fa.WHITE.baseTexture?e.texture.valid?(n=Nd.getTintedPattern(e.texture,t),this.setPatternTransform(n,e.matrix||vi.IDENTITY)):n="#808080":n="#"+("00000"+(0|t).toString(16)).slice(-6),n},e.prototype.render=function(e){var t=this.renderer,n=t.context,r=e.worldAlpha,i=e.transform.worldTransform;t.setContextTransform(i),t.setBlendMode(e.blendMode);for(var a,o,s=e.geometry.graphicsData,u=(e.tint>>16&255)/255,h=(e.tint>>8&255)/255,l=(255&e.tint)/255,c=0;c<s.length;c++){var d=s[c],f=d.shape,p=d.fillStyle,g=d.lineStyle,m=0|d.fillStyle.color,v=0|d.lineStyle.color;if(d.matrix&&t.setContextTransform(i.copyTo(this._tempMatrix).append(d.matrix)),p.visible){var y=((m>>16&255)/255*u*255<<16)+((m>>8&255)/255*h*255<<8)+(255&m)/255*l*255;a=this._calcCanvasStyle(p,y)}if(g.visible){var b=((v>>16&255)/255*u*255<<16)+((v>>8&255)/255*h*255<<8)+(255&v)/255*l*255;o=this._calcCanvasStyle(g,b)}if(n.lineWidth=g.width,n.lineCap=g.cap,n.lineJoin=g.join,n.miterLimit=g.miterLimit,d.type===ai.POLY){n.beginPath();var _=(R=f).points,E=d.holes,T=void 0,x=void 0,k=void 0,S=void 0,w=void 0;n.moveTo(_[0],_[1]);for(var M=2;M<_.length;M+=2)n.lineTo(_[M],_[M+1]);if(R.closeStroke&&n.closePath(),E.length>0){for(w=[],T=0,k=_[0],S=_[1],M=2;M+2<_.length;M+=2)T+=(_[M]-k)*(_[M+3]-S)-(_[M+2]-k)*(_[M+1]-S);for(var A=0;A<E.length;A++)if(_=E[A].shape.points){for(x=0,k=_[0],S=_[1],M=2;M+2<_.length;M+=2)x+=(_[M]-k)*(_[M+3]-S)-(_[M+2]-k)*(_[M+1]-S);if(x*T<0)for(n.moveTo(_[0],_[1]),M=2;M<_.length;M+=2)n.lineTo(_[M],_[M+1]);else for(n.moveTo(_[_.length-2],_[_.length-1]),M=_.length-4;M>=0;M-=2)n.lineTo(_[M],_[M+1]);E[A].shape.closeStroke&&n.closePath(),w[A]=x*T<0}}p.visible&&(n.globalAlpha=p.alpha*r,n.fillStyle=a,n.fill()),g.visible&&this.paintPolygonStroke(R,g,o,E,w,r,n)}else if(d.type===ai.RECT){var R=f;if(p.visible&&(n.globalAlpha=p.alpha*r,n.fillStyle=a,n.fillRect(R.x,R.y,R.width,R.height)),g.visible){var C=g.width*(.5-(1-g.alignment)),P=R.width+2*C,I=R.height+2*C;n.globalAlpha=g.alpha*r,n.strokeStyle=o,n.strokeRect(R.x-C,R.y-C,P,I)}}else if(d.type===ai.CIRC)R=f,n.beginPath(),n.arc(R.x,R.y,R.radius,0,2*Math.PI),n.closePath(),p.visible&&(n.globalAlpha=p.alpha*r,n.fillStyle=a,n.fill()),g.visible&&(.5!==g.alignment&&(C=g.width*(.5-(1-g.alignment)),n.beginPath(),n.arc(R.x,R.y,R.radius+C,0,2*Math.PI),n.closePath()),n.globalAlpha=g.alpha*r,n.strokeStyle=o,n.stroke());else if(d.type===ai.ELIP){if(R=f,(X=1===g.alignment)||this.paintEllipse(R,p,g,a,r,n),g.visible){if(.5!==g.alignment){var N=.5522848,O=(C=g.width*(.5-(1-g.alignment)),2*(R.width+C)),D=2*(R.height+C),L=R.x-O/2,B=R.y-D/2,F=O/2*N,G=D/2*N,U=L+O,H=B+D,j=L+O/2,K=B+D/2;n.beginPath(),n.moveTo(L,K),n.bezierCurveTo(L,K-G,j-F,B,j,B),n.bezierCurveTo(j+F,B,U,K-G,U,K),n.bezierCurveTo(U,K+G,j+F,H,j,H),n.bezierCurveTo(j-F,H,L,K+G,L,K),n.closePath()}n.globalAlpha=g.alpha*r,n.strokeStyle=o,n.stroke()}X&&this.paintEllipse(R,p,g,a,r,n)}else if(d.type===ai.RREC){var X;if(R=f,(X=1===g.alignment)||this.paintRoundedRectangle(R,p,g,a,r,n),g.visible){if(.5!==g.alignment){P=R.width,I=R.height,C=g.width*(.5-(1-g.alignment));var z=R.x-C,V=R.y-C,W=R.width+2*C,Y=R.height+2*C,J=C*(g.alignment>=1?Math.min(W/P,Y/I):Math.min(P/W,I/Y)),q=R.radius+J,Q=Math.min(W,Y)/2;q=q>Q?Q:q,n.beginPath(),n.moveTo(z,V+q),n.lineTo(z,V+Y-q),n.quadraticCurveTo(z,V+Y,z+q,V+Y),n.lineTo(z+W-q,V+Y),n.quadraticCurveTo(z+W,V+Y,z+W,V+Y-q),n.lineTo(z+W,V+q),n.quadraticCurveTo(z+W,V,z+W-q,V),n.lineTo(z+q,V),n.quadraticCurveTo(z,V,z,V+q),n.closePath()}n.globalAlpha=g.alpha*r,n.strokeStyle=o,n.stroke()}X&&this.paintRoundedRectangle(R,p,g,a,r,n)}}},e.prototype.paintPolygonStroke=function(e,t,n,r,i,a,o){if(.5!==t.alignment){var s=t.width*(.5-(1-t.alignment)),u=sm.offsetPolygon(e.points,s),h=void 0;o.beginPath(),o.moveTo(u[0],u[1]);for(var l=2;l<u.length;l+=2)o.lineTo(u[l],u[l+1]);e.closeStroke&&o.closePath();for(var c=0;c<r.length;c++){if(h=r[c].shape.points,u=sm.offsetPolygon(h,s),i[c])for(o.moveTo(u[0],u[1]),l=2;l<u.length;l+=2)o.lineTo(u[l],u[l+1]);else for(o.moveTo(u[u.length-2],u[u.length-1]),l=u.length-4;l>=0;l-=2)o.lineTo(u[l],u[l+1]);r[c].shape.closeStroke&&o.closePath()}}o.globalAlpha=t.alpha*a,o.strokeStyle=n,o.stroke()},e.prototype.paintEllipse=function(e,t,n,r,i,a){var o=2*e.width,s=2*e.height,u=e.x-o/2,h=e.y-s/2,l=.5522848,c=o/2*l,d=s/2*l,f=u+o,p=h+s,g=u+o/2,m=h+s/2;0===n.alignment&&a.save(),a.beginPath(),a.moveTo(u,m),a.bezierCurveTo(u,m-d,g-c,h,g,h),a.bezierCurveTo(g+c,h,f,m-d,f,m),a.bezierCurveTo(f,m+d,g+c,p,g,p),a.bezierCurveTo(g-c,p,u,m+d,u,m),a.closePath(),0===n.alignment&&a.clip(),t.visible&&(a.globalAlpha=t.alpha*i,a.fillStyle=r,a.fill()),0===n.alignment&&a.restore()},e.prototype.paintRoundedRectangle=function(e,t,n,r,i,a){var o=e.x,s=e.y,u=e.width,h=e.height,l=e.radius,c=Math.min(u,h)/2;l=l>c?c:l,0===n.alignment&&a.save(),a.beginPath(),a.moveTo(o,s+l),a.lineTo(o,s+h-l),a.quadraticCurveTo(o,s+h,o+l,s+h),a.lineTo(o+u-l,s+h),a.quadraticCurveTo(o+u,s+h,o+u,s+h-l),a.lineTo(o+u,s+l),a.quadraticCurveTo(o+u,s,o+u-l,s),a.lineTo(o+l,s),a.quadraticCurveTo(o,s,o,s+l),a.closePath(),0===n.alignment&&a.clip(),t.visible&&(a.globalAlpha=t.alpha*i,a.fillStyle=r,a.fill()),0===n.alignment&&a.restore()},e.prototype.setPatternTransform=function(e,t){if(!1!==this._svgMatrix){if(!this._svgMatrix){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n&&n.createSVGMatrix&&(this._svgMatrix=n.createSVGMatrix()),!this._svgMatrix||!e.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=t.a,this._svgMatrix.b=t.b,this._svgMatrix.c=t.c,this._svgMatrix.d=t.d,this._svgMatrix.e=t.tx,this._svgMatrix.f=t.ty,e.setTransform(this._svgMatrix.inverse())}},e.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},e}(),hm=new vi;fl.prototype.generateCanvasTexture=function(e,t){void 0===t&&(t=1);var n=this.getLocalBounds(),r=Ga.create({width:n.width,height:n.height,scaleMode:e,resolution:t});om||(om=new Id),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(hm),hm.invert(),hm.tx-=n.x,hm.ty-=n.y,om.render(this,{renderTexture:r,clear:!0,transform:hm});var i=Fa.from(r.baseTexture._canvasRenderTarget.canvas,{scaleMode:e});return i.baseTexture.setResolution(t),i},fl.prototype.cachedGraphicsData=[],fl.prototype._renderCanvas=function(e){!0!==this.isMask&&(this.finishPoly(),e.plugins.graphics.render(this))};var lm=new vi,cm=function(){function e(e){this.renderer=e}return e.prototype.render=function(e){var t=e._texture,n=this.renderer,r=n.context;if(t.valid){var i=t._frame.width,a=t._frame.height,o=e.transform.worldTransform,s=0,u=0,h=t.baseTexture.getDrawableSource();if(!(t.orig.width<=0||t.orig.height<=0)&&t.valid&&h){n.setBlendMode(e.blendMode,!0),n.context.globalAlpha=e.worldAlpha;var l=t.baseTexture.scaleMode===pr.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==l&&(r[n.smoothProperty]=l),t.trim?(s=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,u=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(s=(.5-e.anchor.x)*t.orig.width,u=(.5-e.anchor.y)*t.orig.height),t.rotate&&(o.copyTo(lm),o=lm,Si.matrixAppendRotationInv(o,t.rotate,s,u),s=0,u=0),s-=i/2,u-=a/2,n.setContextTransform(o,e.roundPixels,1),e.roundPixels&&(s|=0,u|=0);var c=t.baseTexture.resolution,d=n._outerBlend;d&&(r.save(),r.beginPath(),r.rect(s*n.resolution,u*n.resolution,i*n.resolution,a*n.resolution),r.clip()),16777215!==e.tint?(e._cachedTint===e.tint&&e._tintedCanvas.tintId===e._texture._updateID||(e._cachedTint=e.tint,e._tintedCanvas=Nd.getTintedCanvas(e,e.tint)),r.drawImage(e._tintedCanvas,0,0,Math.floor(i*c),Math.floor(a*c),Math.floor(s*n.resolution),Math.floor(u*n.resolution),Math.floor(i*n.resolution),Math.floor(a*n.resolution))):r.drawImage(h,t._frame.x*c,t._frame.y*c,Math.floor(i*c),Math.floor(a*c),Math.floor(s*n.resolution),Math.floor(u*n.resolution),Math.floor(i*n.resolution),Math.floor(a*n.resolution)),d&&r.restore(),n.setBlendMode(ur.NORMAL)}}},e.prototype.destroy=function(){this.renderer=null},e}();vl.prototype._tintedCanvas=null,vl.prototype._renderCanvas=function(e){e.plugins.sprite.render(this)};var dm=new ci,fm=function(){function e(e){this.renderer=e}return e.prototype.image=function(e,t,n){var r=new Image;return r.src=this.base64(e,t,n),r},e.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},e.prototype.canvas=function(e){var t,n,r,i,a=this.renderer;e&&(i=e instanceof Ga?e:a.generateTexture(e)),i?(t=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(t=a.rootContext,n=a.resolution,(r=dm).width=this.renderer.width,r.height=this.renderer.height);var o=Math.floor(r.width*n+1e-4),s=Math.floor(r.height*n+1e-4),u=new ri(o,s,1),h=t.getImageData(r.x*n,r.y*n,o,s);return u.context.putImageData(h,0,0),u.canvas},e.prototype.pixels=function(e){var t,n,r,i,a=this.renderer;e&&(i=e instanceof Ga?e:a.generateTexture(e)),i?(t=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(t=a.rootContext,n=a.resolution,(r=dm).width=a.width,r.height=a.height);var o=r.x*n,s=r.y*n,u=r.width*n,h=r.height*n;return t.getImageData(o,s,u,h).data},e.prototype.destroy=function(){this.renderer=null},e}(),pm=function(e,t){return pm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},pm(e,t)};function gm(e,t){var n=e;if(t instanceof Ea){var r=t.source,i=0===r.width?n.canvas.width:Math.min(n.canvas.width,r.width),a=0===r.height?n.canvas.height:Math.min(n.canvas.height,r.height);return n.ctx.drawImage(r,0,0,i,a,0,0,n.canvas.width,n.canvas.height),!0}return!1}var mm=function(e){function t(t){var n=e.call(this,t)||this;return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(gm),n}return function(e,t){function n(){this.constructor=e}pm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(Bl),vm=new vi,ym=new vi,bm=[new hi,new hi,new hi,new hi];Wl.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.valid){var n=e.context,r=this.worldTransform,i=t.baseTexture,a=i.getDrawableSource(),o=i.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var s=new ri(t._frame.width,t._frame.height,o);16777215!==this.tint?(this._tintedCanvas=Nd.getTintedCanvas(this,this.tint),s.context.drawImage(this._tintedCanvas,0,0)):s.context.drawImage(a,-t._frame.x*o,-t._frame.y*o),this._cachedTint=this.tint,this._canvasPattern=s.context.createPattern(s.canvas,"repeat")}n.globalAlpha=this.worldAlpha,e.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();var u=this.tileTransform.localTransform,h=this._width,l=this._height;vm.identity(),ym.copyFrom(u),this.uvRespectAnchor||ym.translate(-this.anchor.x*h,-this.anchor.y*l),ym.scale(this.tileScale.x/o,this.tileScale.y/o),vm.prepend(ym),vm.prepend(r),e.setContextTransform(vm),n.fillStyle=this._canvasPattern;var c=this.anchor.x*-h,d=this.anchor.y*-l;bm[0].set(c,d),bm[1].set(c+h,d),bm[2].set(c+h,d+l),bm[3].set(c,d+l);for(var f=0;f<4;f++)ym.applyInverse(bm[f],bm[f]);for(n.beginPath(),n.moveTo(bm[0].x,bm[0].y),f=1;f<4;f++)n.lineTo(bm[f].x,bm[f].y);n.closePath(),n.fill()}},Dh.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,n=this.worldTransform,r=!0,i=0,a=0,o=0,s=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var h=this.children[u];if(h.visible&&h._texture.valid){var l=h._texture.frame;if(t.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)r&&(e.setContextTransform(n,!1,1),r=!1),i=h.anchor.x*(-l.width*h.scale.x)+h.position.x+.5,a=h.anchor.y*(-l.height*h.scale.y)+h.position.y+.5,o=l.width*h.scale.x,s=l.height*h.scale.y;else{r||(r=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;e.setContextTransform(c,this.roundPixels,1),i=h.anchor.x*-l.width+.5,a=h.anchor.y*-l.height+.5,o=l.width,s=l.height}var d=h._texture.baseTexture.resolution;t.drawImage(h._texture.baseTexture.getDrawableSource(),l.x*d,l.y*d,l.width*d,l.height*d,i*e.resolution,a*e.resolution,o*e.resolution,s*e.resolution)}}}},Zi.prototype._renderCanvas=function(e){},Zi.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},Ji.prototype.renderCanvas=function(e){},Ml.prototype._renderCanvas=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),vl.prototype._renderCanvas.call(this,e)},Id.registerPlugin("accessibility",ea),Id.registerPlugin("extract",fm),Id.registerPlugin("graphics",um),Id.registerPlugin("interaction",ca),Id.registerPlugin("mesh",im),Id.registerPlugin("prepare",mm),Id.registerPlugin("sprite",cm);var _m,Em,Tm,xm,km,Sm,wm,Mm=function(){function n(r){t(this,n),this.currentPage=void 0,this.div=(0,e.HS)("div","stage",r),this.div.setAttribute("id","stage"),this.div.style.webkitTextSizeAdjust="100%",this.width=480,this.height=360,this.setStageScaleAndPosition(e._X,46,74),this.pages=[],this.div.owner=this,Ir=!0;var i=Number("0x".concat(Sv.stagecolor.substring(1)));this.pixi=new Cs({width:e.mz,height:e.uk,backgroundColor:i}),this.pixi.view.id="pixiStage",this.view=this.pixi.stage,(0,e.cl)(this.pixi.view.style,{transformOrigin:"left top",webkitTransform:"scale(".concat(1/e.PJ,") ")}),this.div.appendChild(this.pixi.view),this.currentZoom=1,this.view.interactive=!0}return r(n,[{key:"handlePointerDown",value:function(e){if(!("touch"===e.data.pointerType&&e.data.originalEvent.touches.length>1)&&"pen"!==e.data.originalEvent.pointerType){e.data.originalEvent.preventDefault();var t=this.whoIsIt(e.data.global);t?Sv.shaking?Sv.clearSelection():t.onPointerDown(e):Sv.clearSelection()}}},{key:"whoIsIt",value:function(t){var n=w.scale(t,1/e.PJ);(0,e.ge)(Sv.workingCanvas,480,360);var r=Sv.workingCanvas.getContext("2d",{willReadFrequently:!0});r.clearRect(0,0,480,360);for(var i=Array.from(this.currentPage.spriteList.values()),a=0;a<i.length;a++){var o=i[a];if(o.shown){if(o.scripts.length>0){if(!((0,e.gn)("".concat(o.id,"_scripts")).owner.getBlocksType(["onclick"]).length>0))continue;if(o.stamp(r),0!==r.getImageData(n.x,n.y,1,1).data[3])return o}if(o.stamp(r),0!==r.getImageData(n.x,n.y,1,1).data[3])return o}}r.clearRect(0,0,480,360);for(var s=0;s<i.length;s++){var u=i[s];if(u.shown){var h=(0,e.gn)("".concat(u.id,"_scripts")).owner.getBlocksType(["onclick"]);if(u.scripts.length>0){if(!(h.length>0))continue;if(u.stamp(r),0!==r.getImageData(n.x,n.y,1,1).data[3])return u}if(u.stamp(r),u.stamp(r,5,0),u.stamp(r,0,5),u.stamp(r,-5,0),u.stamp(r,0,-5),0!==r.getImageData(n.x,n.y,1,1).data[3])return u}}}},{key:"setStageScaleAndPosition",value:function(t,n,r){this.stageScale=t,(0,e.cl)((0,e.gn)("stage").style,{webkitTransform:"translate(".concat(-this.width/2,"px, ").concat(-this.height/2,"px) ")+"scale(".concat(t,") ")+"translate(".concat(this.width/2+n,"px, ").concat(this.height/2+r,"px)")})}},{key:"getPagesID",value:function(){for(var e=[],t=0;t<this.pages.length;t++)e.push(this.pages[t].id);return e}},{key:"getPage",value:function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].id===e)return this.pages[t];return this.pages[0]}},{key:"resetPages",value:function(){for(var e=0;e<this.pages.length;e++)this.pages[e].reset()}},{key:"gotoPage",value:function(e){e<1||e>this.pages.length||z.dragthumbnail&&z.dragthumbnail.owner||this.setPage(this.pages[e-1],!0)}},{key:"setPage",value:function(t,n){Sv.stopStrips();var r=Sv.getSprite()?(0,e.gn)("".concat(Sv.stage.currentPage.currentSpriteName,"_scripts")):void 0;r&&r.owner.deactivate(),this.pages.forEach((function(e){e.hide()})),this.currentPage=t,this.currentPage.show(),Fm.updateSprites(),Fm.updatePages();var i=Sv.getSprite();i&&i.activate(),n&&this.loadPageThreads()}},{key:"loadPageThreads",value:function(){Sv.blur(),this.currentPage.spriteList.forEach((function(t){t.goHome();var n=(0,e.gn)("".concat(t.id,"_scripts"));if(n)for(var r=n.owner.getBlocksType(["onflag","ontouch"]),i=0;i<r.length;i++){var a=r[i];Sv.runtime.addRunScript(t,a)}}))}},{key:"findPage",value:function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].id===e)return this.pages[t];return null}},{key:"findSprite",value:function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t].findSprite(e);if(n)return n}return null}},{key:"copySprite",value:function(e,t){m.sndFX("copy.wav"),Fm.overpage(t);var n=Uv.encodeSprite(e.owner),r=this.findPage(t.owner);r===this.currentPage&&(n.xcoor+=10,n.ycoor+=10,n.homex=n.xcoor,n.homey=n.ycoor);var i=n.id.split(" ");"NaN"!==Number(i[i.length-1]).toString()&&i.pop();var a=Sv.getIdForSprite(i.join(" "));n.id=a,Uv.recreateObject(r,a,n,(function(e){e.page.id===Sv.stage.currentPage.id&&e.show(),r.currentSpriteName||(r.currentSpriteName=e.id),Fm.updateSprites(),Fm.updatePages(),Hm.record({action:"copy",who:a,where:r.id}),Sv.storyStart("Stage.prototype.copySprite")}),r.id===this.currentPage.id)}},{key:"deletePage",value:function(t,n){Sv.storyStart("Stage.prototype.deletePage");var r=Sv.getIdForPage(),i=Om.mascotData(),a=new Object,o=i.id;a.num=1,a.lastSprite=o,a[o]=i,a.layers=[o];var s=this.findPage(t),u=this.getPagesID().indexOf(t);if(!(u<0)){var h=document.forms.activetextbox.textsprite;if(h&&(0,e.gn)(h.id)&&Sv.blur(),this.removePageBlocks(t),this.pages.splice(u,1),n||m.sndFX("cut.wav"),this.removePage(s),0===this.pages.length){var l=new Lm(r,a,(function(){Sv.stage.setViewPage(Sv.stage.currentPage),Fm.updateSprites(),Fm.updatePages(),n||Hm.record({action:"deletepage",where:t,who:t})}));i.page=l}else t===this.currentPage.id&&this.setViewPage(this.pages[0]),Fm.updateSprites(),Fm.updatePages(),n||Hm.record({action:"deletepage",where:t,who:t})}}},{key:"setViewPage",value:function(e){this.currentPage=e,e.show()}},{key:"removePageBlocks",value:function(t){for(var n=this.getPagesID().indexOf(t),r=0;r<this.pages.length;r++)for(var i=this.pages[r].getSprites(),a=0;a<i.length;a++){var o=i[a],s=(0,e.gn)("".concat(o.id,"_scripts"));if(s)for(var u=s.owner.getBlocksType(["gotopage"]),h=0;h<u.length;h++){var l=u[h],c=l.getArgValue()-1;if(this.pages[c].id===t){var d=l.prev;l.detachBlock(),l.div.parentNode.removeChild(l.div),d&&d.aStart&&d.div.parentNode.removeChild(d.div)}else l.getArgValue()-1>n&&(l.arg.argValue-=1,this.pages[c].num=l.arg.argValue,l.arg.updateIcon())}}}},{key:"removeSprite",value:function(e){Sv.shaking=void 0,Sv.stopShaking=void 0,m.sndFX("cut.wav"),"text"===e.type?e.deleteText(!0):this.removeCharacter(e),this.currentPage.updateThumb(),this.updatePageBlocks()}},{key:"removeCharacter",value:function(e){Sv.runtime.stopThreadSprite(e),this.removeFromPage(e),Hm.record({action:"deletesprite",who:e.id,where:Sv.stage.currentPage.id}),Sv.storyStart("Stage.prototype.removeCharacter"),Fm.updateSprites()}},{key:"updatePageBlocks",value:function(){for(var e=0;e<Sv.stage.pages.length;e++){var t=Sv.stage.pages[e];Ft.updateScriptsPageBlocks(t.sprites)}}},{key:"removeFromPage",value:function(e){var t=this.currentPage,n=Sv.getSprite();if(t.removeSprite(e),m.sndFX("cut.wav"),n&&n.id===e.id){var r=t.getSprites();t.setCurrentSprite(r.length>0?r[0]:void 0)}}},{key:"renumberPageBlocks",value:function(t){for(var n=this.getPagesID(),r=0;r<this.pages.length;r++)this.pages[r].spriteList.forEach((function(r){var i=(0,e.gn)("".concat(r.id,"_scripts"));if(i)for(var a=i.owner.getBlocksType(["gotopage"]),o=0;o<a.length;o++){var s=a[o],u=s.getArgValue()-1;s.arg.argValue=n.indexOf(t[u])+1,s.updateBlock()}}))}},{key:"clear",value:function(){for(var e=0;e<this.pages.length;e++)this.removePage(this.pages[e]);for(this.pages=[];this.pagesdiv.childElementCount>0;)this.pagesdiv.removeChild(this.pagesdiv.childNodes[0])}},{key:"removePage",value:function(e){e.spriteList.forEach((function(t){e.removeSprite(t)})),this.view.removeChild(e.view)}},{key:"sd",value:function(){var t=(0,e.gn)("stage"),n=(0,e.um)((0,e.gn)("stageframe"),t.offsetLeft+1,t.offsetTop+1,482,362,{position:"absolute",zIndex:Sv.layerTop+20,visibility:"hidden"});n.setAttribute("id","pagemask"),n.appendChild(Sv.workingCanvas)}},{key:"on",value:function(){(0,e.gn)("pagemask").style.visibility="visible"}},{key:"off",value:function(){(0,e.gn)("pagemask").style.visibility="hidden"}},{key:"sm",value:function(t){var n=(0,e.gn)("stage"),r=t.outline.width,i=t.outline.height,a=(0,e.um)((0,e.gn)("stageframe"),n.offsetLeft+1,n.offsetTop+1,r,i,{position:"absolute",zIndex:Sv.layerTop+20,visibility:"hidden"});a.setAttribute("id","spritemask"),a.appendChild(t.outline)}},{key:"son",value:function(){(0,e.gn)("spritemask").style.visibility="visible"}},{key:"soff",value:function(){(0,e.gn)("spritemask").style.visibility="hidden"}}]),n}(),Am=!0,Rm=function(){function n(){t(this,n)}return r(n,null,[{key:"init",value:function(){(Sm=document.getElementById("libframe")).style.minHeight="".concat(Math.max((0,e.Ti)(),e.Wi.offsetHeight),"px");var t=(0,e.HS)("div","topbar",Sm);t.setAttribute("id","topbar"),(0,e.HS)("div","actions",t).setAttribute("id","libactions");var r=(0,e.HS)("div","assetname-container",t),i=(0,e.HS)("div","assetname",r),a=(0,e.HS)("p",void 0,i);a.setAttribute("id","assetname"),a.textContent="",n.layoutHeader()}},{key:"createScrollPanel",value:function(){var t=(0,e.HS)("div","innerlibrary",Sm);t.setAttribute("id","asssetsview"),(0,e.HS)("div","scrollarea",t).setAttribute("id","scrollarea")}},{key:"open",value:function(t){xm=t,(0,e.gn)("assetname").textContent="",Am=!0,e.Wi.style.display="none",Sm.className="libframe appear",Sm.focus(),_m=void 0,(0,e.gn)("okbut").onclick="costumes"===xm?n.closeSpriteSelection:n.closeBkgSelection,n.clean(),n.createScrollPanel(),n.addThumbnails(xm),window.ontouchstart=void 0,window.ontouchend=void 0,window.onmousedown=void 0,window.onmouseup=void 0,document.ontouchmove=void 0,document.onmousemove=void 0,window.onresize=void 0,(0,e.gn)("library_paintme").style.opacity=1,(0,e.gn)("library_paintme").onclick=n.editResource,Sv.onBackButtonCallback.push((function(){var e=document.createEvent("TouchEvent");e.initTouchEvent(),n.cancelPick(e)}))}},{key:"clean",value:function(){if((0,e.gn)("scrollarea")){var t=(0,e.gn)("scrollarea").parentNode;Sm.removeChild(t)}}},{key:"close",value:function(t){t.preventDefault(),t.stopPropagation(),m.sndFX("tap.wav"),Sv.blur(),Sm.className="libframe disappear",document.body.scrollTop=0,e.Wi.style.display="block",Sv.editorEvents(),Sv.onBackButtonCallback.pop()}},{key:"layoutHeader",value:function(){var t=(0,e.HS)("div","bkgbuttons",(0,e.gn)("libactions")),r=(0,e.HS)("div","painticon",t);r.id="library_paintme",r.onclick=n.editResource,(0,e.HS)("div","okicon",t).setAttribute("id","okbut"),(0,e.HS)("div","cancelicon",t).onclick=n.cancelPick}},{key:"cancelPick",value:function(e){Sv.onHold=!0,n.close(e),setTimeout((function(){Sv.onHold=!1}),1e3)}},{key:"addThumbnails",value:function(){var t=(0,e.gn)("scrollarea");n.addEmptyThumb(t,"costumes"===xm?118*e._X:120*e._X,90*e._X);var r="costumes"===xm?"usershapes":"userbkgs",i={cond:"ext = ? AND version = ?"};i.items="costumes"===xm?["md5","altmd5","name","scale","width","height"]:["altmd5","md5","width","height"],i.values=["svg",Sv.version],i.order="ctime desc",sy.query(r,i,n.displayAssets)}},{key:"skipUserAssets",value:function(){var t=(0,e.gn)("scrollarea");n.addEmptyThumb(t,"costumes"===xm?118*e._X:120*e._X,90*e._X),n.addHR(t),n.displayLibAssets("costumes"===xm?rt.sprites:rt.backgrounds)}},{key:"getpadding",value:function(t){var n=Math.min((0,e.hA)(),Sm.offsetWidth),r=t.childNodes[1].offsetLeft-t.childNodes[0].offsetLeft,i=Math.floor(n/r),a=Math.floor((n-i*r)/2);return a<10?Math.floor((n-(i-1)*r)/2):a}},{key:"displayAssets",value:function(t){Am=!0;var r=(0,e.gn)("scrollarea"),i=JSON.parse(t);if(i.length>0)for(var a=0;a<i.length;a++)n.addAssetThumbChoose(r,i[a],120*e._X,90*e._X,n.selectAsset);n.addHR(r),Am=!1,i="costumes"===xm?rt.sprites:rt.backgrounds,n.displayLibAssets(i)}},{key:"displayLibAssets",value:function(t){var r=(0,e.gn)("scrollarea");if(!(t.length<1))for(var i=t[0].order,a=i?i.split(",")[1]:"",o=0;o<t.length;o++){var s=(i=t[o].order)?i.split(",")[1]:"";s!==a&&(n.addHR(r),a=s),"separator"in t[o]?n.addHR(r):n.addLocalThumbChoose(r,t[o],120*e._X,90*e._X,n.selectAsset)}}},{key:"addAssetThumbChoose",value:function(t,r,i,a,o){var s=n.parseAssetData(r),u=document.createElement("div");t.appendChild(u),u.byme=Am?1:0;var h=s.md5;u.setAttribute("class","assetbox off"),u.setAttribute("id",h),u.scale=s.scale?s.scale:.5,u.fieldname=s.name,u.w=Number(s.width),u.h=Number(s.height);var l=Math.min(i/u.w,a/u.h),c=(0,e.HS)("img",void 0,u);return c.style.left="".concat(9*e._X,"px"),c.style.top="".concat(7*e._X,"px"),c.style.position="relative",c.style.height="".concat(s.height*l,"px"),c.ondragstart=function(){return!1},s.altmd5&&sy.getAsset(s.altmd5,(function(e){c.src=e})),u.ontouchstart=function(e){o(e,u)},u.onmousedown=function(e){o(e,u)},u}},{key:"addLocalThumbChoose",value:function(t,n,r,i,a){var o=(0,e.HS)("div","assetbox off",t),s=n.md5;o.byme=Am?1:0,o.setAttribute("id",s),o.scale=n.scale?n.scale:.5,o.fieldname=n.name,o.w=Number(n.width),o.h=Number(n.height);var u=(0,e.HS)("img",void 0,o),h=Math.min(r/o.w,i/o.h);u.style.height="".concat(o.h*h,"px"),u.style.width="".concat(o.w*h,"px"),u.style.left="".concat(Math.floor((r-h*o.w)/2+9*e._X),"px"),u.style.top="".concat(Math.floor((i-h*o.h)/2+9*e._X),"px"),u.style.position="relative";var l=rt.path.replace("svg","png");return u.src="".concat(l+sy.getFilename(s),".png"),o.ontouchstart=function(e){a(e,o)},o.onmousedown=function(e){a(e,o)},o}},{key:"userAssetThumbnail",value:function(e,t,n,r){var i=Math.min(n/e.width,r/e.height),a=t.getContext("2d"),o=Math.floor(i*e.width),s=Math.floor(i*e.height),u=Math.floor((n-i*e.width)/2),h=Math.floor((r-i*e.height)/2);a.drawImage(e,0,0,e.width,e.height,u,h,o,s)}},{key:"addEmptyThumb",value:function(t,r,i){var a=document.createElement("div");a.setAttribute("class","assetbox off"),a.setAttribute("id","none"),a.fieldname="costumes"===xm?fy.localize("LIBRARY_CHARACTER"):fy.localize("LIBRARY_BACKGROUND"),a.byme=1;var o=(0,e.oM)(a,9*e._X,7*e._X,r,i,{position:"relative"}).getContext("2d");o.fillStyle=Sv.stagecolor,o.fillRect(0,0,r,i),t.appendChild(a),a.ontouchstart=function(e){n.selectAsset(e,a)},a.onmousedown=function(e){n.selectAsset(e,a)}}},{key:"addHR",value:function(e){var t=document.createElement("hr");e.appendChild(t),t.setAttribute("class","bigdivide")}},{key:"selectAsset",value:function(e,t){if(console.log(t.eventLock,e),e instanceof TouchEvent)t.eventLock=!0;else if(t.eventLock)return;var r=function(){setTimeout((function(){t.eventLock=!1}),500)};if(t.pt=JSON.stringify(z.getTargetPoint(e)),Tm&&"deleteasset"===e.target.className)n.removeFromAssetList();else{Tm&&n.stopShaking();var i=function(e){km&&clearTimeout(km),n.selectThisAsset(e,t),km=void 0,t.ontouchend=void 0,t.onmouseup=void 0,window.onmousemove=void 0,window.onmouseup=void 0,r()};t.byme&&"none"!==t.id&&(km=setTimeout((function(){r(),t.ontouchend=void 0,window.onmouseup=void 0,window.onmousemove=void 0,km=void 0,n.stopShaking(),Tm=t,n.clearAllSelections(),n.startShaking(t)}),500)),t.ontouchend=function(e){i(e)},window.onmouseup=function(e){i(e)},window.onmousemove=function(e){!function(e){var i=z.getTargetPoint(e),a=JSON.parse(t.pt);n.distance(i,a)<30||(r(),e.preventDefault(),km&&clearTimeout(km),Em&&n.unSelect(Em),km=void 0,t.ontouchend=void 0,window.onmousemove=void 0,window.onmouseup=void 0)}(e)}}}},{key:"startShaking",value:function(t){t.className="".concat(t.className," shakeme"),(0,e.HS)("div","deleteasset",t),Tm=t}},{key:"stopShaking",value:function(){if(Tm){var e=Tm;e.setAttribute("class","assetbox off");var t=e.childNodes[e.childElementCount-1];"deleteasset"===t.getAttribute("class")&&e.removeChild(t),Tm=void 0}}},{key:"removeFromAssetList",value:function(){m.sndFX("cut.wav");var e=Tm;e.parentNode.removeChild(e);var t="costumes"===xm?"usershapes":"userbkgs",r={cond:"md5 = ?",items:["*"]};return r.values=[e.id],sy.query(t,r,n.removeAssetFromLib),Em=void 0,_m=void 0,!0}},{key:"assetThumbnailUnique",value:function(e,t,n){var r="costumes"===t?"usershapes":"userbkgs",i={cond:"ext = ? AND altmd5 = ?",items:["md5","altmd5"]};i.values=["svg",e],i.order="ctime desc",sy.query(r,i,(function(e){e=JSON.parse(e),n(e.length<=1)}))}},{key:"removeAssetFromLib",value:function(e){var t="costumes"===xm?"usershapes":"userbkgs",r=JSON.parse(e)[0],i=n.parseAssetData(r);i.altmd5&&n.assetThumbnailUnique(i.altmd5,xm,(function(e){e&&ny.remove(i.altmd5,ny.trace)})),sy.deleteobject(t,i.id,ny.trace)}},{key:"parseAssetData",value:function(e){var t=new Object;for(var n in e)t[n.toLowerCase()]=e[n];return t}},{key:"selectThisAsset",value:function(t,r){if(r.id===_m)"costumes"===xm?n.closeSpriteSelection(t):n.closeBkgSelection(t);else{n.clearAllSelections();var i=r.id;"png"===i.substr(i.length-3)?((0,e.gn)("library_paintme").style.opacity=0,(0,e.gn)("library_paintme").onclick=null):((0,e.gn)("library_paintme").style.opacity=1,(0,e.gn)("library_paintme").onclick=n.editResource),r.className="assetbox on",setTimeout((function(){_m=r.id}),200),Em=r,r.fieldname&&((0,e.gn)("assetname").textContent=r.fieldname)}}},{key:"clearAllSelections",value:function(){for(var t=(0,e.gn)("scrollarea"),n=0;n<t.childElementCount;n++)"DIV"===t.childNodes[n].nodeName&&(t.childNodes[n].className="assetbox off")}},{key:"unSelect",value:function(t){(0,e.gn)("assetname").textContent="",t.className="assetbox off",_m=void 0,Em&&(t.byme&&Em.childElementCount>1&&(Em.childNodes[Em.childElementCount-1].style.visibility="hidden"),Em=void 0)}},{key:"resizeScroll",value:function(){var t=Math.min((0,e.hA)(),e.Wi.offsetWidth),n=Math.max((0,e.Ti)(),e.Wi.offsetHeight),r=t-20*e._X;(0,e.cl)((0,e.gn)("scrollarea").style,{width:"".concat(r,"px"),height:"".concat(n-120*e._X,"px")})}},{key:"editResource",value:function(e){n.close(e),"costumes"===xm?n.editCostume(e):n.editBackground(e)}},{key:"editBackground",value:function(){var e=_m&&"none"!==_m?_m:void 0;wt.open(!0,e)}},{key:"editCostume",value:function(){var e=_m?Em.fieldname:fy.localize("LIBRARY_CHARACTER"),t=_m&&"none"!==_m?Em.scale:.5,n=_m&&"none"!==_m?_m:void 0,r=_m&&"none"!==_m?Math.round(Em.w):void 0,i=_m&&"none"!==_m?Math.round(Em.h):void 0;wt.open(!1,n,void 0,e,t,r,i)}},{key:"closeSpriteSelection",value:function(e){e.preventDefault(),e.stopPropagation();var t=_m?Em.fieldname:fy.localize("LIBRARY_CHARACTER");if(_m&&"none"!==_m&&Sv.stage.currentPage.addSprite(Em.scale,_m,t),Em){var r=Em.id;_m in rt.keys||(r="user_asset"),ny.analyticsEvent("editor","new_character",r)}n.close(e)}},{key:"closeBkgSelection",value:function(e){if(e.preventDefault(),e.stopPropagation(),_m&&Sv.stage.currentPage.setBackground(_m,Sv.stage.currentPage.updateBkg),Em){var t=Em.id;_m in rt.keys||(t="user_background"),ny.analyticsEvent("editor","choose_background",t)}n.close(e)}},{key:"distance",value:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.round(Math.sqrt(n*n+r*r))}}]),n}(),Cm=null,Pm=null,Im=null,Nm=!1,Om=function(){function n(){t(this,n)}return r(n,null,[{key:"infoBoxOpen",get:function(){return Nm}},{key:"layout",value:function(){n.topSection(),n.middleSection(),n.BottomSection(),n.fullscreenControls(),n.createFormForText(e.Wi),Sv.setupKeypad(),Sv.setupEditableField(),n.aspectRatioAdjustment()}},{key:"aspectRatioAdjustment",value:function(){(0,e.hA)()/(0,e.Ti)()>1.45&&((0,e.gn)("library").style.left="3vw",(0,e.gn)("pages").style.right="1vw")}},{key:"topSection",value:function(){var t=(0,e.HS)("div","topsection",e.Wi);t.setAttribute("id","topsection"),Sv.isEditable()&&n.addProjectInfo(),n.leftPanel(t),n.stageArea(t),n.rightPanel(t)}},{key:"leftPanel",value:function(t){var r=(0,e.HS)("div","leftpanel",t),i=(0,e.HS)("div","flipme",r);i.setAttribute("id","flip"),i.onclick=function(e){Sv.saveAndFlip(e)},n.layoutLibrary(r)}},{key:"middleSection",value:function(){var t=(0,e.HS)("div","blockspalette",e.Wi);t.setAttribute("id","blockspalette"),rn.setup(t),Hm.setup(t)}},{key:"BottomSection",value:function(){Ft.createScripts(e.Wi)}},{key:"addProjectInfo",value:function(){(Pm=(0,e.HS)("div","info",e.Wi)).setAttribute("id","projectinfo");var t=(0,e.HS)("div","infobox fade",e.Wi);t.setAttribute("id","infobox"),Im=(0,e.HS)("div","paintdone",t),(0,e.HS)("div","infoboxlogo",t);var r=n.addEditableName(t),i=(0,e.HS)("div","fixedinfo",t);if((0,e.HS)("div","infolabel",i).setAttribute("id","deviceName"),window.Settings.shareEnabled){var a=(0,e.HS)("div","infoboxParentsSection",t);a.setAttribute("id","parentsection");var o=(0,e.HS)("div","infoboxParentsButton",a);o.id="infoboxParentsSectionButton",o.textContent=fy.localize("FOR_PARENTS");var s=(0,e.HS)("div","infoboxShareButtons",t);s.setAttribute("id","sharebuttons");var u=(0,e.HS)("img","infoboxShareLoading",s);u.src="./assets/ui/loader.png";var h=(0,e.HS)("div","infoboxShareButton",s);if(h.id="infoboxShareButtonEmail",h.textContent=fy.localize("SHARING_BY_EMAIL"),h.onclick=function(e){n.infoDoShare(e,r,u,0)},ny.getVersion((function(n){(0,e.HS)("div","infoboxVersion",t).textContent=n})),e.Dt?h.style.margin="auto":h.style.float="left",!e.Dt){var l=(0,e.HS)("div","infoboxShareButton",s);l.id="infoboxShareButtonAirdrop",l.textContent=fy.localize("SHARING_BY_AIRDROP"),l.style.float="right",l.onclick=function(e){n.infoDoShare(e,r,u,1)}}ny.deviceName((function(t){(0,e.gn)("deviceName").textContent=t})),o.onclick=function(e){n.parentalGate(e,(function(){n.showSharing(e,s,a)}))}}Pm.onclick=n.showInfoBox,Im.onclick=function(e){n.hideInfoBox(e,r)}}},{key:"parentalGate",value:function(t,n){m.sndFX("tap.wav");var r=(0,e.HS)("div","parentalgate",(0,e.gn)("frame")),i=(0,e.HS)("div","paintdone",r),a=function(i){m.sndFX("exittap.wav"),(0,e.gn)("frame").removeChild(r),i&&n(t)};i.onclick=function(){a(!1)};var o=(0,e.HS)("div","parentalgateproblem",r),s=(0,e.HS)("div","parentalgatechoice",r),u=(0,e.HS)("div","parentalgatechoice",r),h=(0,e.HS)("div","parentalgatechoice",r),l=[["30 + 7","37","9","28",0],["22 + 3","18","25","3",1],["91 + 1","32","74","92",2],["30 + 4","34","59","12",0],["48 + 1","9","49","20",1],["32 + 6","23","99","38",2],["53 + 4","57","12","90",0],["26 + 3","17","29","8",1],["71 + 1","58","14","72",2],["11 + 8","19","23","67",0]],c=l[Math.floor(Math.random()*l.length)];o.textContent=c[0],s.textContent=c[1],u.textContent=c[2],h.textContent=c[3],s.onclick=function(){a(0===c[4])},u.onclick=function(){a(1===c[4])},h.onclick=function(){a(2===c[4])},(0,e.HS)("div","parentalgateexplain",r).textContent=fy.localize("PARENTAL_GATE_EXPLANATION")}},{key:"showSharing",value:function(e,t,n){t.style.visibility="visible",n.style.visibility="hidden"}},{key:"infoDoShare",value:function(e,t,r,i){m.sndFX("tap.wav"),r.style.visibility="visible",t.blur(),setTimeout((function(){n.handleTextFieldSave(!0),Sv.onHold=!0,Sv.stopStripsFromTop(e),Uv.prepareToSave(Sv.currentProject,(function(){lt.close(),sy.compressProject(Sv.currentProject,(function(e){Sv.onHold=!1;var t=fy.localize("SHARING_EMAIL_SUBJECT",{PROJECT_NAME:sy.shareName});ny.sendSjrToShareDialog(e,t,fy.localize("SHARING_EMAIL_TEXT"),i),r.style.visibility="hidden"}))}))}),500),ny.analyticsEvent("editor","share_button",0===i?"email":"airdrop")}},{key:"addEditableName",value:function(t){var n=(0,e.HS)("form","projectname",t);n.name="projectname",n.id="title";var r=function(e){e.preventDefault(),e.target.blur()};n.onsubmit=function(e){r(e)};var i=(0,e.HS)("input","pnamefield",n);return Cm=i,i.name="myproject",i.maxLength=30,i.onkeypress=void 0,i.autocomplete="off",i.autocorrect=!1,i.onblur=void 0,i.onfocus=function(t){t.preventDefault(),i.oldvalue=i.value,e.Dt&&(AndroidInterface.scratchjr_setsoftkeyboardscrolllocation(i.getBoundingClientRect().top*devicePixelRatio,i.getBoundingClientRect().bottom*devicePixelRatio),AndroidInterface.scratchjr_forceShowKeyboard())},i.onkeypress=function(e){var t;13===((t=e).keyCode||t.which)&&r(t)},i}},{key:"handleTextFieldSave",value:function(e){if(Sv.isEditable()&&"storyStarter"===Sv.editmode&&!Uv.error&&Sv.changed){ny.analyticsEvent("samples","story_starter_edited",Uv.metadata.name);var t=fy.localizeSampleName(Uv.metadata.name);sy.uniqueProjectName({name:t},(function(t){var r=t.name;Uv.metadata.name=r,sy.createProject({name:r,version:Sv.version,mtime:(new Date).getTime().toString()},(function(t){Uv.metadata.id=t,Sv.currentProject=t,Sv.editmode="edit",Uv.metadata.gallery="",n.finishTextFieldSave(e)}))}))}else n.finishTextFieldSave(e)}},{key:"finishTextFieldSave",value:function(t){var n=Cm,r=0===n.value.length?n.oldvalue:n.value.substring(0,n.maxLength);Uv.metadata.name!==r&&Sv.storyStart("UI.handleTextFieldSave"),Uv.metadata.name=r,ny.setfield(ny.database,Uv.metadata.id,"name",r),t||(m.sndFX("exittap.wav"),(0,e.gn)("infobox").className="infobox fade")}},{key:"showInfoBox",value:function(t){if(Nm=!0,t.preventDefault(),t.stopPropagation(),!wt.saving&&!Sv.onHold){var r="storyStarter"!==Sv.editmode||Sv.changed;if((0,e.gn)("infoboxParentsSectionButton").style.display=r?"block":"none",setTimeout((function(){Im.onclick=n.hideInfoBox,Cm.onblur=function(){e.Dt&&AndroidInterface.scratchjr_forceHideKeyboard()}}),500),Cm.onblur=function(){Sv.isEditable()&&document.forms.projectname.myproject.focus()},Pm.onclick=null,Sv.onBackButtonCallback.push((function(){var e=document.createEvent("TouchEvent");e.initTouchEvent(),e.preventDefault(),e.stopPropagation(),n.hideInfoBox(e)})),m.sndFX("entertap.wav"),Sv.stopStrips(),Uv.metadata.ctime||(Uv.metadata.mtime=(new Date).getTime(),Uv.metadata.ctime=n.formatTime((new Date).getTime())),Sv.isEditable()){var i=Uv.metadata.name;"storyStarter"===Sv.editmode&&(i=fy.localizeSampleName(i)),document.forms.projectname.myproject.value=i}else(0,e.gn)("pname").textContent=Uv.metadata.name;(0,e.gn)("infobox").className="infobox fade in",Sv.isEditable()&&setTimeout((function(){}),500)}}},{key:"formatTime",value:function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return"".concat(n,"-").concat(r,"-").concat(i," ").concat(a,":").concat(o,":").concat(s)}},{key:"hideInfoBox",value:function(t){t.preventDefault(),t.stopPropagation(),Sv.onBackButtonCallback.pop(),Im.onclick=null,setTimeout((function(){Pm.onclick=n.showInfoBox}),500),Sv.isEditable()?(document.forms.projectname.myproject.blur(),n.handleTextFieldSave()):(m.sndFX("exittap.wav"),(0,e.gn)("infobox").className="infobox fade"),(0,e.gn)("sharebuttons").style.visibility="hidden",(0,e.gn)("parentsection").style.visibility="visible",Nm=!1}},{key:"layoutLibrary",value:function(t){var r=(0,e.HS)("div","thumbpanel",t);r.setAttribute("id","library");var i=(0,e.HS)("div","spritethumbs",r),a=(0,e.HS)("div","spritecc",i);a.setAttribute("id","spritecc"),a.ontouchstart=n.spriteThumbsActions,a.onmousedown=n.spriteThumbsActions;var o=(0,e.HS)("div","scrollbar",r);o.setAttribute("id","scrollbar"),(0,e.HS)("div","sbthumb",o).setAttribute("id","sbthumb"),Sv.isEditable()&&((0,e.HS)("div","addsprite",r).onclick=n.addSprite)}},{key:"mascotData",value:function(e){var t={flip:!1,angle:0,shown:!0,type:"sprite",scale:.5,defaultScale:.5,speed:2,dirx:1,diry:1,sounds:["pop.mp3"],homex:240,homey:180,xcoor:240,ycoor:180,homeshown:!0,homeflip:!1,homescale:.5,scripts:[]};t.page=e,t.md5=Sv.defaultSprite;var n=rt.keys[t.md5].name;return t.id=Sv.getIdForSprite(n),t.name=n,t}},{key:"needsScroll",value:function(){var t=(0,e.gn)("spritecc"),r=t.parentNode;t.scrollHeight/r.offsetHeight==1||0===(0,e.gn)("spritecc").childElementCount?(0,e.gn)("scrollbar").setAttribute("class","scrollbar off"):((0,e.gn)("scrollbar").setAttribute("class","scrollbar on"),n.updateSpriteScroll())}},{key:"updateSpriteScroll",value:function(){var t=(0,e.gn)("spritecc"),n=t.offsetTop,r=t.parentNode,i=-n/(t.scrollHeight/r.offsetHeight),a=r.offsetHeight/t.scrollHeight*r.offsetHeight,o=(0,e.gn)("sbthumb");o.style.height="".concat(a,"px"),o.style.top="".concat(i,"px")}},{key:"scrollContents",value:function(t){var n=(0,e.gn)("spritecc"),r=n.offsetTop-t;r>0&&(r=0);var i={duration:.5,transition:"ease-out",style:{top:"".concat(r,"px")}};(0,e.Kv)(n,i)}},{key:"spriteInView",value:function(t){var r=(0,e.gn)("spritecc"),i=t.thumbnail;if(i){var a=(0,e.gn)("spritecc").parentNode.offsetHeight,o=-(0,e.gn)("spritecc").offsetTop,s=-(0,e.gn)("spritecc").offsetTop;i.offsetTop+i.offsetHeight+o>a&&(s=a-(i.offsetTop+i.offsetHeight)),i.offsetTop<=o&&(s=i.offsetTop+o),s>0&&(s=0),r.style.top="".concat(s,"px"),n.needsScroll()}}},{key:"resetSpriteLibrary",value:function(){Sv.getSprite()&&n.spriteInView(Sv.getSprite())}},{key:"spriteThumbsActions",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1||Sv.onHold)){var r,i=z.getTargetPoint(t);if(r=window.event?window.event.srcElement:t.target,t.preventDefault(),t.stopPropagation(),Sv.blur(),r.focus(),"brush"!==r.className){var a=Fm.getType(r,"spritethumb");if(a){var o=(0,e.XU)(r,i.x);a&&o<70&&Sv.isEditable()?Fm.startDragThumb(t,a):n.startSpriteScroll(t,a)}else Sv.shaking&&Sv.clearSelection()}else n.putInPaintEditor(t)}}},{key:"startSpriteScroll",value:function(t,r){Sv.shaking&&Sv.clearSelection(),r&&("scrollbar off"===(0,e.gn)("scrollbar").className?z.startDrag(t,r,n.ignoreEvent,n.ignoreEvent,n.ignoreEvent,n.spriteClicked,Sv.isEditable()?Fm.startCharShaking:void 0):z.startDrag(t,r,n.prepareToScroll,n.stopScroll,n.spriteScolling,n.spriteClicked,Sv.isEditable()?Fm.startCharShaking:void 0))}},{key:"ignoreEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"prepareToScroll",value:function(e){e.preventDefault(),e.stopPropagation(),n.spriteScolling(e,z.dragthumbnail)}},{key:"stopScroll",value:function(e){e.preventDefault(),e.stopPropagation(),n.spriteScolling(e,z.dragthumbnail)}},{key:"spriteScolling",value:function(t){var r=z.getTargetPoint(t),i=z.dragmousey-r.y;z.dragmousey=r.y;var a=(0,e.gn)("spritecc"),o=a.offsetTop;o-=i;var s=a.parentNode;o>0&&(o=0),o+a.offsetHeight<s.offsetHeight&&(o=s.offsetHeight-a.offsetHeight),a.style.top="".concat(o,"px"),n.updateSpriteScroll()}},{key:"spriteClicked",value:function(e,t){var r;e.preventDefault(),e.stopPropagation(),r=window.event?window.event.srcElement:e.target,Sv.isEditable()&&Sv.getSprite()&&("sname"===r.className&&t.owner===Sv.getSprite().id||"brush"===r.className)?n.putInPaintEditor(e):(t.className.indexOf("shakeme")<0&&t.setAttribute("class","spritethumb on"),Fm.clickOnSprite(e,t))}},{key:"putInPaintEditor",value:function(e){Sv.unfocus(e);var t=Sv.getSprite();t&&(Sv.stopStrips(),wt.open(!1,t.md5,t.id,t.name,t.defaultScale,Math.round(t.w),Math.round(t.h)))}},{key:"stageArea",value:function(t){var r=(0,e.HS)("div","centerpanel",t),i=(0,e.HS)("div","stageframe",r);i.setAttribute("id","stageframe"),Sv.stage=new Mm(i),Rt.init(i),Sv.isEditable()&&(n.createTopBarClicky(i,"addtext","addText",n.addText),n.createTopBarClicky(i,"setbkg","changeBkg",n.addBackground)),n.createTopBarClicky(i,"grid","gridToggle off",n.switchGrid),n.createTopBarClicky(i,"go","go on",n.toggleRun),n.createTopBarClicky(i,"resetall","resetall",n.resetAllSprites),n.createTopBarClicky(i,"full","fullscreen",Sv.fullScreen),n.setShowGrid(!1)}},{key:"resetAllSprites",value:function(e){e.preventDefault(),e.stopPropagation(),Sv.onHold||(m.sndFX("tap.wav"),Sv.runtime.inactive()||Sv.stopStripsFromTop(e),Sv.resetSprites())}},{key:"toggleRun",value:function(e){Sv.runtime.inactive()?Sv.runStrips(e):Sv.stopStripsFromTop(e)}},{key:"switchGrid",value:function(e){e.preventDefault(),m.sndFX("tap.wav"),n.setShowGrid(Rt.hidden),ny.analyticsEvent("editor",Rt.hidden?"hide_grid":"show_grid")}},{key:"setShowGrid",value:function(t){Rt.hide(!t),(0,e.gn)("grid").className=Rt.hidden?"gridToggle off":"gridToggle on"}},{key:"createTopBarClicky",value:function(t,n,r,i){var a=(0,e.HS)("div",r,t);a.onclick=i,a.ontouchstart=i,a.setAttribute("id",n)}},{key:"fullscreenControls",value:function(){n.nextpage=(0,e.HS)("div","nextpage off",e.Wi),n.prevpage=(0,e.HS)("div","nextpage off",e.Wi),n.nextpage.onclick=n.nextPage,n.prevpage.onclick=n.prevPage}},{key:"updatePageControls",value:function(){var e=Sv.stage.pages.indexOf(Sv.stage.currentPage);0===e?n.prevpage.setAttribute("class","prevpage off"):n.prevpage.setAttribute("class","prevpage on"),e===Sv.stage.pages.length-1?n.nextpage.setAttribute("class","nextpage off"):n.nextpage.setAttribute("class","nextpage on")}},{key:"nextPage",value:function(e){e.preventDefault(),e.stopPropagation();var t=Sv.stage.pages.indexOf(Sv.stage.currentPage);++t>=Sv.stage.pages.length||Sv.stage.setPage(Sv.stage.pages[t],!1)}},{key:"prevPage",value:function(e){e.preventDefault(),e.stopPropagation();var t=Sv.stage.pages.indexOf(Sv.stage.currentPage);t<1||Sv.stage.setPage(Sv.stage.pages[t-1],!1)}},{key:"enterFullScreen",value:function(){var t=Math.min((0,e.hA)(),e.Wi.offsetWidth),r=Math.max((0,e.Ti)(),e.Wi.offsetHeight);e.Wi.appendChild((0,e.gn)("stage"));for(var i=["go","full"],a=0;a<i.length;a++)(0,e.gn)(i[a]).className="".concat((0,e.gn)(i[a]).className," presentationmode"),e.Wi.appendChild((0,e.gn)(i[a]));var o=Math.min((t-e.QD*e._X)/(0,e.gn)("stage").owner.width,r/(0,e.gn)("stage").owner.height),s=Math.floor((t-(0,e.gn)("stage").owner.width*o)/2),u=Math.floor((r-(0,e.gn)("stage").owner.height*o)/2);Sv.stage.setStageScaleAndPosition(o,s/o,u/o),(0,e.gn)("stage").owner.currentZoom=Math.floor(100*o)/100,(0,e.gn)("stage").style.webkitTextSizeAdjust="".concat(Math.floor(100*(0,e.gn)("stage").owner.currentZoom),"%"),document.body.parentNode.style.background="black",(0,e.gn)("stage").setAttribute("class","stage fullscreen"),n.nextpage.setAttribute("class","nextpage on")}},{key:"quitFullScreen",value:function(){var t=(0,e.gn)("stageframe");t.appendChild((0,e.gn)("stage")),Sv.stage.setStageScaleAndPosition(e._X,46,74),(0,e.gn)("go").className="go off nopresent",t.appendChild((0,e.gn)("go")),(0,e.gn)("full").className="fullscreen",t.appendChild((0,e.gn)("full")),(0,e.gn)("stage").owner.currentZoom=1,(0,e.gn)("stage").style.webkitTextSizeAdjust="100%",document.body.parentNode.style.background="none",(0,e.gn)("stage").setAttribute("class","stage normal"),n.nextpage.setAttribute("class","nextpage off"),n.prevpage.setAttribute("class","nextpage off"),Sv.stage.setViewPage(Sv.stage.currentPage),Fm.updateSprites(),Fm.updatePages()}},{key:"rightPanel",value:function(t){var n=(0,e.HS)("div","rightpanel",t),r=(0,e.HS)("div","pages",n);r.setAttribute("id","pages"),(0,e.HS)("div","pagescc",r).setAttribute("id","pagecc")}},{key:"layoutToolbar",value:function(t){var r=(0,e.um)(t,220,0,132,56,{position:"absolute"});r.setAttribute("id","toolbar"),(0,e.HS)("div","addText",r).onclick=n.addText,(0,e.HS)("div","changeBkg",r).onclick=n.addBackground}},{key:"addSprite",value:function(t){Sv.onHold||(t.preventDefault(),t.stopPropagation(),z.getTargetPoint(t).x>(0,e.$1)(t.target)+167||(m.sndFX("tap.wav"),Sv.stopStrips(),Sv.unfocus(t),z.dragthumbnail&&z.mouseUp(t),Rm.open("costumes")))}},{key:"addBackground",value:function(e){Sv.onHold||(e.preventDefault(),e.stopPropagation(),Sv.stopStrips(),Sv.unfocus(e),z.dragthumbnail&&z.mouseUp(e),Rm.open("backgrounds"))}},{key:"addText",value:function(t){Sv.onHold||(t.preventDefault(),t.stopPropagation(),e.Dt&&"visible"===(0,e.gn)("textbox").style.visibility||(Sv.unfocus(t),Sv.stage.currentPage.createText()))}},{key:"createFormForText",value:function(t){var r=(0,e.HS)("div","pagetext off",t);r.setAttribute("id","textbox");var i=function(e){e.stopPropagation(),e.preventDefault()};r.ontouchstart=i,r.onmousedown=i;var a=(0,e.HS)("form","pageform",r);a.name="activetextbox",a.id="myform",a.textsprite=null;var o=(0,e.y0)(a,"text");o.name="typing",o.setAttribute("class","edittext"),o.maxLength=50,o.onkeypress=void 0,o.autocomplete="off",o.autocorrect=!1,o.onblur=void 0,a.onsubmit=void 0;var s=(0,e.HS)("div","pagetextactions",r),u=(0,e.HS)("div","fontsizeText off",s);u.setAttribute("id","fontsizebutton"),u.ontouchstart=n.openFontSizeMenu,u.onmousedown=n.openFontSizeMenu;var h=(0,e.HS)("div","changecolorText off",s);h.setAttribute("id","fontcolorbutton"),h.ontouchstart=n.topLevelColor,h.onmousedown=n.topLevelColor,n.createColorMenu(r),n.createTextSizeMenu(r)}},{key:"createColorMenu",value:function(t){var r=S.fontcolors,i=(0,e.HS)("div","textuicolormenu off",t);i.setAttribute("id","textcolormenu");for(var a=0;a<r.length;a++){var o=(0,e.HS)("div","textcolorbucket",i),s=(0,e.HS)("div","swatchframe",o);(0,e.HS)("div","swatchcolor",s).style.background=r[a],s=(0,e.HS)("div","splasharea off",o),wt.setSplashColor(s,wt.splash,r[a]),wt.addImageUrl(s,wt.splashshade),o.ontouchstart=n.setTextColor,o.onmousedown=n.setTextColor}n.setMenuTextColor((0,e.gn)("textcolormenu").childNodes[9])}},{key:"createTextSizeMenu",value:function(t){var r=S.fontsizes,i=(0,e.HS)("div","textuifont off",t);i.setAttribute("id","textfontsizes");for(var a=0;a<r.length;a++){var o=(0,e.HS)("div","textuisize t".concat(a+1),i);o.fs=r[a],(0,e.HS)("span",void 0,o).textContent="A",o.ontouchstart=n.setTextSize,o.onmousedown=n.setTextSize}n.setMenuTextSize((0,e.gn)("textfontsizes").childNodes[5])}},{key:"setMenuTextColor",value:function(t){for(var n=t.childNodes[0].childNodes[0].style.backgroundColor,r=0;r<(0,e.gn)("textcolormenu").childElementCount;r++)n===(0,e.gn)("textcolormenu").childNodes[r].childNodes[0].childNodes[0].style.backgroundColor?(0,e.gn)("textcolormenu").childNodes[r].childNodes[1].setAttribute("class","splasharea on"):(0,e.gn)("textcolormenu").childNodes[r].childNodes[1].setAttribute("class","splasharea off")}},{key:"setMenuTextSize",value:function(t){for(var n=t.fs,r=0;r<(0,e.gn)("textfontsizes").childElementCount;r++){var i=(0,e.gn)("textfontsizes").childNodes[r],a=i.fs,o=i.className.split(" ")[1];(0,e.gn)("textfontsizes").childNodes[r].className="textuisize ".concat(o,n===a?" on":" off")}}},{key:"topLevelColor",value:function(t){if(t.preventDefault(),t.stopPropagation(),"changecolorText on"===(0,e.gn)("fontcolorbutton").className)(0,e.gn)("fontcolorbutton").className="changecolorText off",(0,e.gn)("textcolormenu").className="textuicolormenu off";else{(0,e.gn)("fontsizebutton").className="fontsizeText off",(0,e.gn)("textfontsizes").className="textuifont off";var r=document.forms.activetextbox.textsprite,i=S.fontcolors.indexOf(r);i>-1&&n.setMenuTextColor((0,e.gn)("textcolormenu").childNodes[i]),(0,e.gn)("textcolormenu").className="textuicolormenu on",(0,e.gn)("fontcolorbutton").className="changecolorText on"}}},{key:"setTextColor",value:function(e){if(!(e.touches&&e.touches.length>1)){var t;e.preventDefault(),e.stopPropagation();for(var r="textcolorbucket"!==(t=window.event?window.event.srcElement:e.target).className;r;)r=(t=t.parentNode)&&"textcolorbucket"!==t.className;if(t){m.sndFX("splash.wav"),n.setMenuTextColor(t);var i=document.forms.activetextbox.textsprite,a=t.childNodes[0].childNodes[0].style.background;i.setColor(a),Hm.record({action:"edittext",where:i.page.id,who:i.id}),Sv.storyStart("UI.setTextColor"),document.forms.activetextbox.typing.style.color=a}}}},{key:"openFontSizeMenu",value:function(t){if(t.preventDefault(),t.stopPropagation(),"fontsizeText on"===(0,e.gn)("fontsizebutton").className)(0,e.gn)("fontsizebutton").className="fontsizeText off",(0,e.gn)("textfontsizes").className="textuifont off";else{(0,e.gn)("fontcolorbutton").className="changecolorText off",(0,e.gn)("textcolormenu").className="textuicolormenu off";var r=document.forms.activetextbox.textsprite,i=S.fontsizes.indexOf(r.fontsize);i>-1&&n.setMenuTextSize((0,e.gn)("textfontsizes").childNodes[i]),(0,e.gn)("textfontsizes").className="textuifont on",(0,e.gn)("fontsizebutton").className="fontsizeText on"}}},{key:"setTextSize",value:function(t){var r;if(t.preventDefault(),t.stopPropagation(),"SPAN"===(r=window.event?window.event.srcElement:t.target).nodeName&&(r=r.parentNode),r&&"textuisize"===r.className.split(" ")[0]){n.setMenuTextSize(r);var i=document.forms.activetextbox.textsprite;i.setFontSize(r.fs),Hm.record({action:"edittext",where:i.page.id,who:i.id}),Sv.storyStart("UI.setTextSize"),document.forms.activetextbox.typing.style.fontSize="".concat(r.fs*e._X,"px"),(0,e.cl)(document.forms.activetextbox.style,{height:"".concat((r.fs+10)*e._X,"px")})}}},{key:"clear",value:function(){for(var t=(0,e.gn)("spritecc");t.childElementCount>0;)t.removeChild(t.childNodes[0]);for(var n=(0,e.gn)("pagecc");n.childElementCount>0;)n.removeChild(n.childNodes[0])}}]),n}(),Dm=function(){function e(){t(this,e),this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}return r(e,[{key:"identity",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}},{key:"setMatrix",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,this.f=e.f}},{key:"isIdentity",value:function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}},{key:"rotate",value:function(e){var t=Math.cos(e*Math.PI/180),n=Math.sin(e*Math.PI/180);this.a=t,this.b=n,this.c=-n,this.d=t}},{key:"scale",value:function(e,t){this.a=e,this.d=t||e}},{key:"translate",value:function(e,t){this.e=e,this.f=t}},{key:"transformPoint",value:function(e){return{x:this.a*e.x+this.c*e.y+this.e,y:this.b*e.x+this.d*e.y+this.f}}},{key:"multiply",value:function(t){var n=1e-14,r=new e;return r.a=this.a*t.a+this.c*t.b,r.b=this.b*t.a+this.d*t.b,r.c=this.a*t.c+this.c*t.d,r.d=this.b*t.c+this.d*t.d,r.e=this.a*t.e+this.c*t.f+this.e,r.f=this.b*t.e+this.d*t.f+this.f,Math.abs(r.a)<n&&(r.a=0),Math.abs(r.b)<n&&(r.b=0),Math.abs(r.c)<n&&(r.c=0),Math.abs(r.d)<n&&(r.d=0),Math.abs(r.e)<n&&(r.e=0),Math.abs(r.f)<n&&(r.f=0),r}}]),e}(),Lm=function(){function n(r,i,a){t(this,n),this.id=r,this.textstartat=36,Sv.stage.currentPage=this,this.num=i?i.num:Sv.stage.pages.length+1,this.spriteList=new Map,this.view=new Zi,this.view.width=e.mz,this.view.height=e.uk,this.view.sortableChildren=!0,Sv.stage.view.addChild(this.view),this.bkg=new vl,this.bkg.zIndex=-1,this.bkg.width=e.mz,this.bkg.height=e.uk,this.bkg.x=0,this.bkg.y=0,this.layerAdd(this.bkg),this.bkgImg=null,Sv.stage.pages.push(this),i?this.loadPageData(i,a):this.emptyPage()}return r(n,[{key:"loadPageData",value:function(e,t){this.currentSpriteName=e.lastSprite,e.textstartat&&(this.textstartat=Number(e.textstartat));var n=function(){t&&Uv.mediaCount<1&&t()};e.md5&&"undefined"!==e.md5?(Uv.mediaCount++,this.setBackground(e.md5,(function(){Uv.substractCount(),t&&Uv.mediaCount<1&&t()}))):this.clearBackground();for(var r=e.sprites,i=0;i<r.length;i++)Uv.recreateObject(this,r[i],e[r[i]],n)}},{key:"emptyPage",value:function(){this.clearBackground(),this.createCat()}},{key:"setCurrentSprite",value:function(t){Sv.getSprite()&&Sv.getSprite().unselect(),t?(this.currentSpriteName=t.id,t.show(),rn.show(),(0,e.gn)("scripts").style.display=Sv.inFullscreen?"none":"block",t.activate()):(this.currentSpriteName=void 0,rn.hide(),(0,e.gn)("scripts").style.display="none")}},{key:"sprites",get:function(){return Array.from(this.spriteList.keys())}},{key:"clearBackground",value:function(){this.bkgImg=null,this.bkg.texture=null}},{key:"setBackground",value:function(e,t){if("undefined"!==e)if(this.clearBackground(),this.md5=void 0,"none"!==e){if(this.md5=e,e){var n=this,r=rt.keys[e]?rt.path+e:e.indexOf("/")<0?ny.path+e:e,i=rt.keys[e]?rt.path+e:e,a=function(){var t=sy.getFilenameWithExt(i);rt.keys[e]?ny.duplicateAsset(i,t):e.indexOf("/")>-1&&(ny.duplicateAsset(i,t),n.md5=e)},o="png"===i.substr(i.length-3);if(o&&(rt.keys[e]||e.indexOf("/")>-1))return a(),this.setBackgroundImage(r,t),void(this.svg=null);var s=function(e){a(),e=e.replace(/>\s*</g,"><"),n.setSVG(e),sy.getImagesInSVG(e,(function(){var r=sy.getImageDataURL(n.md5,btoa(e));n.setBackgroundImage(r,t)}))};i.indexOf("/")>-1?sy.requestFromServer(i,s):ny.getmedia(i,(function(r){if(o){var i=sy.getImageDataURL(e,r);n.setBackgroundImage(i,t),n.svg=null}else s(atob(r))}))}}else t&&t()}},{key:"setSVG",value:function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=document.importNode(t.documentElement,!0);"#comment"===n.childNodes[0].nodeName&&n.removeChild(n.childNodes[0]),this.svg=n}},{key:"setBackgroundImage",value:function(e,t){var n=this,r=document.createElement("img");r.src=e,sy.loadImg(r,(function(){n.bkgImg=r,n.bkg.texture=Fa.from(e),t&&t(),n.updateThumb()}))}},{key:"layerAdd",value:function(e){this.view.addChild(e)}},{key:"layerRemove",value:function(e){this.view.removeChild(e)}},{key:"removeSprite",value:function(t){var n=t.thumbnail;n&&n.parentNode&&n.parentNode.removeChild(n),this.spriteList.delete(t.id);var r=(0,e.gn)("".concat(t.id,"_scripts"));r&&r.parentNode.removeChild(r),t.remove(),this.layerRemove(t.view)}},{key:"redoChangeBkg",value:function(e){var t=e[this.id].md5?e[this.id].md5:"none";this.setBackground(t,this.updateThumb)}},{key:"updateThumb",value:function(e){var t=e||Sv.stage.currentPage;if(t.thumbnail){var n=t.thumbnail.childNodes[0].childNodes[0];t.setPageThumb(n)}}},{key:"pageThumbnail",value:function(t){var n=(0,e.HS)("div","pagethumb",t);n.setAttribute("id",(0,e.N7)("pagethumb")),n.owner=this.id,n.type="pagethumb";var r=(0,e.HS)("div","pc-container",n),i=(0,e.HS)("canvas","pc",r);this.setPageThumb(i);var a=(0,e.HS)("div","pagenum",n);return(0,e.HS)("p",void 0,a).textContent=this.num,(0,e.HS)("div","deletethumb",n),n.ontouchstart=function(e){Fm.pageMouseDown(e)},n.onmousedown=function(e){Fm.pageMouseDown(e)},this.thumbnail=n,n}},{key:"setPageThumb",value:function(t){var n,r;"PBS"===window.Settings.edition?(n=136,r=101):(n=132,r=99),(0,e.DU)(t,n,r);var i=t.width,a=t.height,o=t.getContext("2d");"PBS"===window.Settings.edition?(o.rect(0,0,i,a),o.fillStyle="#fff",o.fill()):o.drawImage(S.canvasMask,0,0,i,a);var s=this.export();o.drawImage(s,0,0,s.width,s.height,0,0,i,a),"PBS"!==window.Settings.edition&&(o.save(),o.globalCompositeOperation="destination-in",o.drawImage(S.canvasMask,0,0,i,a),o.restore())}},{key:"stampSpriteAt",value:function(e,t,n){if(t.shown){var r="sprite"===t.type?t.originalImg:t.outline;this.drawSpriteImage(e,r,t,n)}}},{key:"drawSpriteImage",value:function(t,n,r,i){if(r.shown&&n){var a=n.naturalWidth?n.naturalWidth:n.width,o=n.naturalHeight?n.naturalHeight:n.height,s=a*r.scale,u=o*r.scale;t.save();var h={x:r.cx*r.scale*i,y:r.cy*r.scale*i};t.translate(h.x,h.y),t.rotate(r.angle*e.Zh),t.translate(-h.x,-h.y),r.flip&&(t.scale(-1,1),t.translate(-n.width*i*r.scale,0));var l=this.getMatrixFor(r,i),c=w.floor(l.transformPoint({x:Math.floor(r.screenLeft()*i),y:Math.floor(r.screenTop()*i)}));t.drawImage(n,0,0,a,o,c.x,c.y,Math.floor(s*i),Math.floor(u*i)),t.restore()}}},{key:"getMatrixFor",value:function(e){var t=new Dm,n=e.angle?-e.angle:0;e.flip&&(t.a=-1,t.d=1);var r=new Dm;return r.rotate(n),t.multiply(r)}},{key:"pause",value:function(){this.spriteList.forEach((function(e){e.pause()}))}},{key:"resume",value:function(){this.spriteList.forEach((function(e){e.resume()}))}},{key:"export",value:function(){var t=this.view.visible;this.view.visible=!0,this.pause();var n=Sv.stage.pixi.renderer.plugins.extract.canvas(this.view).getContext("2d"),r=document.createElement("canvas");(0,e.ge)(r,e.mz,e.uk);var i=r.getContext("2d"),a=this.view.getBounds(),o=n.getImageData(-a.x,-a.y,e.mz-a.x,e.uk-a.y);return i.putImageData(o,0,0),this.view.visible=t,this.resume(),r}},{key:"show",value:function(){this.view.visible=!0}},{key:"hide",value:function(){this.view.visible=!1}},{key:"reset",value:function(){this.spriteList.forEach((function(e){"text"!==e.type&&e.goHome()}))}},{key:"encodePage",value:function(){var e={};e.textstartat=this.textstartat,e.sprites=Array.from(this.sprites);var t=this.md5;t&&(e.md5=t),e.num=this.num,this.currentSpriteName?this.currentSpriteName="sprite"===this.findSprite(this.currentSpriteName).type?this.currentSpriteName:this.getSprites()[0]:this.currentSpriteName=void 0,e.lastSprite=this.currentSpriteName;var n=[];return this.spriteList.forEach((function(t,r){e[r]=t.getData(),n.push(r)})),e.layers=n,e}},{key:"findSprite",value:function(e){return this.spriteList.get(e)}},{key:"getSprites",value:function(){var e=[];return this.spriteList.forEach((function(t){"text"!==t.type&&e.push(t)})),e}},{key:"createText",value:function(){var e={shown:!0,type:"text",scale:1,defaultScale:1,speed:2,dirx:1,diry:1,angle:0,homex:240,homey:this.textstartat,xcoor:240,ycoor:this.textstartat,str:"",color:S.fontcolors[S.fontcolors.length-1],fontsize:36,cx:0,cy:21.6,w:0,h:48.6};e.page=this,e.id=Sv.getIdForSprite("Text"),Sv.createSprite(e)}},{key:"createCat",value:function(){var e=Om.mascotData(Sv.stage.currentPage);Uv.mediaCount++,Sv.createSprite(e,this.pageAdded)}},{key:"update",value:function(e){e?Hm.record({action:"modify",where:this.id,who:e.id}):Hm.record({action:"recreatepage",where:this.id,who:this.id}),e?Fm.updateSprite(e):Fm.updateSprites(),Fm.updatePages()}},{key:"updateBkg",value:function(){var e=Sv.stage.currentPage;Sv.storyStart("Page.prototype.updateBkg"),Hm.record({action:"changebkg",where:e.id,who:e.id}),Fm.updatePages()}},{key:"spriteAdded",value:function(e){var t=e.page;t.setCurrentSprite(e),t.update(e),Om.spriteInView(e),Sv.onHold=!1}},{key:"pageAdded",value:function(e){var t=e.page;Uv.mediaCount--,t.setCurrentSprite(e),Sv.storyStart("Page.prototype.pageAdded"),Sv.stage.pages.length>1&&Hm.record({action:"addpage",where:t.id,who:t.id}),Fm.updateSprites(),Fm.updatePages()}},{key:"appendSprite",value:function(e){this.spriteList.set(e.id,e),this.layerAdd(e.view)}},{key:"addSprite",value:function(e,t,n){Sv.onHold=!0;var r={flip:!1,angle:0,shown:!0,type:"sprite",scale:e,defaultScale:e,speed:2,dirx:1,diry:1,sounds:["pop.mp3"],homex:240,homescale:e,homey:180,xcoor:240,ycoor:180,homeshown:!0};r.page=Sv.stage.currentPage,r.id=Sv.getIdForSprite(n),r.name=n,r.md5=t,Sv.createSprite(r,this.spriteAdded)}},{key:"createSprite",value:function(e){Sv.createSprite(e,this.spriteAdded)}},{key:"modifySprite",value:function(e,t,n){var r=this.findSprite(unescape(n));r||(r=Sv.getSprite()),r.md5=e,r.name=t;var i=this;r.getAsset((function(e){r.setCostume(e,i.spriteAdded)}))}},{key:"modifySpriteName",value:function(t,n){var r=(0,e.gn)(unescape(n)).owner;r||(r=Sv.getSprite()),r.name=t,r.thumbnail.childNodes[1].textContent=t,Hm.record({action:"modify",where:this.id,who:r.id}),Sv.storyStart("Page.prototype.modifySpriteName")}}]),n}(),Bm=void 0,Fm=function(){function n(){t(this,n)}return r(n,null,[{key:"updatePages",value:function(){for(var t,r=(0,e.gn)("pagecc");r.childElementCount>0;)r.removeChild(r.childNodes[0]);for(var i=void 0,a=0;a<Sv.stage.pages.length;a++){var o=Sv.stage.pages[a];o.num=a+1,(t=o.pageThumbnail(r)).prev=i,i&&(i.next=t),o.id===Sv.stage.currentPage.id?n.highlighPage(t):n.unhighlighPage(t),Ft.updateScriptsPageBlocks(o.sprites),i=t}if(!(Sv.stage.pages.length>3)&&Sv.isEditable()){var s=n.emptyPage(r);s.prev=i,t.next=s}}},{key:"getObjectFor",value:function(e,t){for(var n=0;n<e.childElementCount;n++)if(e.childNodes[n].owner===t)return e.childNodes[n];return e.childNodes[0]}},{key:"getType",value:function(e,t){for(;null!==e;){if(e.type===t)return e;e=e.parentNode}return null}},{key:"pageMouseDown",value:function(t){if(!(t.touches&&t.touches.length>1||Sv.onHold)){t.preventDefault(),t.stopPropagation(),window.event?n.t=window.event.srcElement:n.t=t.target;var r=n.getType(n.t,"pagethumb");if(Sv.shaking&&"deletethumb"===t.target.className)return Sv.clearSelection(),ny.analyticsEvent("editor","delete_scene"),void Sv.stage.deletePage(r.owner);Sv.shaking?Sv.clearSelection():r&&(!Sv.isEditable()||(0,e.gn)("pagecc").childElementCount<3?n.clickOnPage(t,r.owner):z.startDrag(t,r,n.prepareToDragPage,n.dropPage,n.draggingPage,n.clickPage,n.startPageShaking))}}},{key:"prepareToDragPage",value:function(t){t.preventDefault(),t.stopPropagation(),m.sndFX("grab.wav");var r=z.getTargetPoint(t);z.dragmousex=r.x,z.dragmousey=r.y;var i=z.dragmousex-e.Wi.offsetLeft-(0,e.XU)(z.dragthumbnail,z.dragmousex),a=z.dragmousey-e.Wi.offsetTop-(0,e.Bf)(z.dragthumbnail,z.dragmousey),o={position:"absolute",left:"0px",top:"0px",zIndex:Sv.dragginLayer};z.dragcanvas=z.dragthumbnail,(0,e.cl)(z.dragcanvas.style,o),z.move3D(z.dragcanvas,i,a),e.Wi.appendChild(z.dragcanvas),(Bm=(0,e.HS)("div","pagethumb caret",(0,e.gn)("pagecc"))).prev=z.dragthumbnail.prev,Bm.next=z.dragthumbnail.next,z.dragthumbnail.prev&&(z.dragthumbnail.prev.next=Bm),z.dragthumbnail.next&&(z.dragthumbnail.next.prev=Bm),n.layoutPages(),z.dragthumbnail.pos=n.getPagePos(z.dragcanvas.top)}},{key:"layoutPages",value:function(){for(var t=n.findFirst(),r=(0,e.gn)("pagecc");t;)r.appendChild(t),t=t.next}},{key:"findFirst",value:function(){for(var t=(0,e.gn)("pagecc").childNodes[0];t.prev;)t=t.prev;return t}},{key:"findLast",value:function(){for(var t=(0,e.gn)("pagecc").childNodes[0];t.next;)t=t.next;return t}},{key:"getPageOrder",value:function(){for(var e=n.findFirst(),t=[];e;){var r=e.owner;r&&t.push(Sv.stage.findPage(r)),e=e.next}return t}},{key:"draggingPage",value:function(e,t){e.preventDefault();var r=z.getTargetPoint(e),i=r.x-z.dragmousex,a=r.y-z.dragmousey;z.move3D(t,i,a),Bm&&(n.removeCaret(),n.insertCaret(t),n.layoutPages())}},{key:"removeCaret",value:function(){var e=Bm.prev,t=Bm.next;e&&(e.next=t),t&&(t.prev=e),Bm.prev=void 0,Bm.next=void 0;var n=Bm.parentNode;n&&n.removeChild(Bm)}},{key:"insertCaret",value:function(t){var r=n.getPagePos(t.top);n.positionMe(r,Bm),(0,e.gn)("pagecc").appendChild(Bm)}},{key:"getPagePos",value:function(t){var r=(0,e.gn)("pagecc").childNodes[1].offsetTop-(0,e.gn)("pagecc").childNodes[0].offsetTop,i=Math.floor((0,e.Bf)((0,e.gn)("pagecc"),t+r/2)/r);i=Math.max(0,i);var a=n.getPageOrder().length;return Math.min(a,i)}},{key:"positionMe",value:function(t,r){var i=t>=(0,e.gn)("pagecc").childElementCount?void 0:(0,e.gn)("pagecc").childNodes[t];if(i){var a=i.prev;i.prev=r,r.next=i,a&&(a.next=r,r.prev=a)}else{var o=n.findLast();o.next=r,r.prev=o,r.next=void 0}}},{key:"repositionThumb",value:function(e,t){var r=n.getPagePos(t);r!==e.pos&&m.sndFX("snap.wav");var i=e.prev,a=e.next;i&&(i.next=a),a&&(a.prev=i),n.positionMe(r,e)}},{key:"dropPage",value:function(e){if(Sv.storyStart("Thumbs.dropPage"),e.preventDefault(),Bm){z.dragthumbnail.prev=Bm.prev,z.dragthumbnail.next=Bm.next,z.dragthumbnail.prev&&(z.dragthumbnail.prev.next=z.dragthumbnail),z.dragthumbnail.next&&(z.dragthumbnail.next.prev=z.dragthumbnail),Bm.parentNode&&Bm.parentNode.removeChild(Bm),Bm=void 0,z.dragthumbnail.style.position="",z.dragthumbnail.style.left="",z.dragthumbnail.style.top="",z.dragthumbnail.style.webkitTransform="";var t=Number(z.dragthumbnail.childNodes[1].childNodes[0].textContent)-1,r=z.dragthumbnail.owner;n.repositionThumb(z.dragthumbnail,z.dragthumbnail.top);var i=Sv.stage.getPagesID();Sv.stage.pages=n.getPageOrder(),n.layoutPages(),n.updatePages(),Sv.stage.renumberPageBlocks(i),5===rn.numcat&&rn.selectCategory(5),n.getPageOrder()[t].id!==r&&Hm.record({action:"pageorder",who:r,where:r})}}},{key:"clickPage",value:function(e){Sv.clearSelection(),n.clickOnPage(e,z.dragthumbnail.owner),z.clearEvents(),z.dragthumbnail=void 0}},{key:"clickOnPage",value:function(t,n){Sv.unfocus(t);for(var r=(0,e.gn)("pagecc"),i=0;i<r.childElementCount;i++)r.childNodes[i].id;if(Sv.stage.currentPage.id!==n){var a=Sv.stage.findPage(n);Sv.stage.setPage(a,!1),Hm.record({action:"changepage",who:n,where:n})}}},{key:"startPageShaking",value:function(e){Sv.shaking=e,Sv.stopShaking=n.stopPageShaking;var t=e.getAttribute("class");e.setAttribute("class","".concat(t," shakeme")),e.childNodes[e.childElementCount-1].style.visibility="visible"}},{key:"stopPageShaking",value:function(e){Sv.shaking=void 0,Sv.stopShaking=void 0;var t=e.getAttribute("class");t=t.substr(0,t.length-8),e.setAttribute("class",t),e.childNodes[e.childElementCount-1].style.visibility="hidden"}},{key:"emptyPage",value:function(t){var r=(0,e.HS)("div","pagethumb",t),i=(0,e.HS)("div","empty",r);return("PBS"===window.Settings.edition?(0,e.nC)(i,"assets/ui/newpage.svg"):(0,e.nC)(i,"assets/ui/newpage.png",{position:"absolute"})).setAttribute("class","unselectable"),r.setAttribute("id","emptypage"),r.onclick=function(e){n.clickOnEmptyPage(e)},r}},{key:"clickOnEmptyPage",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){m.sndFX("tap.wav"),t.preventDefault(),Sv.stopStrips(),Sv.stage.currentPage.hide();var n=(0,e.gn)("".concat(Sv.stage.currentPage.currentSpriteName,"_scripts"));n&&n.owner.deactivate(),Sv.unfocus(t),ny.analyticsEvent("editor","add_scene"),new Lm(Sv.getIdForPage()).show()}}},{key:"highlighPage",value:function(e){e.setAttribute("class","pagethumb on")}},{key:"unhighlighPage",value:function(e){e.setAttribute("class","pagethumb off")}},{key:"overpage",value:function(e){e.setAttribute("class","pagethumb drop")}},{key:"updateSprites",value:function(){var t=(0,e.gn)("spritecc");for(t.style.top="0px";t.childElementCount>0;)t.removeChild(t.childNodes[0]);Sv.stage.currentPage.spriteList.forEach((function(e){if("sprite"===e.type){var r=e.spriteThumbnail(t);e.id===Sv.stage.currentPage.currentSpriteName?n.highlighSprite(r):n.unhighlighSprite(r)}})),Sv.getSprite()||Sv.stage.currentPage.setCurrentSprite(void 0),Om.resetSpriteLibrary()}},{key:"updateSprite",value:function(t){if(t)if(t.thumbnail)t.updateSpriteThumb();else{var r=(0,e.gn)("spritecc");if("sprite"!==t.type)return;t.spriteThumbnail(r),n.selectThisSprite(t),Om.resetSpriteLibrary()}}},{key:"startDragThumb",value:function(e,t){Sv.shaking&&"deletespritethumb"===e.target.id&&(Sv.clearSelection(),Sv.stage.removeSprite(Sv.stage.findSprite(t.owner))),Sv.shaking&&Sv.clearSelection(),Sv.isEditable()?z.startDrag(e,t,n.prepareToDrag,n.drop,n.dragging,n.click,n.startCharShaking):n.clickOnSprite(e,t)}},{key:"startCharShaking",value:function(t){if(t){Sv.shaking=t,Sv.stopShaking=n.stopCharShaking;var r=t.getAttribute("class");t.setAttribute("class","".concat(r," shakethumb")),(0,e.HS)("div","deletespritethumb",t).id="deletespritethumb"}}},{key:"stopCharShaking",value:function(e){Sv.shaking=void 0,Sv.stopShaking=void 0;var t=e.getAttribute("class");t=t.substr(0,t.length-8),e.setAttribute("class",t);var n=e.childNodes[e.childElementCount-1];"deletespritethumb"===n.getAttribute("class")&&e.removeChild(n)}},{key:"selectThisSprite",value:function(t){for(var r=(0,e.gn)("spritecc"),i=t.thumbnail,a=0;a<r.childElementCount;a++){var o=r.childNodes[a];o===i?n.highlighSprite(i):n.unhighlighSprite(o)}}},{key:"clickOnSprite",value:function(e,t){if(Sv.shaking&&Sv.shaking===t)return Sv.clearSelection(),void Sv.stage.removeSprite(Sv.stage.findSprite(t.owner));var r=t.owner,i=Sv.stage.findSprite(r);i&&(Sv.unfocus(e),i.page.setCurrentSprite(i),n.selectThisSprite(i))}},{key:"prepareToDrag",value:function(t){t.preventDefault(),t.stopPropagation(),m.sndFX("grab.wav");var r=z.getTargetPoint(t);z.dragmousex=r.x,z.dragmousey=r.y,z.dragthumbnail=n.getObjectFor((0,e.gn)("spritecc"),z.dragthumbnail.owner);var i=z.dragmousex-e.Wi.offsetLeft-(0,e.XU)(z.dragthumbnail,z.dragmousex)-(0,e.gn)("topsection").offsetLeft,a=z.dragmousey-e.Wi.offsetTop-(0,e.Bf)(z.dragthumbnail,z.dragmousey)-(0,e.gn)("topsection").offsetTop;a-=z.dragthumbnail.parentNode.parentNode.scrollTop,i-=z.dragthumbnail.parentNode.parentNode.scrollLeft;var o={position:"absolute",left:"0px",top:"0px",zIndex:Sv.dragginLayer,zoom:"".concat(100/window.devicePixelRatio,"%")},s=Sv.stage.findSprite(z.dragthumbnail.owner);z.dragcanvas=document.createElement("canvas"),s.drawMyImage(z.dragcanvas,76*e._X*window.devicePixelRatio,64*e._X*window.devicePixelRatio),(0,e.cl)(z.dragcanvas.style,o),z.move3D(z.dragcanvas,i*window.devicePixelRatio,a*window.devicePixelRatio),z.dragcanvas.owner=z.dragthumbnail.owner,e.Wi.appendChild(z.dragcanvas)}},{key:"dragging",value:function(t,r){t.preventDefault();var i=z.getTargetPoint(t),a=i.x-z.dragmousex,o=i.y-z.dragmousey;if(z.move3D(r,a*window.devicePixelRatio,o*window.devicePixelRatio),"pages"===rn.getLandingPlace(r,t,window.devicePixelRatio)){var s=rn.getHittedThumb(r,(0,e.gn)("pagecc"),window.devicePixelRatio);s&&!s.owner&&(s=void 0),s&&n.overpage(s);for(var u=0;u<(0,e.gn)("pagecc").childElementCount;u++){var h=(0,e.gn)("pagecc").childNodes[u];if(h.owner){var l=Sv.stage.findPage(h.owner);s&&s.id!==h.id&&(l.id===Sv.stage.currentPage.id?n.highlighPage(h):n.unhighlighPage(h))}}}else n.removePagesCaret()}},{key:"removePagesCaret",value:function(){for(var t=0;t<(0,e.gn)("pagecc").childElementCount;t++){var r=(0,e.gn)("pagecc").childNodes[t];r.owner&&(Sv.stage.findPage(r.owner).id===Sv.stage.currentPage.id?n.highlighPage(r):n.unhighlighPage(r))}}},{key:"drop",value:function(t,n){if(t.preventDefault(),"pages"===rn.getLandingPlace(n,t,window.devicePixelRatio)){var r=rn.getHittedThumb(n,(0,e.gn)("pagecc"),window.devicePixelRatio);r&&"emptypage"!==r.id&&Sv.stage.copySprite(n,r)}z.dragcanvas&&z.dragcanvas.parentNode.removeChild(z.dragcanvas),z.dragcanvas=void 0}},{key:"click",value:function(e,t){e.preventDefault(),e.stopPropagation(),window.event?n.t=window.event.srcElement:n.t=e.target,t.setAttribute("class",Sv.isEditable()?"spritethumb on":"spritethumb noneditable"),n.clickOnSprite(e,t)}},{key:"highlighSprite",value:function(e){e.setAttribute("class",Sv.isEditable()?"spritethumb on":"spritethumb noneditable"),Ft.setActiveScript(e.owner),rn.reset()}},{key:"unhighlighSprite",value:function(t){t.setAttribute("class","spritethumb off");var n=(0,e.gn)("".concat(t.owner,"_scripts"));n.owner.deactivate();for(var r=0;r<n.childElementCount;r++)n.childNodes[r].owner&&n.childNodes[r].owner.unhighlight()}},{key:"quickHighlight",value:function(e){e.owner===Sv.stage.currentPage.currentSpriteName?e.className="spritethumb on target":e.className="spritethumb off target"}},{key:"quickRestore",value:function(e){e.owner===Sv.stage.currentPage.currentSpriteName?e.className=Sv.isEditable()?"spritethumb on":"spritethumb noneditable":e.className="spritethumb off"}}]),n}(),Gm=[],Um=0,Hm=function(){function n(){t(this,n)}return r(n,null,[{key:"init",value:function(){Um=Gm.length,n.update()}},{key:"setup",value:function(t){var r=(0,e.HS)("div","controlundo",t);r.setAttribute("id","undocontrols");for(var i=[["undo",n.prevStep],["redo",n.nextStep]],a=0;a<i.length;a++)n.newToggleClicky(r,"id_",i[a][0],i[a][1]);n.update()}},{key:"newToggleClicky",value:function(t,n,r,i){var a=(0,e.HS)("div","".concat(r,"button"),t);return a.setAttribute("type","toggleclicky"),a.setAttribute("id",n+r),i&&(a.ontouchstart=function(e){i(e)},a.onmousedown=function(e){i(e)}),a}},{key:"record",value:function(e){Sv.getActiveScript()&&Sv.getActiveScript().owner.removeCaret(),Um+1<=Gm.length&&Gm.splice(Um+1,Gm.length);var t=Uv.getUndo();for(var r in e)t[r]=e[r];Gm.push(t),Um++,n.update(),Sv.changed=!0}},{key:"prevStep",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){for(t.preventDefault(),t.stopPropagation(),Sv.unfocus(),Sv.time=t.timeStamp;Um>=Gm.length;)Um--;var r=--Um<0?"boing.wav":"tap.wav";m.sndFX(r),Um<0?Um=0:n.smartRecreate("prev",Gm[Um+1],Gm[Um])}}},{key:"nextStep",value:function(t){if(!(e.Em&&t.touches&&t.touches.length>1)){t.preventDefault(),t.stopPropagation(),Sv.unfocus(),Sv.time=t.timeStamp;var r=++Um>Gm.length-1?"boing.wav":"tap.wav";m.sndFX(r),Um>Gm.length-1?Um=Gm.length-1:n.smartRecreate("next",Gm[Um],Gm[Um])}}},{key:"smartRecreate",value:function(e,t,r){Sv.stopStrips();var i=t.action,a=t.where,o=t.who;switch(i){case"pageorder":Sv.stage.pages=n.getPageOrder(r),n.recreateAllScripts(r),Sv.stage.setPage(Sv.stage.findPage(r.currentPage),!1),5===rn.numcat&&rn.selectCategory(5);break;case"changepage":Sv.stage.setPage(Sv.stage.findPage(r.currentPage),!1);break;case"changebkg":Sv.stage.findPage(a).redoChangeBkg(r);break;case"scripts":n.redoScripts(r,a,o),o&&Sv.stage.findSprite(o)&&(Sv.stage.findPage(a).setCurrentSprite(Sv.stage.findSprite(o)),Fm.selectThisSprite(Sv.stage.findSprite(o)),Om.resetSpriteLibrary());break;case"deletepage":case"addpage":r[a]?n.copyPage(r,a):n.removePage(r,a);break;case"deletesprite":case"copy":r[a][o]?n.copySprite(r,a,o):n.removeSprite(r,a,o);break;case"deletesound":var s=r[a][o].sounds.concat();Sv.stage.findSprite(o).sounds=s,n.redoScripts(r,a,o),3===rn.numcat&&rn.selectCategory(3);break;case"recordsound":if(o=Sv.stage.findSprite(r[a][o].id),t.sound&&o.sounds.indexOf(t.sound)>-1){var u=o.sounds.indexOf(t.sound);u>-1&&o.sounds.splice(u,1)}else o.sounds.push(t.sound);3===rn.numcat&&rn.selectCategory(3);break;case"edittext":n.removeSprite(r,a,o),r[a][o]&&n.copySprite(r,a,o);break;case"modify":n.modifySprite(r,a,o);break;default:Uv.clear(),n.recreate(Gm[Um])}n.update()}},{key:"copyPage",value:function(t,r){var i=Sv.getSprite()?(0,e.gn)("".concat(Sv.stage.currentPage.currentSpriteName,"_scripts")):void 0;i&&i.owner.deactivate(),Uv.recreatePage(r,t[r],(function(){Sv.stage.pages=n.getPageOrder(t),Sv.stage.setPage(Sv.stage.findPage(t.currentPage),!1),n.recreateAllScripts(t);var e=t[t.currentPage].lastSprite;if(e&&Sv.stage.findSprite(e)){var r=Sv.stage.findSprite(e);r.page.setCurrentSprite(r),Fm.selectThisSprite(r),5===rn.numcat&&rn.selectCategory(5)}}))}},{key:"getPageOrder",value:function(e){for(var t=e.pages,n=[],r=0;r<t.length;r++)n.push(Sv.stage.findPage(t[r]));return n}},{key:"recreateAllScripts",value:function(t){for(var r=0;r<t.pages.length;r++)for(var i=t[t.pages[r]],a=i.sprites,o=0;o<a.length;o++){var s=i[a[o]];s&&"sprite"===s.type&&(0,e.gn)("".concat(s.id,"_scripts"))&&n.redoScripts(t,t.pages[r],a[o])}}},{key:"removePage",value:function(e,t){var r=Sv.stage.findPage(t);r&&(Sv.stage.removePageBlocks(t),Sv.stage.removePage(r),Sv.stage.pages=n.getPageOrder(e),0===Sv.stage.pages.length?n.copyPage(e,e.currentPage):(Sv.stage.setViewPage(Sv.stage.findPage(e.currentPage)),Fm.updateSprites(),Fm.updatePages()))}},{key:"redoScripts",value:function(t,n,r){for(var i=(0,e.gn)("".concat(r,"_scripts"));i.childElementCount>0;)i.removeChild(i.childNodes[0]);for(var a=i.owner,o=t[n][r].scripts,s=0;s<o.length;s++)a.recreateStrip(o[s])}},{key:"copySprite",value:function(e,t,r){var i=e[t][r];Uv.recreateObject(Sv.stage.findPage(t),r,i,(function(r){if("sprite"===r.type)n.setSprite(t,e);else{var i=1.35*r.fontsize;r.homey===r.page.textstartat&&(r.page.textstartat+=i),Fm.updatePages()}}),e[t].lastSprite===r)}},{key:"modifySprite",value:function(e,t,r){if(e[t][r]){var i=Sv.stage.findPage(t).findSprite(r);i?i.update(e[t][r],(function(){Fm.updateSprite(i),Fm.updatePages()})):n.copySprite(e,t,r)}else n.removeSprite(e,t,r)}},{key:"setSprite",value:function(e,t){if(Fm.updatePages(),e===Sv.stage.currentPage.id){var n=Sv.stage.findPage(e),r=t[e].lastSprite,i=r?Sv.stage.findSprite(r):void 0;i?(n.setCurrentSprite(i),Om.needsScroll(),Fm.updateSprites()):n.setCurrentSprite(void 0)}}},{key:"removeSprite",value:function(e,t,r){var i=Sv.stage.findPage(t),a=i.findSprite(r);a&&(Sv.runtime.stopThreadSprite(a),i.removeSprite(a),n.setSprite(t,e))}},{key:"recreate",value:function(e){Uv.mediaCount=0,Sv.stage.pages=[];var t=e.pages;e.projectsounds&&(m.projectsounds=e.projectsounds);for(var r=0;r<t.length;r++)Uv.recreatePage(t[r],e[t[r]]);n.loadPage(e.currentPage)}},{key:"loadPage",value:function(e){Sv.stage.getPagesID().indexOf(e)<0?Sv.stage.currentPage=Sv.stage.pages[0]:Sv.stage.currentPage=Sv.stage.getPage(e),Sv.stage.currentPage.show(),wm=100,Uv.mediaCount>0?setTimeout((function(){n.updateImages()}),20):n.doneLoading()}},{key:"updateImages",value:function(){wm--,Uv.mediaCount<1||wm<1?n.doneLoading():setTimeout((function(){n.updateImages()}),20)}},{key:"flashIcon",value:function(e,t){e.setAttribute("class",t),setTimeout((function(){n.update()}),1e3)}},{key:"doneLoading",value:function(){Fm.updateSprites(),Fm.updatePages()}},{key:"update",value:function(){(0,e.gn)("id_undo")&&(1===Gm.length||Um<1?n.tunOffButton((0,e.gn)("id_undo")):n.tunOnButton((0,e.gn)("id_undo")),Um>=Gm.length-1?n.tunOffButton((0,e.gn)("id_redo")):n.tunOnButton((0,e.gn)("id_redo")))}},{key:"tunOnButton",value:function(e){var t=e.getAttribute("class").split(" ")[0];e.setAttribute("class","".concat(t," enable"))}},{key:"tunOffButton",value:function(e){var t=e.getAttribute("class").split(" ")[0];e.setAttribute("class","".concat(t," disable"))}}]),n}(),jm=function(){function e(n,r){return t(this,e),this.firstBlock=r.findFirst(),this.thisblock=r,this.oldblock=null,this.spr=n,this.audio=void 0,this.stack=[],this.firstTime=!0,this.count=-1,this.waitTimer=0,this.distance=-1,this.called=[],this.vector={x:0,y:0},this.isRunning=!0,this.time=0,this}return r(e,[{key:"clear",value:function(){this.stack=[],this.firstTime=!0,this.count=-1,this.waitTimer=0,this.vector={x:0,y:0},this.distance=-1,this.called=[],this.thisblock=this.firstBlock}},{key:"duplicate",value:function(){var t=new e(this.spr,this.firstBlock);return t.count=-1,t.firstBlock=this.firstBlock,t.thisblock=this.thisblock,t.oldblock=null,t.spr=this.spr,t.stack=this.stack,t.firstTime=this.firstTime,t.vector={x:0,y:0},t.waitTimer=0,t.distance=-1,t.called=this.called,t.isRunning=this.isRunning,t}},{key:"deselect",value:function(e){for(;null!==e;)e.unhighlight(),e.inside&&(e.repeatCounter=-1,this.deselect(e.inside)),e=e.next}},{key:"stop",value:function(e){this.stopping(e),this.isRunning=!1}},{key:"stopping",value:function(e){this.endPrim(e),this.deselect(this.firstBlock),this.clear(),this.spr.closeBalloon()}},{key:"endPrim",value:function(e){if(this.thisblock){var t=this.thisblock,n=this.spr;switch(t.blocktype){case"down":case"back":case"forward":case"up":if(this.distance>-1&&!e){var r=w.scale(this.vector,this.distance%24);n.setPos(n.xcoor+r.x,n.ycoor+r.y)}break;case"hop":var i=this.count,a=Number(t.getArgValue());if(--i>0){for(var o=0,s=i;s>-1;s--)o+=Pt.hopList[i];this.vector={x:0,y:o};var u=n.ycoor-this.vector.y/5*a;u<0&&(u=0),u>=360-Rt.size&&(u=360-Rt.size),n.setPos(n.xcoor+this.vector.x,u)}break;case"playsnd":case"playusersnd":this.audio&&(this.audio.stop(),this.audio=void 0);break;case"hide":n.alpha=0,this.firstBlock.aStart||e||(n.homeshown=!1);break;case"show":n.alpha=1,this.firstBlock.aStart||e||(n.homeshown=!0);break;case"same":n.noScaleFor();break;case"grow":case"shrink":this.firstBlock.aStart||e||(n.homescale=n.scale);break;case"right":case"left":var h=n.angle;h%30!=0&&(h=30*(Math.floor(h/30)+1)),n.setHeading(h)}}}}]),e}(),Km=function(){function e(){t(this,e),this.threadsRunning=[],this.thread=void 0,this.intervalId=void 0,this.yield=!1}return r(e,[{key:"beginTimer",value:function(){null!==this.intervalId&&window.clearInterval(this.intervalId);var e=this;this.intervalId=window.setInterval((function(){e.tickTask()}),32),Uv.saving=!1,this.threadsRunning=[]}},{key:"tickTask",value:function(){if(Sv.updateRunStopButtons(),!(this.threadsRunning.length<1)){for(var e=[],t=0;t<this.threadsRunning.length;t++)this.threadsRunning[t].isRunning&&e.push(this.threadsRunning[t]);this.threadsRunning=e;for(var n=0;n<this.threadsRunning.length;n++)this.step(n)}}},{key:"inactive",value:function(){if(this.threadsRunning.length<1)return!0;for(var e=!0,t=0;t<this.threadsRunning.length;t++){var n=this.threadsRunning[t];n&&(n.isRunning&&"ontouch"!==n.firstBlock.blocktype&&(e=!1),"ontouch"===n.firstBlock.blocktype&&null!==n.thisblock&&"ontouch"!==n.thisblock.blocktype&&(e=!1))}return e}},{key:"step",value:function(e){for(this.yield=!1,this.thread=this.threadsRunning[e];;){if(!this.thread.isRunning)return;if(this.thread.waitTimer>0)return void(this.thread.waitTimer+=-1);if(this.yield)return;this.thread.thisblock?this.runPrim():(this.endCase(),this.yield=!0)}}},{key:"addRunScript",value:function(e,t){this.restartThread(e,t)}},{key:"stopThreads",value:function(){for(var e in this.threadsRunning)this.threadsRunning[e].stop();this.threadsRunning=[]}},{key:"stopThreadBlock",value:function(e){for(var t in this.threadsRunning)this.threadsRunning[t].firstBlock===e&&this.threadsRunning[t].stop()}},{key:"stopThreadSprite",value:function(e){for(var t in this.threadsRunning)this.threadsRunning[t].spr===e&&this.threadsRunning[t].stop()}},{key:"removeRunScript",value:function(e){var t=[];for(var n in this.threadsRunning)this.threadsRunning[n].spr===e&&(this.threadsRunning[n].isRunning&&(null!==this.threadsRunning[n].thisblock&&this.threadsRunning[n].endPrim(),t.push(this.threadsRunning[n].duplicate())),this.threadsRunning[n].isRunning=!1,null!==this.threadsRunning[n].oldblock&&this.threadsRunning[n].oldblock.unhighlight());return t}},{key:"runPrim",value:function(){null!==this.thread.oldblock&&this.thread.oldblock.unhighlight(),this.thread.oldblock=null;var e=Pt.table[this.thread.thisblock.blocktype];e?(["repeat","gotopage"].indexOf(this.thread.thisblock.blocktype)<0&&(this.thread.thisblock.highlight(),this.thread.oldblock=this.thread.thisblock),Pt.time=new Date-0):e=Pt.table.missing,e(this.thread)}},{key:"endCase",value:function(){if(null!==this.thread.oldblock&&this.thread.oldblock.unhighlight(),0===this.thread.stack.length)Pt.Done(this.thread);else{var e=this.thread.stack.pop();this.thread.thisblock=e,this.runPrim()}}},{key:"restartThread",value:function(e,t,n){for(var r=new jm(e,t),i=!1,a=0;a<this.threadsRunning.length;a++)this.threadsRunning[a].firstBlock===t&&(i=!0,"ontouch"!==t.blocktype&&(null!==this.threadsRunning[a].oldblock&&this.threadsRunning[a].oldblock.unhighlight(),this.threadsRunning[a].stopping(n),r=this.threadsRunning[a]));return i||this.threadsRunning.push(r),r}}]),e}();function Xm(e,t){return Xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xm(e,t)}function zm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xm(e,t)}function Vm(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wm(e)}var Ym=function(){function n(e){t(this,n);var r=e.page;this.view=new vl,this.view.zIndex=0,this.view.anchor.set(.5),this.view.sortableChildren=!0,this.page=r,this.shown=!1,this.defaultScale=1,this.sprite=null,this.flip=!1,this.homeflip=!1,this.homescale=1,this.homeshown=!1,this.cx=0,this.cy=0,this.w=0,this.h=0,this.img=null,this.id=e.id,this.watermark=null,this.outline=null,r.appendSprite(this)}return r(n,[{key:"attachEvent",value:function(){this.sprite&&this.sprite.on("pointerdown",this.onPointerDown,this)}},{key:"clearEvents",value:function(){this.oldPos=void 0,this.dragged=!1,clearTimeout(this.timeoutEvent),this.timeoutEvent=void 0,this.view.zIndex=0,this.sprite.off("pointermove",this.onPointerMove,this),this.sprite.off("pointerup",this.onPointerUp,this),this.sprite.off("pointerupoutside",this.clearEvents,this)}},{key:"onPointerDown",value:function(e){var t=this;if(!this.shakingInterval){var n=e.data.getLocalPosition(this.view.parent);this.oldPos={x:n.x,y:n.y},this.sprite.on("pointermove",this.onPointerMove,this),this.sprite.on("pointerup",this.onPointerUp,this),this.sprite.on("pointerupoutside",this.clearEvents,this),this.timeoutEvent=setTimeout((function(){t.dragged||(t.clearEvents(),Sv.shaking=t,Sv.stopShaking=function(){t.stopShaking()},t.startShaking())}),500)}}},{key:"onPointerUp",value:function(){var e=this.dragged;if(this.clearEvents(),!this.shakingInterval)return e?(Sv.changed=!0,this.homex=this.xcoor,this.homey=this.ycoor,this.homeflip=this.flip,void Fm.updatePages()):void this.onClick()}},{key:"onClick",value:function(){}},{key:"onPointerMove",value:function(t){if(this.view.zIndex=100,this.oldPos){var n=t.data.getLocalPosition(this.view.parent);if(n.x<-15||n.y<-15||n.x>e.mz+15||n.y>e.uk+15)return this.clearEvents(),void(this.dragged=!1);var r=w.diff(n,this.oldPos),i=(Sv.inFullscreen?15:5)*e.PJ;if(!this.dragged&&w.len(r)>i&&(this.dragged=!0),this.dragged){this.timeoutEvent&&(clearTimeout(this.timeoutEvent),this.timeoutEvent=void 0);var a=this.xcoor+r.x/e.PJ,o=this.ycoor+r.y/e.PJ;a=Math.max(0,a),a=Math.min(a,480),o=Math.max(0,o),o=Math.min(o,360),this.xcoor=a,this.ycoor=o,this.oldPos={x:n.x,y:n.y},this.render()}}}},{key:"goHome",value:function(){this.setPos(this.homex,this.homey),this.scale=this.homescale,this.shown=this.homeshown,this.sprite.alpha=this.shown?1:0,this.shown?this.view.visible=!0:this.view.visible=!1,this.setHeading(0),this.render(),this.stop()}},{key:"stop",value:function(){}},{key:"getAlpha",value:function(e,t,n){return e[4*t.x+t.y*n*4+3]}},{key:"setHeading",value:function(e){this.angle=e%360,this.render()}},{key:"setPos",value:function(e,t){this.dirx=e-this.xcoor==0?1:(e-this.xcoor)/Math.abs(e-this.xcoor),this.diry=t-this.ycoor==0?1:(t-this.ycoor)/Math.abs(t-this.ycoor),this.xcoor=1*e,this.ycoor=1*t,this.wrap(),this.render()}},{key:"wrap",value:function(){}},{key:"render",value:function(){}},{key:"stamp",value:function(t,n,r){if(this.outline){var i=this.outline.width*this.scale,a=this.outline.height*this.scale,o=n||0,s=r||0;t.save(),t.translate(this.xcoor+o,this.ycoor+s),t.rotate(this.angle*e.Zh),this.flip&&t.scale(-1,1),t.drawImage(this.outline,-i/2,-a/2,i,a),t.restore()}}},{key:"screenLeft",value:function(){return Math.round(this.xcoor-this.cx*this.scale)}},{key:"screenTop",value:function(){return Math.round(this.ycoor-this.cy*this.scale)}},{key:"noScaleFor",value:function(){this.setScaleTo(this.defaultScale)}},{key:"changeSizeBy",value:function(e){var t=Number(e)+100*Number(this.scale);this.scale=this.getScale(t/100),this.setPos(this.xcoor,this.ycoor),this.render()}},{key:"setScaleTo",value:function(e){(e=this.getScale(e))!==this.scale&&(this.scale=e,this.setPos(this.xcoor,this.ycoor),this.render())}},{key:"getScale",value:function(e){var t=Math.max(Math.max(this.w,this.h)*e,36),n=Math.min(Math.min(this.w,this.h)*e,360);return 36===t?36/Math.max(this.w,this.h):360===n?360/Math.min(this.w,this.h):e}},{key:"getBox",value:function(){return{x:this.screenLeft(),y:this.screenTop(),width:this.w*this.scale,height:this.h*this.scale}}},{key:"activate",value:function(){for(var t=(0,e.r9)(this.w,this.h,Ft.watermark.offsetWidth,Ft.watermark.offsetHeight),n=Ft.watermark;n.childElementCount>0;)n.removeChild(n.childNodes[0]);var r=this.getSVGimage(this.watermark);n.appendChild(r);var i={width:"".concat(this.w,"px"),height:"".concat(this.h,"px"),left:"".concat(t[0],"px"),top:"".concat(t[1],"px"),zoom:"".concat(Math.floor(t[2]/this.w*100),"%")};(0,e.cl)(r.style,i)}},{key:"getSVGimage",value:function(e){var t=document.createElement("img"),n=(new XMLSerializer).serializeToString(e);return n=n.replace(/ href="data:image/g,' xlink:href="data:image'),t.src="data:image/svg+xml;base64,".concat(btoa(n)),t}},{key:"startShaking",value:function(){var e=this;this.sprShake?(this.sprShake.visible=!0,this.sprShake.x=-this.width/2,this.sprShake.y=-this.height/2):sy.getAsset("assets/ui/closeit.svg",(function(t){e.drawCloseButton(t)}));var t=1,n=0;this.shakingInterval=setInterval((function(){e.sprite.rotation+=.025*t,Math.abs(n)>3&&(t*=-1),n+=t}),1e3/60)}},{key:"stopShaking",value:function(){this.sprShake&&(this.sprShake.visible=!1),this.shakingInterval&&(window.clearInterval(this.shakingInterval),this.shakingInterval=void 0),this.sprite.rotation=0,Sv.shaking=void 0,Sv.stopShaking=void 0}},{key:"drawCloseButton",value:function(t){var n=this;sy.getImg(t,(function(t){(0,e.ge)(t,80,80),n.sprShake=vl.from(t),n.sprShake.buttonMode=!0,n.sprShake.interactive=!0,n.sprShake.anchor.set(.5),n.sprShake.zIndex=1e3,n.sprShake.x=-n.width/2,n.sprShake.y=-n.height/2,n.view.addChild(n.sprShake),n.sprShake.on("pointerdown",(function(){Sv.stage.removeSprite(n)}))}))}},{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"remove",value:function(){}},{key:"show",value:function(){this.view.visible=!0}},{key:"hide",value:function(){this.view.visible=!1}},{key:"getData",value:function(){var t=this.getSpriteData();if("text"===this.type)return t;for(var n=[],r=(0,e.gn)("".concat(this.id,"_scripts")).owner.getEncodableBlocks(),i=0;i<r.length;i++)n.push(Uv.encodeStrip(r[i]));return t.scripts=n,t}},{key:"getSpriteData",value:function(){}}]),n}();var Jm=function(n){zm(s,n);var i,a,o=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wm(i);if(a){var n=Wm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Vm(this,e)});function s(e,n){var r;return t(this,s),(r=o.call(this,e)).outline=document.createElement("canvas"),r.createText(e,n),r.attachEvent(),r}return r(s,[{key:"createText",value:function(t,n){if((0,e.cl)(this,t),this.scale=1,this.homescale=1,this.homeshown=!0,this.homeflip=!1,this.fontsize/=1,this.xcoor/=1,this.ycoor/=1,this.homex/=1,this.homey/=1,this.sprite=new vl,this.sprite.interactive=!0,this.text=new Ml(this.str,{fontFamily:window.Settings.textSpriteFont,fontSize:"".concat(this.fontsize,"px"),fill:this.color,align:"center",fontWeight:"bold"}),this.sprite.anchor.set(.5),this.text.anchor.set(.5),this.sprite.addChild(this.text),this.view.addChild(this.sprite),""!==this.str||n)fy.isSampleLocalizedKey(this.str)&&Sv.isSampleOrStarter()&&(this.str=fy.localize("SAMPLE_TEXT_".concat(this.str))),this.recalculateText(),n&&n(this);else{this.setTextBox(),this.activateInput();var r=1.35*this.fontsize,i=t.page;i.textstartat+=r,i.textstartat+r>360&&(i.textstartat=42)}}},{key:"width",get:function(){return this.text.width*this.sprite.scale.x}},{key:"height",get:function(){return this.text.height*this.sprite.scale.y}},{key:"onClick",value:function(){Sv.inFullscreen||this.clickOnText()}},{key:"wrap",value:function(){var t=this.cx>e.mz?this.cx:e.mz,n=this.cx>e.mz?e.mz-this.cx:0;this.xcoor<n&&(this.xcoor=t+this.xcoor),this.ycoor<0&&(this.ycoor=e.uk+this.ycoor),this.xcoor>=t&&(this.xcoor=this.xcoor-t),this.ycoor>=e.uk&&(this.ycoor=this.ycoor-e.uk)}},{key:"render",value:function(){this.sprite.scale.set(this.scale*e.PJ),this.view.x=this.xcoor*e.PJ,this.view.y=this.ycoor*e.PJ}},{key:"setTextBox",value:function(){var t=document.forms.activetextbox;t.textsprite=this;var n,r=this.getBox(),i=document.forms.activetextbox.typing;i.value=this.str,n=e.Dt?{color:this.color,fontSize:"".concat(this.fontsize*e._X,"px")}:{color:this.color,fontSize:"".concat(this.fontsize,"px")};var a,o,s=S.fontcolors.indexOf((0,e.vq)(this.color));Om.setMenuTextColor((0,e.gn)("textcolormenu").childNodes[s<0?9:s]),(0,e.cl)(i.style,n),a=e.Dt?r.y*e._X+(0,e.Q7)((0,e.gn)("stage"))-10*e._X:r.y+(0,e.Q7)((0,e.gn)("stage"),(0,e.gn)("stage").offsetTop)-10,(0,e.gn)("textbox").className="pagetext on",e.Dt?(AndroidInterface.scratchjr_setsoftkeyboardscrolllocation(a*window.devicePixelRatio,(a+1.7*i.parentNode.parentNode.getBoundingClientRect().height)*window.devicePixelRatio),o=(230-Math.round(235))*e._X+(0,e.$1)((0,e.gn)("stage")),(0,e.cl)((0,e.gn)("textbox").style,{top:"".concat(a,"px"),left:"".concat(o,"px"),zIndex:10}),(0,e.cl)(t.style,{height:"".concat((this.fontsize+10)*e._X,"px")}),setTimeout((function(){AndroidInterface.scratchjr_forceShowKeyboard()}),500)):(o=230-Math.round(235)+(0,e.$1)((0,e.gn)("stage"),(0,e.gn)("stage").offsetLeft),(0,e.cl)((0,e.gn)("textbox").style,{top:"".concat(a,"px"),left:"".concat(o,"px"),zIndex:10}),(0,e.cl)(t.style,{height:"".concat(this.fontsize+10,"px")}))}},{key:"unfocusText",value:function(){Sv.blur(),document.body.scrollTop=0,document.body.scrollLeft=0;var t=document.forms.activetextbox,n=this.oldvalue!==t.typing.value;this.noChars(t.typing.value)?this.deleteText(""!==this.oldvalue):(this.contractText(),this.sprite.visible=!0,e.Dt&&((0,e.gn)("textbox").style.visibility="hidden"),(0,e.gn)("textbox").className="pagetext off",(0,e.gn)("textcolormenu").className="textuicolormenu off",(0,e.gn)("textfontsizes").className="textuifont off",(0,e.gn)("fontsizebutton").className="fontsizeText off",(0,e.gn)("fontcolorbutton").className="changecolorText off",t.textsprite=null,this.deactivateInput(),n&&Hm.record({action:"edittext",where:this.page.id,who:this.id})),Fm.updatePages(),e.Dt&&(Sv.onBackButtonCallback.pop(),AndroidInterface.scratchjr_forceHideKeyboard())}},{key:"deleteText",value:function(t){var n=this.id;Sv.stage.currentPage.removeSprite(this);var r=document.forms.activetextbox;(0,e.gn)("textbox").style.visibility="hidden",r.textsprite=null,t&&Hm.record({action:"deletesprite",who:n,where:Sv.stage.currentPage.id})}},{key:"noChars",value:function(e){for(var t=0;t<e.length;t++)if(" "!==e[t])return!1;return!0}},{key:"contractText",value:function(){var e=document.forms.activetextbox;this.str=e.typing.value.substring(0,e.typing.maxLength),this.recalculateText()}},{key:"clickOnText",value:function(t){t&&t.stopPropagation(),this.setTextBox(),(0,e.gn)("textbox").style.visibility="visible",this.sprite.visible=!1,this.activateInput()}},{key:"activateInput",value:function(){this.oldvalue=this.str;var t=document.forms.activetextbox.typing;(0,e.gn)("textbox").style.visibility="visible";var n=this;ny.analyticsEvent("editor","text_sprite_open"),t.onblur=function(){n.unfocusText()},t.onkeypress=function(e){n.handleWrite(e)},t.onkeyup=function(e){n.handleKeyUp(e)},t.onsubmit=function(){n.unfocusText()},e.Dt?(setTimeout((function(){t.focus()}),500),Sv.onBackButtonCallback.push((function(){n.unfocusText()}))):((0,e.gn)("textbox").offsetTop+(0,e.gn)("textbox").offsetHeight>.45*e.At&&window.scroll(0,1.2*(0,e.gn)("textbox").offsetHeight),e.Em?t.focus():setTimeout((function(){t.focus()}),100))}},{key:"handleWrite",value:function(t){var n=t.keyCode||t.which,r=t.target;13===n?(t.preventDefault(),r.blur()):r.parentNode.textsprite||((0,e.gn)("textbox").style.visibility="hidden",this.deactivateInput())}},{key:"handleKeyUp",value:function(e){var t=e.target;t.parentNode.textsprite&&(t.parentNode.textsprite.str=t.value)}},{key:"deactivateInput",value:function(){var e=document.forms.activetextbox.typing;e.onblur=void 0,e.onkeypress=void 0,e.onsubmit=void 0}},{key:"setColor",value:function(e){this.color=e,this.text.style.fill=e}},{key:"setFontSize",value:function(e){e<12&&(e=12),e>72&&(e=72),this.fontsize=e}},{key:"recalculateText",value:function(){this.text.text=this.str,this.text.style.fontSize="".concat(this.fontsize,"px"),this.w=Math.round(this.text.width)+1,this.h=Math.round(this.text.height)+1,this.cx=this.w/2,this.cy=this.h/2,this.setPos(this.xcoor,this.ycoor);var t=this.outline.getContext("2d");t.font="bold ".concat(this.fontsize,"px ").concat(window.Settings.textSpriteFont),(0,e.ge)(this.outline,this.w,this.h),t.clearRect(0,0,this.outline.width,this.outline.height),t.font="bold ".concat(this.fontsize,"px ").concat(window.Settings.textSpriteFont),t.fillStyle=this.color,t.textAlign="left",t.textBaseline="top",t.fillText(this.str,0,0)}},{key:"getSpriteData",value:function(){var e={};return e.shown=this.shown,e.type=this.type,e.id=this.id,e.speed=this.speed,e.cx=this.cx,e.cy=this.cy,e.w=Math.floor(this.w),e.h=Math.floor(this.h),e.xcoor=1*this.xcoor.toFixed(),e.ycoor=1*this.ycoor.toFixed(),e.homex=1*this.homex.toFixed(),e.homey=1*this.homey.toFixed(),e.str=this.str,e.color=this.color,e.fontsize=this.fontsize,e}}]),s}(Ym),qm=function(){function n(r){t(this,n),this.flowCaret=null,this.spr=r,this.dragList=[];var i=(0,e.gn)("scriptscontainer");this.sc=(0,e.HS)("div","look",i),(0,e.ge)(this.sc,i.offsetWidth,i.offsetHeight),this.sc.setAttribute("id","".concat(r.id,"_scripts")),this.sc.setAttribute("class","look"),this.sc.owner=this,this.sc.top=0,this.sc.left=0}return r(n,[{key:"activate",value:function(){(0,e.cl)(this.sc.style,{visibility:"visible"})}},{key:"deactivate",value:function(){(0,e.cl)(this.sc.style,{visibility:"hidden"})}},{key:"scriptsMouseDown",value:function(t){var n;if(!(e.Em&&t.touches&&t.touches.length>1||Sv.onHold||"H3"===(n=window.event?window.event.srcElement:t.target).nodeName&&n.owner===Sv.activeFocus)){if(Sv.clearSelection(),"H3"===n.nodeName)return Sv.blur(),void Sv.editArg(t,n);if(n.firstChild&&"H3"===n.firstChild.nodeName)return Sv.blur(),void Sv.editArg(t,n.firstChild);Sv.unfocus(t);for(var r=Sv.getActiveScript(),i=z.getTargetPoint(t),a={x:(0,e.XU)(r,i.x),y:(0,e.Bf)(r,i.y)},o=r.childElementCount-1;o>-1;o--){var s=r.childNodes[o];if(s.owner&&!s.owner.isCaret&&(0,e.v)(s,a))return t.preventDefault(),void z.startDrag(t,s,Ft.prepareToDrag,Ft.dropBlock,Ft.draggingBlock,Ft.runBlock)}Ft.dragBackground(t)}}},{key:"addBlockToScripts",value:function(e,t,n){null!==this.flowCaret&&this.flowCaret.div.parentNode===this.sc&&this.sc.removeChild(this.flowCaret.div),this.flowCaret=null,z.dragDiv.removeChild(e),this.sc.appendChild(e),e.owner.moveBlock(t,n);for(var r=1;r<this.dragList.length;r++){var i=this.dragList[r].div;i.parentNode.removeChild(i),this.sc.appendChild(i)}this.layout(e.owner),this.snapToPlace(this.dragList),e.owner.cShape&&this.sendToBack(e.owner),this.dragList=[]}},{key:"sendToBack",value:function(e){if(e.inside){for(var t=e.inside;null!==t;)t.div.parentNode.appendChild(t.div),t.cShape&&this.sendToBack(t),t=t.next;this.layout(e)}}},{key:"snapToPlace",value:function(e){e.length<2&&e[0].cShape?this.snapCshape(e):this.snapBlock(e)}},{key:"snapBlock",value:function(e){var t=e[0],n=t.findLast(),r=this.findClosest(this.available(0,t,e),t);this.isValid(t,r,0)?this.snapToDock(r,t,0,e):(r=this.findClosest(this.available(n.cShape?2:1,n,e),n),this.isValid(n,r,n.cShape?2:1)&&this.snapToDock(r,n,n.cShape?2:1,e))}},{key:"snapCshape",value:function(e){var t=e[0],n=t.findLast(),r=this.findClosest(this.available(0,t,e),t);this.isValid(t,r,0)?this.snapToDock(r,t,0,e):(t.isCaret?this.dragList[0].inside:t.inside)||(r=this.findClosest(this.available(1,t,e),t),!this.isValid(t,r,1))?(r=this.findClosest(this.available(2,n,e),n),this.isValid(t,r,2)&&this.snapToDock(r,n,2,e)):this.snapToDock(r,t,1,e)}},{key:"isValid",value:function(e,t,n){if(!t)return!1;var r=t[0],i=t[1];return!(t[2]>30||e.cShape&&1===n&&r.anEnd||e.anEnd&&null!==r.next||e.findFirst().aStart&&null!==r.prev||0===n&&e.findLast().anEnd&&("repeat"===r.blocktype&&1===i||this.insideCShape(r))||e.findLast().anEnd&&null!==r.next||e.findLast().anEnd&&r.findLast().anEnd)}},{key:"insideCShape",value:function(e){for(;null!==e;){var t=e.prev;if(!t)return!1;var n=t.getMyDockNum(e);if(t.cShape&&1===n)return!0;e=t}return!1}},{key:"snapToDock",value:function(e,t,n,r){if(e){t.blocktype.indexOf("caret")<0&&(Sv.storyStart("Scripts.snapToDock"),m.sndFX("snap.wav"));var i,a=e[0],o=e[1];if(t.cShape&&1===n){var s=this.getDockDxDy(a,o,t,n);i=[s[0],s[1]]}else i=this.getDockDxDy(a,o,t,n);t.isCaret&&(t.div.style.visibility="visible");for(var u=0;u<r.length;u++)r[u].moveBlock(r[u].div.left+i[0],r[u].div.top+i[1]);t.connectBlock(n,e[0],e[1])}}},{key:"available",value:function(e,t,n){for(var r=null,i=[],a=null,o=this.getBlocks(),s=0;s<o.length;s++)if((a=o[s])&&a!==t&&!a.isCaret&&!a.isReporter&&"hidden"!==a.div.style.visibility&&-1===n.indexOf(a))for(var u=a.resolveDocks(),h=0;h<u.length;h++)null!==(r=this.getDockDxDy(a,h,t,e))&&i.push([a,h,this.magnitude(r)]);return i}},{key:"magnitude",value:function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}},{key:"findClosest",value:function(e){for(var t=9999,n=null,r=0;r<e.length;r++){var i=e[r];i[2]<t&&(t=i[2],n=i)}return n}},{key:"getDockDxDy",value:function(e,t,n,r){var i=e.resolveDocks()[t],a=n.resolveDocks()[r];if(e===n)return null;if(!i||!a)return null;if(i[0]!==a[0])return null;if(i[1]===a[1])return null;var o=e.div.left+i[2]*e.scale,s=e.div.top+i[3]*e.scale;return[o-(n.div.left+a[2]*n.scale),s-(n.div.top+a[3]*n.scale)]}},{key:"layout",value:function(e){var t=e.findFirst();this.layoutStrip(t)}},{key:"layoutStrip",value:function(e){for(;null!==e;)e.cShape&&this.layoutCshape(e),this.layoutNextBlock(e),e=e.next}},{key:"layoutNextBlock",value:function(e){if(null!==e.next){var t=e.next,n=this.getDockDxDy(e,e.cShape?2:1,t,0);if(!n)return;t.moveBlock(t.div.left+n[0],t.div.top+n[1])}}},{key:"layoutCshape",value:function(e){var t=0,n=0,r=e.hrubberband,i=e.inside;null!==i&&(this.adjustPos(i,0,e,1),this.layoutStrip(i),t+=this.adjustCinside(i),n+=this.adjustCheight(i)),r=e.vrubberband,e.vrubberband=n<0?0:n,e.hrubberband=t,e.redrawRepeat(),e.moveBlock(e.div.left,e.div.top+(r-e.vrubberband)*e.scale)}},{key:"adjustPos",value:function(e,t,n,r){var i=this.getDockDxDy(n,r,e,t);e.moveBlock(e.div.left+i[0],e.div.top+i[1])}},{key:"adjustCheight",value:function(e){var t=e,n=e.blockshape.height;for(e=e.next;null!==e;)e.blockshape.height>n&&(n=e.blockshape.height),e=e.next;return(n/=t.scale*window.devicePixelRatio)>66?n-66:0}},{key:"adjustCinside",value:function(e){for(var t=e,n=e;null!==e;)n=e,e=e.next;return n.blockshape.width/n.scale/window.devicePixelRatio+(n.div.left-t.div.left)/n.scale-(n.cShape,76)}},{key:"getBlocks",value:function(){for(var e=[],t=this.sc,n=0;n<t.childElementCount;n++){var r=t.childNodes[n].owner;r&&"block"===r.type&&(r.isCaret||e.push(r))}return e}},{key:"findGroup",value:function(e){return"block"!==e.type?[]:this.findingGroup([],e)}},{key:"findingGroup",value:function(e,t){for(;null!==t;)e.push(t),t.cShape&&this.findingGroup(e,t.inside),t=t.next;return e}},{key:"gettopblocks",value:function(){for(var e=this.getBlocks(),t=[],n=0;n<e.length;n++)e[n].prev||e[n].isReporter||t.push(e[n]),e[n].isReporter&&!e[n].daddy&&t.push(e[n]);return t}},{key:"getEncodableBlocks",value:function(){for(var e=[],t=this.sc,n=0;n<t.childElementCount;n++){var r=t.childNodes[n].owner;r&&"block"===r.type&&e.push(r)}for(var i=[],a=0;a<e.length;a++)e[a].prev||i.push(e[a]);return i}},{key:"redisplay",value:function(){for(var e=this.gettopblocks(),t=0;t<e.length;t++)this.layout(e[t])}},{key:"getBlocksType",value:function(e){for(var t=[],n=this.getBlocks(),r=0;r<e.length;r++)for(var i=e[r],a=0;a<n.length;a++)i===n[a].blocktype&&t.push(n[a]);return t}},{key:"prepareCaret",value:function(e){var t=e.findLast(),n=this.getCaretType(t);null!==this.flowCaret&&this.sc.removeChild(this.flowCaret.div),this.flowCaret=null,n&&(this.flowCaret=this.newCaret(n),this.flowCaret.isCaret=!0)}},{key:"newCaret",value:function(t){var n=this.sc,r=new Dt(S.defs[t],!1,e._X);return(0,e.cl)(r.div.style,{position:"absolute",left:"0px",top:"0px",visibility:"hidden",zIndex:10}),n.appendChild(r.div),r.moveBlock(0,0),r}},{key:"getCaretType",value:function(e){return this.dragList[0].aStart?"caretstart":e.anEnd?"caretend":this.dragList.length<2&&this.dragList[0].cShape?"caretrepeat":"caretcmd"}},{key:"removeCaret",value:function(){if(this.flowCaret){var e,t=this.flowCaret.prev,n=this.flowCaret.next,r=this.flowCaret.inside;this.flowCaret.prev=null,this.flowCaret.next=null,this.flowCaret.inside=null,null!==n&&(e=n.getMyDockNum(this.flowCaret),n.setMyDock(e,r?r.findLast():t),r||t||this.layout(n)),null!==r&&(e=r.getMyDockNum(this.flowCaret),r.setMyDock(e,t),null!==n&&(r.findLast().next=n),t||this.layout(r)),null!==t&&(e=t.getMyDockNum(this.flowCaret),t.setMyDock(e,r||n),this.layout(t)),this.flowCaret.cShape&&(this.flowCaret.vrubberband=0,this.flowCaret.hrubberband=0,this.flowCaret.redrawRepeat()),this.flowCaret.div.style.visibility="hidden"}}},{key:"insertCaret",value:function(t,n){if(this.flowCaret){var r=Sv.getActiveScript(),i=(0,e.XU)(r,t),a=(0,e.Bf)(r,n)+this.adjustCheight(this.dragList[0]);this.flowCaret.moveBlock(i,a),this.snapToPlace(new Array(this.flowCaret)),"visible"===this.flowCaret.div.style.visibility&&this.layout(this.flowCaret)}}},{key:"deleteBlocks",value:function(){Sv.storyStart("Scripts.prototype.deleteBlocks"),Ft.cleanCarets(),m.sndFX("cut.wav"),this.dragList.length>0&&Sv.runtime.stopThreadBlock(this.dragList[0].findFirst());for(var e=0;e<this.dragList.length;e++){var t=this.dragList[e];t.blocktype&&t.div.parentNode.removeChild(t.div)}}},{key:"recreateStrip",value:function(e){for(var t=[],n=null,r=["repeat"],i=0;i<e.length;i++)if(S.defs[e[i][0]]){switch(e[i][0]){case"say":e[i][1]=unescape(e[i][1]);break;case"gotopage":var a=Sv.stage.pages.indexOf(this.spr.page);e[i][1]-1===a&&(e[i][1]=(a+1)%Sv.stage.pages.length+1);break;case"playusersnd":this.spr.sounds.length<=e[i][1]&&(e[i][0]="playsnd",e[i][1]=this.spr.sounds[0]);break;case"playsnd":this.spr.sounds.indexOf(e[i][1])<0&&(e[i][0]="playsnd",e[i][1]=this.spr.sounds[0])}var o=this.recreateBlock(e[i]);if(t.push(o),r.indexOf(o.blocktype)>-1){var s=this.recreateStrip(e[i][4]);s.length>0&&(o.inside=s[0],s[0].prev=o),o.redrawRepeat()}n&&(o.prev=n,n.next=o),n=o}return t.length>0&&this.layout(t[0]),t}},{key:"recreateBlock",value:function(t){var n=t[0],r="null"===t[1]?null:t[1],i=t[2],a=t[3],o=S.defs[n].concat();null!==r&&o.splice(4,1,r);var s=new Dt(o,!1,e._X);return(0,e.cl)(s.div.style,{position:"absolute",left:"0px",top:"0px"}),s.moveBlock(i*e._X,a*e._X),this.sc.appendChild(s.div),s.update(this.spr),s}}]),n}();var Qm=12,Zm=14,$m=function(n){zm(s,n);var i,a,o=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wm(i);if(a){var n=Wm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Vm(this,e)});function s(n){var r;t(this,s),(r=o.call(this)).text=new Ml(n,{fontFamily:"Verdana",fontSize:"".concat(28,"px"),fill:16777215,align:"center",fontWeight:"bold",breakWords:!0,wordWrap:!0,wordWrapWidth:320}),r.anchor.set(.5,0),r.text.anchor.set(.5);var i=Math.max(r.text.width,72);i+=10*Sv.stage.currentZoom,i+=10,i=Math.round(i);var a=r.text.height+24+Zm;return r.addChild(r.text),r.text.y=(a-Zm)/2,r.w=i,r.h=a,r.canvas=document.createElement("canvas"),(0,e.ge)(r.canvas,i,a),r.texture=Fa.from(r.canvas),r}return r(s,[{key:"draw",value:function(t){var n=this,r=this.w,i=this.h,a=t.xcoor*e.PJ-r/2,o=t.xcoor*e.PJ+r/2-e.mz,s=r-2,u=r/2;a<0?(u=t.xcoor*e.PJ,u=Math.max(40,u)):o>0&&(u=s-Math.max(40,e.mz-t.xcoor*e.PJ));var h=s-u,l='\n        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" stroke-width="2"\n            width="'.concat(r,'px" height="').concat(i,'px" viewBox="0 0 ').concat(r," ").concat(i,'">\n        <path fill="#28A5DA" stroke="#FFFFFF" stroke-miterlimit="10" d="\n            M1,13\n            c0,-6.626 5.374,-').concat(Qm,",").concat(Qm,"-").concat(Qm,"\n            h").concat(s-24,"\n            c6.624,0 ").concat(Qm,",5.374,").concat(Qm,",").concat(Qm,"\n            v").concat(i-Zm-2-24,"\n            c0,6.624 -5.376,").concat(Qm," -").concat(Qm,",").concat(Qm,"\n            h").concat(-h+Zm+Qm,"\n            l-").concat(Zm,",").concat(Zm,"\n            l-").concat(Zm,"-").concat(Zm,"\n            h").concat(-u+Zm+Qm,"\n            c-6.626,0 -").concat(Qm,"-5.376 -").concat(Qm,"-").concat(Qm,'\n            z\n        "/>\n        </svg>'),c=document.createElement("img");c.src="data:image/svg+xml;base64,".concat(window.btoa(l)),sy.loadImg(c,(function(){var s=n.canvas.getContext("2d");s.clearRect(0,0,r,i),s.drawImage(c,0,0,r,i),n.texture.update(),a<0?n.x=-a:o>0&&(n.x=-o),n.y=-i-t.height/2;var u=t.ycoor*e.PJ+n.y;u<0&&(n.y-=u)}))}}]),s}(vl);var ev,tv,nv,rv,iv=function(n){zm(s,n);var i,a,o=(i=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wm(i);if(a){var n=Wm(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Vm(this,e)});function s(e,n){var r;return t(this,s),(r=o.call(this,e)).borderCanvas=document.createElement("canvas"),r.border=vl.from(r.borderCanvas),r.border.anchor.set(.5),r.border.visible=!1,r.view.addChild(r.border),r.createSprite(e.page,e.md5,e.id,e,n),r.attachEvent(),r}return r(s,[{key:"createSprite",value:function(e,t,n,r,i){this.initSprite(),this.id=n,this.md5=t,this.code=new qm(this),this.scripts=[],this.update(r,i)}},{key:"isEditable",get:function(){return this.canEdit}},{key:"alpha",get:function(){return this.sprite.alpha},set:function(e){this.sprite.alpha=e,this.border.alpha=e}},{key:"width",get:function(){return this.sprite.width}},{key:"height",get:function(){return this.sprite.height}},{key:"getAsset",value:function(e){var t=this.md5,n=this;t=rt.keys[t]?rt.path+t:t;var r=function(r){if(rt.keys[n.md5]||n.md5.indexOf("/")>-1){var i=sy.getFilenameWithExt(n.md5);ny.duplicateAsset(t,i),n.md5=i}r=r.replace(/>\s*</g,"><"),n.setSVG(r),sy.getImagesInSVG(r,(function(){var t=sy.getImageDataURL(n.md5,btoa(r));e(t)}))};t.indexOf("/")>-1?sy.requestFromServer(t,r):ny.getmedia(t,(function(e){r(atob(e))}))}},{key:"setSVG",value:function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=document.importNode(t.documentElement,!0);"#comment"===n.childNodes[0].nodeName&&n.removeChild(n.childNodes[0]),this.svg=n}},{key:"initSprite",value:function(){this.sprite=new vl,this.sprite.zIndex=100,this.sprite.interactive=!0,this.sprite.anchor.set(.5),this.view.addChild(this.sprite)}},{key:"setCostume",value:function(e,t){var n=this,r=this;this.img=sy.getImg(e,(function(e){n.sprite.texture=Fa.from(e),r.originalImg=e.cloneNode(!1),r.outline=r.originalImg,n.displaySprite(t)}))}},{key:"displaySprite",value:function(e){var t=this.img.width,n=this.img.height;if(this.cx=Math.floor(t/2),this.cy=Math.floor(n/2),this.w=t,this.h=n,this.setPos(this.xcoor,this.ycoor),Sv.isDebugging){var r=new fl;r.lineStyle(2,16711935,1),r.beginFill(16711867,.25),r.drawRoundedRect(-t/2,-n/2,t,n,0),r.endFill(),this.sprite.addChild(r)}this.doRender(e)}},{key:"doRender",value:function(e){this.drawBorder(),this.render(),this.readOnly=Oe.svgerror,this.watermark=et.getWatermark(this.svg,"#B3B3B3"),e&&e(this)}},{key:"drawBorder",value:function(){var t=this.borderCanvas.getContext("2d");(0,e.ge)(this.borderCanvas,1,1),t.clearRect(0,0,1,1),(0,e.ge)(this.borderCanvas,this.w,this.h),Oe.drawBorder(this.svg,t),this.border.texture.update()}},{key:"onClick",value:function(){Sv.clearSelection(),Sv.startScriptsFor(this,["onclick"]),Sv.startCurrentPageStrips(["ontouch"])}},{key:"touchingAny",value:function(){if(!this.shown)return!1;(0,e.ge)(Sv.workingCanvas,e.mz,e.uk),(0,e.ge)(Sv.workingCanvas2,e.mz,e.uk);for(var t=this.page,n=this.getBoxWithEffects(),r=t.getSprites(),i=0;i<r.length;i++){var a=r[i];if(a&&"text"!==a.type&&a.shown&&a.id!==this.id&&(!z.dragthumbnail||a!==z.dragthumbnail.owner)){var o=a.getBoxWithEffects();if(n.intersects(o)&&this.verifyHit(a))return!0}}return!1}},{key:"verifyHit",value:function(t){var n=Sv.workingCanvas.getContext("2d"),r=Sv.workingCanvas2.getContext("2d");n.clearRect(0,0,e.mz,e.uk),r.clearRect(0,0,e.mz,e.uk);var i=this.getBoxWithEffects(),a=t.getBoxWithEffects(),o=i.intersection(a);if(0===o.width)return!1;if(0===o.height)return!1;n.globalCompositeOperation="source-over",this.stamp(n),r.globalCompositeOperation="source-over",t.stamp(r),n.globalCompositeOperation="source-in",n.drawImage(Sv.workingCanvas2,0,0);for(var s=n.getImageData(o.x,o.y,o.width,o.height).data,u=Math.floor(s.length/4),h=0;h<u;h++){var l={x:h%o.width,y:Math.floor(h/o.width)};if(this.getAlpha(s,l,o.width)>0)return!0}return!1}},{key:"spriteThumbnail",value:function(t){var n=(0,e.HS)("div","spritethumb off",t);n.setAttribute("id",(0,e.N7)("spritethumb")),n.type="spritethumb",n.owner=this.id;var r=(0,e.HS)("canvas","thumbcanvas",n);return(0,e.DU)(r,64,64),this.drawMyImage(r,r.width,r.height),(t=(0,e.HS)("p","sname",n)).textContent=this.name,this.canEdit&&(0,e.HS)("div","brush",n),this.thumbnail=n,n}},{key:"updateSpriteThumb",value:function(){var e=this.thumbnail;if(e){var t=e.childNodes[0];this.drawMyImage(t,t.width,t.height),e.childNodes[1].textContent=this.name}}},{key:"drawMyImage",value:function(t,n,r){if(this.img){(0,e.ge)(t,n,r);var i=this.img,a=i.naturalWidth?i.naturalWidth:i.width,o=i.naturalHeight?i.naturalHeight:i.height,s=Math.min(n/a,r/o),u=t.getContext("2d"),h=Math.floor(s*a),l=Math.floor(s*o),c=Math.floor((n-s*a)/2),d=Math.floor((r-s*o)/2);sy.loadImg(i,(function(){u.drawImage(i,0,0,a,o,c,d,h,l)}))}}},{key:"wrap",value:function(){this.xcoor<0&&(this.xcoor=480+this.xcoor),this.ycoor<0&&(this.ycoor=360+this.ycoor),this.xcoor>=480&&(this.xcoor=this.xcoor-480),this.ycoor>=360&&(this.ycoor=this.ycoor-360)}},{key:"render",value:function(){if(this.sprite){var t=this.scale*e.PJ;this.sprite.scale.set(t*(this.flip?-1:1),t),this.border.scale.set(t*(this.flip?-1:1),t),this.view.x=this.xcoor*e.PJ,this.view.y=this.ycoor*e.PJ,this.sprite.rotation=this.angle*e.Zh,this.border.rotation=this.angle*e.Zh}}},{key:"export",value:function(){return Sv.stage.pixi.renderer.plugins.extract.image(this.sprite)}},{key:"getBoxWithEffects",value:function(){var e=Math.max(this.img.width,this.img.height),t=Math.floor(1.5*e*this.scale),n=Math.floor(1.5*e*this.scale);return new M(Math.floor(this.xcoor-t/2),Math.floor(this.ycoor-n/2),Math.floor(t),Math.floor(n))}},{key:"closeBalloon",value:function(){this.balloon&&(this.view.removeChild(this.balloon),this.balloon.destroy(),this.balloon=void 0)}},{key:"openBalloon",value:function(e){this.balloon&&this.closeBalloon(),this.balloon=new $m(e),this.balloon.zIndex=200,this.view.addChild(this.balloon),this.balloon.draw(this)}},{key:"offsetLeft",value:function(){return this.screenLeft()+this.sprite.width/2}},{key:"select",value:function(){this.borderOn||this.img&&(this.border.visible=!0,this.borderOn=!0)}},{key:"unselect",value:function(){this.border.visible=!1,this.borderOn=!1}},{key:"pause",value:function(){this.border.visible=!1}},{key:"resume",value:function(){this.border.visible=this.borderOn}},{key:"update",value:function(t,n){var r=this;t.md5.indexOf(".svg")>-1&&(this.canEdit=!0),this.borderOn=!1,(0,e.cl)(this,t),this.xcoor/=1,this.ycoor/=1,this.homex/=1,this.homey/=1,fy.isSampleLocalizedKey(this.name)&&Sv.isSampleOrStarter()&&(this.name=fy.localize("SAMPLE_TEXT_".concat(this.name)));for(var i=0;i<this.sounds.length;i++){var a=this.sounds[i];a.indexOf("/")>-1?function(){var e=sy.getFilenameWithExt(a);ny.duplicateAsset(a,e,(function(){m.loadProjectSound(e)})),r.sounds[i]=e}():m.loadProjectSound(a)}this.alpha=this.shown?1:0,this.getAsset((function(e){r.setCostume(e,n)}))}},{key:"getSpriteData",value:function(){var e={};return e.shown=this.shown,e.type=this.type,e.md5=this.md5,e.id=this.id,e.flip=this.flip,e.name=this.name,e.angle=this.angle,e.scale=this.scale,e.speed=this.speed,e.defaultScale=this.defaultScale,e.sounds=this.sounds,e.xcoor=1*this.xcoor.toFixed(),e.ycoor=1*this.ycoor.toFixed(),e.cx=this.cx,e.cy=this.cy,e.w=this.w,e.h=this.h,e.homex=1*this.homex.toFixed(),e.homey=1*this.homey.toFixed(),e.homescale=this.homescale,e.homeshown=this.homeshown,e.homeflip=this.homeflip,e}}]),s}(Ym),av=document.createElement("canvas"),ov=document.createElement("canvas"),sv=void 0,uv=!1,hv=!1,lv=void 0,cv=void 0,dv=!1,fv=void 0,pv=void 0,gv=!1,mv=void 0,vv=!1,yv=!1,bv=void 0,_v=void 0,Ev=void 0,Tv=!0,xv=null,kv=[],Sv=function(){function n(){t(this,n)}return r(n,null,[{key:"workingCanvas",get:function(){return av}},{key:"workingCanvas2",get:function(){return ov}},{key:"activeFocus",get:function(){return sv},set:function(e){sv=e}},{key:"changed",get:function(){return uv},set:function(e){uv=e}},{key:"storyStarted",set:function(e){hv=e}},{key:"runtime",get:function(){return lv}},{key:"stage",get:function(){return cv},set:function(e){cv=e}},{key:"inFullscreen",get:function(){return dv}},{key:"stagecolor",get:function(){return ev}},{key:"defaultSprite",get:function(){return tv}},{key:"layerTop",get:function(){return 10}},{key:"layerAboveBottom",get:function(){return 4}},{key:"dragginLayer",get:function(){return 7e3}},{key:"currentProject",get:function(){return mv},set:function(e){mv=e}},{key:"editmode",get:function(){return nv},set:function(e){nv=e}},{key:"time",set:function(e){rv=e}},{key:"userStart",set:function(e){vv=e}},{key:"onHold",get:function(){return yv},set:function(e){yv=e}},{key:"shaking",get:function(){return bv},set:function(e){bv=e}},{key:"stopShaking",get:function(){return _v},set:function(e){_v=e}},{key:"version",get:function(){return Ev}},{key:"isDebugging",get:function(){return false}},{key:"onBackButtonCallback",get:function(){return kv}},{key:"appinit",value:function(t){ev=window.Settings.stageColor,tv=window.Settings.defaultSprite,Ev=t,document.body.scrollTop=0,rv=new Date-0;var r=(0,e.ES)();ny.hascamera(),n.log("starting the app"),S.initBlocks(),Uv.loadIcon=document.createElement("img"),Uv.loadIcon.src="assets/loading.png",n.log("blocks init",n.getTime(),"sec",S.loadCount),mv=r.pmd5,nv=r.mode,(0,e.eX)(),Uv.init(),n.log("Start ui init",n.getTime(),"sec"),Uv.setProgress(10),m.init(),Rm.init(),wt.init(),qt.init(),Pt.init(),lv=new Km,Hm.init(),n.editorEvents(),Uv.load(mv),z.init(),window.Settings.autoSaveInterval>0&&(xv=window.setInterval((function(){!Tv||yv||Uv.saving||Om.infoBoxOpen||n.saveProject(null,(function(){lt.close()}))}),window.Settings.autoSaveInterval))}},{key:"storyStart",value:function(){hv=!0}},{key:"editorEvents",value:function(){document.ongesturestart=void 0,window.ontouchstart=n.unfocus,window.onmousedown=n.unfocus,window.ontouchend=void 0,window.onmouseup=void 0}},{key:"unfocus",value:function(e){rn.helpballoon&&(rn.helpballoon.parentNode.removeChild(rn.helpballoon),rn.helpballoon=void 0),document.forms.editable&&e&&e.target===document.forms.editable.field||document.forms.activetextbox&&e&&e.target===document.forms.activetextbox.typing||document.forms.projectname&&e&&e.target===document.forms.projectname.myproject||("input"===document.activeElement.tagName.toLowerCase()&&document.activeElement.blur(),n.clearSelection(),n.blur())}},{key:"clearSelection",value:function(){bv&&_v(bv)}},{key:"blur",value:function(){m.firstTime&&m.firstClick(),n.editDone(),Nt.closeMyOpenMenu()}},{key:"getSprite",value:function(){if(cv.currentPage.currentSpriteName)return cv.currentPage.findSprite(cv.currentPage.currentSpriteName)}},{key:"createSprite",value:function(e,t){return"text"===e.type?new Jm(e,t):new iv(e,t)}},{key:"getIdForSprite",value:function(e){for(var t=1;cv.findSprite("".concat(e," ").concat(t));)t++;return"".concat(e," ").concat(t)}},{key:"getIdForPage",value:function(){for(var e="page",t=1;cv.findPage("".concat(e," ").concat(t));)t++;return"".concat(e," ").concat(t)}},{key:"gestureStart",value:function(e){e.preventDefault(),m.firstTime&&m.firstClick()}},{key:"log",value:function(){}},{key:"getTime",value:function(){return(new Date-rv)/1e3}},{key:"isSampleOrStarter",value:function(){return"look"===nv||"storyStarter"===nv}},{key:"isEditable",value:function(){return"look"!==nv}},{key:"onResume",value:function(){qt.dialogOpen&&qt.recordError(),Tv=!0,xv=window.setInterval((function(){!Tv||yv||Uv.saving||Om.infoBoxOpen||n.saveProject(null,(function(){lt.close()}))}),window.Settings.autoSaveInterval)}},{key:"onPause",value:function(){Tv=!1,window.clearInterval(xv)}},{key:"saveProject",value:function(e,t){if(n.isEditable()&&!Uv.error&&uv)if("storyStarter"!==nv){if(mv)return void Uv.prepareToSave(mv,t)}else if(hv)return void n.saveStory(t);t&&t()}},{key:"saveStory",value:function(e){ny.analyticsEvent("samples","story_starter_edited",Uv.metadata.name);var t=fy.localizeSampleName(Uv.metadata.name);sy.uniqueProjectName({name:t},(function(t){var n=t.name;Uv.metadata.name=n,sy.createProject({name:n,version:Ev,mtime:(new Date).getTime().toString()},(function(t){mv=t,nv="edit",Uv.prepareToSave(mv,e)}))}),!0)}},{key:"saveAndFlip",value:function(e){yv=!0,n.stopStripsFromTop(e),n.unfocus(e),n.saveProject(e,n.flippage),ny.analyticsEvent("editor","project_editor_close")}},{key:"flippage",value:function(){lt.close(),ny.cleanassets("wav",(function(){ny.cleanassets("svg",n.switchPage)}))}},{key:"switchPage",value:function(){window.location.href=n.getGotoLink()}},{key:"getGotoLink",value:function(){return"storyStarter"===nv?hv?"home.html?place=home":"home.html?place=help":mv?"samples"===Uv.metadata.gallery?"home.html?place=help":"home.html?place=home&timestamp=".concat((new Date).getTime()):"home.html?place=home"}},{key:"updateRunStopButtons",value:function(){var t=lv.inactive();dv?((0,e.gn)("go").className=t?"go on presentationmode":"go off presentationmode",Om.updatePageControls()):((0,e.gn)("go").className=t?"go on":"go off",Rt.updateCursor()),n.getSprite()&&(t&&!dv?n.getSprite().select():n.getSprite().unselect()),t&&vv&&(cv.currentPage.updateThumb(),vv=!1)}},{key:"runStrips",value:function(e){n.stopStripsFromTop(e),n.unfocus(e),n.startGreenFlagThreads(),vv=!0}},{key:"startGreenFlagThreads",value:function(){n.resetSprites(),n.startCurrentPageStrips(["onflag","ontouch"])}},{key:"startCurrentPageStrips",value:function(e){for(var t=cv.currentPage.getSprites(),r=0;r<t.length;r++){var i=t[r];n.startScriptsFor(i,e)}}},{key:"startScriptsFor",value:function(t,n){var r=(0,e.gn)("".concat(t.id,"_scripts"));if(r)for(var i=r.owner.getBlocksType(n),a=0;a<i.length;a++){var o=i[a];lv.addRunScript(t,o)}}},{key:"stopStripsFromTop",value:function(e){e.preventDefault(),e.stopPropagation(),n.unfocus(e),n.stopStrips(),vv=!1}},{key:"stopStrips",value:function(){lv.stopThreads(),cv.currentPage.updateThumb()}},{key:"resetSprites",value:function(){cv.currentPage.reset(),cv.currentPage.updateThumb()}},{key:"fullScreen",value:function(t){"fullscreen"===(0,e.gn)("full").className?(kv.push((function(){var e=document.createEvent("TouchEvent");e.initTouchEvent(),n.quitFullScreen(e)})),n.enterFullScreen(t)):n.quitFullScreen(t)}},{key:"displayStatus",value:function(t){for(var n=["topsection","blockspalette","scripts","flip","projectinfo"],r=0;r<n.length;r++)(0,e.gn)(n[r])&&((0,e.gn)(n[r]).style.display=t)}},{key:"enterFullScreen",value:function(e){yv||(e.preventDefault(),e.stopPropagation(),n.unfocus(e),n.displayStatus("none"),dv=!0,Om.enterFullScreen(),ny.analyticsEvent("editor","full_screen_entered"),document.body.style.background="black")}},{key:"quitFullScreen",value:function(e){e.preventDefault(),e.stopPropagation(),n.displayStatus("block"),dv=!1,Om.quitFullScreen(),kv.pop(),ny.analyticsEvent("editor","full_screen_exited"),document.body.style.background="white"}},{key:"getActiveScript",value:function(){var t="".concat(cv.currentPage.currentSpriteName,"_scripts");return(0,e.gn)(t)}},{key:"getBlocks",value:function(){return n.getActiveScript().owner.getBlocks()}},{key:"setupEditableField",value:function(){(pv=(0,e.HS)("form","textform",e.Wi)).name="editable";var t=(0,e.HS)("input","textinput",pv);t.name="field";var r=function(e){e.preventDefault(),e.stopPropagation(),e.target.blur(),kv.pop()};t.onkeypress=function(e){var t;13===((t=e).keyCode||t.which)&&r(t)},pv.onsubmit=function(e){r(e)},t.maxLength=50,t.onfocus=n.handleTextFieldFocus,t.onblur=n.handleTextFieldBlur}},{key:"editArg",value:function(e,t){e.preventDefault(),e.stopPropagation(),t&&t.owner.isText()?n.textClicked(e,t):n.numberClicked(e,t),kv.push((function(){n.editDone()}))}},{key:"textClicked",value:function(t,r){var i=r.owner;sv=i;var a=i.getScreenPt(),o=(r=n.getActiveScript().parentNode).offsetWidth,s=r.offsetHeight,u=a.x+480*e._X>o?o-486*e._X:a.x-6*e._X,h=document.forms.editable.field;h.style.textAlign="center",document.forms.editable.style.left="".concat(u,"px");var l=a.y+55*e._X;document.forms.editable.style.top="".concat(l,"px"),e.Dt&&AndroidInterface.scratchjr_setsoftkeyboardscrolllocation(l*window.devicePixelRatio,(l+s)*window.devicePixelRatio),document.forms.editable.className="textform on",h.value=i.argValue,e.Dt&&AndroidInterface.scratchjr_forceShowKeyboard(),h.focus()}},{key:"handleTextFieldFocus",value:function(e){e.preventDefault(),e.stopPropagation(),sv.oldvalue=sv.input.textContent}},{key:"handleTextFieldBlur",value:function(t){kv.pop(),t.preventDefault(),t.stopPropagation();var r=document.forms.editable.field,i=r.value.substring(0,r.maxLength);if(sv.argValue=i,sv.setValue(i),document.forms.editable.className="textform off",sv.daddy.div.parentNode){var a=sv.daddy.div.parentNode.owner.spr,o={action:"scripts",where:a.page.id,who:a.id};sv.input.textContent!==sv.oldvalue&&(Hm.record(o),n.storyStart("ScratchJr.handleTextFieldBlur"))}sv=void 0,document.body.scrollTop=0,document.body.scrollLeft=0,e.Dt&&AndroidInterface.scratchjr_forceHideKeyboard()}},{key:"setupKeypad",value:function(){(fv=(0,e.HS)("div","picokeyboard",e.Wi)).ontouchstart=n.eatEvent,fv.onmousedown=n.eatEvent;for(var t=(0,e.HS)("div","insidekeyboard",fv),r=1;r<10;r++)n.keyboardAddKey(t,r,"onekey");n.keyboardAddKey(t,"-","onekey minus"),n.keyboardAddKey(t,"0","onekey"),n.keyboardAddKey(t,void 0,"onekey delete")}},{key:"eatEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"keyboardAddKey",value:function(t,r,i){var a=(0,e.HS)("div",i,t);(0,e.HS)("span",void 0,a).textContent=r||"",a.ontouchstart=n.numEditKey,a.onmousedown=n.numEditKey}},{key:"numberClicked",value:function(e,t){var r=sv?sv.delta:0;sv&&"blockarg"===sv.type&&(sv.div.className="numfield off",n.numEditDone());var i=t.owner;(sv=i).delta=r,i.oldvalue=t.textContent,sv.div.className="numfield on",fv.className="picokeyboard on",gv=!0;var a=t.parentNode.parentNode.owner;Number(a.min)<0?n.setMinusKey():n.setSpaceKey(),0===r&&n.needsToScroll(i),window.onkeydown=n.handleKeyDown}},{key:"needsToScroll",value:function(t){var r=n.getActiveScript(),i=t.daddy.div.left+t.daddy.div.offsetWidth+r.left,a=window.innerWidth-fv.offsetWidth-10,o=i>a?a-i:0;if(o<0){var s={duration:.5,transition:"ease-out",style:{left:"".concat(r.left+o,"px")},onComplete:function(){Ft.scroll.refresh()}};(0,e.zg)(r,s)}sv.delta=o}},{key:"handleKeyDown",value:function(e){e.keyCode>=48&&e.keyCode<=57||"-"===e.key?n.fillValueWithKey(e.key):"Backspace"===e.key&&n.numEditDelete()}},{key:"numEditKey",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.target;if(t){""===t.className&&(t=t.parentNode),"onekey space"!==t.className&&m.sndFX("keydown.wav");var r=t.textContent;r?n.fillValueWithKey(r):"onekey delete"!==t.parentNode.className&&"onekey delete"!==t.className||n.numEditDelete()}}},{key:"fillValueWithKey",value:function(e){var t=sv.input.textContent;gv&&(gv=!1,t="0"),"-"!==e||"0"===t?("0"===t?t=e:t+=e,"NaN"!==Number(t).toString()&&(Number(t)>99||Number(t)<-99)?m.sndFX("boing.wav"):sv.setValue(t)):m.sndFX("boing.wav")}},{key:"setSpaceKey",value:function(){fv.childNodes[0].childNodes[9].className="onekey space",fv.childNodes[0].childNodes[9].childNodes[0].textContent=""}},{key:"setMinusKey",value:function(){fv.childNodes[0].childNodes[9].className="onekey minus",fv.childNodes[0].childNodes[9].childNodes[0].textContent="-"}},{key:"validateNumber",value:function(e){return Number(e)}},{key:"revokeInput",value:function(e){return e}},{key:"numEditDelete",value:function(){var e=sv.input.textContent;0!==e.length&&(e=e.substring(0,e.length-1)),0===e.length&&(e="0"),sv.setValue(e)}},{key:"editDone",value:function(){"INPUT"===document.activeElement.tagName&&document.activeElement.blur(),void 0!==sv&&"blockarg"===sv.type&&(sv.isText()?document.forms.editable.field.blur():(n.closeNumberEdit(),kv.pop()))}},{key:"closeNumberEdit",value:function(){n.numEditDone(),n.resetScroll(),fv.className="picokeyboard off",sv.div.className="numfield off",sv=void 0,window.onkeydown=void 0}},{key:"numEditDone",value:function(){var e=sv.input.textContent;"-"===e&&(e=0),"-0"===e&&(e=0),e=n.validateNumber(e);var t=sv;if(sv.setValue(parseFloat(e)),t.argValue=e,t.daddy&&t.daddy.div.parentNode.owner){var r=t.daddy.div.parentNode.owner.spr;if(r){var i={action:"scripts",where:r.page.id,who:r.id};t.argValue!==t.oldvalue&&(n.storyStart("ScratchJr.numEditDone"),Hm.record(i))}}}},{key:"resetScroll",value:function(){var t=sv.delta;if(t<0){var r=n.getActiveScript(),i={duration:.5,transition:"ease-out",style:{left:"".concat(r.left-t,"px")},onComplete:function(){Ft.scroll.refresh()}};(0,e.zg)(r,i)}}},{key:"validate",value:function(e,t){return 0===e.replace(/\s*/g,"").length?t:e}},{key:"makeThumb",value:function(e,t,n){sy.getAsset(e,(function(r){var i=r.split(",")[1],a=sy.getThumbnail(atob(i),t,n,120,90).split(",")[1],o=e.split(".")[0];ny.setmedianame(a,o,"png")}))}},{key:"goBack",value:function(){if(0===kv.length){var e=document.createEvent("TouchEvent");e.preventDefault(),e.stopPropagation(),n.saveAndFlip(e)}else(0,kv[kv.length-1])()}}]),n}();window.ScratchJr=Sv;var wv,Mv,Av,Rv,Cv,Pv,Iv,Nv=void 0,Ov=-1,Dv=!1,Lv=void 0,Bv=void 0,Fv=!1,Gv=1,Uv=function(){function n(){t(this,n)}return r(n,null,[{key:"metadata",get:function(){return Nv},set:function(e){Nv=e}},{key:"mediaCount",get:function(){return Ov},set:function(e){Ov=e}},{key:"loadIcon",get:function(){return Bv},set:function(e){Bv=e}},{key:"error",get:function(){return Fv}},{key:"clear",value:function(){Sv.stage.clear(),Om.clear()}},{key:"load",value:function(){Gv=1,Sv.log("Project load status",Sv.getTime(),"sec",S.loadCount),S.loadCount>0?setTimeout((function(){n.delayLoad()}),32):n.startLoad()}},{key:"delayLoad",value:function(){S.loadCount<1?n.startLoad():setTimeout((function(){n.delayLoad()}),32)}},{key:"startLoad",value:function(){Sv.log("all UI assets recieved - procced to call server",Sv.getTime(),"sec"),n.setProgress(20),Om.layout(),sy.getObject(Sv.currentProject,n.dataRecieved)}},{key:"dataRecieved",value:function(t){Sv.log("got project metadata",Sv.getTime(),"sec");var r=JSON.parse(t)[0];Nv=sy.parseProjectData(r),Ov=-1;var i=function(){"id"in Nv&&(Nv.isgift="0",sy.setProjectIsGift(Nv)),rn.selectCategory(1),setTimeout((function(){rn.selectCategory(1)}),100),wt.layout(),n.setProgress(100),n.liftCurtain(),Sv.stage.currentPage.update(),Sv.changed=!1,Sv.storyStarted=!1,Om.needsScroll(),Sv.log("all thumbnails updated",Sv.getTime(),"sec"),e.Dt&&AndroidInterface.notifyEditorDoneLoading()};Nv.json?n.loadData(Nv.json,i):(Ov=0,new Lm(Sv.getIdForPage()),rn.selectCategory(1),setTimeout((function(){rn.selectCategory(1)}),100),n.loadwait(i))}},{key:"init",value:function(){Sv.log("Project init",Sv.getTime(),"sec"),(0,e.HS)("div","modal-backdrop fade",e.Wi.parentNode).setAttribute("id","backdrop"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"none"});var t=(0,e.HS)("div","modal-outer",e.Wi.parentNode),r=(0,e.HS)("div","modal-middle",t),i=(0,e.HS)("div","modal hide fade",r);i.setAttribute("id","modaldialog"),(0,e.cl)((0,e.gn)("modaldialog").style,{});var a=(0,e.HS)("div","modal-body",i);a.setAttribute("id","modalbody"),(0,e.cl)(a.style,{zoom:e._X}),Bv.complete?n.addFeedback():Bv.onload=function(){n.addFeedback()},n.drawBlind()}},{key:"addFeedback",value:function(){var t=(0,e.gn)("modalbody");(0,e.HS)("div","loadscreenfill",t),(0,e.HS)("div","topfill",t),(0,e.HS)("div","loadscreencover",t).setAttribute("id","progressbar"),(0,e.HS)("div","topcover",t).setAttribute("id","topcover"),(0,e.HS)("div","progressbar2",t).setAttribute("id","progressbar2"),(0,e.HS)("div","loadicon",t).appendChild(Bv)}},{key:"setProgress",value:function(t){if((0,e.gn)("progressbar")){var n=66-Math.round(66*t/100);Sv.log("setProgress",t,n,Ov,Gv),(0,e.gn)("progressbar").style.height="".concat(n,"px"),0===n&&((0,e.gn)("progressbar2").style.height="0px",(0,e.gn)("topcover").style.background="#F9A737")}}},{key:"drawBlind",value:function(){(0,e.gn)("backdrop").setAttribute("class","modal-backdrop fade in"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"block"}),(0,e.cl)((0,e.gn)("modaldialog").style,{display:"block"}),(0,e.gn)("modaldialog").setAttribute("class","modal fade in")}},{key:"loadwait",value:function(e){null!==Lv&&window.clearInterval(Lv),Gv=Ov,Ov<=0?n.getStarted(e):Lv=window.setInterval((function(){n.loadTask(e)}),32)}},{key:"loadTask",value:function(e){Ov<=0?n.getStarted(e):n.setProgress(n.getMediaLoadRatio(70))}},{key:"getMediaLoadRatio",value:function(e){return Ov>Gv&&(Gv=Ov),20+e-Ov/Gv*e}},{key:"getStarted",value:function(e){n.setProgress(90),Lv&&window.clearInterval(Lv),Lv=null,Sv.log("Project images retrieved from server",Sv.getTime(),"sec"),n.setLoadPage(wv,e),Sv.log("load done",Sv.getTime(),"sec","-- media missing = ",Ov),Sv.stage.resetPages(),Sv.runtime.beginTimer()}},{key:"liftCurtain",value:function(){(0,e.gn)("backdrop").setAttribute("class","modal-backdrop fade"),(0,e.cl)((0,e.gn)("backdrop").style,{display:"none"}),(0,e.gn)("modaldialog").setAttribute("class","modal fade"),(0,e.cl)((0,e.gn)("modaldialog").style,{display:"none"})}},{key:"setLoadPage",value:function(e,t){Sv.log("setLoadPage",Sv.getTime(),"sec"),Sv.stage.getPagesID().indexOf(e)<0?Sv.stage.currentPage=Sv.stage.pages[0]:Sv.stage.currentPage=Sv.stage.getPage(e);for(var n=Sv.stage.pages,r=0;r<n.length;r++)Sv.stage.currentPage===n[r]?n[r].show():n[r].hide();t&&t()}},{key:"loadData",value:function(t,r){try{t="string"==typeof t?JSON.parse(t):t,Ov=0,n.loadme(t,r),Fv=!1}catch(t){if(console.log(t),window.reloadDebug)return void document.write("".concat(t.message,"\n").concat(Nv.json));lt.open(e.Wi,(0,e.gn)("flip"),"Error -- project data corrupted.","#ff0000"),Lv&&window.clearInterval(Lv),Lv=null,rn.selectCategory(1),setTimeout((function(){rn.selectCategory(1)}),100),n.liftCurtain(),Fv=!0}}},{key:"loadme",value:function(e,t){n.recreate(e),n.loadwait(t)}},{key:"getLoadType",value:function(e,t,n){return null!==e?"bkg":n?t&&n?"modify":"add":"none"}},{key:"recreate",value:function(e){Sv.log("Project data structures start loading",Sv.getTime(),"sec"),Ov=0,Sv.stage.pages=[];var t=e.pages;wv=e.currentPage;for(var r=0;r<t.length;r++)n.recreatePage(t[r],e[t[r]]);Gv=Ov}},{key:"recreatePage",value:function(e,t,n){new Lm(e,t,n).hide()}},{key:"substractCount",value:function(){Ov--,"modal-backdrop fade in"===(0,e.gn)("backdrop").className&&0!==Gv&&n.setProgress(n.getMediaLoadRatio(70))}},{key:"recreateObject",value:function(t,r,i,a,o){var s,u=i.scripts;if(i.page=t,"sprite"===i.type){Ov++,i.defaultScale||(i.defaultScale=.5),s=Sv.createSprite(i,(function(t){t.setPos(i.xcoor,i.ycoor),Ov--,"modal-backdrop fade in"===(0,e.gn)("backdrop").className&&n.setProgress(n.getMediaLoadRatio(70)),Sv.log(t.name,Sv.getTime(),"sec"),a&&a(t)}));for(var h=(0,e.gn)("".concat(r,"_scripts")).owner,l=0;l<u.length;l++)h.recreateStrip(u[l]);o?h.activate():h.deactivate()}else s=Sv.createSprite(i,a);return s}},{key:"prepareToSave",value:function(t,r){Dv?(lt.open(e.Wi,(0,e.gn)("flip"),"Waiting","#28A5DA"),n.waitUntilSaved(t,r)):(lt.open(e.Wi,(0,e.gn)("flip"),"Saving","#28A5DA"),n.save(t,r))}},{key:"waitUntilSaved",value:function(e,t){Dv?setTimeout((function(){n.waitUntilSaved(e,t)}),500):n.save(e,t)}},{key:"thumbnailUnique",value:function(e,t,n){var r={cond:"deleted = ? AND id != ? AND gallery IS NULL",items:["name","thumbnail","id"]};r.values=["NO",t],sy.query(ny.database,r,(function(t){for(var r=JSON.parse(t),i=!0,a=0;a<r.length;a++){var o=sy.parseProjectData(r[a]).thumbnail;if(o){var s="string"==typeof o?JSON.parse(o):o;s&&s.md5&&s.md5===e&&(i=!1)}}n(i)}))}},{key:"save",value:function(e,t){Dv=!0;var r=Nv.thumbnail;if(r&&"storyStarter"!==Sv.editmode){var i="string"==typeof r?JSON.parse(r):r;i.md5.indexOf("samples/")<0&&n.thumbnailUnique(i.md5,e,(function(e){e&&ny.remove(i.md5,ny.trace)}))}Nv.id=e,Nv.json=n.getProject(Sv.stage.pages[0].id);var a=function(){Dv=!1,t&&t()},o=function(e){Nv.thumbnail={pagecount:Sv.stage.pages.length,md5:e},Nv.mtime=(new Date).getTime().toString(),sy.saveProject(Nv,a)},s=n.getThumbnailPNG(Sv.stage.pages[0],192,144).split(",")[1];ny.getmd5(s,(function(e){!function(e,t){var n="".concat(Sv.currentProject,"_").concat(e);ny.setmedianame(t,n,"png",o)}(e,s)}))}},{key:"getProject",value:function(e){var t={};t.pages=Sv.stage.getPagesID(),t.currentPage=e;for(var n=0;n<Sv.stage.pages.length;n++)t[Sv.stage.pages[n].id]=Sv.stage.pages[n].encodePage();return t}},{key:"getUndo",value:function(){return n.getProject(Sv.stage.currentPage.id)}},{key:"encodeSprite",value:function(e){return Sv.stage.findSprite(e).getData()}},{key:"encodeStrip",value:function(e){for(var t=[],r=["playsnd","gotopage","playusersnd","setcolor","onmessage","message","setspeed"],i=["repeat"],a=["caretcmd","caretend","caretstart"];null!==e;){var o=e.blocktype;if(a.indexOf(o)>-1)e=e.next;else{"caretrepeat"===o&&(o="repeat");var s=null!==e.arg||r.indexOf(o)>-1?e.getArgValue():null;s||0===s||(s="null");var u=[o,s,e.div.left/e.scale,e.div.top/e.scale];if(i.indexOf(o)>-1){var h=n.encodeStrip(e.inside);u.push(h)}t.push(u),e=e.next}}return t}},{key:"getThumbnailPNG",value:function(t,n,r){var i=document.createElement("canvas");(0,e.ge)(i,n,r);var a=i.getContext("2d");a.fillStyle=Sv.stagecolor,a.fillRect(0,0,n,r);var o=t.export();return a.drawImage(o,0,0,e.mz,e.uk,0,0,n,r),i.toDataURL("image/png")}},{key:"drawPNGInCanvas",value:function(t,n,r){var i=document.createElement("canvas");return(0,e.ge)(i,n,r),i.getContext("2d").drawImage(t,0,0,n,r),i}},{key:"drawSVGinCanvas",value:function(t,n,r){var i=document.createElement("canvas");(0,e.ge)(i,n,r);for(var a=i.getContext("2d"),o=0;o<t.childElementCount;o++)Oe.drawLayer(t.childNodes[o],a,Oe.drawLayer);return i}},{key:"maskBorders",value:function(e,t,n){e.save(),e.globalCompositeOperation="destination-in","PBS"!==window.Settings.edition&&e.drawImage(S.projectThumb,0,0,t,n),e.restore()}}]),n}(),Hv=!1,jv=function(){function n(){t(this,n)}return r(n,null,[{key:"getTargetPoint",value:function(t){if(e.Em){if(t.touches&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(t.changedTouches)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}}return{x:t.clientX,y:t.clientY}}}]),n}(),Kv=function(){function n(){t(this,n)}return r(n,null,[{key:"init",value:function(){Rv=Jv.version,Mv=(0,e.gn)("htmlcontents");var t=(0,e.HS)("div","inner",Mv);(0,e.HS)("div","scrollarea",t).setAttribute("id","scrollarea"),Mv.ontouchstart=n.handleTouchStart,Mv.ontouchend=n.handleTouchEnd,Mv.onmousedown=n.handleTouchStart,Mv.onmouseup=n.handleTouchEnd,n.displayYourProjects()}},{key:"emptyProjectThumbnail",value:function(t){var n=(0,e.HS)("div","projectthumb",t);(0,e.HS)("div","aproject empty",n),n.id="newproject"}},{key:"importProjectThumbnail",value:function(t){var n=(0,e.HS)("div","projectthumb",t);(0,e.HS)("div","aproject import",n),n.id="importproject",n.setAttribute("id","importproject")}},{key:"handleTouchStart",value:function(e){if(!Hv){Hv=!0,setTimeout((function(){Hv=!1}),1e3),n.dragging=!1,n.holding=!1;var t=n.getMouseTarget(e);t!==n.actionTarget&&n.actionTarget&&n.actionTarget.childElementCount>2&&(n.actionTarget.childNodes[n.actionTarget.childElementCount-1].style.visibility="hidden"),n.actionTarget=t,n.initialPt=jv.getTargetPoint(e),n.actionTarget&&(n.actionTarget,Mv.ontouchmove=n.handleMove,Mv.onmousemove=n.handleMove,Cv=setTimeout((function(){n.actionTarget&&n.actionTarget.childElementCount>2&&(n.actionTarget.childNodes[n.actionTarget.childElementCount-1].style.visibility="visible",n.holding=!0)}),500)),n.scrolltop=document.body.scrollTop}}},{key:"handleMove",value:function(e){var t=jv.getTargetPoint(e),r=w.diff(t,n.initialPt);!n.dragging&&w.len(r)>20&&(n.dragging=!0),n.dragging&&(Cv&&clearTimeout(Cv),Cv=void 0)}},{key:"getMouseTarget",value:function(e){var t=e.target;if(t===Mv)return null;if(t.parentNode&&!t.parentNode.tagName)return null;for(;t.parentNode&&t.parentNode!==Mv&&"scrollarea"!==t.parentNode.getAttribute("class");)t=t.parentNode;return t.parentNode&&t.parentNode!==Mv?t:null}},{key:"handleTouchEnd",value:function(e){e.preventDefault(),e.stopPropagation(),e.touches&&e.touches.length>1||(Mv.ontouchmove=void 0,Mv.onmousemove=void 0,Cv&&clearTimeout(Cv),Cv=void 0,n.dragging||n.performAction(e))}},{key:"performAction",value:function(t){if(t.preventDefault(),t.stopPropagation(),n.actionTarget&&!n.holding){var r=n.actionTarget.id;switch(n.getAction(t)){case"project":m.sndFX("keydown.wav"),r&&("newproject"===r?n.createNewProject():"importproject"===r?ny.openPickProjectDialog():ny.setfile("homescroll.sjr",(0,e.gn)("wrapc").scrollTop,(function(){ny.analyticsEvent("lobby","existing_project_edited"),window.location.href="editor.html?pmd5=".concat(r,"&mode=edit")})));break;case"delete":m.sndFX("cut.wav"),Uv.thumbnailUnique(n.actionTarget.thumb,n.actionTarget.id,(function(e){e&&ny.remove(n.actionTarget.thumb,ny.trace)})),ny.setfield(ny.database,n.actionTarget.id,"deleted","YES",n.removeProjThumb);break;default:n.actionTarget&&n.actionTarget.childElementCount>2&&(n.actionTarget.childNodes[n.actionTarget.childElementCount-1].style.visibility="hidden")}}}},{key:"createNewProject",value:function(){ny.analyticsEvent("lobby","project_created");var e={};e.name=n.getNextName(fy.localize("NEW_PROJECT_PREFIX")),e.version=Rv,e.mtime=(new Date).getTime().toString(),sy.createProject(e,n.gotoEditor)}},{key:"gotoEditor",value:function(t){ny.setfile("homescroll.sjr",(0,e.gn)("wrapc").scrollTop,(function(){window.location.href="editor.html?pmd5=".concat(t,"&mode=edit")}))}},{key:"getNextName",value:function(t){for(var n=[],r=(0,e.gn)("scrollarea"),i=0;i<r.childElementCount;i++)"newproject"!==r.childNodes[i].id&&"importproject"!==r.childNodes[i].id&&n.push(r.childNodes[i].childNodes[1].childNodes[0].textContent);for(var a=1;n.indexOf("".concat(t," ").concat(a))>-1;)a++;return"".concat(t," ").concat(a)}},{key:"removeProjThumb",value:function(){n.actionTarget&&n.actionTarget.parentNode&&n.actionTarget.parentNode.removeChild(n.actionTarget),n.actionTarget=void 0}},{key:"getAction",value:function(e){if(!n.actionTarget)return"none";var t=n.actionTarget.childElementCount>2&&"visible"===n.actionTarget.childNodes[n.actionTarget.childElementCount-1].style.visibility;return e&&t&&"closex"===(window.event?window.event.srcElement:e.target).getAttribute("class")?"delete":"project"}},{key:"displayYourProjects",value:function(){ny.getfile("homescroll.sjr",(function(e){var t=Number(atob(e));Av="NaN"===t.toString()?0:t;var r={cond:"deleted = ? AND version = ? AND gallery IS NULL",items:["name","thumbnail","id","isgift"]};r.values=["NO",Rv],r.order="ctime desc",sy.query(ny.database,r,n.displayProjects)}))}},{key:"displayProjects",value:function(t){for(var r=JSON.parse(t),i=(0,e.gn)("scrollarea");i.childElementCount>0;)i.removeChild(i.childNodes[0]);n.emptyProjectThumbnail(i),"PBS"!==window.Settings.edition&&n.importProjectThumbnail(i);for(var a=0;a<r.length;a++)n.addProjectLink(i,r[a]);setTimeout((function(){Jv.busy=!1}),1e3),(0,e.gn)("wrapc")&&((0,e.gn)("wrapc").scrollTop=Av)}},{key:"addProjectLink",value:function(t,r){var i=sy.parseProjectData(r),a=i.id,o=i.thumbnail;if(o){var s="string"==typeof o?JSON.parse(o):o,u=s.pagecount?s.pagecount:1,h=(0,e.HS)("div","projectthumb",t);h.setAttribute("id",a),h.type="projectthumb",h.thumb=s.md5;var l=(0,e.HS)("div","aproject p".concat(u),h);n.insertThumbnail(l,192,144,s);var c=(0,e.HS)("div","projecttitle",h);(0,e.HS)("h4",void 0,c).textContent=i.name;var d=(0,e.HS)("div","share",h),f=(0,e.HS)("div","ribbonHorizontal",h),p=(0,e.HS)("div","ribbonVertical",h);"0"!==i.isgift&&(d.style.visibility="visible",f.style.visibility="visible",p.style.visibility="visible"),(0,e.HS)("div","closex",h)}}},{key:"insertThumbnail",value:function(t,n,r,i){var a=i.md5,o=(0,e.HS)("img",void 0,t);a&&sy.getAsset(a,(function(e){o.src=e})),o.ondragstart=function(){return!1}}}]),n}(),Xv=function(){function n(){t(this,n)}return r(n,null,[{key:"init",value:function(){Pv=(0,e.gn)("htmlcontents"),(0,e.gn)("tabicon").ontouchstart=n.playHowTo,(0,e.gn)("tabicon").onclick=n.playHowTo,(0,e.HS)("div","samples off",Pv).setAttribute("id","samples"),n.display("samples")}},{key:"playHowTo",value:function(e){e.preventDefault(),e.stopPropagation(),m.sndFX("tap.wav"),window.location.href="gettingstarted.html?place=help"}},{key:"display",value:function(t){for(var r=rt[t],i=(0,e.gn)(t),a=function(t,r){var i=(0,e.gn)("sample-".concat(t)),a=sy.parseProjectData(JSON.parse(r)[0]);i.childNodes[1].textContent=fy.localizeSampleName(a.name);var o=i.childNodes[0].childNodes[1];n.insertThumbnail(o,a.thumbnail),i.onclick=function(e){n.loadMe(e,i)}},o=0;o<r.length;o++)n.addLink(i,o,r[o]),n.requestFromServer(o,r[o],a);setTimeout(n.show,10)}},{key:"show",value:function(){Jv.busy=!1,Pv.parentNode.scrollTop=0,(0,e.gn)("samples").className="samples on"}},{key:"loadMe",value:function(e,t){e.preventDefault(),e.stopPropagation(),m.sndFX("tap.wav"),ny.analyticsEvent("samples","sample_opened",t.textContent);var n=t.md5;window.location.href="editor.html?pmd5=".concat(n,"&mode=").concat(window.Settings.useStoryStarters?"storyStarter":"look")}},{key:"insertThumbnail",value:function(e,t){var n=t.md5;n&&(e.style.backgroundImage="url('".concat(n,"')"))}},{key:"addLink",value:function(t,n,r){var i=(0,e.HS)("div","samplethumb",t);i.setAttribute("id","sample-".concat(n)),i.md5=r,i.type="samplethumb";var a=(0,e.HS)("div","thumb pos".concat(n),i);(0,e.HS)("div","woodframe",a),(0,e.HS)("div","sampleicon",a),(0,e.HS)("p",void 0,i).textContent="Sample ".concat(n)}},{key:"requestFromServer",value:function(e,t,n){var r=new XMLHttpRequest;r.addEventListener("error",(function(e){e.preventDefault(),e.stopPropagation()}),!1),r.onreadystatechange=function(){4===r.readyState&&n(e,r.responseText)},r.open("GET",t,!0),r.send(null)}}]),n}(),zv=void 0,Vv=!1,Wv="inapp/",Yv=null,Jv=function(){function n(){t(this,n)}return r(n,null,[{key:"version",get:function(){return zv}},{key:"busy",set:function(e){Vv=e}},{key:"errorTimer",get:function(){return Iv}},{key:"appinit",value:function(t){(0,e.eX)(),zv=t;var r=(0,e.ES)().place;m.addSound("sounds/","tap.wav",m.uiSounds),m.addSound("sounds/","cut.wav",m.uiSounds),m.init(),n.setPage(r||"home"),window.Settings.settingsPageDisabled&&((0,e.gn)("settings").style.visibility="hidden"),(0,e.gn)("hometab").onclick=function(){"home on"!==(0,e.gn)("hometab").className&&n.setPage("home")},(0,e.gn)("helptab").onclick=function(){"help on"!==(0,e.gn)("helptab").className&&n.setPage("help")},(0,e.gn)("booktab").onclick=function(){"book on"!==(0,e.gn)("booktab").className&&n.setPage("book")},(0,e.gn)("geartab").onclick=function(){"gear on"!==(0,e.gn)("geartab").className&&n.setPage("gear")},(0,e.gn)("abouttab").onclick=function(){"tab on"!==(0,e.gn)("abouttab").className&&n.setSubMenu("about")},(0,e.gn)("interfacetab").onclick=function(){"tab on"!==(0,e.gn)("interfacetab").className&&n.setSubMenu("interface")},(0,e.gn)("painttab").onclick=function(){"tab on"!==(0,e.gn)("painttab").className&&n.setSubMenu("paint")},(0,e.gn)("blockstab").onclick=function(){"tab on"!==(0,e.gn)("blockstab").className&&n.setSubMenu("blocks")},(0,e.gn)("privacytab").onclick=function(){"tab2 on"!==(0,e.gn)("privacytab").className&&n.setSubMenu("privacy")},e.Dt&&AndroidInterface.notifyDoneLoading()}},{key:"setPage",value:function(t){Vv||("home on"===(0,e.gn)("hometab").className?ny.setfile("homescroll.sjr",(0,e.gn)("wrapc").scrollTop,(function(){n.changePage(t)})):n.changePage(t))}},{key:"changePage",value:function(t){n.selectButton(t),document.documentElement.scrollTop=0;for(var r=(0,e.gn)("wrapc");r.childElementCount>0;)r.removeChild(r.childNodes[0]);switch(t){case"home":Vv=!0,m.sndFX("tap.wav"),n.loadProjects(r);break;case"help":Vv=!0,m.sndFX("tap.wav"),n.loadSamples(r);break;case"book":n.loadGuide(r);break;case"gear":m.sndFX("tap.wav"),n.loadSettings(r)}Yv=t}},{key:"loadProjects",value:function(t){document.ontouchmove=void 0,document.onmousemove=void 0,(0,e.gn)("topsection").className="topsection home",(0,e.gn)("tabheader").textContent=fy.localize("MY_PROJECTS"),(0,e.gn)("subtitle").textContent="",(0,e.gn)("footer").className="footer off",(0,e.gn)("wrapc").scrollTop=0,(0,e.gn)("wrapc").className="contentwrap scroll",(0,e.HS)("div","htmlcontents home",t).setAttribute("id","htmlcontents"),Kv.init()}},{key:"loadSamples",value:function(t){(0,e.gn)("topsection").className="topsection help",(0,e.gn)("tabheader").textContent=fy.localize("QUICK_INTRO"),(0,e.gn)("subtitle").textContent=fy.localize("SAMPLE_PROJECTS"),(0,e.gn)("footer").className="footer off",(0,e.gn)("wrapc").scrollTop=0,(0,e.gn)("wrapc").className="contentwrap noscroll",(0,e.HS)("div","htmlcontents help",t).setAttribute("id","htmlcontents"),document.ontouchmove=function(e){e.preventDefault()},document.onmousemove=function(e){e.preventDefault()},Xv.init()}},{key:"loadGuide",value:function(t){(0,e.gn)("topsection").className="topsection book",(0,e.gn)("footer").className="footer on",(0,e.HS)("div","htmlcontents home",t).setAttribute("id","htmlcontents"),setTimeout((function(){n.setSubMenu("about")}),250)}},{key:"loadSettings",value:function(t){(0,e.gn)("topsection").className="topsection book",(0,e.gn)("footer").className="footer off",(0,e.gn)("wrapc").scrollTop=0,(0,e.gn)("wrapc").className="contentwrap scroll";var n=(0,e.HS)("div","htmlcontents settings",t);n.setAttribute("id","htmlcontents"),(0,e.HS)("h1","localizationtitle",n).textContent=fy.localize("SELECT_LANGUAGE");var r,a=(0,e.HS)("div","languagebuttons",n);for(var o in window.Settings.supportedLocales){var s="";window.Settings.supportedLocales[o]===fy.currentLocale&&(s=" selected"),(r=(0,e.HS)("div","localizationselect".concat(s),a)).textContent=o,r.onclick=function(e){m.sndFX("tap.wav");var t=window.Settings.supportedLocales[e.target.textContent];i.set("localization",t),ny.analyticsEvent("lobby","language_changed",t),window.location="?place=gear"}}}},{key:"setSubMenu",value:function(t){if(!Vv){document.ontouchmove=void 0,document.onmousemove=void 0,Vv=!0,m.sndFX("tap.wav"),n.selectSubButton(t),document.documentElement.scrollTop=0,(0,e.gn)("wrapc").scrollTop=0;for(var r,i=(0,e.gn)("wrapc");i.childElementCount>0;)i.removeChild(i.childNodes[0]);switch(t){case"about":r="".concat(Wv,"about.html"),n.loadLink(i,r,"contentwrap scroll","htmlcontents scrolled");break;case"interface":document.ontouchmove=function(e){e.preventDefault()},document.onmousemove=function(e){e.preventDefault()},r="".concat(Wv,"interface.html"),n.loadLink(i,r,"contentwrap noscroll","htmlcontents fixed");break;case"paint":document.ontouchmove=function(e){e.preventDefault()},document.onmousemove=function(e){e.preventDefault()},r="".concat(Wv,"paint.html"),n.loadLink(i,r,"contentwrap noscroll","htmlcontents fixed");break;case"blocks":r="".concat(Wv,"blocks.html"),n.loadLink(i,r,"contentwrap scroll","htmlcontents scrolled");break;case"privacy":r="".concat(Wv,"privacy.html"),n.loadLink(i,r,"contentwrap scroll","htmlcontents scrolled");break;default:n.missing(t,i)}}}},{key:"selectSubButton",value:function(t){for(var n=["about","interface","paint","blocks","privacy"],r=0;r<n.length;r++){var i=(0,e.gn)("".concat(n[r],"tab")),a=i.className.split(" ")[0];i.className=a+(n[r]===t?" on":" off")}}},{key:"selectButton",value:function(t){for(var n=["home","help","book","gear"],r=0;r<n.length;r++)(0,e.gn)("".concat(n[r],"tab")).className="".concat(n[r],t===n[r]?" on":" off")}},{key:"loadLink",value:function(t,r,i,a){document.documentElement.scrollTop=0,(0,e.gn)("wrapc").scrollTop=0,(0,e.gn)("wrapc").className=i,(0,e.HS)("iframe","htmlcontents",t).setAttribute("id","htmlcontents"),(0,e.gn)("htmlcontents").className=a,(0,e.gn)("htmlcontents").src=r,(0,e.gn)("htmlcontents").onload=function(){Iv&&clearTimeout(Iv),Iv=void 0,Vv=!1,(0,e.gn)("wrapc").scrollTop=0},Iv=window.setTimeout((function(){n.errorLoading("Loading timeout")}),2e4)}},{key:"errorLoading",value:function(t){Iv&&clearTimeout(Iv),Iv=void 0;for(var n=(0,e.gn)("wrapc");n.childElementCount>0;)n.removeChild(n.childNodes[0]);var r=(0,e.HS)("div","htmlcontents",n);r.setAttribute("id","htmlcontents");var i=(0,e.HS)("div","errormsg",r);(0,e.HS)("h1",void 0,i).textContent=t,Vv=!1}},{key:"missing",value:function(t,n){(0,e.gn)("wrapc").className="contentwrap scroll";var r=(0,e.HS)("div","htmlcontents",n);r.setAttribute("id","htmlcontents"),r=(0,e.HS)("div","errormsg",r),(0,e.HS)("h1",void 0,r).textContent="".concat(t.toUpperCase(),": UNDER CONSTRUCTION"),Vv=!1}},{key:"goHome",value:function(){"home"===Yv?window.location.href="index.html?back=true":n.setPage("home")}},{key:"refresh",value:function(){null!==(0,e.gn)("hometab")&&n.setPage("home")}},{key:"showImportErrorDialog",value:function(){var t=(0,e.gn)("frame"),n=(0,e.gn)("import-error-dialog");if(n)return n.classList.add("in"),void(0,e.gn)("backdrop").classList.add("in");(0,e.HS)("div","modal-backdrop in",t).setAttribute("id","backdrop");var r=function(){(0,e.gn)("backdrop").classList.remove("in"),n.classList.remove("in")};(n=(0,e.HS)("div","import-error in",t)).setAttribute("id","import-error-dialog");var i=(0,e.HS)("div","close",n);i.ontouch=r,i.onclick=r,(0,e.HS)("div","icon",n),(0,e.HS)("div","",n).innerHTML=fy.localize("IMPORT_ERROR");var a=(0,e.HS)("div","check",n);a.ontouch=r,a.onclick=r}}]),n}();window.Lobby=Jv;var qv,Qv,Zv=function(){function e(){t(this,e)}return r(e,null,[{key:"DATABASE_STMT",get:function(){return"database_stmt"}},{key:"DATABASE_QUERY",get:function(){return"database_query"}},{key:"IO_GET_SETTINGS",get:function(){return"io_getsettings"}},{key:"IO_GET_MEDIA_LEN",get:function(){return"io_getmedialen"}},{key:"IO_GET_MEDIA_DATA",get:function(){return"io_getmediadata"}},{key:"IO_GET_MEDIA_DONE",get:function(){return"io_getmediadone"}},{key:"IO_SET_MEDIA",get:function(){return"io_setmedia"}},{key:"IO_SET_MEDIA_NAME",get:function(){return"io_setmedianame"}},{key:"IO_GET_MD5",get:function(){return"io_getmd5"}},{key:"IO_REMOVE",get:function(){return"io_remove"}},{key:"IO_GET_FILE",get:function(){return"io_getfile"}},{key:"IO_SET_FILE",get:function(){return"io_setfile"}},{key:"IO_REGISTER_SOUND",get:function(){return"io_registersound"}},{key:"IO_PLAY_SOUND",get:function(){return"io_playsound"}},{key:"IO_STOP_SOUND",get:function(){return"io_stopsound"}},{key:"RECORD_START",get:function(){return"recordsound_recordstart"}},{key:"RECORD_STOP",get:function(){return"recordsound_recordstop"}},{key:"VOLUME",get:function(){return"recordsound_volume"}},{key:"START_PLAY",get:function(){return"recordsound_startplay"}},{key:"STOP_PLAY",get:function(){return"recordsound_stopplay"}},{key:"RECORD_CLOSE",get:function(){return"recordsound_recordclose"}},{key:"CAMERA_CHECK",get:function(){return"scratchjr_cameracheck"}},{key:"START_FEED",get:function(){return"scratchjr_startfeed"}},{key:"STOP_FEED",get:function(){return"scratchjr_stopfeed"}},{key:"CHOOSE_CAMERA",get:function(){return"scratchjr_choosecamera"}},{key:"HIDE_SPLASH",get:function(){return"hideSplash"}},{key:"CREATE_ZIP_FOR_PROJECT",get:function(){return"createZipForProject"}},{key:"REGISTER_LIBRARY_ASSETS",get:function(){return"registerLibraryAssets"}},{key:"DUPLICATE_ASSET",get:function(){return"duplicateAsset"}},{key:"DEVICE_NAME",get:function(){return"deviceName"}},{key:"OPEN_PICK_PROJECT_DIALOG",get:function(){return"openPickProjectDialog"}},{key:"IO_CLEAN_ASSETS",get:function(){return"io_cleanassets"}},{key:"ASK_FOR_PERMISSION",get:function(){return"askForPermission"}},{key:"CAPTURE_IMAGE",get:function(){return"scratchjr_captureimage"}},{key:"SEND_SJR_USING_SHARE_DIALOG",get:function(){return"sendSjrUsingShareDialog"}},{key:"ANALYTICS_EVENT",get:function(){return"analyticsEvent"}},{key:"SET_ANALYTICS_PLACE_PREF",get:function(){return"setAnalyticsPlacePref"}},{key:"SET_ANALYTICS_PREF",get:function(){return"setAnalyticsPref"}},{key:"GET_VERSION",get:function(){return"getVersion"}}]),e}(),$v=null,ey=0,ty={},ny=function(){function n(){t(this,n)}return r(n,[{key:"ignore",value:function(){}}],[{key:"path",get:function(){return qv},set:function(e){qv=e}},{key:"camera",get:function(){return Qv},set:function(e){Qv=e}},{key:"database",get:function(){return"projects"}},{key:"getId",value:function(){var e;do{e="jr".concat((new Date).getTime()).concat(Math.floor(1e4*Math.random()))}while(void 0!==ty[e]);return e}},{key:"call",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return new Promise((function(r){var a=n.getId();ty[a]=r;var o={id:a,method:t,params:i};$v.postMessage(e.Dt?JSON.stringify(o):o)}))}},{key:"exec",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a={method:t,params:r};$v.postMessage(e.Dt?JSON.stringify(a):a)}},{key:"resolve",value:function(e,t){if(e){var n=ty[e];n&&("function"==typeof n&&n(t),delete ty[e])}}},{key:"waitForInterface",value:function(t){null===$v?"undefined"!=typeof AndroidInterface||"object"===h(window.tablet)?($v=e.Tt?window.tablet:window.AndroidInterface,t&&t()):setTimeout((function(){n.waitForInterface(t)}),100):t()}},{key:"stmt",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.DATABASE_STMT,JSON.stringify(e));case 2:i=r.sent,"function"==typeof t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"query",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.DATABASE_QUERY,JSON.stringify(e));case 2:"object"===h(i=r.sent)&&(i=JSON.stringify(i)),"function"==typeof t&&t(i);case 5:case"end":return r.stop()}}),r)})))()}},{key:"setfield",value:function(e,t,r,i,a){var o={},s=["".concat(r," = ?"),"mtime = ?"];o.values=[i,(new Date).getTime().toString()],o.stmt="update ".concat(e," set ").concat(s.toString()," where id = ").concat(t),n.stmt(o,a)}},{key:"cleanassets",value:function(e,t){n.exec(Zv.IO_CLEAN_ASSETS,e),t()}},{key:"getsettings",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.IO_GET_SETTINGS);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"getmedia",value:function(e,t){var r=++ey;u(c().mark((function i(){var a;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.call(Zv.IO_GET_MEDIA_LEN,e,r);case 2:a=i.sent,n.processdata(r,0,1*a,"",t);case 4:case"end":return i.stop()}}),i)})))()}},{key:"processdata",value:function(e,t,r,i,a){if(0===r)return n.getmediadone(e),void a(i);var o=r<1e5?r:1e5;n.getmediadata(e,t,o,(function(s){n.processdata(e,t+o,r-o,i+s,a)}))}},{key:"getmediadata",value:function(e,t,r,i){u(c().mark((function a(){var o;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.call(Zv.IO_GET_MEDIA_DATA,e,t,r);case 2:o=a.sent,i&&i(o);case 4:case"end":return a.stop()}}),a)})))()}},{key:"getmediadone",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.IO_GET_MEDIA_DONE,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"setmedia",value:function(e,t,r){u(c().mark((function i(){var a;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.call(Zv.IO_SET_MEDIA,e,t);case 2:a=i.sent,r&&r(a);case 4:case"end":return i.stop()}}),i)})))()}},{key:"setmedianame",value:function(e,t,r,i){u(c().mark((function a(){var o;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.call(Zv.IO_SET_MEDIA_NAME,e,t,r);case 2:o=a.sent,i&&i(o);case 4:case"end":return a.stop()}}),a)})))()}},{key:"getmd5",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.IO_GET_MD5,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"remove",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.IO_REMOVE,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"getfile",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.IO_GET_FILE,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"setfile",value:function(e,t,r){u(c().mark((function i(){var a;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.call(Zv.IO_SET_FILE,e,btoa(t));case 2:a=i.sent,r&&r(a);case 4:case"end":return i.stop()}}),i)})))()}},{key:"registerSound",value:function(e,t,r){u(c().mark((function i(){var a;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.call(Zv.IO_REGISTER_SOUND,e,t);case 2:a=i.sent,r&&r(a);case 4:case"end":return i.stop()}}),i)})))()}},{key:"playSound",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.IO_PLAY_SOUND,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"stopSound",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.IO_STOP_SOUND,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"soundDone",value:function(e){m.soundDone(e)}},{key:"sndrecord",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.RECORD_START);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"recordstop",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.RECORD_STOP);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"volume",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.VOLUME);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"startplay",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.START_PLAY);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"stopplay",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.STOP_PLAY);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"recorddisappear",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.RECORD_CLOSE,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"askpermission",value:function(){e.Tt&&n.exec(Zv.ASK_FOR_PERMISSION)}},{key:"hascamera",value:function(){u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.call(Zv.CAMERA_CHECK);case 2:Qv=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},{key:"startfeed",value:function(e,t){u(c().mark((function r(){var i,a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=JSON.stringify(e),r.next=3,n.call(Zv.START_FEED,i);case 3:a=r.sent,t&&t(a);case 5:case"end":return r.stop()}}),r)})))()}},{key:"stopfeed",value:function(e){u(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.call(Zv.STOP_FEED);case 2:r=t.sent,e&&e(r);case 4:case"end":return t.stop()}}),t)})))()}},{key:"choosecamera",value:function(e,t){u(c().mark((function r(){var i;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.call(Zv.CHOOSE_CAMERA,e);case 2:i=r.sent,t&&t(i);case 4:case"end":return r.stop()}}),r)})))()}},{key:"captureimage",value:function(e){n.exec(Zv.CAPTURE_IMAGE,e)}},{key:"hidesplash",value:function(t){e.Tt&&u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.call(Zv.HIDE_SPLASH);case 2:t&&t();case 3:case"end":return e.stop()}}),e)})))(),t&&t()}},{key:"trace",value:function(e){console.log(e)}},{key:"parse",value:function(e){console.log(JSON.parse(e))}},{key:"tracemedia",value:function(e){console.log(atob(e))}},{key:"createZipForProject",value:function(e,t,r,i){u(c().mark((function a(){var o;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.call(Zv.CREATE_ZIP_FOR_PROJECT,e,t,r);case 2:o=a.sent,i&&i(o);case 4:case"end":return a.stop()}}),a)})))()}},{key:"sendSjrToShareDialog",value:function(e,t,r,i){n.exec(Zv.SEND_SJR_USING_SHARE_DIALOG,e,t,r,i)}},{key:"registerLibraryAssets",value:function(e,t,r){u(c().mark((function i(){return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.call(Zv.REGISTER_LIBRARY_ASSETS,e,t);case 2:r&&r();case 3:case"end":return i.stop()}}),i)})))()}},{key:"duplicateAsset",value:function(e,t,r){u(c().mark((function i(){return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.call(Zv.DUPLICATE_ASSET,e,t);case 2:r&&r();case 3:case"end":return i.stop()}}),i)})))()}},{key:"deviceName",value:function(e){u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,n.call(Zv.DEVICE_NAME);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}},{key:"openPickProjectDialog",value:function(){n.exec(Zv.OPEN_PICK_PROJECT_DIALOG)}},{key:"analyticsEvent",value:function(e,t,r){window.Settings.analyticsActions&&window.Settings.analyticsActions[t]&&n.exec(Zv.ANALYTICS_EVENT,e,t,r)}},{key:"setAnalyticsPlacePref",value:function(e){n.exec(Zv.SET_ANALYTICS_PLACE_PREF,e)}},{key:"setAnalyticsPref",value:function(e,t){n.exec(Zv.SET_ANALYTICS_PREF,e,t)}},{key:"getVersion",value:function(e){u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,n.call(Zv.GET_VERSION);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))()}},{key:"pageError",value:function(e){console.log("XCODE ERROR:",e),window.location.href.indexOf("home.html")>-1&&Jv.errorTimer&&Jv.errorLoading(e)}}]),n}();window.OS=ny;var ry,iy="projects",ay="",oy="",sy=function(){function n(){t(this,n)}return r(n,null,[{key:"zipFileName",get:function(){return ay}},{key:"shareName",get:function(){return oy}},{key:"requestSynchronous",value:function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),0===t.status||200===t.status?t.responseText:""}},{key:"requestFromServer",value:function(e,t){var n=new XMLHttpRequest;n.addEventListener("error",(function(e){e.preventDefault(),e.stopPropagation()}),!1),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.open("GET",e,!0),n.send(null)}},{key:"getThumbnail",value:function(t,n,r,i,a){t=t.replace(/>\s*</g,"><");var o=(new DOMParser).parseFromString(t,"text/xml"),s=document.importNode(o.documentElement,!0);"#comment"===s.childNodes[0].nodeName&&s.removeChild(s.childNodes[0]);var u=document.createElement("canvas");(0,e.ge)(u,n,r);for(var h=u.getContext("2d"),l=0;l<s.childElementCount;l++)Oe.drawLayer(s.childNodes[l],h);if(!i||!a)return u.toDataURL("image/png");var c=document.createElement("canvas");return(0,e.ge)(c,i,a),(0,e.hu)(u,c),c.toDataURL("image/png")}},{key:"getAsset",value:function(e,t){rt.keys[e]?t(rt.path+e):e.indexOf("/")>-1?n.requestFromServer(e,(function(r){var i=n.getImageDataURL(e,btoa(r));r.indexOf("xlink:href")<0?t(e):n.getImagesInSVG(r,(function(){t(i)}))})):ny.getmedia(e,(function(r){var i=atob(r),a=n.getImageDataURL(e,r);n.getImagesInSVG(i,(function(){t(a)}))}))}},{key:"getImagesInSVG",value:function(e,t){(e=e.replace(/>\s*</g,"><")).indexOf("xlink:href")<0?t():function(){var r=(new DOMParser).parseFromString(e,"text/xml"),i=document.importNode(r.documentElement,!0);"#comment"===i.childNodes[0].nodeName&&i.removeChild(i.childNodes[0]);for(var a=n.getImages(i,[]),o=a.length,s=function(){--o<1&&(i=null,r=null,t())},u=0;u<a.length;u++){var h=a[u].getAttribute("xlink:href"),l=document.createElement("img");l.src=h,l.complete?s():l.onload=function(){s()}}}()}},{key:"getImg",value:function(e,t){var n=document.createElement("img");return n.onload=function(){t(n)},n.src=e,n}},{key:"loadImg",value:function(e,t){e.complete?t(e):e.onload=function(){t(e)}}},{key:"getImages",value:function(e,t){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];"metadata"!==i.nodeName&&"defs"!==i.nodeName&&"sodipodi:namedview"!==i.nodeName&&"#comment"!==i.nodeName&&("image"===i.nodeName&&t.push(i),"g"===i.nodeName&&n.getImages(i,t))}return t}},{key:"getImageDataURL",value:function(e,t){var r="";switch(n.getExtension(e)){case"svg":r="data:image/svg+xml;base64,";break;case"png":r="data:image/png;base64,"}return r+t}},{key:"getObject",value:function(e,t){e.indexOf("/")>-1?n.requestFromServer(e,(function(e){t(e)})):n.getObjectinDB(iy,e,t)}},{key:"getObjectinDB",value:function(e,t,n){var r={};r.stmt="select * from ".concat(e," where id = ?"),r.values=[t],ny.query(r,n)}},{key:"setMedia",value:function(e,t,n){ny.setmedia(btoa(e),t,n)}},{key:"query",value:function(e,t,n){var r={};r.stmt="select ".concat(t.items," from ").concat(e," where ").concat(t.cond).concat(t.order?" order by ".concat(t.order):""),r.values=t.values,ny.query(r,n)}},{key:"deleteobject",value:function(e,t,n){var r={};r.stmt="delete from ".concat(e," where id = ?"),r.values=[t],ny.stmt(r,n)}},{key:"createProject",value:function(e,t){var n={},r=["name","version","deleted","mtime","isgift"],i="?,?,?,?,?",a=(new Date).getTime().toString(),o=e.isgift?e.isgift:"0",s=function(e,t){r.push(e),i+=",?",n.values.push(t)};n.values=[e.name,e.version,"NO",a,o],e.json&&s("json",JSON.stringify(e.json)),e.thumbnail&&s("thumbnail",JSON.stringify(e.thumbnail)),n.stmt="insert into ".concat(iy," (").concat(r.toString(),") values (").concat(i,")"),ny.stmt(n,t)}},{key:"saveProject",value:function(e,t){var n={};n.values=[e.version,e.deleted,e.name,JSON.stringify(e.json),JSON.stringify(e.thumbnail),(new Date).getTime().toString()],n.stmt="update ".concat(iy," set ").concat(["version = ?","deleted = ?","name = ?","json = ?","thumbnail = ?","mtime = ?"].toString()," where id = ").concat(e.id),ny.stmt(n,t)}},{key:"setProjectIsGift",value:function(e,t){var n={};n.values=[e.isgift],n.stmt="update ".concat(iy," set ").concat(["isgift = ?"].toString()," where id = ").concat(e.id),ny.stmt(n,t)}},{key:"getExtension",value:function(e){return e.substring(e.indexOf(".")+1,e.length)}},{key:"getFilename",value:function(e){return e.substring(0,e.indexOf("."))}},{key:"getFilenameWithExt",value:function(e){return e.substring(e.lastIndexOf("/")+1,e.length)}},{key:"parseProjectData",value:function(e){var t=new Object;for(var n in e)t[n.toLowerCase()]=e[n];return t}},{key:"compressProject",value:function(e,t){n.getObject(e,(function(e){var r={thumbnails:[],characters:[],backgrounds:[],sounds:[]},i=n.parseProjectData(JSON.parse(e)[0]);i.assetLibraryVersion=rt.version,"string"==typeof i.json&&(i.json=JSON.parse(i.json)),"string"==typeof i.thumbnail&&(i.thumbnail=JSON.parse(i.thumbnail));var a=function(e,t){t&&void 0!==t&&t.indexOf("samples/")<0&&r[e].indexOf(t)<0&&rt.sounds.indexOf(t)<0&&r[e].push(t)};a("thumbnails",i.thumbnail.md5);for(var o=i.json,s=0;s<o.pages.length;s++){var u=o[o.pages[s]];a("backgrounds",u.md5);for(var h=0;h<u.sprites.length;h++){var l=u[u.sprites[h]];if("sprite"===l.type){a("characters",l.md5);for(var c=0;c<l.sounds.length;c++)a("sounds",l.sounds[c])}}}ay=(ay=i.name.replace(/\s*/g,"")).replace(/[/?<>\\:*|":]/g,"_").replace(/[\x00-\x1f\x80-\x9f]/g,"_").replace(/^\.+$/,"_").replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,"_").replace(/[. ]+$/,"_"),oy=i.name,ny.createZipForProject(JSON.stringify(i),r,ay,(function(e){t(e)}))}))}},{key:"uniqueProjectName",value:function(e,t,r){var i=function(e){var t=e.split(" "),n=t.pop();return isNaN(n)?{name:e,number:null}:{name:t.join(" "),number:parseInt(n,10)}},a=i(e.name);n.query(ny.database,{cond:"deleted = ? AND gallery IS NULL",items:["name"],values:["NO"]},(function(o){var s=null;o=JSON.parse(o);for(var u=0;u<o.length;u++){var h=n.parseProjectData(o[u]).name,l=i(h);a.name===l.name&&(s=l.number?l.number+1:2)}null!==s&&(!a.number||s>a.number)?e.name="".concat(a.name," ").concat(s):r&&(e.name="".concat(a.name," 1")),t(e)}))}}]),n}(),uy=__webpack_require__(260),hy=__webpack_require__.n(uy);window.Intl||(window.Intl=o()),__webpack_require__(344),__webpack_require__(178),__webpack_require__(750),__webpack_require__(836),__webpack_require__(474),__webpack_require__(330),__webpack_require__(447),__webpack_require__(108),__webpack_require__(792),__webpack_require__(46),__webpack_require__(924),__webpack_require__(320);var ly,cy={},dy="key_",fy=function(){function e(){t(this,e)}return r(e,null,[{key:"currentLocale",get:function(){return ry}},{key:"determineLocaleFromBrowser",value:function(){var e=window.Settings.defaultLocale,t=window.Settings.supportedLocales,n=(window.navigator.userLanguage||window.navigator.language||"en-us").split("-");n[n.length-1]=n[n.length-1].toUpperCase();var r=n.join("-");if(r in Object.keys(t))return r;for(var i in t){var a=t[i];if(a.split("-")[0]===n[0])return a}return e}},{key:"includeLocales",value:function(e,t){var n=i.get("localization"),r=(ry=n||this.determineLocaleFromBrowser()).split("-")[0];"zh"!==r&&"pt"!==r||(r=ry.toLowerCase()),sy.requestFromServer("".concat(e,"localizations/").concat(r,".json"),(function(e){cy=JSON.parse(e),t()}))}},{key:"localize",value:function(e,t){return e in cy?new(hy())(cy[e],ry).format(t):"String missing: ".concat(e)}},{key:"localizeSampleName",value:function(t){var n=e.localizeOptional("SAMPLE_".concat(t));return n.startsWith("SAMPLE_")?t:n}},{key:"localizeOptional",value:function(e,t){return e in cy?new(hy())(cy[e],ry).format(t):e}},{key:"isSampleLocalizedKey",value:function(e){return e.slice(0,dy.length)===dy}}]),e}(),py=null,gy={},my={},vy=function(){function e(){t(this,e)}return r(e,null,[{key:"hasCookieSet",value:function(e){return null!==i.get(e)}},{key:"isAnswered",value:function(t){return!(!t||!e.hasCookieSet(t.key)||t.everyTime&&!my[t.key])}},{key:"initKeyFromCookie",value:function(e){var t=i.get(e);gy[e]=t||""}},{key:"valForKeyAndField",value:function(e,t){if(!py||!py.length)return null;var n=py.find((function(t){return t.key===e}));return n&&n[t]?n[t]:null}},{key:"initWithSettings",value:function(t){(py=t)&&py.forEach((function(t){e.initKeyFromCookie(t.key)}))}},{key:"instructionForKey",value:function(t){return e.valForKeyAndField(t,"instruction")}},{key:"optionTypeForKey",value:function(t){var n=e.valForKeyAndField(t,"type");return n||(n="text"),n}},{key:"optionsForKey",value:function(e){if(!py||!py.length)return null;var t=py.find((function(t){return t.key===e}));if(!t||!t.values)return null;var n="default";if(t.dependsOn){var r=gy[t.dependsOn];t.values[r]&&(n=r)}return t.values[n]&&t.values[n].length?t.values[n]:null}},{key:"allQuestionsAnswered",value:function(){return!py||!py.length||(py.forEach((function(t){if(!e.isAnswered(t))return!1})),!0)}},{key:"nextUnansweredQuestion",value:function(){if(!py||!py.length)return null;var t=py.find((function(t){return!e.isAnswered(t)}));return t?t.key:null}},{key:"getCurrentVals",value:function(){return gy}},{key:"setValue",value:function(e,t){gy[e]=t,i.set(e,gy[e]),my[e]=!0}}]),e}(),yy=!1,by=function(){(0,e.gn)("authors").className="credits hide",(0,e.gn)("authorsText").className="creditsText hide","PBS"===window.Settings.edition?((0,e.gn)("pbschars").className="characters show",(0,e.gn)("topbar").className="topbar show",(0,e.gn)("startButton").className="startButton show"):((0,e.gn)("purpleguy").className="purple hide",(0,e.gn)("blueguy").className="blue hide",(0,e.gn)("redguy").className="red hide",(0,e.gn)("gear").className="gear show")},_y=function e(){yy||(yy=!0,Ty()),window.removeEventListener("touchend",e,!1)},Ey=function(){var t;by(),(0,e.gn)("catface").className="catface show",(0,e.gn)("jrlogo").className="jrlogo show",(0,e.gn)("gear").className="gear show",(0,e.gn)("gettings").className="gettings show",(0,e.gn)("startcode").className="startcode show",(t=vy.getCurrentVals())&&Object.keys(t).forEach((function(e){ny.setAnalyticsPref(e,t[e])})),document.ontouchmove=function(e){e.preventDefault()},document.onmousemove=function(e){e.preventDefault()},e.Dt&&AndroidInterface.notifySplashDone()},Ty=function(){var e=vy.nextUnansweredQuestion();e?wy(e):Ey()},xy=function(t,n){vy.setValue(t,n),m.sndFX("tap.wav"),document.getElementById("optionsInstruction").innerHTML="",(0,e.gn)("optionsInstruction").className="optionsInstruction hide",document.getElementById("optionsList").innerHTML="",(0,e.gn)("optionsList").className="optionsList hide",Ty()},ky=function(t){var n="";switch(t.target.parentElement.id){case"usageSchool":n="school";break;case"usageHome":n="home";break;case"usageOther":n="other";break;default:n="noanswer"}ny.analyticsEvent("lobby","scratchjr_usage",n),vy.setValue("place_preference",n),m.sndFX("tap.wav"),(0,e.gn)("catface").className="catface show",(0,e.gn)("jrlogo").className="jrlogo show",(0,e.gn)("usageQuestion").className="usageQuestion hide",(0,e.gn)("usageSchool").className="usageSchool hide",(0,e.gn)("usageHome").className="usageHome hide",(0,e.gn)("usageOther").className="usageOther hide",(0,e.gn)("usageNoanswer").className="usageNoanswer hide",Ty()},Sy=function(e){var t=e.target.getAttribute("data-key"),n=e.target.getAttribute("data-value");if(!t&&!n){var r=e.target.parentNode;t=r.getAttribute("data-key"),n=r.getAttribute("data-value")}t||n?xy(t,n):Ey()},wy=function(t){by(),(0,e.gn)("catface").className="catface hide",(0,e.gn)("jrlogo").className="jrlogo hide",(0,e.gn)("gear").className="gear hide";var n=vy.optionTypeForKey(t);if("place_preference"===n)(0,e.gn)("authors").className="credits show",(0,e.gn)("authorsText").className="creditsText hide",(0,e.gn)("purpleguy").className="purple hide",(0,e.gn)("blueguy").className="blue hide",(0,e.gn)("redguy").className="red hide",(0,e.gn)("usageQuestion").textContent=fy.localize("USAGE_QUESTION"),(0,e.gn)("useSchoolText").textContent=fy.localize("USAGE_SCHOOL"),(0,e.gn)("useHomeText").textContent=fy.localize("USAGE_HOME"),(0,e.gn)("useOtherText").textContent=fy.localize("USAGE_OTHER"),(0,e.gn)("usageNoanswerText").textContent=fy.localize("USAGE_NONE"),(0,e.gn)("usageQuestion").className="usageQuestion show",(0,e.gn)("usageSchool").className="usageSchool show",(0,e.gn)("usageHome").className="usageHome show",(0,e.gn)("usageOther").className="usageOther show",(0,e.gn)("usageNoanswer").className="usageNoanswer show",(0,e.gn)("usageSchool").onclick=ky,(0,e.gn)("usageHome").onclick=ky,(0,e.gn)("usageOther").onclick=ky,(0,e.gn)("usageNoanswer").onclick=ky;else{var r=vy.optionsForKey(t);if(!r||!r.length)return void xy(t,"none");if(1===r.length)return void xy(t,r[0]);var i=fy.localizeOptional(vy.instructionForKey(t));document.getElementById("optionsInstruction").appendChild(document.createTextNode(i)),(0,e.gn)("optionsInstruction").className="optionsInstruction show";var a=document.getElementById("optionsList"),o=0;r.forEach((function(e){var r=document.createElement("div");if(r.setAttribute("data-key",t),r.setAttribute("data-value",e),r.setAttribute("id","option-".concat(t,"-").concat(o)),r.onclick=Sy,a.appendChild(r),"image"===n){var i=document.createElement("img");i.setAttribute("src","svglibrary/".concat(e)),i.setAttribute("style","max-width: 150px; max-height: 90px"),r.appendChild(i)}else{var s=fy.localizeOptional(e);r.appendChild(document.createTextNode(s))}o+=1})),(0,e.gn)("optionsList").style["column-count"]=o>65?8:o>39?5:3,(0,e.gn)("optionsList").className="optionsList show"}},My=function(){ny.setfile("homescroll.sjr",0,(function(){window.location.href="home.html"}))},Ay=function(){m.sndFX("tap.wav"),window.location.href="home.html?place=gear"},Ry=function(){m.sndFX("tap.wav"),window.location.href="gettingstarted.html?place=home"},Cy=function(){m.sndFX("tap.wav"),window.location.href="home.html?place=book"},Py=function(){m.sndFX("tap.wav"),Om.parentalGate(null,(function(){e.Tt?window.location.href="https://itunes.apple.com/us/developer/pbs-kids/id324323339?mt=8":window.location.href="http://to.pbs.org/ScJr_GPlay"}))},Iy=function(){(0,e.gn)("gettings").onclick=Ry,(0,e.gn)("startcode").onclick=My,m.init(),(0,e.ES)().back&&vy.allQuestionsAnswered()?Ey():function(){(0,e.gn)("authors").className="credits show",(0,e.gn)("authorsText").className="creditsText show","PBS"===window.Settings.edition?((0,e.gn)("pbschars").className="characters hide",(0,e.gn)("startcode").className="catlogo show",(0,e.gn)("topbar").className="topbar hide",(0,e.gn)("startButton").className="startButton hide"):((0,e.gn)("purpleguy").className="purple show",(0,e.gn)("blueguy").className="blue show",(0,e.gn)("redguy").className="red show"),ny.askpermission();var t=function(){window.addEventListener("touchend",_y,!1)};setTimeout((function(){ny.hidesplash(t)}),500),setTimeout(_y,2e3)}(),"PBS"===window.Settings.edition?((0,e.gn)("topbar-moreapps").textContent=fy.localize("PBS_MORE_APPS"),(0,e.gn)("startButton").textContent=fy.localize("PBS_START"),(0,e.gn)("gettings").textContent=fy.localize("PBS_HOW_TO"),(0,e.gn)("startButton").onclick=My,(0,e.gn)("pbschars").onclick=My,(0,e.gn)("topbar-moreapps").onclick=Py,(0,e.gn)("topbar-settings").onclick=Ay,(0,e.gn)("topbar-info").onclick=Cy):(0,e.gn)("gear").onclick=Ay,setTimeout((function(){(0,e.gn)("rays").className="rays spinme"}),250)},Ny=function(){window.location.href="index.html?back=yes"},Oy=function(){(0,e.gn)("logotab").onclick=Ny,(0,e.gn)("abouttab-text").textContent=fy.localize("ABOUT_SCRATCHJR"),(0,e.gn)("interfacetab-text").textContent=fy.localize("INTERFACE_GUIDE"),(0,e.gn)("painttab-text").textContent=fy.localize("PAINT_EDITOR_GUIDE"),(0,e.gn)("blockstab-text").textContent=fy.localize("BLOCKS_GUIDE"),(0,e.gn)("privacytab-text").textContent=fy.localize("PRIVACY_POLICY"),ny.getsettings((function(e){var t=e.split(",");ny.path="0"===t[1]?"".concat(t[0],"/"):void 0,Jv.appinit(window.Settings.scratchJrVersion)}))},Dy=function(){ny.getsettings((function(e){var t=e.split(",");ny.path="0"===t[1]?"".concat(t[0],"/"):void 0,t.length>2&&(qt.available="YES"===t[2]),t.length>3&&(le.available="YES"===t[3]),Sv.appinit(window.Settings.scratchJrVersion)})),ny.analyticsEvent("editor","project_editor_open")},Ly=function(){window.location.href="home.html?place=".concat(ly)},By=function(){(0,e.gn)("closeHelp").onclick=Ly,(0,e.gn)("closeHelp").ontouchstart=Ly;var t=(0,e.gn)("myVideo");t.poster="assets/lobby/poster.png";var n=document.createElement("img");n.src=t.poster,n.onload=function(){t.style.display="block"},e.Tt?t.src="assets/lobby/intro.mp4":setTimeout((function(){t.type="video/mp4",t.src=AndroidInterface.scratchjr_getgettingstartedvideopath()}),1e3);var r=(0,e.ES)();ly=r.place,document.ontouchmove=function(e){e.preventDefault()}};window.onload=function(){var t,n,r=function(){},i="./";switch(window.scratchJrPage){case"index":(0,e.kp)("css","css/font.css"),(0,e.kp)("css","css/base.css"),(0,e.kp)("css","css/start.css"),(0,e.kp)("css","css/thumbs.css"),(0,e.kp)("css","css/editor.css"),r=function(){return ny.waitForInterface((function(){var e=Object.keys(rt.keys).join(",");ny.registerLibraryAssets(rt.version,e,Iy)}))};break;case"home":(0,e.kp)("css","css/font.css"),(0,e.kp)("css","css/base.css"),(0,e.kp)("css","css/lobby.css"),(0,e.kp)("css","css/thumbs.css"),r=function(){return ny.waitForInterface(Oy)};break;case"editor":(0,e.kp)("css","css/font.css"),(0,e.kp)("css","css/base.css"),(0,e.kp)("css","css/editor.css"),(0,e.kp)("css","css/editorleftpanel.css"),(0,e.kp)("css","css/editorstage.css"),(0,e.kp)("css","css/editormodal.css"),(0,e.kp)("css","css/librarymodal.css"),(0,e.kp)("css","css/paintlook.css"),r=function(){return ny.waitForInterface(Dy)};break;case"gettingStarted":(0,e.kp)("css","css/font.css"),(0,e.kp)("css","css/base.css"),(0,e.kp)("css","css/gs.css"),r=function(){return ny.waitForInterface(By)};break;case"inappAbout":(0,e.kp)("style","style/about.css"),r=function(){return(0,e.gn)("aboutScratchjrTitle").textContent=fy.localize("ABOUT_SCRATCHJR"),(0,e.gn)("aboutWhatIs").textContent=fy.localize("ABOUT_WHAT_IS"),(0,e.gn)("aboutDescription").innerHTML="".concat(fy.localize("ABOUT_DESCRIPTION"),"<br/><br/>").concat(fy.localize("ABOUT_INSPIRED_BY")),(0,e.gn)("aboutWhyCreate").textContent=fy.localize("ABOUT_WHY_CREATE"),(0,e.gn)("aboutWhyCreateDescription").innerHTML=fy.localize("ABOUT_WHY_CREATE_DESCRIPTION"),(0,e.gn)("aboutWhoCreated").textContent=fy.localize("ABOUT_WHO_CREATED"),(0,e.gn)("aboutWhoCreatedDescription").innerHTML=fy.localize("ABOUT_WHO_CREATED_DESCRIPTION"),(0,e.gn)("aboutWhoSupported").textContent=fy.localize("ABOUT_WHO_SUPPORTED"),(0,e.gn)("aboutWhoSupportedDescription").innerHTML=fy.localize("ABOUT_WHO_SUPPORTED_DESCRIPTION"),(0,e.gn)("aboutFameHall")&&((0,e.gn)("aboutFameHall").style.display="block"),void("PBS"===window.Settings.edition&&((0,e.gn)("aboutWhatIsPbs").innerHTML=fy.localize("ABOUT_WHAT_IS_PBS"),(0,e.gn)("aboutWhatIsPbsDescription").innerHTML=fy.localize("ABOUT_WHAT_IS_PBS_DESCRIPTION"),(0,e.gn)("aboutPbsShows").innerHTML=fy.localize("ABOUT_PBS_SHOWS"),(0,e.gn)("aboutPbsShowsDescription").innerHTML=fy.localize("ABOUT_PBS_SHOWS_DESCRIPTION")))},i="../";break;case"inappInterfaceGuide":(0,e.kp)("style","style/style.css"),(0,e.kp)("style","style/interface.css"),r=function(){return function(){var t=(0,e.gn)("interface-key-header"),n=(0,e.gn)("interface-key-description");t.textContent=fy.localize("INTERFACE_GUIDE_SAVE",{N:1}),n.textContent=fy.localize("INTERFACE_GUIDE_SAVE_DESCRIPTION");for(var r=["SAVE","STAGE","PRESENTATION_MODE","GRID","CHANGE_BG","ADD_TEXT","RESET_CHAR","GREEN_FLAG","PAGES","PROJECT_INFO","UNDO_REDO","PROGRAMMING_SCRIPT","PROGRAMMING_AREA","BLOCKS_PALETTE","BLOCKS_CATEGORIES","CHARACTERS"],i=[],a=0;a<r.length;a++){var o=r[a];i.push([fy.localize("INTERFACE_GUIDE_".concat(o),{N:a+1}),fy.localize("INTERFACE_GUIDE_".concat(o,"_DESCRIPTION"))])}var s=document.getElementById("interface-button-save");document.addEventListener("click",(function(e){var r=e.target;if("interface-button-text"===r.className){var a=parseInt(r.innerText-1,10);t.textContent=i[a][0],n.textContent=i[a][1],s.className="interface-button",(s=r.parentNode).className="".concat(s.className," interface-button-selected"),window.parent.ScratchAudio.sndFXWithVolume("keydown.wav",.3)}}),!1)}()},i="../";break;case"inappPaintEditorGuide":(0,e.kp)("style","style/style.css"),(0,e.kp)("style","style/paint.css"),r=function(){return function(){var t=(0,e.gn)("paint-key-header"),n=(0,e.gn)("paint-key-description");t.textContent=fy.localize("PAINT_GUIDE_UNDO",{N:1}),n.textContent=fy.localize("PAINT_GUIDE_UNDO_DESCRIPTION");for(var r=["UNDO","REDO","SHAPE","CHARACTER_NAME","CUT","DUPLICATE","ROTATE","DRAG","SAVE","FILL","CAMERA","COLOR","LINE_WIDTH"],i=[],a=0;a<r.length;a++){var o=r[a];i.push([fy.localize("PAINT_GUIDE_".concat(o),{N:a+1}),fy.localize("PAINT_GUIDE_".concat(o,"_DESCRIPTION"))])}var s=document.getElementById("paint-button-undo");document.addEventListener("click",(function(e){var r=e.target;if("paint-button-text"===r.className){var a=parseInt(r.innerText-1,10);t.textContent=i[a][0],n.textContent=i[a][1],s.className="paint-button",(s=r.parentNode).className="".concat(s.className," paint-button-selected"),window.parent.ScratchAudio.sndFXWithVolume("keydown.wav",.3)}}),!1)}()},i="../";break;case"inappBlocksGuide":(0,e.kp)("style","style/style.css"),(0,e.kp)("style","style/blocks.css"),r=function(){return function(){(0,e.gn)("yellow-block-category-header").textContent=fy.localize("BLOCKS_TRIGGERING_BLOCKS"),(0,e.gn)("blue-block-category-header").textContent=fy.localize("BLOCKS_MOTION_BLOCKS"),(0,e.gn)("purple-block-category-header").textContent=fy.localize("BLOCKS_LOOKS_BLOCKS"),(0,e.gn)("green-block-category-header").textContent=fy.localize("BLOCKS_SOUND_BLOCKS"),(0,e.gn)("orange-block-category-header").textContent=fy.localize("BLOCKS_CONTROL_BLOCKS"),(0,e.gn)("red-block-category-header").textContent=fy.localize("BLOCKS_END_BLOCKS");for(var t=["BLOCKS_GREEN_FLAG","BLOCKS_GREEN_FLAG_DESCRIPTION","BLOCKS_ON_TAP","BLOCKS_ON_TAP_DESCRIPTION","BLOCKS_ON_TOUCH","BLOCKS_ON_TOUCH_DESCRIPTION","BLOCKS_ON_MESSAGE","BLOCKS_ON_MESSAGE_DESCRIPTION","BLOCKS_SEND_MESSAGE","BLOCKS_SEND_MESSAGE_DESCRIPTION","BLOCKS_MOVE_RIGHT","BLOCKS_MOVE_RIGHT_DESCRIPTION","BLOCKS_MOVE_LEFT","BLOCKS_MOVE_LEFT_DESCRIPTION","BLOCKS_MOVE_UP","BLOCKS_MOVE_UP_DESCRIPTION","BLOCKS_MOVE_DOWN","BLOCKS_MOVE_DOWN_DESCRIPTION","BLOCKS_TURN_RIGHT","BLOCKS_TURN_RIGHT_DESCRIPTION","BLOCKS_TURN_LEFT","BLOCKS_TURN_LEFT_DESCRIPTION","BLOCKS_HOP","BLOCKS_HOP_DESCRIPTION","BLOCKS_GO_HOME","BLOCKS_GO_HOME_DESCRIPTION","BLOCKS_SAY","BLOCKS_SAY_DESCRIPTION","BLOCKS_GROW","BLOCKS_GROW_DESCRIPTION","BLOCKS_SHRINK","BLOCKS_SHRINK_DESCRIPTION","BLOCKS_RESET_SIZE","BLOCKS_RESET_SIZE_DESCRIPTION","BLOCKS_HIDE","BLOCKS_HIDE_DESCRIPTION","BLOCKS_SHOW","BLOCKS_SHOW_DESCRIPTION","BLOCKS_POP","BLOCKS_POP_DESCRIPTION","BLOCKS_PLAY_RECORDED","BLOCKS_PLAY_RECORDED_DESCRIPTION","BLOCKS_WAIT","BLOCKS_WAIT_DESCRIPTION","BLOCKS_STOP","BLOCKS_STOP_DESCRIPTION","BLOCKS_SET_SPEED","BLOCKS_SET_SPEED_DESCRIPTION","BLOCKS_REPEAT","BLOCKS_REPEAT_DESCRIPTION","BLOCKS_END","BLOCKS_END_DESCRIPTION","BLOCKS_REPEAT_FOREVER","BLOCKS_REPEAT_FOREVER_DESCRIPTION","BLOCKS_GO_TO_PAGE","BLOCKS_GO_TO_PAGE_DESCRIPTION"],n=0;n<t.length;n++)(0,e.gn)(t[n]).textContent=fy.localize(t[n])}()},i="../";break;case"inappPrivacyPolicy":(0,e.kp)("style","style/style.css"),(0,e.kp)("style","style/privacy.css"),r=function(){document.querySelectorAll("[data-i18n]").forEach((function(e){var t=e.getAttribute("data-i18n");e.innerHTML=fy.localize(t)}))},i="../"}t=i,n=function(){fy.includeLocales(i,(function(){rt.loadMediaLib(i,(function(){r()}))})),vy.initWithSettings(window.Settings.initialOptions)},sy.requestFromServer("".concat(t,"settings.json"),(function(e){window.Settings=JSON.parse(e),n()}))}})()})();
//# sourceMappingURL=app.bundle.js.map